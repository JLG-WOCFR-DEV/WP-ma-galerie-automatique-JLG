{
  "version": 3,
  "sources": ["../src/shared/sprintf.js", "../src/shared/icons.js", "../src/shared/focus.js", "../src/shared/swiper.js", "../src/shared/index.js", "../src/admin.js"],
  "sourcesContent": ["const TOKEN_REGEX = /%(\\d+\\$)?[sd]/g;\n\nconst createFallbackSprintf = () => (format, ...args) => {\n    let autoIndex = 0;\n\n    return String(format).replace(TOKEN_REGEX, (match, position) => {\n        let argIndex;\n        const type = match.charAt(match.length - 1);\n\n        if (position) {\n            const numericIndex = parseInt(position.slice(0, -1), 10);\n\n            if (Number.isNaN(numericIndex) || numericIndex <= 0) {\n                return '';\n            }\n\n            argIndex = numericIndex - 1;\n        } else {\n            argIndex = autoIndex;\n            autoIndex += 1;\n        }\n\n        const value = argIndex >= 0 && argIndex < args.length ? args[argIndex] : undefined;\n\n        if (type === 'd') {\n            const coerced = parseInt(value, 10);\n            return Number.isNaN(coerced) ? '' : String(coerced);\n        }\n\n        if (typeof value === 'undefined') {\n            return '';\n        }\n\n        return String(value);\n    });\n};\n\nexport const createSprintf = (i18n) => {\n    if (i18n && typeof i18n.sprintf === 'function') {\n        return i18n.sprintf;\n    }\n\n    return createFallbackSprintf();\n};\n\nexport const createTranslate = (i18n) => {\n    if (i18n && typeof i18n.__ === 'function') {\n        return i18n.__;\n    }\n\n    return (text) => text;\n};\n\nexport const resolveI18n = (globalObject) => {\n    if (!globalObject || typeof globalObject !== 'object') {\n        return null;\n    }\n\n    if (globalObject.wp && globalObject.wp.i18n) {\n        return globalObject.wp.i18n;\n    }\n\n    return null;\n};\n\nexport const getSharedI18n = () => resolveI18n(typeof window !== 'undefined' ? window : globalThis);\n\nexport const getSharedSprintf = () => createSprintf(getSharedI18n());\n\nexport const getSharedTranslate = () => createTranslate(getSharedI18n());\n\nexport default {\n    createSprintf,\n    createTranslate,\n    getSharedI18n,\n    getSharedSprintf,\n    getSharedTranslate,\n};\n", "const SHARE_ICON_LIBRARY = {\n    facebook: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z' },\n        ],\n    },\n    twitter: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z' },\n        ],\n    },\n    linkedin: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z' },\n        ],\n    },\n    pinterest: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z' },\n        ],\n    },\n    whatsapp: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z' },\n        ],\n    },\n    telegram: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z' },\n        ],\n    },\n    email: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z' },\n        ],\n    },\n    link: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z' },\n        ],\n    },\n    generic: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z' },\n            { d: 'M13 17h-2v-2h2zm0-4h-2V7h2z' },\n        ],\n    },\n    copy: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z' },\n        ],\n    },\n    download: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z' },\n        ],\n    },\n    native: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z' },\n        ],\n    },\n};\n\nexport const sanitizeIconKey = (value) => {\n    if (typeof value !== 'string') {\n        return '';\n    }\n\n    return value.trim().toLowerCase().replace(/[^a-z0-9_-]/g, '');\n};\n\nconst getDefinition = (iconKey) => {\n    const sanitizedKey = sanitizeIconKey(iconKey);\n\n    if (sanitizedKey && SHARE_ICON_LIBRARY[sanitizedKey]) {\n        return SHARE_ICON_LIBRARY[sanitizedKey];\n    }\n\n    return SHARE_ICON_LIBRARY.generic;\n};\n\nexport const createSvgElement = (doc, tag, attributes = {}) => {\n    if (!doc || typeof doc.createElementNS !== 'function') {\n        return null;\n    }\n\n    const element = doc.createElementNS('http://www.w3.org/2000/svg', tag);\n\n    Object.keys(attributes).forEach((attribute) => {\n        element.setAttribute(attribute, attributes[attribute]);\n    });\n\n    return element;\n};\n\nexport const createIconSvg = (doc, iconKey) => {\n    const definition = getDefinition(iconKey);\n    const svg = createSvgElement(doc, 'svg', {\n        viewBox: definition.viewBox,\n        fill: 'currentColor',\n        'aria-hidden': 'true',\n        focusable: 'false',\n    });\n\n    if (!svg) {\n        return null;\n    }\n\n    if (Array.isArray(definition.paths)) {\n        definition.paths.forEach((pathDefinition) => {\n            const path = createSvgElement(doc, 'path', pathDefinition);\n\n            if (path) {\n                svg.appendChild(path);\n            }\n        });\n    }\n\n    return svg;\n};\n\nexport const createIconPreview = (doc, iconKey, { wrapperTag = 'span', wrapperClass = '' } = {}) => {\n    if (!doc || typeof doc.createElement !== 'function') {\n        return null;\n    }\n\n    const wrapper = doc.createElement(wrapperTag);\n\n    if (wrapperClass) {\n        wrapper.className = wrapperClass;\n    }\n\n    const svg = createIconSvg(doc, iconKey);\n\n    if (!svg) {\n        return null;\n    }\n\n    wrapper.appendChild(svg);\n\n    return wrapper;\n};\n\nexport const getIconLibrary = () => ({ ...SHARE_ICON_LIBRARY });\n\nexport default {\n    createIconPreview,\n    createIconSvg,\n    getIconLibrary,\n    sanitizeIconKey,\n};\n", "let focusSupportsOptionsCache = null;\n\nexport const detectFocusOptionsSupport = () => {\n    if (focusSupportsOptionsCache !== null) {\n        return focusSupportsOptionsCache;\n    }\n\n    focusSupportsOptionsCache = false;\n\n    const doc = typeof window !== 'undefined' ? window.document : null;\n\n    if (\n        !doc ||\n        typeof doc.createElement !== 'function' ||\n        typeof window.HTMLElement === 'undefined' ||\n        !window.HTMLElement.prototype ||\n        typeof window.HTMLElement.prototype.focus !== 'function'\n    ) {\n        return focusSupportsOptionsCache;\n    }\n\n    const testElement = doc.createElement('button');\n    const root = doc.body || doc.documentElement;\n\n    try {\n        testElement.type = 'button';\n\n        if (root && typeof root.appendChild === 'function') {\n            root.appendChild(testElement);\n        }\n\n        window.HTMLElement.prototype.focus.call(testElement, {\n            get preventScroll() {\n                focusSupportsOptionsCache = true;\n                return true;\n            },\n        });\n    } catch (error) {\n        focusSupportsOptionsCache = false;\n    } finally {\n        if (testElement.parentNode && typeof testElement.parentNode.removeChild === 'function') {\n            testElement.parentNode.removeChild(testElement);\n        }\n    }\n\n    return focusSupportsOptionsCache;\n};\n\nexport const safeFocus = (element, options = { preventScroll: true }) => {\n    if (!element || typeof element.focus !== 'function') {\n        return;\n    }\n\n    const canUseOptions = options && detectFocusOptionsSupport();\n\n    if (canUseOptions) {\n        try {\n            element.focus(options);\n            return;\n        } catch (error) {\n            // Ignore and fall back to focusing without options.\n        }\n    }\n\n    element.focus();\n};\n\nexport const exposeOnWindow = () => {\n    if (typeof window === 'undefined') {\n        return;\n    }\n\n    if (!window.mgaFocusUtils || typeof window.mgaFocusUtils !== 'object') {\n        window.mgaFocusUtils = {};\n    }\n\n    window.mgaFocusUtils.detectFocusOptionsSupport = detectFocusOptionsSupport;\n    window.mgaFocusUtils.safeFocus = safeFocus;\n};\n\nexport default {\n    detectFocusOptionsSupport,\n    safeFocus,\n    exposeOnWindow,\n};\n", "const DEFAULT_TIMEOUT = 12000;\n\nconst getTimestamp = (global) => {\n    if (global && global.performance && typeof global.performance.now === 'function') {\n        return global.performance.now();\n    }\n\n    return Date.now();\n};\n\nconst getDocument = (global) => (global && global.document) || null;\n\nconst getMetricsStore = (global) => {\n    if (!global) {\n        return null;\n    }\n\n    if (!global.mgaSwiperMetrics || typeof global.mgaSwiperMetrics !== 'object') {\n        global.mgaSwiperMetrics = { events: [] };\n    }\n\n    if (!Array.isArray(global.mgaSwiperMetrics.events)) {\n        global.mgaSwiperMetrics.events = [];\n    }\n\n    return global.mgaSwiperMetrics;\n};\n\nconst recordMetric = (global, namespace, event, detail) => {\n    const store = getMetricsStore(global);\n\n    if (!store) {\n        return;\n    }\n\n    store.events.push({\n        namespace: namespace || 'default',\n        event,\n        detail: detail || {},\n        timestamp: getTimestamp(global),\n    });\n\n    if (typeof global.dispatchEvent === 'function') {\n        try {\n            const customEvent = new global.CustomEvent('mga:swiper-metric', {\n                detail: {\n                    namespace: namespace || 'default',\n                    event,\n                    payload: detail || {},\n                },\n            });\n            global.dispatchEvent(customEvent);\n        } catch (error) {\n            // Ignore CustomEvent support issues.\n        }\n    }\n};\n\nconst normalizeAttempts = (config) => {\n    if (!config || typeof config !== 'object') {\n        return [];\n    }\n\n    const rawAttempts = Array.isArray(config.attempts) ? config.attempts : [];\n\n    return rawAttempts\n        .map((attempt) => {\n            if (!attempt || typeof attempt !== 'object') {\n                return null;\n            }\n\n            if (attempt.enabled === false) {\n                return null;\n            }\n\n            const key = typeof attempt.key === 'string' && attempt.key ? attempt.key : 'fallback';\n            const js = attempt.js && typeof attempt.js === 'object' ? attempt.js : {};\n            const css = attempt.css && typeof attempt.css === 'object' ? attempt.css : null;\n            const inject = attempt.inject !== false;\n\n            const jsSrc = typeof js.src === 'string' && js.src ? js.src : '';\n\n            if (!jsSrc) {\n                return null;\n            }\n\n            return {\n                key,\n                label: typeof attempt.label === 'string' && attempt.label ? attempt.label : key,\n                js: {\n                    src: jsSrc,\n                    integrity: typeof js.integrity === 'string' && js.integrity ? js.integrity : null,\n                    crossOrigin: typeof js.crossOrigin === 'string' && js.crossOrigin ? js.crossOrigin : null,\n                    referrerPolicy: typeof js.referrerPolicy === 'string' && js.referrerPolicy ? js.referrerPolicy : null,\n                },\n                css: css && typeof css.href === 'string' && css.href\n                    ? {\n                        href: css.href,\n                        integrity: typeof css.integrity === 'string' && css.integrity ? css.integrity : null,\n                        crossOrigin: typeof css.crossOrigin === 'string' && css.crossOrigin ? css.crossOrigin : null,\n                        referrerPolicy: typeof css.referrerPolicy === 'string' && css.referrerPolicy ? css.referrerPolicy : null,\n                    }\n                    : null,\n                timeout: typeof attempt.timeout === 'number' && attempt.timeout > 0\n                    ? attempt.timeout\n                    : DEFAULT_TIMEOUT,\n                inject,\n            };\n        })\n        .filter(Boolean);\n};\n\nconst loadStylesheet = (global, attempt, namespace) => {\n    if (!attempt || !attempt.css) {\n        return Promise.resolve();\n    }\n\n    const doc = getDocument(global);\n\n    if (!doc) {\n        return Promise.resolve();\n    }\n\n    const existing = Array.from(doc.querySelectorAll('link[rel=\"stylesheet\"]'))\n        .find((link) => link.href === attempt.css.href);\n\n    if (existing) {\n        return Promise.resolve(existing);\n    }\n\n    return new Promise((resolve, reject) => {\n        const link = doc.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = attempt.css.href;\n        link.dataset.mgaSwiperSource = attempt.key;\n\n        if (attempt.css.integrity) {\n            link.integrity = attempt.css.integrity;\n        }\n\n        if (attempt.css.crossOrigin) {\n            link.crossOrigin = attempt.css.crossOrigin;\n        } else if (attempt.css.integrity) {\n            link.crossOrigin = 'anonymous';\n        }\n\n        if (attempt.css.referrerPolicy) {\n            link.referrerPolicy = attempt.css.referrerPolicy;\n        }\n\n        link.onload = () => {\n            recordMetric(global, namespace, 'css_load_success', { source: attempt.key });\n            resolve(link);\n        };\n\n        link.onerror = () => {\n            recordMetric(global, namespace, 'css_load_error', { source: attempt.key });\n            reject(new Error('Stylesheet load error'));\n        };\n\n        doc.head.appendChild(link);\n        recordMetric(global, namespace, 'css_load_start', { source: attempt.key, href: attempt.css.href });\n    });\n};\n\nconst loadScript = (global, attempt, namespace) => {\n    if (!attempt || !attempt.js || !attempt.js.src) {\n        return Promise.reject(new Error('Invalid attempt configuration'));\n    }\n\n    const doc = getDocument(global);\n\n    if (!doc) {\n        return Promise.reject(new Error('Document unavailable'));\n    }\n\n    const existing = Array.from(doc.querySelectorAll('script'))\n        .find((script) => script.src === attempt.js.src && !script.hasAttribute('data-mga-swiper-failed'));\n\n    if (existing) {\n        return new Promise((resolve, reject) => {\n            if (typeof global.Swiper === 'function') {\n                existing.setAttribute('data-mga-swiper-loaded', 'true');\n                recordMetric(global, namespace, 'js_already_available', { source: attempt.key });\n                resolve(existing);\n                return;\n            }\n\n            if (typeof existing.hasAttribute === 'function' && existing.hasAttribute('data-mga-swiper-loaded')) {\n                resolve(existing);\n                return;\n            }\n\n            existing.addEventListener('load', () => {\n                existing.setAttribute('data-mga-swiper-loaded', 'true');\n                resolve(existing);\n            });\n            existing.addEventListener('error', () => {\n                existing.setAttribute('data-mga-swiper-failed', 'true');\n                reject(new Error('Existing script failed'));\n            });\n\n            recordMetric(global, namespace, 'js_existing_observed', { source: attempt.key });\n        });\n    }\n\n    return new Promise((resolve, reject) => {\n        const script = doc.createElement('script');\n        script.src = attempt.js.src;\n        script.async = false;\n        script.dataset.mgaSwiperSource = attempt.key;\n\n        if (attempt.js.integrity) {\n            script.integrity = attempt.js.integrity;\n        }\n\n        if (attempt.js.crossOrigin) {\n            script.crossOrigin = attempt.js.crossOrigin;\n        } else if (attempt.js.integrity) {\n            script.crossOrigin = 'anonymous';\n        }\n\n        if (attempt.js.referrerPolicy) {\n            script.referrerPolicy = attempt.js.referrerPolicy;\n        }\n\n        let timeoutId = null;\n\n        const cleanup = () => {\n            if (timeoutId) {\n                global.clearTimeout(timeoutId);\n                timeoutId = null;\n            }\n        };\n\n        script.onload = () => {\n            cleanup();\n            script.setAttribute('data-mga-swiper-loaded', 'true');\n            recordMetric(global, namespace, 'js_load_success', { source: attempt.key });\n            resolve(script);\n        };\n\n        script.onerror = () => {\n            cleanup();\n            script.setAttribute('data-mga-swiper-failed', 'true');\n            recordMetric(global, namespace, 'js_load_error', { source: attempt.key });\n            reject(new Error('Script load error'));\n        };\n\n        timeoutId = global.setTimeout(() => {\n            cleanup();\n            script.setAttribute('data-mga-swiper-failed', 'true');\n            recordMetric(global, namespace, 'js_load_timeout', { source: attempt.key, timeout: attempt.timeout });\n            reject(new Error('Script load timeout'));\n        }, attempt.timeout || DEFAULT_TIMEOUT);\n\n        doc.head.appendChild(script);\n        recordMetric(global, namespace, 'js_load_start', { source: attempt.key, src: attempt.js.src });\n    });\n};\n\nconst getLoaderState = (global) => {\n    if (!global) {\n        return { promise: null };\n    }\n\n    if (!global.mgaSwiperLoaderState || typeof global.mgaSwiperLoaderState !== 'object') {\n        global.mgaSwiperLoaderState = { promise: null };\n    }\n\n    return global.mgaSwiperLoaderState;\n};\n\nconst attemptLoad = (global, attempt, namespace) => {\n    if (!attempt || !attempt.inject) {\n        return Promise.resolve();\n    }\n\n    if (typeof global.Swiper === 'function') {\n        return Promise.resolve(global.Swiper);\n    }\n\n    recordMetric(global, namespace, 'attempt_start', { source: attempt.key });\n\n    return loadStylesheet(global, attempt, namespace)\n        .catch(() => null)\n        .then(() => loadScript(global, attempt, namespace))\n        .then(() => {\n            if (typeof global.Swiper === 'function') {\n                recordMetric(global, namespace, 'attempt_success', { source: attempt.key });\n                return global.Swiper;\n            }\n\n            recordMetric(global, namespace, 'attempt_no_global', { source: attempt.key });\n            throw new Error('Swiper global missing after load');\n        })\n        .catch((error) => {\n            recordMetric(global, namespace, 'attempt_error', {\n                source: attempt.key,\n                message: error && error.message ? error.message : String(error),\n            });\n            throw error;\n        });\n};\n\nconst runAttemptsSequentially = (global, attempts, namespace) => {\n    return attempts.reduce((promise, attempt) => {\n        return promise.catch(() => attemptLoad(global, attempt, namespace));\n    }, Promise.reject(new Error('initial')));\n};\n\nconst getConfig = (global, explicitConfig) => {\n    if (explicitConfig && typeof explicitConfig === 'object') {\n        return explicitConfig;\n    }\n\n    if (global && global.mgaSwiperLoaderConfig && typeof global.mgaSwiperLoaderConfig === 'object') {\n        return global.mgaSwiperLoaderConfig;\n    }\n\n    if (global && global.mgaAdminConfig && typeof global.mgaAdminConfig === 'object' && global.mgaAdminConfig.swiper) {\n        return global.mgaAdminConfig.swiper;\n    }\n\n    return null;\n};\n\nexport const ensureSwiper = (global = window, options = {}) => {\n    const namespace = typeof options.namespace === 'string' && options.namespace\n        ? options.namespace\n        : 'default';\n\n    if (!global) {\n        return Promise.reject(new Error('Global scope unavailable'));\n    }\n\n    if (typeof global.Swiper === 'function') {\n        recordMetric(global, namespace, 'already_available', {});\n        return Promise.resolve(global.Swiper);\n    }\n\n    const config = getConfig(global, options.config);\n    const attempts = normalizeAttempts(config);\n\n    if (!attempts.length) {\n        recordMetric(global, namespace, 'no_attempts_configured', {});\n        return Promise.reject(new Error('No Swiper attempts configured'));\n    }\n\n    const state = getLoaderState(global);\n\n    if (state.promise) {\n        return state.promise;\n    }\n\n    recordMetric(global, namespace, 'bootstrap', {\n        version: config && config.version ? config.version : null,\n        attempts: attempts.map((attempt) => attempt.key),\n    });\n\n    state.promise = runAttemptsSequentially(global, attempts, namespace)\n        .catch(() => {\n            if (typeof global.Swiper === 'function') {\n                return global.Swiper;\n            }\n\n            recordMetric(global, namespace, 'fatal', {});\n            throw new Error('Swiper could not be loaded');\n        })\n        .then(() => {\n            if (typeof global.Swiper === 'function') {\n                recordMetric(global, namespace, 'ready', {});\n                return global.Swiper;\n            }\n\n            recordMetric(global, namespace, 'fatal', {});\n            throw new Error('Swiper global unavailable');\n        })\n        .finally(() => {\n            state.promise = null;\n        });\n\n    return state.promise;\n};\n\nexport const getSwiperLoaderConfig = (global = window) => getConfig(global, null);\n\n", "export * from './sprintf';\nexport * from './icons';\nexport * from './focus';\nexport * from './swiper';\n", "/* eslint-disable no-underscore-dangle */\nimport {\n    createIconPreview,\n    createSprintf,\n    createTranslate,\n    detectFocusOptionsSupport,\n    ensureSwiper,\n    exposeOnWindow,\n    resolveI18n,\n    safeFocus,\n    sanitizeIconKey,\n} from './shared';\n\n(function(global) {\n    exposeOnWindow();\n\n    const mgaAdminI18n = resolveI18n(global);\n    const mgaAdmin__ = createTranslate(mgaAdminI18n);\n    const mgaAdminSprintf = createSprintf(mgaAdminI18n);\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = {\n            detectFocusOptionsSupport,\n            safeFocus,\n        };\n    }\n\n    const doc = global.document;\n\n    const createShareIconPreview = (iconKey) => {\n        const preview = createIconPreview(doc, sanitizeIconKey(iconKey));\n\n        if (!preview) {\n            return null;\n        }\n\n        const svg = preview.querySelector('svg');\n\n        return svg || preview;\n    };\n\n    const SHARE_TEMPLATE_SAMPLE = {\n        url: 'https://exemple.com/galerie/photo-01',\n        text: 'Une photo remarquable',\n        title: 'Collection studio',\n    };\n\n    const SHARE_TEMPLATE_PLACEHOLDERS = {\n        '%url%': SHARE_TEMPLATE_SAMPLE.url,\n        '%text%': SHARE_TEMPLATE_SAMPLE.text,\n        '%title%': SHARE_TEMPLATE_SAMPLE.title,\n    };\n\n    const SHARE_TEMPLATE_SCHEMES = ['http', 'https', 'mailto', 'tel', 'sms'];\n\n    const isValidHexColor = (value) => {\n        if (typeof value !== 'string') {\n            return false;\n        }\n\n        return /^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(value.trim());\n    };\n\n    if (!doc || typeof doc.addEventListener !== 'function') {\n        return;\n    }\n\n    doc.addEventListener('DOMContentLoaded', function() {\n        const form = doc.querySelector('[data-mga-settings-form]') || doc.querySelector('.mga-admin-wrap form');\n        const adminRoot = doc.querySelector('.mga-admin-wrap');\n        let scheduleSummaryRefresh = () => {};\n\n        const THEME_STORAGE_KEY = 'mgaAdminThemePreference';\n        const THEME_OPTIONS = ['light', 'dark', 'system'];\n        const themeSelect = adminRoot ? adminRoot.querySelector('[data-mga-theme-select]') : null;\n        const systemThemeQuery = typeof global.matchMedia === 'function'\n            ? global.matchMedia('(prefers-color-scheme: dark)')\n            : null;\n\n        const readStoredTheme = () => {\n            try {\n                return global.localStorage ? global.localStorage.getItem(THEME_STORAGE_KEY) : null;\n            } catch (error) {\n                return null;\n            }\n        };\n\n        const writeStoredTheme = (value) => {\n            try {\n                if (!global.localStorage) {\n                    return;\n                }\n                if (!value) {\n                    global.localStorage.removeItem(THEME_STORAGE_KEY);\n                    return;\n                }\n                global.localStorage.setItem(THEME_STORAGE_KEY, value);\n            } catch (error) {\n                // Silently ignore storage errors (quota, private mode, etc.).\n            }\n        };\n\n        const normalizeThemePreference = (value) => {\n            if (typeof value !== 'string') {\n                return 'system';\n            }\n\n            const trimmed = value.trim().toLowerCase();\n            return THEME_OPTIONS.includes(trimmed) ? trimmed : 'system';\n        };\n\n        let currentThemePreference = normalizeThemePreference(readStoredTheme());\n\n        const resolveAppliedTheme = (preference) => {\n            if (preference === 'dark') {\n                return 'dark';\n            }\n            if (preference === 'light') {\n                return 'light';\n            }\n\n            const prefersDark = systemThemeQuery && typeof systemThemeQuery.matches === 'boolean'\n                ? systemThemeQuery.matches\n                : false;\n\n            return prefersDark ? 'dark' : 'light';\n        };\n\n        const applyThemePreference = (preference, options = {}) => {\n            if (!adminRoot) {\n                return;\n            }\n\n            const normalizedPreference = normalizeThemePreference(preference);\n            const resolvedTheme = resolveAppliedTheme(normalizedPreference);\n\n            adminRoot.setAttribute('data-mga-theme-preference', normalizedPreference);\n            adminRoot.setAttribute('data-mga-theme', resolvedTheme);\n            adminRoot.classList.toggle('is-theme-dark', resolvedTheme === 'dark');\n            adminRoot.classList.toggle('is-theme-light', resolvedTheme !== 'dark');\n\n            if (themeSelect && themeSelect.value !== normalizedPreference) {\n                themeSelect.value = normalizedPreference;\n            }\n\n            if (!options.skipStorage) {\n                writeStoredTheme(normalizedPreference === 'system' ? '' : normalizedPreference);\n            }\n\n            currentThemePreference = normalizedPreference;\n        };\n\n        if (adminRoot) {\n            applyThemePreference(currentThemePreference, { skipStorage: true });\n        }\n\n        if (themeSelect) {\n            themeSelect.value = currentThemePreference;\n            themeSelect.addEventListener('change', (event) => {\n                const nextPreference = normalizeThemePreference(event.target ? event.target.value : null);\n                applyThemePreference(nextPreference);\n            });\n        }\n\n        const handleSystemThemeChange = () => {\n            if (currentThemePreference === 'system') {\n                applyThemePreference('system', { skipStorage: true });\n            }\n        };\n\n        if (systemThemeQuery) {\n            if (typeof systemThemeQuery.addEventListener === 'function') {\n                systemThemeQuery.addEventListener('change', handleSystemThemeChange);\n            } else if (typeof systemThemeQuery.addListener === 'function') {\n                systemThemeQuery.addListener(handleSystemThemeChange);\n            }\n        }\n\n        const initializeWizard = (targetForm) => {\n            const wizard = doc.querySelector('[data-mga-wizard]');\n\n            if (!wizard) {\n                return null;\n            }\n\n            const stepPanels = Array.from(wizard.querySelectorAll('[data-mga-step-panel]'));\n            const indicators = Array.from(wizard.querySelectorAll('[data-mga-step-indicator]'));\n            const prevButton = wizard.querySelector('[data-mga-step-prev]');\n            const nextButton = wizard.querySelector('[data-mga-step-next]');\n            const submitButton = wizard.querySelector('[data-mga-step-submit]');\n            const statusElement = wizard.querySelector('[data-mga-save-status]');\n            const summaryIndex = stepPanels.length - 1;\n            let currentIndex = stepPanels.findIndex((panel) => panel.classList.contains('is-active'));\n\n            if (currentIndex < 0) {\n                currentIndex = 0;\n            }\n\n            const getMessages = () => (global.mgaAdminConfig && global.mgaAdminConfig.messages) || {};\n\n            const setStatusMessage = (state, message) => {\n                if (!statusElement) {\n                    return;\n                }\n\n                const statusMessage = message || getMessages()[state] || '';\n\n                statusElement.textContent = statusMessage;\n                statusElement.setAttribute('data-mga-status-state', state);\n            };\n\n            const updateControls = () => {\n                if (prevButton) {\n                    prevButton.disabled = currentIndex === 0;\n                }\n\n                if (nextButton) {\n                    nextButton.hidden = currentIndex >= summaryIndex;\n                }\n\n                if (submitButton) {\n                    submitButton.hidden = currentIndex < summaryIndex;\n                }\n            };\n\n            const focusPanel = (panel) => {\n                if (!panel) {\n                    return;\n                }\n\n                const focusTarget = panel.querySelector('[data-mga-step-title]') || panel;\n                const focusOptions = detectFocusOptionsSupport() ? { preventScroll: true } : undefined;\n\n                global.requestAnimationFrame(() => {\n                    safeFocus(focusTarget, focusOptions);\n                });\n            };\n\n            const deactivatePanel = (panel) => {\n                panel.classList.remove('is-active');\n                panel.setAttribute('hidden', 'hidden');\n                panel.setAttribute('aria-hidden', 'true');\n            };\n\n            const activatePanel = (panel) => {\n                panel.classList.add('is-active');\n                panel.removeAttribute('hidden');\n                panel.setAttribute('aria-hidden', 'false');\n            };\n\n            const updateIndicators = () => {\n                indicators.forEach((indicator, index) => {\n                    indicator.classList.toggle('is-active', index === currentIndex);\n                    indicator.classList.toggle('is-completed', index < currentIndex);\n                    indicator.setAttribute('aria-current', index === currentIndex ? 'step' : 'false');\n                });\n            };\n\n            const updateSummaryContainers = (() => {\n                let timeoutId = null;\n\n                const presetTarget = wizard.querySelector('[data-mga-summary-preset]');\n                const timingTarget = wizard.querySelector('[data-mga-summary-timing]');\n                const toolbarTarget = wizard.querySelector('[data-mga-summary-toolbar]');\n                const shareTarget = wizard.querySelector('[data-mga-summary-share]');\n                const validationContainer = wizard.querySelector('[data-mga-summary-validations]');\n                const diffContainer = wizard.querySelector('[data-mga-summary-diff]');\n                const diffList = diffContainer ? diffContainer.querySelector('[data-mga-summary-diff-list]') : null;\n                const diffBaseline = diffContainer ? diffContainer.querySelector('[data-mga-summary-diff-baseline]') : null;\n                const diffEmpty = diffContainer ? diffContainer.querySelector('[data-mga-summary-diff-empty]') : null;\n                const scoreboardContainer = wizard.querySelector('[data-mga-summary-scoreboard]');\n                const scorecardMap = (() => {\n                    const map = new Map();\n\n                    if (!scoreboardContainer) {\n                        return map;\n                    }\n\n                    scoreboardContainer.querySelectorAll('[data-mga-scorecard]').forEach((card) => {\n                        const key = card.getAttribute('data-mga-score-key');\n\n                        if (key) {\n                            map.set(key, card);\n                        }\n                    });\n\n                    return map;\n                })();\n\n                const applyScorecardState = (key, payload) => {\n                    const card = scorecardMap.get(key);\n\n                    if (!card || !payload) {\n                        return;\n                    }\n\n                    const level = payload.level || 'info';\n                    card.setAttribute('data-score-level', level);\n\n                    const statusEl = card.querySelector('[data-mga-scorecard-status]');\n\n                    if (statusEl) {\n                        statusEl.textContent = payload.message || '';\n                    }\n\n                    const pointsContainer = card.querySelector('[data-mga-scorecard-points]');\n\n                    if (pointsContainer && Array.isArray(payload.points)) {\n                        payload.points.forEach((point) => {\n                            if (!point || !point.key) {\n                                return;\n                            }\n\n                            const item = pointsContainer.querySelector(`[data-point=\"${point.key}\"]`);\n\n                            if (!item) {\n                                return;\n                            }\n\n                            const state = point.state || 'info';\n                            item.setAttribute('data-point-state', state);\n\n                            if (typeof point.text === 'string') {\n                                item.textContent = point.text;\n                            }\n                        });\n                    }\n                };\n\n                const renderScoreboard = (scores) => {\n                    if (!scores || !scorecardMap.size) {\n                        return;\n                    }\n\n                    Object.keys(scores).forEach((scoreKey) => {\n                        applyScorecardState(scoreKey, scores[scoreKey]);\n                    });\n                };\n\n                const severityRank = {\n                    positive: 0,\n                    info: 1,\n                    warning: 2,\n                    alert: 3,\n                };\n\n                const computeLevelFromPoints = (points) => {\n                    if (!Array.isArray(points) || points.length === 0) {\n                        return 'info';\n                    }\n\n                    let highest = 'positive';\n\n                    points.forEach((point) => {\n                        const state = point && point.state ? point.state : 'info';\n\n                        if (severityRank[state] > severityRank[highest]) {\n                            highest = state;\n                        }\n                    });\n\n                    return highest;\n                };\n\n                const resolveCardMessage = (cardKey, level) => {\n                    const dictionary = {\n                        ux: {\n                            positive: mgaAdmin__('Parcours fluide et align\u00E9 sur les extensions premium.', 'lightbox-jlg'),\n                            info: mgaAdmin__('Quelques optimisations UX restent possibles.', 'lightbox-jlg'),\n                            warning: mgaAdmin__('Ajustez le rythme ou la navigation pour \u00E9galer les standards pro.', 'lightbox-jlg'),\n                            alert: mgaAdmin__('Corrigez les r\u00E9glages UX critiques avant publication.', 'lightbox-jlg'),\n                        },\n                        accessibility: {\n                            positive: mgaAdmin__('Accessible par d\u00E9faut\u00A0: pr\u00EAt pour un audit WCAG.', 'lightbox-jlg'),\n                            info: mgaAdmin__('Affinez deux ou trois points pour une accessibilit\u00E9 parfaite.', 'lightbox-jlg'),\n                            warning: mgaAdmin__('Renforcez l\u2019accessibilit\u00E9 pour rester au niveau des lightbox professionnelles.', 'lightbox-jlg'),\n                            alert: mgaAdmin__('Corrigez les probl\u00E8mes d\u2019accessibilit\u00E9 avant publication.', 'lightbox-jlg'),\n                        },\n                        reliability: {\n                            positive: mgaAdmin__('Stack pr\u00EAte pour une mise en production sans surprise.', 'lightbox-jlg'),\n                            info: mgaAdmin__('V\u00E9rifiez vos fallbacks pour \u00E9galer la robustesse des offres pro.', 'lightbox-jlg'),\n                            warning: mgaAdmin__('S\u00E9curisez la configuration avant de la confier \u00E0 vos clients.', 'lightbox-jlg'),\n                            alert: mgaAdmin__('Corrigez les risques critiques pour garantir la fiabilit\u00E9.', 'lightbox-jlg'),\n                        },\n                        visual: {\n                            positive: mgaAdmin__('Palette pr\u00EAte \u00E0 impressionner vos visiteurs.', 'lightbox-jlg'),\n                            info: mgaAdmin__('Peaufinez les presets pour un rendu au niveau premium.', 'lightbox-jlg'),\n                            warning: mgaAdmin__('Ajustez les \u00E9l\u00E9ments visuels pour conserver une identit\u00E9 coh\u00E9rente.', 'lightbox-jlg'),\n                            alert: mgaAdmin__('Corrigez la couleur ou le style avant publication.', 'lightbox-jlg'),\n                        },\n                    };\n\n                    const variants = dictionary[cardKey] || {};\n                    return variants[level] || variants.info || '';\n                };\n\n                const readNumberValue = (id) => {\n                    const element = doc.getElementById(id);\n\n                    if (!element) {\n                        return Number.NaN;\n                    }\n\n                    const value = parseFloat(element.value);\n                    return Number.isNaN(value) ? Number.NaN : value;\n                };\n\n                const readSelectValue = (id) => {\n                    const element = doc.getElementById(id);\n\n                    if (!element || typeof element.value !== 'string') {\n                        return '';\n                    }\n\n                    return element.value;\n                };\n\n                const readSelectLabel = (id, fallback) => {\n                    const element = doc.getElementById(id);\n\n                    if (!element) {\n                        return fallback || '';\n                    }\n\n                    const selectedOption = Array.from(element.options).find((option) => option.selected);\n\n                    if (selectedOption && selectedOption.textContent) {\n                        return selectedOption.textContent;\n                    }\n\n                    return fallback || '';\n                };\n\n                const readCheckboxValue = (id) => {\n                    const element = doc.getElementById(id);\n                    return element ? Boolean(element.checked) : false;\n                };\n\n                const formatSecondsValue = (value) => {\n                    if (!Number.isFinite(value)) {\n                        return '\u2014';\n                    }\n\n                    const rounded = Math.round(value * 10) / 10;\n\n                    if (Math.abs(rounded - Math.round(rounded)) < 0.01) {\n                        return String(Math.round(rounded));\n                    }\n\n                    return rounded.toFixed(1);\n                };\n\n                const evaluateScoreboard = (validations, diff, baselineInfo) => {\n                    if (!scorecardMap.size) {\n                        return null;\n                    }\n\n                    const worstValidation = Array.isArray(validations)\n                        ? validations.find((item) => item && item.severity === 'error')\n                            || validations.find((item) => item && item.severity === 'warning')\n                        : null;\n\n                    const buildUxScore = () => {\n                        const delayValue = readNumberValue('mga_delay');\n                        const effectValue = readSelectValue('mga_effect');\n                        const effectLabel = readSelectLabel('mga_effect', effectValue);\n                        const autoplay = readCheckboxValue('mga_autoplay_start');\n                        const showThumbsMobile = readCheckboxValue('mga_show_thumbs_mobile');\n                        const thumbsLayout = readSelectValue('mga_thumbs_layout');\n                        const points = [];\n\n                        const formattedDelay = formatSecondsValue(delayValue);\n                        let delayState = 'positive';\n                        let delayText = mgaAdminSprintf(\n                            mgaAdmin__('Tempo confortable : %1$s\u00A0s par diapositive.', 'lightbox-jlg'),\n                            formattedDelay\n                        );\n\n                        if (!Number.isFinite(delayValue)) {\n                            delayState = 'info';\n                            delayText = mgaAdmin__('Renseignez le tempo du diaporama pour caler la cadence.', 'lightbox-jlg');\n                        } else if (delayValue < 2.5) {\n                            delayState = 'alert';\n                            delayText = mgaAdminSprintf(\n                                mgaAdmin__('Tempo tr\u00E8s rapide (%1$s\u00A0s) : ralentissez pour laisser le temps de lecture.', 'lightbox-jlg'),\n                                formattedDelay\n                            );\n                        } else if (delayValue < 3 || delayValue > 6) {\n                            delayState = 'warning';\n                            delayText = mgaAdminSprintf(\n                                mgaAdmin__('Tempo \u00E0 %1$s\u00A0s : ciblez entre 3 et 6\u00A0s pour un rythme premium.', 'lightbox-jlg'),\n                                formattedDelay\n                            );\n                        }\n\n                        points.push({\n                            key: 'delay',\n                            state: delayState,\n                            text: delayText,\n                        });\n\n                        let navState = 'positive';\n                        let navText = mgaAdmin__('Miniatures ou navigation mobile affich\u00E9es : rep\u00E8res clairs.', 'lightbox-jlg');\n\n                        if (thumbsLayout === 'hidden' && !showThumbsMobile) {\n                            navState = 'warning';\n                            navText = mgaAdmin__('Activez les miniatures ou la navigation mobile pour guider vos visiteurs.', 'lightbox-jlg');\n                        } else if (thumbsLayout === 'hidden') {\n                            navState = 'info';\n                            navText = mgaAdmin__('Miniatures masqu\u00E9es sur desktop : v\u00E9rifiez que les fl\u00E8ches restent visibles.', 'lightbox-jlg');\n                        }\n\n                        points.push({\n                            key: 'navigation',\n                            state: navState,\n                            text: navText,\n                        });\n\n                        const heavyEffects = new Set(['cube', 'coverflow', 'flip']);\n                        const normalizedEffect = typeof effectValue === 'string' ? effectValue.toLowerCase() : '';\n                        const effectDisplayLabel = effectLabel || effectValue || 'slide';\n                        let animState = 'positive';\n                        let animText = mgaAdminSprintf(\n                            mgaAdmin__('Transition \u00AB\u00A0%1$s\u00A0\u00BB adapt\u00E9e au parcours.', 'lightbox-jlg'),\n                            effectDisplayLabel\n                        );\n\n                        if (heavyEffects.has(normalizedEffect) && autoplay) {\n                            animState = 'warning';\n                            animText = mgaAdminSprintf(\n                                mgaAdmin__('Effet 3D \u00AB\u00A0%1$s\u00A0\u00BB avec autoplay : envisagez un d\u00E9marrage manuel pour le confort utilisateur.', 'lightbox-jlg'),\n                                effectDisplayLabel\n                            );\n                        } else if (heavyEffects.has(normalizedEffect)) {\n                            animState = 'info';\n                            animText = mgaAdminSprintf(\n                                mgaAdmin__('Effet 3D \u00AB\u00A0%1$s\u00A0\u00BB activ\u00E9 : testez la performance sur mobile.', 'lightbox-jlg'),\n                                effectDisplayLabel\n                            );\n                        } else if (!effectValue) {\n                            animState = 'info';\n                            animText = mgaAdmin__('Choisissez un effet pour personnaliser le ressenti.', 'lightbox-jlg');\n                        }\n\n                        points.push({\n                            key: 'animation',\n                            state: animState,\n                            text: animText,\n                        });\n\n                        const level = computeLevelFromPoints(points);\n                        const message = resolveCardMessage('ux', level);\n\n                        return { level, message, points };\n                    };\n\n                    const buildAccessibilityScore = () => {\n                        const autoplay = readCheckboxValue('mga_autoplay_start');\n                        const startOnClicked = readCheckboxValue('mga_start_on_clicked_image');\n                        const points = [];\n\n                        let contrastState = 'positive';\n                        let contrastText = mgaAdmin__('Contraste valid\u00E9 : aucun blocage d\u00E9tect\u00E9.', 'lightbox-jlg');\n\n                        if (worstValidation) {\n                            contrastState = worstValidation.severity === 'error' ? 'alert' : 'warning';\n                            contrastText = worstValidation.message;\n                        }\n\n                        points.push({\n                            key: 'contrast',\n                            state: contrastState,\n                            text: contrastText,\n                        });\n\n                        let autoplayState = 'positive';\n                        let autoplayText = mgaAdmin__('Lecture d\u00E9clench\u00E9e par l\u2019utilisateur : confort respect\u00E9.', 'lightbox-jlg');\n\n                        if (autoplay) {\n                            autoplayState = 'warning';\n                            autoplayText = mgaAdmin__('D\u00E9sactivez le d\u00E9marrage automatique pour laisser le contr\u00F4le aux visiteurs.', 'lightbox-jlg');\n                        }\n\n                        points.push({\n                            key: 'autoplay',\n                            state: autoplayState,\n                            text: autoplayText,\n                        });\n\n                        let contextState = 'positive';\n                        let contextText = mgaAdmin__('La visionneuse s\u2019ouvre sur l\u2019image cliqu\u00E9e : orientation conserv\u00E9e.', 'lightbox-jlg');\n\n                        if (!startOnClicked) {\n                            contextState = 'info';\n                            contextText = mgaAdmin__('Activez \u00AB\u00A0D\u00E9marrer sur l\u2019image cliqu\u00E9e\u00A0\u00BB pour \u00E9viter les sauts de focus.', 'lightbox-jlg');\n                        }\n\n                        points.push({\n                            key: 'context',\n                            state: contextState,\n                            text: contextText,\n                        });\n\n                        const level = computeLevelFromPoints(points);\n                        const message = resolveCardMessage('accessibility', level);\n\n                        return { level, message, points };\n                    };\n\n                    const buildReliabilityScore = () => {\n                        const includeSvg = readCheckboxValue('mga_include_svg');\n                        const allowFallback = readCheckboxValue('mga_allow_body_fallback');\n                        const debugMode = readCheckboxValue('mga_debug_mode');\n                        const loadArchives = readCheckboxValue('mga_load_on_archives');\n                        const points = [];\n\n                        const assetsState = includeSvg ? 'positive' : 'alert';\n                        const assetsText = includeSvg\n                            ? mgaAdmin__('Ic\u00F4nes SVG locales actives : vos contr\u00F4les restent visibles hors connexion.', 'lightbox-jlg')\n                            : mgaAdmin__('R\u00E9activez les ic\u00F4nes SVG locales pour \u00E9viter les boutons invisibles si le CDN est indisponible.', 'lightbox-jlg');\n\n                        points.push({\n                            key: 'assets',\n                            state: assetsState,\n                            text: assetsText,\n                        });\n\n                        let fallbackState = allowFallback ? 'positive' : 'info';\n                        let fallbackText = allowFallback\n                            ? mgaAdmin__('Fallback \u00AB\u00A0body\u00A0\u00BB actif : compatibilit\u00E9 renforc\u00E9e avec les constructeurs de pages.', 'lightbox-jlg')\n                            : mgaAdmin__('Activez le fallback \u00AB\u00A0body\u00A0\u00BB si vos galeries sont inject\u00E9es dynamiquement.', 'lightbox-jlg');\n\n                        if (loadArchives) {\n                            fallbackState = 'positive';\n                            fallbackText = mgaAdmin__('Chargement sur les pages d\u2019archives activ\u00E9 : visionneuse pr\u00EAte dans les listes.', 'lightbox-jlg');\n                        }\n\n                        points.push({\n                            key: 'fallback',\n                            state: fallbackState,\n                            text: fallbackText,\n                        });\n\n                        const debugState = debugMode ? 'warning' : 'positive';\n                        const debugText = debugMode\n                            ? mgaAdmin__('D\u00E9sactivez le mode debug pour \u00E9viter les logs verbeux en production.', 'lightbox-jlg')\n                            : mgaAdmin__('Mode debug d\u00E9sactiv\u00E9 : stabilit\u00E9 optimale.', 'lightbox-jlg');\n\n                        points.push({\n                            key: 'debug',\n                            state: debugState,\n                            text: debugText,\n                        });\n\n                        const level = computeLevelFromPoints(points);\n                        const message = resolveCardMessage('reliability', level);\n\n                        return { level, message, points };\n                    };\n\n                    const buildVisualScore = () => {\n                        const presetSelect = doc.getElementById('mga_style_preset');\n                        const presetValue = presetSelect && typeof presetSelect.value === 'string' ? presetSelect.value : '';\n                        const accentInput = doc.getElementById('mga_accent_color');\n                        const rawAccentValue = accentInput && typeof accentInput.value === 'string'\n                            ? accentInput.value.trim()\n                            : '';\n                        const backgroundValue = readSelectValue('mga_background_style');\n                        const backgroundLabel = readSelectLabel('mga_background_style', backgroundValue);\n                        const hasDiff = Array.isArray(diff) && diff.length > 0;\n                        const baselineLabel = baselineInfo && baselineInfo.label ? baselineInfo.label : '';\n                        const points = [];\n\n                        const resolvePresetLabel = () => {\n                            if (presetSelect) {\n                                const option = Array.from(presetSelect.options).find((candidate) => candidate.value === presetValue);\n\n                                if (option && option.textContent) {\n                                    return option.textContent.trim();\n                                }\n                            }\n\n                            if (baselineLabel) {\n                                return baselineLabel;\n                            }\n\n                            return '';\n                        };\n\n                        const presetLabel = resolvePresetLabel();\n                        let presetState = 'info';\n                        let presetText = mgaAdmin__('Aucun preset s\u00E9lectionn\u00E9 : testez les styles propos\u00E9s pour un rendu premium.', 'lightbox-jlg');\n\n                        if (presetValue) {\n                            presetState = 'positive';\n                            presetText = mgaAdminSprintf(\n                                mgaAdmin__('Preset professionnel \u00AB\u00A0%1$s\u00A0\u00BB appliqu\u00E9.', 'lightbox-jlg'),\n                                presetLabel || presetValue\n                            );\n                        } else if (hasDiff) {\n                            presetState = 'positive';\n                            presetText = baselineLabel\n                                ? mgaAdminSprintf(\n                                    mgaAdmin__('Palette personnalis\u00E9e bas\u00E9e sur \u00AB\u00A0%1$s\u00A0\u00BB.', 'lightbox-jlg'),\n                                    baselineLabel\n                                )\n                                : mgaAdmin__('Palette personnalis\u00E9e active.', 'lightbox-jlg');\n                        }\n\n                        points.push({\n                            key: 'preset',\n                            state: presetState,\n                            text: presetText,\n                        });\n\n                        const accentLower = rawAccentValue.toLowerCase();\n                        let accentState = 'positive';\n                        let accentText = mgaAdmin__('Couleur d\u2019accent personnalis\u00E9e pr\u00EAte \u00E0 \u00EAtre d\u00E9clin\u00E9e.', 'lightbox-jlg');\n\n                        if (!isValidHexColor(rawAccentValue)) {\n                            accentState = 'alert';\n                            accentText = mgaAdmin__('Couleur d\u2019accent invalide : utilisez un code hexad\u00E9cimal (#123ABC).', 'lightbox-jlg');\n                        } else if (accentLower === '#ffffff') {\n                            accentState = 'info';\n                            accentText = mgaAdmin__('Personnalisez la couleur d\u2019accent pour refl\u00E9ter votre marque.', 'lightbox-jlg');\n                        } else {\n                            accentText = mgaAdminSprintf(\n                                mgaAdmin__('Accent d\u00E9fini sur %1$s : pensez \u00E0 l\u2019harmoniser avec vos CTA.', 'lightbox-jlg'),\n                                rawAccentValue.toUpperCase()\n                            );\n                        }\n\n                        points.push({\n                            key: 'accent',\n                            state: accentState,\n                            text: accentText,\n                        });\n\n                        let backgroundState = 'info';\n                        let backgroundText = mgaAdmin__('Choisissez un style de fond (\u00E9cho, blur, texture) pour enrichir la sc\u00E9nographie.', 'lightbox-jlg');\n\n                        if (backgroundValue) {\n                            backgroundState = 'positive';\n                            backgroundText = mgaAdminSprintf(\n                                mgaAdmin__('Arri\u00E8re-plan \u00AB\u00A0%1$s\u00A0\u00BB activ\u00E9 pour cr\u00E9er de la profondeur.', 'lightbox-jlg'),\n                                backgroundLabel || backgroundValue\n                            );\n                        }\n\n                        points.push({\n                            key: 'background',\n                            state: backgroundState,\n                            text: backgroundText,\n                        });\n\n                        const level = computeLevelFromPoints(points);\n                        const message = resolveCardMessage('visual', level);\n\n                        return { level, message, points };\n                    };\n\n                    return {\n                        ux: buildUxScore(),\n                        accessibility: buildAccessibilityScore(),\n                        reliability: buildReliabilityScore(),\n                        visual: buildVisualScore(),\n                    };\n                };\n\n                const renderToolbarSummary = () => {\n                    if (!toolbarTarget) {\n                        return;\n                    }\n\n                    const toolbarToggles = [\n                        { id: 'mga_show_zoom', label: mgaAdmin__('Zoom', 'lightbox-jlg') },\n                        { id: 'mga_show_download', label: mgaAdmin__('T\u00E9l\u00E9chargement', 'lightbox-jlg') },\n                        { id: 'mga_show_share', label: mgaAdmin__('Partage', 'lightbox-jlg') },\n                        { id: 'mga_show_cta', label: mgaAdmin__('Appel \u00E0 l\u2019action', 'lightbox-jlg') },\n                        { id: 'mga_show_fullscreen', label: mgaAdmin__('Plein \u00E9cran', 'lightbox-jlg') },\n                    ];\n\n                    const active = toolbarToggles.filter((toggle) => {\n                        const input = doc.getElementById(toggle.id);\n                        return input ? input.checked : false;\n                    });\n\n                    toolbarTarget.textContent = active.length > 0\n                        ? active.map((toggle) => toggle.label).join(', ')\n                        : mgaAdmin__('Aucun bouton affich\u00E9', 'lightbox-jlg');\n                };\n\n                const renderPresetSummary = (diff, baselineInfo) => {\n                    if (!presetTarget) {\n                        return;\n                    }\n\n                    const presetSelect = doc.getElementById('mga_style_preset');\n                    const value = presetSelect ? presetSelect.value : '';\n                    let label = '';\n\n                    if (presetSelect && value) {\n                        const fallback = Array.from(presetSelect.options).find((option) => option.value === value);\n\n                        if (fallback) {\n                            label = fallback.textContent || '';\n                        }\n                    }\n\n                    if (!label) {\n                        if (diff.length > 0 && baselineInfo && baselineInfo.label) {\n                            label = mgaAdminSprintf(\n                                mgaAdmin__('Personnalis\u00E9 \u00E0 partir de %1$s', 'lightbox-jlg'),\n                                baselineInfo.label\n                            );\n                        } else if (diff.length > 0) {\n                            label = mgaAdmin__('R\u00E9glages personnalis\u00E9s', 'lightbox-jlg');\n                        } else if (baselineInfo && baselineInfo.label) {\n                            label = baselineInfo.label;\n                        } else if (global.mgaStylePresets && typeof global.mgaStylePresets.customDescription === 'string') {\n                            label = global.mgaStylePresets.customDescription;\n                        } else {\n                            label = mgaAdmin__('R\u00E9glages personnalis\u00E9s', 'lightbox-jlg');\n                        }\n                    }\n\n                    presetTarget.textContent = label;\n                };\n\n                const renderTimingSummary = () => {\n                    if (!timingTarget) {\n                        return;\n                    }\n\n                    const delayInput = doc.getElementById('mga_delay');\n                    const effectSelect = doc.getElementById('mga_effect');\n                    const delayValue = delayInput && delayInput.value ? delayInput.value : '\u2014';\n                    let effectLabel = mgaAdmin__('Transition personnalis\u00E9e', 'lightbox-jlg');\n\n                    if (effectSelect) {\n                        const selectedOption = Array.from(effectSelect.options).find((option) => option.selected);\n                        effectLabel = selectedOption ? selectedOption.textContent : effectLabel;\n                    }\n\n                    timingTarget.textContent = mgaAdminSprintf(\n                        mgaAdmin__('Diaporama : %1$s\u00A0s \u00B7 Effet : %2$s', 'lightbox-jlg'),\n                        delayValue,\n                        effectLabel\n                    );\n                };\n\n                const renderShareSummary = () => {\n                    if (!shareTarget) {\n                        return;\n                    }\n\n                    const items = Array.from(doc.querySelectorAll('[data-share-repeater-item]'));\n                    const activeLabels = items\n                        .filter((item) => {\n                            const enabledField = item.querySelector('[data-share-field=\"enabled\"]');\n                            return enabledField ? enabledField.checked : false;\n                        })\n                        .map((item) => {\n                            const labelField = item.querySelector('[data-share-field=\"label\"]');\n                            const keyField = item.querySelector('[data-share-field=\"key\"]');\n                            const labelValue = labelField && labelField.value ? labelField.value.trim() : '';\n                            const keyValue = keyField && keyField.value ? keyField.value.trim() : '';\n\n                            return labelValue || (keyValue ? keyValue.toUpperCase() : mgaAdmin__('Canal sans titre', 'lightbox-jlg'));\n                        });\n\n                    if (activeLabels.length > 0) {\n                        shareTarget.textContent = mgaAdminSprintf(\n                            mgaAdmin__('%1$d canaux actifs : %2$s', 'lightbox-jlg'),\n                            activeLabels.length,\n                            activeLabels.join(', ')\n                        );\n                    } else {\n                        shareTarget.textContent = mgaAdmin__('Aucun canal actif', 'lightbox-jlg');\n                    }\n                };\n\n                const collectValidations = () => {\n                    if (!contrastInspector || typeof contrastInspector.readAudit !== 'function') {\n                        return [];\n                    }\n\n                    const audit = contrastInspector.readAudit();\n\n                    if (!audit || !Array.isArray(audit.entries)) {\n                        return [];\n                    }\n\n                    return audit.entries\n                        .filter((entry) => entry && (entry.severity === 'warning' || entry.severity === 'error'))\n                        .map((entry) => {\n                            const message = entry.severity === 'error'\n                                ? mgaAdminSprintf(\n                                    mgaAdmin__('Contraste %1$s insuffisant\u00A0: %2$s. Ajustez la couleur ou le fond pour atteindre au moins 3,0 (AA\u00A0\u2265\u00A04,5).', 'lightbox-jlg'),\n                                    entry.label,\n                                    entry.ratioText\n                                )\n                                : mgaAdminSprintf(\n                                    mgaAdmin__('Contraste %1$s limit\u00E9\u00A0: %2$s. Augmentez l\u00E9g\u00E8rement pour viser AA (\u2265\u00A04,5).', 'lightbox-jlg'),\n                                    entry.label,\n                                    entry.ratioText\n                                );\n\n                            return {\n                                severity: entry.severity,\n                                message,\n                            };\n                        });\n                };\n\n                const renderValidations = (validations) => {\n                    if (!validationContainer) {\n                        return;\n                    }\n\n                    validationContainer.innerHTML = '';\n\n                    if (!validations || validations.length === 0) {\n                        validationContainer.setAttribute('hidden', 'hidden');\n                        return;\n                    }\n\n                    validationContainer.removeAttribute('hidden');\n\n                    validations.forEach((validation) => {\n                        const alert = doc.createElement('div');\n                        alert.className = 'mga-summary__alert';\n                        alert.setAttribute('data-mga-severity', validation.severity);\n                        alert.textContent = validation.message;\n                        validationContainer.appendChild(alert);\n                    });\n                };\n\n                const renderPresetDiff = (diff, baselineInfo) => {\n                    if (!diffContainer || !diffList) {\n                        return;\n                    }\n\n                    diffList.innerHTML = '';\n\n                    if (!diff || diff.length === 0) {\n                        diffContainer.setAttribute('hidden', 'hidden');\n\n                        if (diffBaseline) {\n                            diffBaseline.textContent = '';\n                        }\n\n                        if (diffEmpty) {\n                            diffEmpty.setAttribute('hidden', 'hidden');\n                        }\n\n                        return;\n                    }\n\n                    diffContainer.removeAttribute('hidden');\n\n                    if (diffBaseline) {\n                        diffBaseline.textContent = baselineInfo && baselineInfo.label\n                            ? mgaAdminSprintf(mgaAdmin__('Base\u00A0: %1$s', 'lightbox-jlg'), baselineInfo.label)\n                            : '';\n                    }\n\n                    if (diffEmpty) {\n                        diffEmpty.setAttribute('hidden', 'hidden');\n                    }\n\n                    diff.forEach((item) => {\n                        const row = doc.createElement('li');\n                        row.className = 'mga-summary__diff-item';\n\n                        const label = doc.createElement('span');\n                        label.className = 'mga-summary__diff-label';\n                        label.textContent = item.label;\n                        row.appendChild(label);\n\n                        const values = doc.createElement('span');\n                        values.className = 'mga-summary__diff-values';\n\n                        const beforeValue = doc.createElement('span');\n                        beforeValue.className = 'mga-summary__diff-before';\n                        beforeValue.textContent = item.baselineLabel;\n                        values.appendChild(beforeValue);\n\n                        const arrow = doc.createElement('span');\n                        arrow.textContent = '\u2192';\n                        values.appendChild(arrow);\n\n                        const afterValue = doc.createElement('span');\n                        afterValue.className = 'mga-summary__diff-after';\n                        afterValue.textContent = item.currentLabel;\n                        values.appendChild(afterValue);\n\n                        row.appendChild(values);\n                        diffList.appendChild(row);\n                    });\n                };\n\n                const update = () => {\n                    const diff = presetDiffTracker ? presetDiffTracker.refresh() : [];\n                    const baselineInfo = presetDiffTracker ? presetDiffTracker.getBaselineInfo() : { label: '', key: '' };\n                    const validations = collectValidations();\n\n                    renderPresetSummary(diff, baselineInfo);\n                    renderTimingSummary();\n                    renderToolbarSummary();\n                    renderShareSummary();\n                    renderPresetDiff(diff, baselineInfo);\n                    renderValidations(validations);\n                    renderScoreboard(evaluateScoreboard(validations, diff, baselineInfo));\n                };\n\n                return () => {\n                    if (timeoutId) {\n                        global.clearTimeout(timeoutId);\n                    }\n\n                    timeoutId = global.setTimeout(() => {\n                        timeoutId = null;\n                        update();\n                    }, 120);\n                };\n            })();\n\n            const goToStep = (targetIndex) => {\n                const normalizedIndex = Math.max(0, Math.min(stepPanels.length - 1, targetIndex));\n\n                if (normalizedIndex === currentIndex) {\n                    return;\n                }\n\n                const currentPanel = stepPanels[currentIndex];\n                const nextPanel = stepPanels[normalizedIndex];\n\n                if (currentPanel) {\n                    deactivatePanel(currentPanel);\n                }\n\n                if (nextPanel) {\n                    activatePanel(nextPanel);\n                    focusPanel(nextPanel);\n                }\n\n                currentIndex = normalizedIndex;\n                updateIndicators();\n                updateControls();\n\n                if (currentIndex === summaryIndex) {\n                    updateSummaryContainers();\n                }\n            };\n\n            const handleNext = () => {\n                if (targetForm && typeof targetForm.reportValidity === 'function' && !targetForm.reportValidity()) {\n                    return;\n                }\n\n                goToStep(currentIndex + 1);\n            };\n\n            const handlePrev = () => {\n                goToStep(currentIndex - 1);\n            };\n\n            const attachIndicatorNavigation = () => {\n                indicators.forEach((indicator, index) => {\n                    indicator.addEventListener('click', (event) => {\n                        event.preventDefault();\n\n                        if (index < currentIndex && index >= 0) {\n                            goToStep(index);\n                        } else if (index > currentIndex && index <= summaryIndex) {\n                            if (targetForm && typeof targetForm.reportValidity === 'function' && !targetForm.reportValidity()) {\n                                return;\n                            }\n\n                            goToStep(index);\n                        }\n                    });\n                });\n            };\n\n            if (prevButton) {\n                prevButton.addEventListener('click', (event) => {\n                    event.preventDefault();\n                    handlePrev();\n                });\n            }\n\n            if (nextButton) {\n                nextButton.addEventListener('click', (event) => {\n                    event.preventDefault();\n                    handleNext();\n                });\n            }\n\n            attachIndicatorNavigation();\n            updateIndicators();\n            updateControls();\n\n            if (currentIndex === summaryIndex) {\n                updateSummaryContainers();\n            }\n\n            const handleFormInput = () => {\n                updateSummaryContainers();\n            };\n\n            if (targetForm) {\n                targetForm.addEventListener('change', handleFormInput);\n                targetForm.addEventListener('input', handleFormInput);\n            }\n\n            return {\n                scheduleSummaryUpdate: updateSummaryContainers,\n                setStatusMessage,\n                goToSummary: () => goToStep(summaryIndex),\n            };\n        };\n\n        const wizardApi = initializeWizard(form);\n\n        if (wizardApi && typeof wizardApi.scheduleSummaryUpdate === 'function') {\n            scheduleSummaryRefresh = wizardApi.scheduleSummaryUpdate;\n        }\n\n        const initializeAsyncSave = (targetForm, wizard) => {\n            if (!targetForm) {\n                return;\n            }\n\n            const config = global.mgaAdminConfig || {};\n            const ajaxUrl = typeof config.ajaxUrl === 'string' && config.ajaxUrl ? config.ajaxUrl : global.ajaxurl;\n            const nonce = typeof config.nonce === 'string' ? config.nonce : '';\n            const submitButton = targetForm.querySelector('[data-mga-step-submit]');\n\n            if (!ajaxUrl || !nonce) {\n                return;\n            }\n\n            const setStatus = (state, explicitMessage) => {\n                if (wizard && typeof wizard.setStatusMessage === 'function') {\n                    wizard.setStatusMessage(state, explicitMessage);\n                }\n            };\n\n            const setSavingState = (isSaving) => {\n                if (submitButton) {\n                    submitButton.disabled = isSaving;\n                    submitButton.setAttribute('aria-busy', isSaving ? 'true' : 'false');\n                }\n\n                if (isSaving) {\n                    setStatus('saving');\n                }\n            };\n\n            targetForm.addEventListener('submit', (event) => {\n                event.preventDefault();\n\n                if (typeof targetForm.reportValidity === 'function' && !targetForm.reportValidity()) {\n                    return;\n                }\n\n                const formData = new FormData(targetForm);\n                formData.append('action', 'mga_save_settings');\n                formData.append('_ajax_nonce', nonce);\n\n                setSavingState(true);\n\n                fetch(ajaxUrl, {\n                    method: 'POST',\n                    credentials: 'same-origin',\n                    body: formData,\n                })\n                    .then((response) => {\n                        if (!response.ok) {\n                            throw new Error(response.statusText || 'HTTP error');\n                        }\n\n                        return response.json();\n                    })\n                    .then((payload) => {\n                        if (!payload || payload.success !== true) {\n                            const message = payload && payload.data && payload.data.message\n                                ? payload.data.message\n                                : null;\n\n                            throw new Error(message || (config.messages && config.messages.error) || mgaAdmin__('Impossible d\u2019enregistrer les r\u00E9glages.', 'lightbox-jlg'));\n                        }\n\n                        const successMessage = payload.data && payload.data.message\n                            ? payload.data.message\n                            : (config.messages && config.messages.success) || mgaAdmin__('R\u00E9glages enregistr\u00E9s.', 'lightbox-jlg');\n\n                        setStatus('success', successMessage);\n                        scheduleSummaryRefresh();\n                    })\n                    .catch((error) => {\n                        const fallbackMessage = (config.messages && config.messages.error)\n                            ? config.messages.error\n                            : mgaAdmin__('Impossible d\u2019enregistrer les r\u00E9glages.', 'lightbox-jlg');\n\n                        setStatus('error', error && error.message ? error.message : fallbackMessage);\n                    })\n                    .finally(() => {\n                        setSavingState(false);\n                    });\n            });\n        };\n\n        initializeAsyncSave(form, wizardApi);\n\n        const initSettingsNavigation = () => {\n            const noopApi = {\n                setSectionModified: () => {},\n            };\n\n            const layout = doc.querySelector('[data-mga-settings-layout]');\n\n            if (!layout) {\n                return noopApi;\n            }\n\n            const sections = Array.from(layout.querySelectorAll('[data-mga-settings-section]'));\n\n            if (sections.length === 0) {\n                return noopApi;\n            }\n\n            const navList = layout.querySelector('[data-mga-settings-nav]');\n            const navLinks = navList ? Array.from(navList.querySelectorAll('[data-mga-section-link]')) : [];\n            const linkBySection = new Map();\n            const navItemBySection = new Map();\n            const navBadgeBySection = new Map();\n            const viewToggle = layout.querySelector('[data-mga-view-toggle]');\n            const viewSelect = viewToggle ? viewToggle.querySelector('[data-mga-view-select]') : null;\n            const VIEW_STORAGE_KEY = 'mga-settings-view-mode';\n\n            const readStoredViewMode = () => {\n                if (typeof global.localStorage === 'undefined') {\n                    return 'essential';\n                }\n\n                try {\n                    const stored = global.localStorage.getItem(VIEW_STORAGE_KEY);\n                    return stored === 'advanced' ? 'advanced' : 'essential';\n                } catch (error) {\n                    return 'essential';\n                }\n            };\n\n            let currentViewMode = readStoredViewMode();\n\n            const syncViewSelect = () => {\n                if (viewSelect) {\n                    viewSelect.value = currentViewMode;\n                }\n            };\n\n            const persistViewMode = () => {\n                if (typeof global.localStorage === 'undefined') {\n                    return;\n                }\n\n                try {\n                    global.localStorage.setItem(VIEW_STORAGE_KEY, currentViewMode);\n                } catch (error) {\n                    // Ignore storage access restrictions.\n                }\n            };\n\n            const updateLayoutViewMode = () => {\n                layout.setAttribute('data-mga-view-mode', currentViewMode);\n            };\n\n            const getSectionVisibility = (section) => {\n                if (!section) {\n                    return 'advanced';\n                }\n\n                const visibility = section.getAttribute('data-mga-visibility');\n                return visibility === 'essential' ? 'essential' : 'advanced';\n            };\n\n            const searchInput = layout.querySelector('[data-mga-settings-search]');\n            const emptyState = layout.querySelector('[data-mga-search-empty]');\n            const highlightTimeouts = new WeakMap();\n\n            const isSearchActive = () => layout.getAttribute('data-mga-search-active') === 'true';\n\n            const updateEmptyState = (visibleCount, searchActive) => {\n                if (!emptyState) {\n                    return;\n                }\n\n                if (searchActive && visibleCount === 0) {\n                    emptyState.removeAttribute('hidden');\n                } else {\n                    emptyState.setAttribute('hidden', 'hidden');\n                }\n            };\n\n            const setActiveLink = (section) => {\n                if (!section) {\n                    return;\n                }\n\n                linkBySection.forEach((link, candidate) => {\n                    if (candidate === section) {\n                        link.setAttribute('aria-current', 'true');\n                    } else {\n                        link.removeAttribute('aria-current');\n                    }\n                });\n            };\n\n            const clearHighlights = () => {\n                sections.forEach((section) => {\n                    section.removeAttribute('data-mga-section-highlight');\n\n                    if (highlightTimeouts.has(section)) {\n                        global.clearTimeout(highlightTimeouts.get(section));\n                        highlightTimeouts.delete(section);\n                    }\n                });\n            };\n\n            const highlightSection = (section) => {\n                if (!section) {\n                    return;\n                }\n\n                section.setAttribute('data-mga-section-highlight', 'true');\n\n                if (highlightTimeouts.has(section)) {\n                    global.clearTimeout(highlightTimeouts.get(section));\n                }\n\n                const timeoutId = global.setTimeout(() => {\n                    section.removeAttribute('data-mga-section-highlight');\n                    highlightTimeouts.delete(section);\n                }, 1600);\n\n                highlightTimeouts.set(section, timeoutId);\n            };\n\n            const filterSections = (rawQuery) => {\n                const query = typeof rawQuery === 'string' ? rawQuery.trim().toLowerCase() : '';\n                const searchActive = query.length > 0;\n                let visibleCount = 0;\n\n                if (searchActive) {\n                    layout.setAttribute('data-mga-search-active', 'true');\n                } else {\n                    layout.removeAttribute('data-mga-search-active');\n                    clearHighlights();\n                }\n\n                sections.forEach((section) => {\n                    const link = linkBySection.get(section);\n                    const navItem = navItemBySection.get(section);\n\n                    if (!searchActive) {\n                        const hide = currentViewMode === 'essential' && getSectionVisibility(section) === 'advanced';\n\n                        if (hide) {\n                            section.setAttribute('hidden', 'hidden');\n\n                            if (link) {\n                                link.setAttribute('hidden', 'hidden');\n                                link.removeAttribute('aria-current');\n                            }\n\n                            if (navItem) {\n                                navItem.setAttribute('hidden', 'hidden');\n                            }\n\n                            return;\n                        }\n\n                        section.removeAttribute('hidden');\n\n                        if (link) {\n                            link.removeAttribute('hidden');\n                        }\n\n                        if (navItem) {\n                            navItem.removeAttribute('hidden');\n                        }\n\n                        return;\n                    }\n\n                    const text = (section.textContent || '').toLowerCase();\n                    const isMatch = text.includes(query);\n\n                    if (isMatch) {\n                        section.removeAttribute('hidden');\n                        section.setAttribute('data-mga-section-highlight', 'true');\n                        visibleCount += 1;\n\n                        if (link) {\n                            link.removeAttribute('hidden');\n                        }\n\n                        if (navItem) {\n                            navItem.removeAttribute('hidden');\n                        }\n                    } else {\n                        section.setAttribute('hidden', 'hidden');\n                        section.removeAttribute('data-mga-section-highlight');\n\n                        if (link) {\n                            link.setAttribute('hidden', 'hidden');\n                            link.removeAttribute('aria-current');\n                        }\n\n                        if (navItem) {\n                            navItem.setAttribute('hidden', 'hidden');\n                        }\n                    }\n                });\n\n                if (searchActive) {\n                    const firstMatch = sections.find((section) => !section.hasAttribute('hidden'));\n\n                    if (firstMatch) {\n                        setActiveLink(firstMatch);\n                    }\n                }\n\n                updateEmptyState(visibleCount, searchActive);\n            };\n\n            const applyViewMode = (nextMode, options = {}) => {\n                const normalized = nextMode === 'advanced' ? 'advanced' : 'essential';\n\n                if (normalized === currentViewMode && !options.force) {\n                    return;\n                }\n\n                currentViewMode = normalized;\n                syncViewSelect();\n                updateLayoutViewMode();\n\n                if (options.persist !== false) {\n                    persistViewMode();\n                }\n\n                const currentQuery = searchInput ? searchInput.value || '' : '';\n                filterSections(currentQuery);\n            };\n\n            navLinks.forEach((link) => {\n                const href = link.getAttribute('href');\n\n                if (!href || href.charAt(0) !== '#') {\n                    return;\n                }\n\n                const target = layout.querySelector(href);\n\n                if (!target) {\n                    return;\n                }\n\n                linkBySection.set(target, link);\n                const navItem = link.closest('[data-mga-visibility]');\n\n                if (navItem) {\n                    navItemBySection.set(target, navItem);\n\n                    let badge = navItem.querySelector('[data-mga-modified-badge]');\n\n                    if (!badge) {\n                        badge = doc.createElement('span');\n                        badge.className = 'mga-settings-layout__badge';\n                        badge.textContent = mgaAdmin__('Modifi\u00E9', 'lightbox-jlg');\n                        badge.hidden = true;\n                        badge.setAttribute('data-mga-modified-badge', 'true');\n                        navItem.appendChild(badge);\n                    }\n\n                    navBadgeBySection.set(target, badge);\n                }\n\n                link.addEventListener('click', (event) => {\n                    event.preventDefault();\n\n                    if (target.hasAttribute('hidden')) {\n                        target.removeAttribute('hidden');\n                    }\n\n                    try {\n                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                    } catch (error) {\n                        if (typeof target.scrollIntoView === 'function') {\n                            target.scrollIntoView();\n                        }\n                    }\n\n                    setActiveLink(target);\n                    highlightSection(target);\n\n                    const focusOptions = detectFocusOptionsSupport() ? { preventScroll: true } : undefined;\n\n                    if (typeof global.requestAnimationFrame === 'function') {\n                        global.requestAnimationFrame(() => {\n                            safeFocus(target, focusOptions);\n                        });\n                    } else {\n                        safeFocus(target, focusOptions);\n                    }\n                });\n            });\n\n            syncViewSelect();\n            updateLayoutViewMode();\n\n            if (viewSelect) {\n                viewSelect.addEventListener('change', (event) => {\n                    applyViewMode(event.target.value || 'essential');\n                });\n            }\n\n            if ('IntersectionObserver' in global) {\n                let lastVisibleSection = null;\n\n                const observer = new IntersectionObserver((entries) => {\n                    if (isSearchActive()) {\n                        return;\n                    }\n\n                    entries.forEach((entry) => {\n                        if (entry.isIntersecting) {\n                            lastVisibleSection = entry.target;\n                        }\n                    });\n\n                    if (lastVisibleSection) {\n                        setActiveLink(lastVisibleSection);\n                    }\n                }, {\n                    rootMargin: '-40% 0px -40% 0px',\n                    threshold: 0.1,\n                });\n\n                sections.forEach((section) => observer.observe(section));\n            } else {\n                const handleScroll = () => {\n                    if (isSearchActive()) {\n                        return;\n                    }\n\n                    let bestSection = null;\n                    let bestOffset = Infinity;\n                    const scrollY = global.pageYOffset || doc.documentElement.scrollTop || 0;\n\n                    sections.forEach((section) => {\n                        const rect = section.getBoundingClientRect();\n                        const absoluteTop = rect.top + scrollY;\n                        const delta = Math.abs(absoluteTop - scrollY - 140);\n\n                        if (delta < bestOffset) {\n                            bestSection = section;\n                            bestOffset = delta;\n                        }\n                    });\n\n                    if (bestSection) {\n                        setActiveLink(bestSection);\n                    }\n                };\n\n                global.addEventListener('scroll', handleScroll, { passive: true });\n                handleScroll();\n            }\n\n            if (searchInput) {\n                searchInput.addEventListener('input', (event) => {\n                    filterSections(event.target.value || '');\n                });\n\n                filterSections(searchInput.value || '');\n            } else {\n                updateEmptyState(sections.length, false);\n            }\n\n            applyViewMode(currentViewMode, { force: true, persist: false });\n\n            if (!isSearchActive()) {\n                setActiveLink(sections[0]);\n            }\n\n            return {\n                setSectionModified(section, isModified) {\n                    if (!section) {\n                        return;\n                    }\n\n                    const badge = navBadgeBySection.get(section);\n                    const navItem = navItemBySection.get(section);\n\n                    if (badge) {\n                        badge.hidden = !isModified;\n                    }\n\n                    if (navItem) {\n                        if (isModified) {\n                            navItem.setAttribute('data-mga-modified', 'true');\n                        } else {\n                            navItem.removeAttribute('data-mga-modified');\n                        }\n                    }\n                },\n            };\n        };\n\n        const navigationApi = initSettingsNavigation();\n\n        // Live update for range sliders\n        const bindRangeToOutput = (sliderId, outputId, displayFormatter, ariaFormatter) => {\n            const slider = doc.getElementById(sliderId);\n            const output = doc.getElementById(outputId);\n\n            if (!slider || !output) {\n                return;\n            }\n\n            const updateOutput = () => {\n                const value = slider.value;\n                const displayValue = typeof displayFormatter === 'function'\n                    ? displayFormatter(value)\n                    : value;\n                const ariaValue = typeof ariaFormatter === 'function'\n                    ? ariaFormatter(value)\n                    : displayValue;\n\n                if (typeof output.value !== 'undefined') {\n                    output.value = displayValue;\n                }\n\n                output.textContent = displayValue;\n                slider.setAttribute('aria-valuenow', value);\n                slider.setAttribute('aria-valuetext', ariaValue);\n            };\n\n            slider.addEventListener('input', updateOutput);\n            updateOutput();\n        };\n\n        bindRangeToOutput(\n            'mga_thumb_size',\n            'mga_thumb_size_value',\n            (value) => mgaAdminSprintf(mgaAdmin__('%spx', 'lightbox-jlg'), value),\n            (value) => mgaAdminSprintf(mgaAdmin__('%s pixels', 'lightbox-jlg'), value)\n        );\n\n        bindRangeToOutput(\n            'mga_thumb_size_mobile',\n            'mga_thumb_size_mobile_value',\n            (value) => mgaAdminSprintf(mgaAdmin__('%spx', 'lightbox-jlg'), value),\n            (value) => mgaAdminSprintf(mgaAdmin__('%s pixels', 'lightbox-jlg'), value)\n        );\n\n        bindRangeToOutput(\n            'mga_bg_opacity',\n            'mga_bg_opacity_value',\n            (value) => value,\n            (value) => mgaAdminSprintf(mgaAdmin__('%s opacity', 'lightbox-jlg'), value)\n        );\n\n        const accentColorInput = doc.getElementById('mga_accent_color');\n        const accentColorPreview = doc.getElementById('mga_accent_color_preview');\n\n        if (accentColorInput) {\n            const defaultColorAttr = accentColorInput.getAttribute('data-default-color');\n            const fallbackColor = isValidHexColor(defaultColorAttr) ? defaultColorAttr : '#ffffff';\n\n            const applyPreviewColor = (rawColor) => {\n                const color = isValidHexColor(rawColor) ? rawColor : fallbackColor;\n\n                if (accentColorPreview) {\n                    accentColorPreview.style.backgroundColor = color;\n                }\n\n                return color;\n            };\n\n            applyPreviewColor(accentColorInput.value);\n\n            const maybeJQuery = global.jQuery;\n\n            if (maybeJQuery && typeof maybeJQuery.fn === 'object' && typeof maybeJQuery.fn.wpColorPicker === 'function') {\n                maybeJQuery(accentColorInput).wpColorPicker({\n                    change(event, ui) {\n                        const colorValue = ui && ui.color ? ui.color.toString() : event.target.value;\n                        applyPreviewColor(colorValue);\n                    },\n                    clear() {\n                        const defaultColor = accentColorInput.getAttribute('data-default-color') || fallbackColor;\n                        maybeJQuery(accentColorInput).val(defaultColor);\n                        applyPreviewColor(defaultColor);\n                    },\n                });\n\n                maybeJQuery(accentColorInput).on('input', (event) => {\n                    applyPreviewColor(event.target.value);\n                });\n            } else {\n                accentColorInput.addEventListener('input', () => {\n                    applyPreviewColor(accentColorInput.value);\n                });\n            }\n        }\n\n        contrastInspector = createContrastInspector();\n\n        const initLivePreview = () => {\n            const previewContainer = doc.querySelector('[data-mga-live-preview]');\n\n            if (!previewContainer) {\n                return;\n            }\n\n            const previewMock = previewContainer.querySelector('[data-mga-live-preview-mock]');\n            const effectLabel = previewContainer.querySelector('[data-mga-preview-effect]');\n            const thumbsContainer = previewContainer.querySelector('[data-mga-preview-thumbs]');\n            const statusRegion = previewContainer.querySelector('[data-mga-preview-status]');\n            const fallbackMessage = previewContainer.querySelector('[data-mga-preview-fallback]');\n            const mainSwiperEl = previewContainer.querySelector('[data-mga-preview-swiper]');\n            const paginationEl = previewContainer.querySelector('[data-mga-preview-pagination]');\n            const nextButton = previewContainer.querySelector('[data-mga-preview-next]');\n            const prevButton = previewContainer.querySelector('[data-mga-preview-prev]');\n\n            const toolbarActions = {\n                zoom: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"zoom\"]')),\n                download: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"download\"]')),\n                share: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"share\"]')),\n                cta: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"cta\"]')),\n                fullscreen: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"fullscreen\"]')),\n            };\n\n            let previewSwiper = null;\n\n            const shouldAnnounce = (event) => {\n                if (!event || typeof event !== 'object') {\n                    return false;\n                }\n\n                if (event.type === 'init') {\n                    return false;\n                }\n\n                return event.type !== 'input';\n            };\n\n            const announce = (message) => {\n                if (!statusRegion || typeof message !== 'string' || message.trim() === '') {\n                    return;\n                }\n\n                statusRegion.textContent = message;\n            };\n\n            const setPreviewState = (state) => {\n                if (!previewContainer) {\n                    return;\n                }\n\n                previewContainer.setAttribute('data-mga-preview-state', state);\n            };\n\n            const showFallback = (message) => {\n                setPreviewState('error');\n\n                if (fallbackMessage) {\n                    fallbackMessage.hidden = false;\n\n                    if (typeof message === 'string' && message.trim() !== '') {\n                        fallbackMessage.textContent = message;\n                    }\n                }\n\n                if (message) {\n                    announce(message);\n                }\n            };\n\n            const destroyPreviewSwiper = () => {\n                if (previewSwiper && typeof previewSwiper.destroy === 'function') {\n                    previewSwiper.destroy(true, true);\n                }\n\n                previewSwiper = null;\n            };\n\n            const parseNumber = (value, fallbackValue) => {\n                const numeric = typeof value === 'number' ? value : parseFloat(value);\n\n                if (Number.isNaN(numeric)) {\n                    return fallbackValue;\n                }\n\n                return numeric;\n            };\n\n            const buildSwiperConfig = () => {\n                const effectSelect = doc.getElementById('mga_effect');\n                const delayInput = doc.getElementById('mga_delay');\n                const speedInput = doc.getElementById('mga_speed');\n                const effectValue = effectSelect ? effectSelect.value : 'slide';\n                const delaySeconds = parseNumber(delayInput ? delayInput.value : null, 4);\n                const speedValue = parseNumber(speedInput ? speedInput.value : null, 600);\n\n                const autoplayDelay = Math.max(Math.round(delaySeconds * 1000), 1000);\n                const speed = Math.max(Math.round(speedValue), 100);\n\n                const config = {\n                    allowTouchMove: false,\n                    simulateTouch: false,\n                    centeredSlides: true,\n                    effect: effectValue || 'slide',\n                    loop: true,\n                    slidesPerView: 1,\n                    speed,\n                };\n\n                if (paginationEl) {\n                    config.pagination = {\n                        el: paginationEl,\n                        clickable: false,\n                    };\n                }\n\n                if (nextButton && prevButton) {\n                    config.navigation = {\n                        nextEl: nextButton,\n                        prevEl: prevButton,\n                    };\n                }\n\n                if (!Number.isNaN(autoplayDelay) && autoplayDelay > 0) {\n                    config.autoplay = {\n                        delay: autoplayDelay,\n                        disableOnInteraction: false,\n                    };\n                }\n\n                if (config.effect === 'fade') {\n                    config.fadeEffect = { crossFade: true };\n                }\n\n                config.on = {\n                    init(swiper) {\n                        if (swiper && typeof swiper.slideToLoop === 'function') {\n                            swiper.slideToLoop(0, 0, false);\n                        }\n                    },\n                };\n\n                return config;\n            };\n\n            const rebuildPreviewSwiper = () => {\n                if (!mainSwiperEl || typeof global.Swiper !== 'function') {\n                    return;\n                }\n\n                destroyPreviewSwiper();\n\n                try {\n                    previewSwiper = new global.Swiper(mainSwiperEl, buildSwiperConfig());\n                    setPreviewState('ready');\n                } catch (error) {\n                    showFallback(mgaAdmin__('Impossible d\u2019initialiser l\u2019aper\u00E7u Swiper.', 'lightbox-jlg'));\n                }\n            };\n\n            if (!mainSwiperEl) {\n                showFallback(mgaAdmin__('Pr\u00E9visualisation indisponible\u00A0: conteneur Swiper manquant.', 'lightbox-jlg'));\n            } else {\n                if (fallbackMessage) {\n                    fallbackMessage.hidden = true;\n                }\n\n                setPreviewState('loading');\n                announce(mgaAdmin__('Pr\u00E9paration de la pr\u00E9visualisation\u2026', 'lightbox-jlg'));\n\n                ensureSwiper(global, { namespace: 'admin-preview' })\n                    .then(() => {\n                        rebuildPreviewSwiper();\n                        if (previewSwiper && typeof previewSwiper.update === 'function') {\n                            previewSwiper.update();\n                        }\n                        announce(mgaAdmin__('Pr\u00E9visualisation pr\u00EAte.', 'lightbox-jlg'));\n                    })\n                    .catch(() => {\n                        showFallback(mgaAdmin__('Impossible de charger Swiper. La pr\u00E9visualisation interactive est d\u00E9sactiv\u00E9e.', 'lightbox-jlg'));\n                    });\n            }\n\n            const setAccent = (value, _element, event) => {\n                if (!previewMock) {\n                    return;\n                }\n\n                const color = isValidHexColor(value) ? value : '#6366f1';\n                previewMock.style.setProperty('--mga-preview-accent', color);\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdmin__('Couleur d\u2019accent mise \u00E0 jour.', 'lightbox-jlg'));\n                }\n            };\n\n            const setOverlay = (value, _element, event) => {\n                if (!previewMock) {\n                    return;\n                }\n\n                const numeric = parseFloat(value);\n\n                if (Number.isNaN(numeric)) {\n                    return;\n                }\n\n                const clamped = Math.min(Math.max(numeric, 0), 1);\n                previewMock.style.setProperty('--mga-preview-overlay', `rgba(15, 23, 42, ${clamped})`);\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdmin__('Opacit\u00E9 de l\u2019arri\u00E8re-plan mise \u00E0 jour.', 'lightbox-jlg'));\n                }\n            };\n\n            const setBackgroundStyle = (style, _element, event) => {\n                if (!previewMock) {\n                    return;\n                }\n\n                const normalized = typeof style === 'string' && style ? style : 'echo';\n                previewMock.setAttribute('data-preview-style', normalized);\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdmin__('Style d\u2019arri\u00E8re-plan actualis\u00E9.', 'lightbox-jlg'));\n                }\n            };\n\n            const toggleAction = (name, enabled, _element, event) => {\n                const actions = toolbarActions[name] || [];\n\n                actions.forEach((action) => {\n                    action.setAttribute('data-preview-hidden', enabled ? 'false' : 'true');\n                    action.setAttribute('aria-hidden', enabled ? 'false' : 'true');\n                });\n\n                if (shouldAnnounce(event)) {\n                    const label = {\n                        zoom: mgaAdmin__('Zoom', 'lightbox-jlg'),\n                        download: mgaAdmin__('T\u00E9l\u00E9chargement', 'lightbox-jlg'),\n                        share: mgaAdmin__('Partage', 'lightbox-jlg'),\n                        cta: mgaAdmin__('Appel \u00E0 l\u2019action', 'lightbox-jlg'),\n                        fullscreen: mgaAdmin__('Plein \u00E9cran', 'lightbox-jlg'),\n                    }[name] || name;\n\n                    announce(mgaAdminSprintf(\n                        enabled\n                            ? mgaAdmin__('%s activ\u00E9 dans l\u2019aper\u00E7u.', 'lightbox-jlg')\n                            : mgaAdmin__('%s masqu\u00E9 dans l\u2019aper\u00E7u.', 'lightbox-jlg'),\n                        label\n                    ));\n                }\n            };\n\n            const setThumbScale = (value, _element, event) => {\n                if (!thumbsContainer) {\n                    return;\n                }\n\n                const numeric = parseFloat(value);\n\n                if (Number.isNaN(numeric)) {\n                    thumbsContainer.style.setProperty('--mga-preview-thumb-scale', '1');\n                } else {\n                    const normalized = Math.min(Math.max(numeric / 90, 0.6), 1.4);\n                    thumbsContainer.style.setProperty('--mga-preview-thumb-scale', normalized.toString());\n                }\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdmin__('Taille des miniatures mise \u00E0 jour.', 'lightbox-jlg'));\n                }\n            };\n\n            const updateEffectLabel = (_value, _element, event) => {\n                if (!effectLabel) {\n                    return;\n                }\n\n                const effectSelect = doc.getElementById('mga_effect');\n                const delayInput = doc.getElementById('mga_delay');\n                const speedInput = doc.getElementById('mga_speed');\n                const effectValue = effectSelect ? effectSelect.value : '';\n                const delayValue = delayInput ? delayInput.value || '4' : '4';\n                const speedValue = speedInput ? speedInput.value || '600' : '600';\n                const effectLabelText = EFFECT_LABELS[effectValue] || mgaAdmin__('personnalis\u00E9e', 'lightbox-jlg');\n\n                effectLabel.textContent = mgaAdminSprintf(\n                    mgaAdmin__('Transition : %1$s \u2022 %2$ss / %3$sms', 'lightbox-jlg'),\n                    effectLabelText,\n                    delayValue,\n                    speedValue\n                );\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdminSprintf(\n                        mgaAdmin__('Transition mise \u00E0 jour\u00A0: %1$s, rythme de %2$ss.', 'lightbox-jlg'),\n                        effectLabelText,\n                        delayValue\n                    ));\n                }\n\n                rebuildPreviewSwiper();\n            };\n\n            const bindPreviewControl = (id, handler, events = ['change']) => {\n                const element = doc.getElementById(id);\n\n                if (!element || typeof handler !== 'function') {\n                    return;\n                }\n\n                const invoke = (event) => {\n                    const payload = element.type === 'checkbox' ? element.checked : element.value;\n                    handler(payload, element, event || { type: 'init' });\n                };\n\n                events.forEach((eventName) => {\n                    element.addEventListener(eventName, invoke);\n                });\n\n                invoke({ type: 'init' });\n            };\n\n            bindPreviewControl('mga_accent_color', setAccent, ['input', 'change']);\n            bindPreviewControl('mga_bg_opacity', setOverlay, ['input', 'change']);\n            bindPreviewControl('mga_background_style', setBackgroundStyle);\n            bindPreviewControl('mga_thumb_size', setThumbScale, ['input', 'change']);\n            bindPreviewControl('mga_show_zoom', (checked, element, event) => toggleAction('zoom', checked, element, event));\n            bindPreviewControl('mga_show_download', (checked, element, event) => toggleAction('download', checked, element, event));\n            bindPreviewControl('mga_show_share', (checked, element, event) => toggleAction('share', checked, element, event));\n            bindPreviewControl('mga_show_cta', (checked, element, event) => toggleAction('cta', checked, element, event));\n            bindPreviewControl('mga_show_fullscreen', (checked, element, event) => toggleAction('fullscreen', checked, element, event));\n            bindPreviewControl('mga_effect', updateEffectLabel);\n            bindPreviewControl('mga_delay', updateEffectLabel, ['input', 'change']);\n            bindPreviewControl('mga_speed', updateEffectLabel, ['input', 'change']);\n        };\n\n        initLivePreview();\n\n        const stylePresetExport = global.mgaStylePresets && typeof global.mgaStylePresets === 'object'\n            ? global.mgaStylePresets\n            : {};\n        const stylePresets = stylePresetExport.presets && typeof stylePresetExport.presets === 'object'\n            ? stylePresetExport.presets\n            : {};\n        const presetSelect = doc.getElementById('mga_style_preset');\n        const applyPresetButton = doc.querySelector('[data-mga-apply-style-preset]');\n        const resetPresetButton = doc.querySelector('[data-mga-reset-style-preset]');\n        const presetDescription = doc.querySelector('[data-mga-style-preset-description]');\n        let isApplyingPreset = false;\n\n        presetDiffTracker = createPresetDiffTracker(stylePresetExport.defaults || {});\n\n        if (presetDiffTracker && typeof presetDiffTracker.setNavigationApi === 'function') {\n            presetDiffTracker.setNavigationApi(navigationApi);\n        }\n\n        const maybeDispatchEvent = (element, eventType) => {\n            if (!element || typeof element.dispatchEvent !== 'function') {\n                return;\n            }\n\n            try {\n                element.dispatchEvent(new Event(eventType, { bubbles: true }));\n            } catch (error) {\n                if (typeof doc.createEvent === 'function') {\n                    try {\n                        const fallbackEvent = doc.createEvent('Event');\n                        fallbackEvent.initEvent(eventType, true, true);\n                        element.dispatchEvent(fallbackEvent);\n                    } catch (fallbackError) {\n                        // Ignore unsupported event creation paths.\n                    }\n                }\n            }\n        };\n\n        const setNumericInputValue = (id, value) => {\n            const input = doc.getElementById(id);\n\n            if (!input) {\n                return;\n            }\n\n            input.value = value;\n            maybeDispatchEvent(input, 'input');\n            maybeDispatchEvent(input, 'change');\n        };\n\n        const setRangeInputValue = setNumericInputValue;\n\n        const setSelectValue = (id, value) => {\n            const select = doc.getElementById(id);\n\n            if (!select) {\n                return;\n            }\n\n            select.value = value;\n            maybeDispatchEvent(select, 'change');\n        };\n\n        const setCheckboxValue = (id, value) => {\n            const checkbox = doc.getElementById(id);\n\n            if (!checkbox) {\n                return;\n            }\n\n            checkbox.checked = Boolean(value);\n            maybeDispatchEvent(checkbox, 'change');\n        };\n\n        const setAccentColorValue = (value) => {\n            if (!accentColorInput) {\n                return;\n            }\n\n            const targetColor = typeof value === 'string' ? value : '';\n            const maybeJQuery = global.jQuery;\n\n            if (maybeJQuery && typeof maybeJQuery.fn === 'object' && typeof maybeJQuery.fn.wpColorPicker === 'function') {\n                const picker = maybeJQuery(accentColorInput);\n\n                if (picker && typeof picker.wpColorPicker === 'function') {\n                    picker.wpColorPicker('color', targetColor);\n                    if (contrastInspector) {\n                        contrastInspector.update(targetColor);\n                    }\n                    return;\n                }\n            }\n\n            accentColorInput.value = targetColor;\n            maybeDispatchEvent(accentColorInput, 'change');\n\n            if (contrastInspector) {\n                contrastInspector.update(targetColor);\n            }\n        };\n\n        const applyPresetSettings = (settings) => {\n            if (!settings || typeof settings !== 'object') {\n                return;\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'delay')) {\n                setNumericInputValue('mga_delay', settings.delay);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'speed')) {\n                setNumericInputValue('mga_speed', settings.speed);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'effect')) {\n                setSelectValue('mga_effect', settings.effect);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'easing')) {\n                setSelectValue('mga_easing', settings.easing);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'thumbs_layout')) {\n                setSelectValue('mga_thumbs_layout', settings.thumbs_layout);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'thumb_size')) {\n                setRangeInputValue('mga_thumb_size', settings.thumb_size);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'thumb_size_mobile')) {\n                setRangeInputValue('mga_thumb_size_mobile', settings.thumb_size_mobile);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_thumbs_mobile')) {\n                setCheckboxValue('mga_show_thumbs_mobile', settings.show_thumbs_mobile);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'accent_color')) {\n                setAccentColorValue(settings.accent_color);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'bg_opacity')) {\n                setRangeInputValue('mga_bg_opacity', settings.bg_opacity);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'background_style')) {\n                setSelectValue('mga_background_style', settings.background_style);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'autoplay_start')) {\n                setCheckboxValue('mga_autoplay_start', settings.autoplay_start);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'loop')) {\n                setCheckboxValue('mga_loop', settings.loop);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_zoom')) {\n                setCheckboxValue('mga_show_zoom', settings.show_zoom);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_download')) {\n                setCheckboxValue('mga_show_download', settings.show_download);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_share')) {\n                setCheckboxValue('mga_show_share', settings.show_share);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_cta')) {\n                setCheckboxValue('mga_show_cta', settings.show_cta);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_fullscreen')) {\n                setCheckboxValue('mga_show_fullscreen', settings.show_fullscreen);\n            }\n        };\n\n        const updatePresetDescription = () => {\n            if (!presetDescription) {\n                return;\n            }\n\n            const key = presetSelect ? presetSelect.value : '';\n\n            if (key && stylePresets[key] && stylePresets[key].description) {\n                presetDescription.textContent = stylePresets[key].description;\n                return;\n            }\n\n            const customDescription = typeof stylePresetExport.customDescription === 'string'\n                ? stylePresetExport.customDescription\n                : '';\n            const baselineInfo = presetDiffTracker ? presetDiffTracker.getBaselineInfo() : { label: '', key: '' };\n            const baselineNote = baselineInfo && baselineInfo.label\n                ? mgaAdminSprintf(mgaAdmin__('Base\u00A0: %1$s.', 'lightbox-jlg'), baselineInfo.label)\n                : '';\n            const segments = [customDescription, baselineNote].filter((segment) => segment && segment.trim() !== '');\n\n            if (segments.length === 0) {\n                presetDescription.textContent = '';\n                return;\n            }\n\n            presetDescription.textContent = segments.join(' ');\n        };\n\n        const markPresetAsCustom = () => {\n            if (isApplyingPreset) {\n                return;\n            }\n\n            if (presetSelect && presetSelect.value !== '') {\n                presetSelect.value = '';\n            }\n\n            updatePresetDescription();\n\n            if (presetDiffTracker && typeof presetDiffTracker.refresh === 'function') {\n                presetDiffTracker.refresh();\n            }\n\n            scheduleSummaryRefresh();\n        };\n\n        const registerPresetWatcher = (id) => {\n            const element = doc.getElementById(id);\n\n            if (!element) {\n                return;\n            }\n\n            const eventNames = ['change'];\n\n            if (element.tagName === 'INPUT' && ['text', 'number', 'range'].includes(element.type)) {\n                eventNames.push('input');\n            }\n\n            eventNames.forEach((eventName) => {\n                element.addEventListener(eventName, markPresetAsCustom);\n            });\n        };\n\n        if (presetSelect) {\n            updatePresetDescription();\n            presetSelect.addEventListener('change', updatePresetDescription);\n        }\n\n        if (presetDiffTracker) {\n            if (presetSelect && presetSelect.value && stylePresets[presetSelect.value]) {\n                const initialPreset = stylePresets[presetSelect.value];\n\n                presetDiffTracker.setBaseline({\n                    key: presetSelect.value,\n                    label: initialPreset.label || presetSelect.options[presetSelect.selectedIndex]?.text || '',\n                    settings: initialPreset.settings || {},\n                });\n            } else {\n                presetDiffTracker.setBaseline({\n                    key: '',\n                    label: presetDiffTracker.getDefaultLabel(),\n                    settings: stylePresetExport.defaults || {},\n                });\n            }\n        }\n\n        if (applyPresetButton) {\n            applyPresetButton.addEventListener('click', (event) => {\n                event.preventDefault();\n\n                if (!presetSelect) {\n                    return;\n                }\n\n                const key = presetSelect.value;\n\n                if (!key || !stylePresets[key]) {\n                    return;\n                }\n\n                isApplyingPreset = true;\n                applyPresetSettings(stylePresets[key].settings || {});\n                if (presetDiffTracker) {\n                    presetDiffTracker.setBaseline({\n                        key,\n                        label: stylePresets[key].label || '',\n                        settings: stylePresets[key].settings || {},\n                    });\n                }\n                isApplyingPreset = false;\n                updatePresetDescription();\n                scheduleSummaryRefresh();\n            });\n        }\n\n        if (resetPresetButton) {\n            resetPresetButton.addEventListener('click', (event) => {\n                event.preventDefault();\n\n                const defaults = stylePresetExport.defaults || {};\n\n                if (defaults && typeof defaults === 'object' && Object.keys(defaults).length > 0) {\n                    isApplyingPreset = true;\n                    applyPresetSettings(defaults);\n                    if (presetDiffTracker) {\n                        presetDiffTracker.setBaseline({\n                            key: '',\n                            label: presetDiffTracker.getDefaultLabel(),\n                            settings: defaults,\n                        });\n                    }\n                    isApplyingPreset = false;\n                }\n\n                if (presetSelect) {\n                    presetSelect.value = '';\n                }\n\n                updatePresetDescription();\n                scheduleSummaryRefresh();\n            });\n        }\n\n        [\n            'mga_delay',\n            'mga_speed',\n            'mga_effect',\n            'mga_easing',\n            'mga_thumb_size',\n            'mga_thumb_size_mobile',\n            'mga_thumbs_layout',\n            'mga_accent_color',\n            'mga_bg_opacity',\n            'mga_background_style',\n            'mga_show_thumbs_mobile',\n            'mga_autoplay_start',\n            'mga_loop',\n            'mga_show_zoom',\n            'mga_show_download',\n            'mga_show_share',\n            'mga_show_cta',\n            'mga_show_fullscreen',\n        ].forEach(registerPresetWatcher);\n\n        const shareRepeater = doc.querySelector('[data-share-repeater]');\n\n        if (shareRepeater) {\n            initShareRepeater(shareRepeater);\n        }\n\n        const selectorsWrapper = doc.querySelector('[data-mga-content-selectors]');\n\n        if (selectorsWrapper) {\n            const selectorsList = selectorsWrapper.querySelector('[data-mga-content-selectors-list]');\n            const selectorsTextarea = selectorsWrapper.querySelector('[data-mga-content-selectors-textarea]');\n            const template = doc.getElementById('mga-content-selector-template');\n            const placeholder = selectorsWrapper.getAttribute('data-mga-selector-placeholder') || '';\n            let isSyncingSelectors = false;\n            let addRow = () => {};\n\n            if (selectorsList) {\n                const queryRows = () => selectorsList.querySelectorAll('[data-mga-content-selector-row]');\n                const queryInputs = () => selectorsList.querySelectorAll('[data-mga-content-selector-input]');\n                const hasEmptyRow = () => Array.from(queryInputs()).some((input) => input.value.trim() === '');\n\n                const updateRemoveState = () => {\n                    const rows = queryRows();\n                    const disable = rows.length <= 1;\n\n                    rows.forEach((row) => {\n                        const removeButton = row.querySelector('[data-mga-remove-selector]');\n\n                        if (removeButton) {\n                            removeButton.disabled = disable;\n                            removeButton.setAttribute('aria-disabled', disable ? 'true' : 'false');\n                        }\n                    });\n                };\n\n                const getRowValues = () => Array.from(queryInputs()).map((input) => input.value.trim()).filter((value) => value !== '');\n\n                const syncTextareaFromRows = () => {\n                    if (!selectorsTextarea || isSyncingSelectors) {\n                        return;\n                    }\n\n                    const values = getRowValues();\n                    isSyncingSelectors = true;\n                    selectorsTextarea.value = values.join('\\n');\n                    isSyncingSelectors = false;\n                };\n\n                const bindRow = (row) => {\n                    if (!row || row.getAttribute('data-mga-selector-bound') === 'true') {\n                        return;\n                    }\n\n                    const removeButton = row.querySelector('[data-mga-remove-selector]');\n\n                    if (removeButton) {\n                        removeButton.addEventListener('click', (event) => {\n                            event.preventDefault();\n                            const rows = queryRows();\n\n                            if (rows.length <= 1) {\n                                const input = row.querySelector('[data-mga-content-selector-input]');\n\n                                if (input) {\n                                    input.value = '';\n                                    syncTextareaFromRows();\n                                }\n\n                                return;\n                            }\n\n                            row.remove();\n                            updateRemoveState();\n                            syncTextareaFromRows();\n                        });\n                    }\n\n                    const input = row.querySelector('[data-mga-content-selector-input]');\n\n                    if (input) {\n                        input.addEventListener('input', () => {\n                            if (!isSyncingSelectors) {\n                                syncTextareaFromRows();\n                            }\n                        });\n\n                        input.addEventListener('keydown', (event) => {\n                            if (event.key !== 'Enter' || event.shiftKey || event.altKey || event.metaKey || event.ctrlKey) {\n                                return;\n                            }\n\n                            event.preventDefault();\n\n                            if (!hasEmptyRow() && typeof addRow === 'function') {\n                                addRow('');\n                                return;\n                            }\n\n                            const rows = queryRows();\n\n                            if (rows.length === 0) {\n                                return;\n                            }\n\n                            const lastRow = rows[rows.length - 1];\n\n                            if (!lastRow) {\n                                return;\n                            }\n\n                            const lastInput = lastRow.querySelector('[data-mga-content-selector-input]');\n\n                            if (lastInput && lastInput !== event.target) {\n                                safeFocus(lastInput);\n                            }\n                        });\n\n                        if (placeholder && !input.getAttribute('placeholder')) {\n                            input.setAttribute('placeholder', placeholder);\n                        }\n                    }\n\n                    row.setAttribute('data-mga-selector-bound', 'true');\n                };\n\n                const createRow = (value = '') => {\n                    let row = null;\n\n                    if (template && template.content) {\n                        const fragment = doc.importNode(template.content, true);\n\n                        row = fragment.firstElementChild;\n                        if (row) {\n                            const input = row.querySelector('[data-mga-content-selector-input]');\n\n                            if (input) {\n                                input.value = value;\n\n                                if (placeholder) {\n                                    input.setAttribute('placeholder', placeholder);\n                                }\n                            }\n\n                            bindRow(row);\n\n                            return row;\n                        }\n                    }\n\n                    row = doc.createElement('div');\n                    row.className = 'mga-content-selectors__row';\n                    row.setAttribute('data-mga-content-selector-row', '');\n\n                    const input = doc.createElement('input');\n                    input.type = 'text';\n                    input.className = 'regular-text';\n                    input.setAttribute('data-mga-content-selector-input', '');\n                    input.value = value;\n\n                    if (placeholder) {\n                        input.setAttribute('placeholder', placeholder);\n                    }\n\n                    row.appendChild(input);\n\n                    const removeButton = doc.createElement('button');\n                    removeButton.type = 'button';\n                    removeButton.className = 'button-link mga-content-selectors__remove';\n                    removeButton.setAttribute('data-mga-remove-selector', '');\n                    removeButton.textContent = mgaAdmin__('Retirer', 'lightbox-jlg');\n                    row.appendChild(removeButton);\n\n                    bindRow(row);\n\n                    return row;\n                };\n\n                const renderRows = (values) => {\n                    selectorsList.innerHTML = '';\n\n                    if (values.length === 0) {\n                        const emptyRow = createRow('');\n                        if (emptyRow) {\n                            selectorsList.appendChild(emptyRow);\n                        }\n                    } else {\n                        values.forEach((value) => {\n                            const row = createRow(value);\n\n                            if (row) {\n                                selectorsList.appendChild(row);\n                            }\n                        });\n                    }\n\n                    updateRemoveState();\n                };\n\n                const syncRowsFromTextarea = () => {\n                    if (!selectorsTextarea || isSyncingSelectors) {\n                        return;\n                    }\n\n                    const values = selectorsTextarea.value\n                        .split(/\\r\\n|\\r|\\n/)\n                        .map((selector) => selector.trim())\n                        .filter((selector) => selector.length > 0);\n\n                    isSyncingSelectors = true;\n                    renderRows(values);\n                    isSyncingSelectors = false;\n                };\n\n                addRow = (value = '') => {\n                    const row = createRow(value);\n\n                    if (row) {\n                        selectorsList.appendChild(row);\n                        updateRemoveState();\n\n                        const input = row.querySelector('[data-mga-content-selector-input]');\n\n                        if (input) {\n                            safeFocus(input);\n                        }\n                    }\n\n                    syncTextareaFromRows();\n                };\n\n                if (selectorsTextarea) {\n                    syncRowsFromTextarea();\n\n                    selectorsTextarea.addEventListener('input', () => {\n                        if (!isSyncingSelectors) {\n                            syncRowsFromTextarea();\n                        }\n                    });\n                } else {\n                    renderRows([]);\n                }\n\n                const addButton = selectorsWrapper.querySelector('[data-mga-add-selector]');\n\n                if (addButton) {\n                    addButton.addEventListener('click', (event) => {\n                        event.preventDefault();\n                        addRow();\n                    });\n                }\n            }\n        }\n        function initShareRepeater(container) {\n            const list = container.querySelector('[data-share-repeater-list]');\n            const addButton = container.querySelector('[data-share-repeater-add]');\n            const template = doc.getElementById('mga-share-channel-template');\n\n            if (!list || !template) {\n                return;\n            }\n\n            let uidSeed = Date.now();\n\n            const generateUid = () => {\n                uidSeed += 1;\n                return `mga-share-channel-${uidSeed}`;\n            };\n\n            const ensureItemUid = (item) => {\n                if (!item) {\n                    return null;\n                }\n\n                if (!item.dataset.shareUid || item.dataset.shareUid.trim() === '') {\n                    item.dataset.shareUid = generateUid();\n                }\n\n                return item.dataset.shareUid;\n            };\n\n            const applyUid = (item) => {\n                const uid = ensureItemUid(item);\n\n                if (!uid) {\n                    return;\n                }\n\n                const idElements = item.querySelectorAll('[data-share-id-suffix]');\n\n                idElements.forEach((element) => {\n                    const suffix = element.getAttribute('data-share-id-suffix');\n\n                    if (!suffix) {\n                        return;\n                    }\n\n                    const id = `${uid}-${suffix}`;\n\n                    if (element.tagName === 'LABEL') {\n                        element.setAttribute('for', id);\n                    } else {\n                        element.id = id;\n                    }\n                });\n            };\n\n            const refreshItemTitle = (item) => {\n                if (!item) {\n                    return;\n                }\n\n                const title = item.querySelector('[data-share-repeater-title]');\n\n                if (!title) {\n                    return;\n                }\n\n                const labelInput = item.querySelector('[data-share-field=\"label\"]');\n                const keyInput = item.querySelector('[data-share-field=\"key\"]');\n                const labelValue = labelInput && typeof labelInput.value === 'string' ? labelInput.value.trim() : '';\n                const keyValue = keyInput && typeof keyInput.value === 'string' ? keyInput.value.trim() : '';\n                const fallback = keyValue ? keyValue.toUpperCase() : mgaAdmin__('Nouveau canal', 'lightbox-jlg');\n\n                title.textContent = labelValue || fallback;\n            };\n\n            const updateIconPreview = (item) => {\n                if (!item) {\n                    return;\n                }\n\n                const preview = item.querySelector('[data-share-icon-preview]');\n                const select = item.querySelector('[data-share-field=\"icon\"]');\n\n                if (!preview) {\n                    return;\n                }\n\n                const iconKey = select ? select.value : '';\n                const iconSvg = createShareIconPreview(iconKey);\n\n                preview.innerHTML = '';\n\n                if (iconSvg) {\n                    preview.appendChild(iconSvg);\n                }\n\n                const summaryIcon = item.querySelector('[data-share-preview-icon]');\n\n                if (summaryIcon) {\n                    summaryIcon.innerHTML = '';\n\n                    const summarySvg = createShareIconPreview(iconKey);\n\n                    if (summarySvg) {\n                        summaryIcon.appendChild(summarySvg);\n                    }\n                }\n            };\n\n            const getShareField = (item, key) => {\n                if (!item || !key) {\n                    return null;\n                }\n\n                return item.querySelector(`[data-share-field=\"${key}\"]`);\n            };\n\n            const getShareFieldValue = (item, key) => {\n                const field = getShareField(item, key);\n                const value = field && typeof field.value === 'string' ? field.value.trim() : '';\n                return value;\n            };\n\n            const buildSharePreviewUrl = (template) => {\n                if (typeof template !== 'string') {\n                    return '';\n                }\n\n                let previewValue = template;\n\n                Object.keys(SHARE_TEMPLATE_PLACEHOLDERS).forEach((token) => {\n                    const replacement = encodeURIComponent(SHARE_TEMPLATE_PLACEHOLDERS[token]);\n                    previewValue = previewValue.replace(new RegExp(token, 'gi'), replacement);\n                });\n\n                return previewValue;\n            };\n\n            const hasRequiredPlaceholder = (template) => /%url%/i.test(typeof template === 'string' ? template : '');\n\n            const isTemplateSchemeValid = (template) => {\n                if (typeof template !== 'string') {\n                    return false;\n                }\n\n                const trimmed = template.trim();\n\n                if (trimmed === '') {\n                    return false;\n                }\n\n                const scheme = trimmed.split(':')[0].toLowerCase();\n\n                if (!SHARE_TEMPLATE_SCHEMES.includes(scheme)) {\n                    return false;\n                }\n\n                if (scheme === 'http' || scheme === 'https') {\n                    return /^https?:\\/\\//i.test(trimmed);\n                }\n\n                return true;\n            };\n\n            const applyFieldError = (field, messageElement, message) => {\n                const hasMessage = typeof message === 'string' && message !== '';\n\n                if (field) {\n                    if (hasMessage) {\n                        field.classList.add('mga-field-error');\n                        field.setAttribute('aria-invalid', 'true');\n                    } else {\n                        field.classList.remove('mga-field-error');\n                        field.removeAttribute('aria-invalid');\n                    }\n                }\n\n                if (messageElement) {\n                    if (hasMessage) {\n                        messageElement.textContent = message;\n                        messageElement.removeAttribute('hidden');\n                    } else {\n                        messageElement.textContent = '';\n                        messageElement.setAttribute('hidden', 'hidden');\n                    }\n                }\n            };\n\n            const updateSharePreview = (item) => {\n                if (!item) {\n                    return;\n                }\n\n                const preview = item.querySelector('[data-share-preview]');\n\n                if (!preview) {\n                    return;\n                }\n\n                const labelElement = preview.querySelector('[data-share-preview-label]');\n                const urlElement = preview.querySelector('[data-share-preview-url]');\n                const labelValue = getShareFieldValue(item, 'label');\n                const keyValue = getShareFieldValue(item, 'key');\n                const fallbackLabel = keyValue ? keyValue.toUpperCase() : mgaAdmin__('Nouveau canal', 'lightbox-jlg');\n\n                if (labelElement) {\n                    labelElement.textContent = labelValue || fallbackLabel;\n                }\n\n                if (urlElement) {\n                    const templateValue = getShareFieldValue(item, 'template');\n\n                    if (templateValue) {\n                        const previewUrl = buildSharePreviewUrl(templateValue);\n                        urlElement.textContent = previewUrl;\n                        urlElement.setAttribute('data-preview-empty', 'false');\n                        urlElement.title = previewUrl;\n                    } else {\n                        urlElement.textContent = mgaAdmin__('Compl\u00E9tez le mod\u00E8le pour g\u00E9n\u00E9rer un lien.', 'lightbox-jlg');\n                        urlElement.setAttribute('data-preview-empty', 'true');\n                        urlElement.removeAttribute('title');\n                    }\n                }\n\n                scheduleSummaryRefresh();\n            };\n\n            const validateShareItems = () => {\n                const items = Array.from(list.querySelectorAll('[data-share-repeater-item]'));\n                const keyOccurrences = items.reduce((accumulator, item) => {\n                    const keyValue = getShareFieldValue(item, 'key').toLowerCase();\n\n                    if (keyValue) {\n                        accumulator[keyValue] = (accumulator[keyValue] || 0) + 1;\n                    }\n\n                    return accumulator;\n                }, {});\n\n                items.forEach((item) => {\n                    const keyInput = getShareField(item, 'key');\n                    const templateInput = getShareField(item, 'template');\n                    const keyMessageEl = item.querySelector('[data-share-error=\"key\"]');\n                    const templateMessageEl = item.querySelector('[data-share-error=\"template\"]');\n                    const rawKeyValue = getShareFieldValue(item, 'key');\n                    const normalizedKey = rawKeyValue.toLowerCase();\n                    let keyMessage = '';\n\n                    if (!rawKeyValue) {\n                        keyMessage = mgaAdmin__('Renseignez une cl\u00E9 pour ce canal.', 'lightbox-jlg');\n                    } else if (!/^[a-z0-9_-]+$/i.test(rawKeyValue)) {\n                        keyMessage = mgaAdmin__('Utilisez uniquement des lettres, chiffres ou tirets.', 'lightbox-jlg');\n                    } else if (keyOccurrences[normalizedKey] > 1) {\n                        keyMessage = mgaAdmin__('Chaque cl\u00E9 doit \u00EAtre unique.', 'lightbox-jlg');\n                    }\n\n                    applyFieldError(keyInput, keyMessageEl, keyMessage);\n\n                    const templateValue = getShareFieldValue(item, 'template');\n                    let templateMessage = '';\n\n                    if (!templateValue) {\n                        templateMessage = mgaAdmin__('Renseignez un mod\u00E8le d\u2019URL.', 'lightbox-jlg');\n                    } else if (!hasRequiredPlaceholder(templateValue)) {\n                        templateMessage = mgaAdmin__('Ajoutez au moins le jeton %url% pour construire le lien.', 'lightbox-jlg');\n                    } else if (!isTemplateSchemeValid(templateValue)) {\n                        templateMessage = mgaAdmin__('Indiquez une URL valide (http, https, mailto, tel ou sms).', 'lightbox-jlg');\n                    }\n\n                    applyFieldError(templateInput, templateMessageEl, templateMessage);\n                });\n            };\n\n            const updateItemNames = () => {\n                const items = Array.from(list.querySelectorAll('[data-share-repeater-item]'));\n\n                items.forEach((item, index) => {\n                    const baseName = `mga_settings[share_channels][${index}]`;\n                    const fields = item.querySelectorAll('[data-share-field]');\n\n                    fields.forEach((field) => {\n                        const fieldKey = field.getAttribute('data-share-field');\n\n                        if (!fieldKey) {\n                            return;\n                        }\n\n                        let effectiveKey = fieldKey;\n\n                        if (fieldKey === 'enabled-hidden') {\n                            effectiveKey = 'enabled';\n                        }\n\n                        field.name = `${baseName}[${effectiveKey}]`;\n                    });\n\n                    applyUid(item);\n                    refreshItemTitle(item);\n                    updateIconPreview(item);\n                    updateSharePreview(item);\n                });\n\n                validateShareItems();\n\n                scheduleSummaryRefresh();\n            };\n\n            const focusItemField = (item) => {\n                if (!item) {\n                    return;\n                }\n\n                const target = item.querySelector('[data-share-field=\"label\"]') || item;\n                safeFocus(target);\n            };\n\n            list.addEventListener('input', (event) => {\n                const target = event.target;\n\n                if (!target) {\n                    return;\n                }\n\n                const item = target.closest('[data-share-repeater-item]');\n\n                if (!item) {\n                    return;\n                }\n\n                if (target.matches('[data-share-field=\"label\"], [data-share-field=\"key\"]')) {\n                    refreshItemTitle(item);\n                }\n\n                if (target.matches('[data-share-field=\"icon\"]')) {\n                    updateIconPreview(item);\n                }\n\n                updateSharePreview(item);\n                validateShareItems();\n            });\n\n            list.addEventListener('change', (event) => {\n                const target = event.target;\n\n                if (!target || !target.matches('[data-share-field=\"icon\"]')) {\n                    return;\n                }\n\n                const item = target.closest('[data-share-repeater-item]');\n\n                if (item) {\n                    updateIconPreview(item);\n                    updateSharePreview(item);\n                    validateShareItems();\n                }\n            });\n\n            list.addEventListener('click', (event) => {\n                const button = event.target.closest('[data-share-action]');\n\n                if (!button) {\n                    return;\n                }\n\n                event.preventDefault();\n\n                const action = button.getAttribute('data-share-action');\n                const item = button.closest('[data-share-repeater-item]');\n\n                if (!item) {\n                    return;\n                }\n\n                if (action === 'remove') {\n                    const nextFocusItem = item.nextElementSibling || item.previousElementSibling;\n\n                    if (item.parentNode === list) {\n                        list.removeChild(item);\n                    }\n\n                    updateItemNames();\n                    scheduleSummaryRefresh();\n\n                    if (nextFocusItem) {\n                        focusItemField(nextFocusItem);\n                    }\n\n                    return;\n                }\n\n                if (action === 'move-up') {\n                    const previous = item.previousElementSibling;\n\n                    if (previous) {\n                        list.insertBefore(item, previous);\n                        updateItemNames();\n                        focusItemField(item);\n                        scheduleSummaryRefresh();\n                    }\n\n                    return;\n                }\n\n                if (action === 'move-down') {\n                    const next = item.nextElementSibling;\n\n                    if (next) {\n                        list.insertBefore(next, item);\n                        updateItemNames();\n                        focusItemField(item);\n                        scheduleSummaryRefresh();\n                    }\n                }\n            });\n\n            if (addButton) {\n                addButton.addEventListener('click', (event) => {\n                    event.preventDefault();\n\n                    const fragment = doc.importNode(template.content, true);\n                    const newItem = fragment.querySelector('[data-share-repeater-item]');\n\n                    if (!newItem) {\n                        return;\n                    }\n\n                    list.appendChild(newItem);\n                    updateItemNames();\n                    focusItemField(newItem);\n                    scheduleSummaryRefresh();\n                });\n            }\n\n            updateItemNames();\n            scheduleSummaryRefresh();\n        }\n    });\n})(typeof window !== 'undefined' ? window : globalThis);\n"],
  "mappings": "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",
  "names": ["TOKEN_REGEX", "createFallbackSprintf", "createSprintf", "createTranslate", "resolveI18n", "init_sprintf", "__esmMin", "format", "args", "autoIndex", "match", "position", "argIndex", "type", "numericIndex", "value", "coerced", "i18n", "text", "globalObject", "SHARE_ICON_LIBRARY", "sanitizeIconKey", "getDefinition", "createSvgElement", "createIconSvg", "createIconPreview", "init_icons", "__esmMin", "value", "iconKey", "sanitizedKey", "doc", "tag", "attributes", "element", "attribute", "definition", "svg", "pathDefinition", "path", "wrapperTag", "wrapperClass", "wrapper", "focusSupportsOptionsCache", "detectFocusOptionsSupport", "safeFocus", "exposeOnWindow", "init_focus", "__esmMin", "doc", "testElement", "root", "error", "element", "options", "getTimestamp", "getDocument", "getMetricsStore", "recordMetric", "normalizeAttempts", "loadStylesheet", "loadScript", "getLoaderState", "attemptLoad", "runAttemptsSequentially", "getConfig", "ensureSwiper", "init_swiper", "__esmMin", "global", "namespace", "event", "detail", "store", "customEvent", "error", "config", "attempt", "key", "js", "css", "inject", "jsSrc", "doc", "existing", "link", "resolve", "reject", "script", "timeoutId", "cleanup", "attempts", "promise", "explicitConfig", "options", "state", "init_shared", "__esmMin", "init_sprintf", "init_icons", "init_focus", "init_swiper", "require_admin", "__commonJSMin", "exports", "module", "init_shared", "global", "exposeOnWindow", "mgaAdminI18n", "resolveI18n", "mgaAdmin__", "createTranslate", "mgaAdminSprintf", "createSprintf", "detectFocusOptionsSupport", "safeFocus", "doc", "createShareIconPreview", "iconKey", "preview", "createIconPreview", "sanitizeIconKey", "SHARE_TEMPLATE_SAMPLE", "SHARE_TEMPLATE_PLACEHOLDERS", "SHARE_TEMPLATE_SCHEMES", "isValidHexColor", "value", "_a", "form", "adminRoot", "scheduleSummaryRefresh", "THEME_STORAGE_KEY", "THEME_OPTIONS", "themeSelect", "systemThemeQuery", "readStoredTheme", "error", "writeStoredTheme", "normalizeThemePreference", "trimmed", "currentThemePreference", "resolveAppliedTheme", "preference", "applyThemePreference", "options", "normalizedPreference", "resolvedTheme", "event", "nextPreference", "handleSystemThemeChange", "wizardApi", "targetForm", "wizard", "stepPanels", "indicators", "prevButton", "nextButton", "submitButton", "statusElement", "summaryIndex", "currentIndex", "panel", "getMessages", "setStatusMessage", "state", "message", "statusMessage", "updateControls", "focusPanel", "focusTarget", "focusOptions", "deactivatePanel", "activatePanel", "updateIndicators", "indicator", "index", "updateSummaryContainers", "timeoutId", "presetTarget", "timingTarget", "toolbarTarget", "shareTarget", "validationContainer", "diffContainer", "diffList", "diffBaseline", "diffEmpty", "scoreboardContainer", "scorecardMap", "map", "card", "key", "applyScorecardState", "payload", "level", "statusEl", "pointsContainer", "point", "item", "renderScoreboard", "scores", "scoreKey", "severityRank", "computeLevelFromPoints", "points", "highest", "resolveCardMessage", "cardKey", "variants", "readNumberValue", "id", "element", "readSelectValue", "readSelectLabel", "fallback", "selectedOption", "option", "readCheckboxValue", "formatSecondsValue", "rounded", "evaluateScoreboard", "validations", "diff", "baselineInfo", "worstValidation", "buildUxScore", "delayValue", "effectValue", "effectLabel", "autoplay", "showThumbsMobile", "thumbsLayout", "formattedDelay", "delayState", "delayText", "navState", "navText", "heavyEffects", "normalizedEffect", "effectDisplayLabel", "animState", "animText", "buildAccessibilityScore", "startOnClicked", "contrastState", "contrastText", "autoplayState", "autoplayText", "contextState", "contextText", "buildReliabilityScore", "includeSvg", "allowFallback", "debugMode", "loadArchives", "assetsState", "assetsText", "fallbackState", "fallbackText", "debugState", "debugText", "buildVisualScore", "presetSelect", "presetValue", "accentInput", "rawAccentValue", "backgroundValue", "backgroundLabel", "hasDiff", "baselineLabel", "presetLabel", "candidate", "presetState", "presetText", "accentLower", "accentState", "accentText", "backgroundState", "backgroundText", "renderToolbarSummary", "active", "toggle", "input", "renderPresetSummary", "label", "renderTimingSummary", "delayInput", "effectSelect", "renderShareSummary", "activeLabels", "enabledField", "labelField", "keyField", "labelValue", "keyValue", "collectValidations", "audit", "entry", "renderValidations", "validation", "alert", "renderPresetDiff", "row", "values", "beforeValue", "arrow", "afterValue", "update", "goToStep", "targetIndex", "normalizedIndex", "currentPanel", "nextPanel", "handleNext", "handlePrev", "attachIndicatorNavigation", "handleFormInput", "config", "ajaxUrl", "nonce", "setStatus", "explicitMessage", "setSavingState", "isSaving", "formData", "response", "successMessage", "fallbackMessage", "navigationApi", "noopApi", "layout", "sections", "navList", "navLinks", "linkBySection", "navItemBySection", "navBadgeBySection", "viewToggle", "viewSelect", "VIEW_STORAGE_KEY", "currentViewMode", "syncViewSelect", "persistViewMode", "updateLayoutViewMode", "getSectionVisibility", "section", "searchInput", "emptyState", "highlightTimeouts", "isSearchActive", "updateEmptyState", "visibleCount", "searchActive", "setActiveLink", "link", "clearHighlights", "highlightSection", "filterSections", "rawQuery", "query", "navItem", "firstMatch", "applyViewMode", "nextMode", "normalized", "currentQuery", "href", "target", "badge", "lastVisibleSection", "observer", "entries", "handleScroll", "bestSection", "bestOffset", "scrollY", "absoluteTop", "delta", "isModified", "bindRangeToOutput", "sliderId", "outputId", "displayFormatter", "ariaFormatter", "slider", "output", "updateOutput", "displayValue", "ariaValue", "accentColorInput", "accentColorPreview", "defaultColorAttr", "fallbackColor", "applyPreviewColor", "rawColor", "color", "maybeJQuery", "ui", "colorValue", "defaultColor", "previewContainer", "previewMock", "thumbsContainer", "statusRegion", "mainSwiperEl", "paginationEl", "toolbarActions", "previewSwiper", "shouldAnnounce", "announce", "setPreviewState", "showFallback", "destroyPreviewSwiper", "parseNumber", "fallbackValue", "numeric", "buildSwiperConfig", "speedInput", "delaySeconds", "speedValue", "autoplayDelay", "speed", "swiper", "rebuildPreviewSwiper", "ensureSwiper", "setAccent", "_element", "setOverlay", "clamped", "setBackgroundStyle", "style", "toggleAction", "name", "enabled", "action", "setThumbScale", "updateEffectLabel", "_value", "effectLabelText", "bindPreviewControl", "handler", "events", "invoke", "eventName", "checked", "stylePresetExport", "stylePresets", "applyPresetButton", "resetPresetButton", "presetDescription", "isApplyingPreset", "maybeDispatchEvent", "eventType", "fallbackEvent", "fallbackError", "setNumericInputValue", "setRangeInputValue", "setSelectValue", "select", "setCheckboxValue", "checkbox", "setAccentColorValue", "targetColor", "picker", "applyPresetSettings", "settings", "updatePresetDescription", "customDescription", "baselineNote", "segments", "segment", "markPresetAsCustom", "registerPresetWatcher", "eventNames", "initialPreset", "defaults", "shareRepeater", "initShareRepeater", "selectorsWrapper", "selectorsList", "selectorsTextarea", "template", "placeholder", "isSyncingSelectors", "addRow", "queryRows", "queryInputs", "hasEmptyRow", "updateRemoveState", "rows", "disable", "removeButton", "getRowValues", "syncTextareaFromRows", "bindRow", "lastRow", "lastInput", "createRow", "renderRows", "emptyRow", "syncRowsFromTextarea", "selector", "addButton", "container", "list", "uidSeed", "generateUid", "ensureItemUid", "applyUid", "uid", "suffix", "refreshItemTitle", "title", "labelInput", "keyInput", "updateIconPreview", "iconSvg", "summaryIcon", "summarySvg", "getShareField", "getShareFieldValue", "field", "buildSharePreviewUrl", "previewValue", "token", "replacement", "hasRequiredPlaceholder", "isTemplateSchemeValid", "scheme", "applyFieldError", "messageElement", "hasMessage", "updateSharePreview", "labelElement", "urlElement", "fallbackLabel", "templateValue", "previewUrl", "validateShareItems", "items", "keyOccurrences", "accumulator", "templateInput", "keyMessageEl", "templateMessageEl", "rawKeyValue", "normalizedKey", "keyMessage", "templateMessage", "updateItemNames", "baseName", "fieldKey", "effectiveKey", "focusItemField", "button", "nextFocusItem", "previous", "next", "newItem"]
}
