{
  "version": 3,
  "sources": ["../src/shared/sprintf.js", "../src/shared/icons.js", "../src/shared/focus.js", "../src/shared/swiper.js", "../src/shared/index.js", "../src/admin.js"],
  "sourcesContent": ["const TOKEN_REGEX = /%(\\d+\\$)?[sd]/g;\n\nconst createFallbackSprintf = () => (format, ...args) => {\n    let autoIndex = 0;\n\n    return String(format).replace(TOKEN_REGEX, (match, position) => {\n        let argIndex;\n        const type = match.charAt(match.length - 1);\n\n        if (position) {\n            const numericIndex = parseInt(position.slice(0, -1), 10);\n\n            if (Number.isNaN(numericIndex) || numericIndex <= 0) {\n                return '';\n            }\n\n            argIndex = numericIndex - 1;\n        } else {\n            argIndex = autoIndex;\n            autoIndex += 1;\n        }\n\n        const value = argIndex >= 0 && argIndex < args.length ? args[argIndex] : undefined;\n\n        if (type === 'd') {\n            const coerced = parseInt(value, 10);\n            return Number.isNaN(coerced) ? '' : String(coerced);\n        }\n\n        if (typeof value === 'undefined') {\n            return '';\n        }\n\n        return String(value);\n    });\n};\n\nexport const createSprintf = (i18n) => {\n    if (i18n && typeof i18n.sprintf === 'function') {\n        return i18n.sprintf;\n    }\n\n    return createFallbackSprintf();\n};\n\nexport const createTranslate = (i18n) => {\n    if (i18n && typeof i18n.__ === 'function') {\n        return i18n.__;\n    }\n\n    return (text) => text;\n};\n\nexport const resolveI18n = (globalObject) => {\n    if (!globalObject || typeof globalObject !== 'object') {\n        return null;\n    }\n\n    if (globalObject.wp && globalObject.wp.i18n) {\n        return globalObject.wp.i18n;\n    }\n\n    return null;\n};\n\nexport const getSharedI18n = () => resolveI18n(typeof window !== 'undefined' ? window : globalThis);\n\nexport const getSharedSprintf = () => createSprintf(getSharedI18n());\n\nexport const getSharedTranslate = () => createTranslate(getSharedI18n());\n\nexport default {\n    createSprintf,\n    createTranslate,\n    getSharedI18n,\n    getSharedSprintf,\n    getSharedTranslate,\n};\n", "const SHARE_ICON_LIBRARY = {\n    facebook: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z' },\n        ],\n    },\n    twitter: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z' },\n        ],\n    },\n    linkedin: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z' },\n        ],\n    },\n    pinterest: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z' },\n        ],\n    },\n    whatsapp: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z' },\n        ],\n    },\n    telegram: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z' },\n        ],\n    },\n    email: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z' },\n        ],\n    },\n    link: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z' },\n        ],\n    },\n    generic: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z' },\n            { d: 'M13 17h-2v-2h2zm0-4h-2V7h2z' },\n        ],\n    },\n    copy: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z' },\n        ],\n    },\n    download: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z' },\n        ],\n    },\n    native: {\n        viewBox: '0 0 24 24',\n        paths: [\n            { d: 'M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z' },\n        ],\n    },\n};\n\nexport const sanitizeIconKey = (value) => {\n    if (typeof value !== 'string') {\n        return '';\n    }\n\n    return value.trim().toLowerCase().replace(/[^a-z0-9_-]/g, '');\n};\n\nconst getDefinition = (iconKey) => {\n    const sanitizedKey = sanitizeIconKey(iconKey);\n\n    if (sanitizedKey && SHARE_ICON_LIBRARY[sanitizedKey]) {\n        return SHARE_ICON_LIBRARY[sanitizedKey];\n    }\n\n    return SHARE_ICON_LIBRARY.generic;\n};\n\nexport const createSvgElement = (doc, tag, attributes = {}) => {\n    if (!doc || typeof doc.createElementNS !== 'function') {\n        return null;\n    }\n\n    const element = doc.createElementNS('http://www.w3.org/2000/svg', tag);\n\n    Object.keys(attributes).forEach((attribute) => {\n        element.setAttribute(attribute, attributes[attribute]);\n    });\n\n    return element;\n};\n\nexport const createIconSvg = (doc, iconKey) => {\n    const definition = getDefinition(iconKey);\n    const svg = createSvgElement(doc, 'svg', {\n        viewBox: definition.viewBox,\n        fill: 'currentColor',\n        'aria-hidden': 'true',\n        focusable: 'false',\n    });\n\n    if (!svg) {\n        return null;\n    }\n\n    if (Array.isArray(definition.paths)) {\n        definition.paths.forEach((pathDefinition) => {\n            const path = createSvgElement(doc, 'path', pathDefinition);\n\n            if (path) {\n                svg.appendChild(path);\n            }\n        });\n    }\n\n    return svg;\n};\n\nexport const createIconPreview = (doc, iconKey, { wrapperTag = 'span', wrapperClass = '' } = {}) => {\n    if (!doc || typeof doc.createElement !== 'function') {\n        return null;\n    }\n\n    const wrapper = doc.createElement(wrapperTag);\n\n    if (wrapperClass) {\n        wrapper.className = wrapperClass;\n    }\n\n    const svg = createIconSvg(doc, iconKey);\n\n    if (!svg) {\n        return null;\n    }\n\n    wrapper.appendChild(svg);\n\n    return wrapper;\n};\n\nexport const getIconLibrary = () => ({ ...SHARE_ICON_LIBRARY });\n\nexport default {\n    createIconPreview,\n    createIconSvg,\n    getIconLibrary,\n    sanitizeIconKey,\n};\n", "let focusSupportsOptionsCache = null;\n\nexport const detectFocusOptionsSupport = () => {\n    if (focusSupportsOptionsCache !== null) {\n        return focusSupportsOptionsCache;\n    }\n\n    focusSupportsOptionsCache = false;\n\n    const doc = typeof window !== 'undefined' ? window.document : null;\n\n    if (\n        !doc ||\n        typeof doc.createElement !== 'function' ||\n        typeof window.HTMLElement === 'undefined' ||\n        !window.HTMLElement.prototype ||\n        typeof window.HTMLElement.prototype.focus !== 'function'\n    ) {\n        return focusSupportsOptionsCache;\n    }\n\n    const testElement = doc.createElement('button');\n    const root = doc.body || doc.documentElement;\n\n    try {\n        testElement.type = 'button';\n\n        if (root && typeof root.appendChild === 'function') {\n            root.appendChild(testElement);\n        }\n\n        window.HTMLElement.prototype.focus.call(testElement, {\n            get preventScroll() {\n                focusSupportsOptionsCache = true;\n                return true;\n            },\n        });\n    } catch (error) {\n        focusSupportsOptionsCache = false;\n    } finally {\n        if (testElement.parentNode && typeof testElement.parentNode.removeChild === 'function') {\n            testElement.parentNode.removeChild(testElement);\n        }\n    }\n\n    return focusSupportsOptionsCache;\n};\n\nexport const safeFocus = (element, options = { preventScroll: true }) => {\n    if (!element || typeof element.focus !== 'function') {\n        return;\n    }\n\n    const canUseOptions = options && detectFocusOptionsSupport();\n\n    if (canUseOptions) {\n        try {\n            element.focus(options);\n            return;\n        } catch (error) {\n            // Ignore and fall back to focusing without options.\n        }\n    }\n\n    element.focus();\n};\n\nexport const exposeOnWindow = () => {\n    if (typeof window === 'undefined') {\n        return;\n    }\n\n    if (!window.mgaFocusUtils || typeof window.mgaFocusUtils !== 'object') {\n        window.mgaFocusUtils = {};\n    }\n\n    window.mgaFocusUtils.detectFocusOptionsSupport = detectFocusOptionsSupport;\n    window.mgaFocusUtils.safeFocus = safeFocus;\n};\n\nexport default {\n    detectFocusOptionsSupport,\n    safeFocus,\n    exposeOnWindow,\n};\n", "const DEFAULT_TIMEOUT = 12000;\n\nconst getTimestamp = (global) => {\n    if (global && global.performance && typeof global.performance.now === 'function') {\n        return global.performance.now();\n    }\n\n    return Date.now();\n};\n\nconst getDocument = (global) => (global && global.document) || null;\n\nconst getMetricsStore = (global) => {\n    if (!global) {\n        return null;\n    }\n\n    if (!global.mgaSwiperMetrics || typeof global.mgaSwiperMetrics !== 'object') {\n        global.mgaSwiperMetrics = { events: [] };\n    }\n\n    if (!Array.isArray(global.mgaSwiperMetrics.events)) {\n        global.mgaSwiperMetrics.events = [];\n    }\n\n    return global.mgaSwiperMetrics;\n};\n\nconst recordMetric = (global, namespace, event, detail) => {\n    const store = getMetricsStore(global);\n\n    if (!store) {\n        return;\n    }\n\n    store.events.push({\n        namespace: namespace || 'default',\n        event,\n        detail: detail || {},\n        timestamp: getTimestamp(global),\n    });\n\n    if (typeof global.dispatchEvent === 'function') {\n        try {\n            const customEvent = new global.CustomEvent('mga:swiper-metric', {\n                detail: {\n                    namespace: namespace || 'default',\n                    event,\n                    payload: detail || {},\n                },\n            });\n            global.dispatchEvent(customEvent);\n        } catch (error) {\n            // Ignore CustomEvent support issues.\n        }\n    }\n};\n\nconst normalizeAttempts = (config) => {\n    if (!config || typeof config !== 'object') {\n        return [];\n    }\n\n    const rawAttempts = Array.isArray(config.attempts) ? config.attempts : [];\n\n    return rawAttempts\n        .map((attempt) => {\n            if (!attempt || typeof attempt !== 'object') {\n                return null;\n            }\n\n            if (attempt.enabled === false) {\n                return null;\n            }\n\n            const key = typeof attempt.key === 'string' && attempt.key ? attempt.key : 'fallback';\n            const js = attempt.js && typeof attempt.js === 'object' ? attempt.js : {};\n            const css = attempt.css && typeof attempt.css === 'object' ? attempt.css : null;\n            const inject = attempt.inject !== false;\n\n            const jsSrc = typeof js.src === 'string' && js.src ? js.src : '';\n\n            if (!jsSrc) {\n                return null;\n            }\n\n            return {\n                key,\n                label: typeof attempt.label === 'string' && attempt.label ? attempt.label : key,\n                js: {\n                    src: jsSrc,\n                    integrity: typeof js.integrity === 'string' && js.integrity ? js.integrity : null,\n                    crossOrigin: typeof js.crossOrigin === 'string' && js.crossOrigin ? js.crossOrigin : null,\n                    referrerPolicy: typeof js.referrerPolicy === 'string' && js.referrerPolicy ? js.referrerPolicy : null,\n                },\n                css: css && typeof css.href === 'string' && css.href\n                    ? {\n                        href: css.href,\n                        integrity: typeof css.integrity === 'string' && css.integrity ? css.integrity : null,\n                        crossOrigin: typeof css.crossOrigin === 'string' && css.crossOrigin ? css.crossOrigin : null,\n                        referrerPolicy: typeof css.referrerPolicy === 'string' && css.referrerPolicy ? css.referrerPolicy : null,\n                    }\n                    : null,\n                timeout: typeof attempt.timeout === 'number' && attempt.timeout > 0\n                    ? attempt.timeout\n                    : DEFAULT_TIMEOUT,\n                inject,\n            };\n        })\n        .filter(Boolean);\n};\n\nconst loadStylesheet = (global, attempt, namespace) => {\n    if (!attempt || !attempt.css) {\n        return Promise.resolve();\n    }\n\n    const doc = getDocument(global);\n\n    if (!doc) {\n        return Promise.resolve();\n    }\n\n    const existing = Array.from(doc.querySelectorAll('link[rel=\"stylesheet\"]'))\n        .find((link) => link.href === attempt.css.href);\n\n    if (existing) {\n        return Promise.resolve(existing);\n    }\n\n    return new Promise((resolve, reject) => {\n        const link = doc.createElement('link');\n        link.rel = 'stylesheet';\n        link.href = attempt.css.href;\n        link.dataset.mgaSwiperSource = attempt.key;\n\n        if (attempt.css.integrity) {\n            link.integrity = attempt.css.integrity;\n        }\n\n        if (attempt.css.crossOrigin) {\n            link.crossOrigin = attempt.css.crossOrigin;\n        } else if (attempt.css.integrity) {\n            link.crossOrigin = 'anonymous';\n        }\n\n        if (attempt.css.referrerPolicy) {\n            link.referrerPolicy = attempt.css.referrerPolicy;\n        }\n\n        link.onload = () => {\n            recordMetric(global, namespace, 'css_load_success', { source: attempt.key });\n            resolve(link);\n        };\n\n        link.onerror = () => {\n            recordMetric(global, namespace, 'css_load_error', { source: attempt.key });\n            reject(new Error('Stylesheet load error'));\n        };\n\n        doc.head.appendChild(link);\n        recordMetric(global, namespace, 'css_load_start', { source: attempt.key, href: attempt.css.href });\n    });\n};\n\nconst loadScript = (global, attempt, namespace) => {\n    if (!attempt || !attempt.js || !attempt.js.src) {\n        return Promise.reject(new Error('Invalid attempt configuration'));\n    }\n\n    const doc = getDocument(global);\n\n    if (!doc) {\n        return Promise.reject(new Error('Document unavailable'));\n    }\n\n    const existing = Array.from(doc.querySelectorAll('script'))\n        .find((script) => script.src === attempt.js.src && !script.hasAttribute('data-mga-swiper-failed'));\n\n    if (existing) {\n        return new Promise((resolve, reject) => {\n            if (typeof global.Swiper === 'function') {\n                existing.setAttribute('data-mga-swiper-loaded', 'true');\n                recordMetric(global, namespace, 'js_already_available', { source: attempt.key });\n                resolve(existing);\n                return;\n            }\n\n            if (typeof existing.hasAttribute === 'function' && existing.hasAttribute('data-mga-swiper-loaded')) {\n                resolve(existing);\n                return;\n            }\n\n            existing.addEventListener('load', () => {\n                existing.setAttribute('data-mga-swiper-loaded', 'true');\n                resolve(existing);\n            });\n            existing.addEventListener('error', () => {\n                existing.setAttribute('data-mga-swiper-failed', 'true');\n                reject(new Error('Existing script failed'));\n            });\n\n            recordMetric(global, namespace, 'js_existing_observed', { source: attempt.key });\n        });\n    }\n\n    return new Promise((resolve, reject) => {\n        const script = doc.createElement('script');\n        script.src = attempt.js.src;\n        script.async = false;\n        script.dataset.mgaSwiperSource = attempt.key;\n\n        if (attempt.js.integrity) {\n            script.integrity = attempt.js.integrity;\n        }\n\n        if (attempt.js.crossOrigin) {\n            script.crossOrigin = attempt.js.crossOrigin;\n        } else if (attempt.js.integrity) {\n            script.crossOrigin = 'anonymous';\n        }\n\n        if (attempt.js.referrerPolicy) {\n            script.referrerPolicy = attempt.js.referrerPolicy;\n        }\n\n        let timeoutId = null;\n\n        const cleanup = () => {\n            if (timeoutId) {\n                global.clearTimeout(timeoutId);\n                timeoutId = null;\n            }\n        };\n\n        script.onload = () => {\n            cleanup();\n            script.setAttribute('data-mga-swiper-loaded', 'true');\n            recordMetric(global, namespace, 'js_load_success', { source: attempt.key });\n            resolve(script);\n        };\n\n        script.onerror = () => {\n            cleanup();\n            script.setAttribute('data-mga-swiper-failed', 'true');\n            recordMetric(global, namespace, 'js_load_error', { source: attempt.key });\n            reject(new Error('Script load error'));\n        };\n\n        timeoutId = global.setTimeout(() => {\n            cleanup();\n            script.setAttribute('data-mga-swiper-failed', 'true');\n            recordMetric(global, namespace, 'js_load_timeout', { source: attempt.key, timeout: attempt.timeout });\n            reject(new Error('Script load timeout'));\n        }, attempt.timeout || DEFAULT_TIMEOUT);\n\n        doc.head.appendChild(script);\n        recordMetric(global, namespace, 'js_load_start', { source: attempt.key, src: attempt.js.src });\n    });\n};\n\nconst getLoaderState = (global) => {\n    if (!global) {\n        return { promise: null };\n    }\n\n    if (!global.mgaSwiperLoaderState || typeof global.mgaSwiperLoaderState !== 'object') {\n        global.mgaSwiperLoaderState = { promise: null };\n    }\n\n    return global.mgaSwiperLoaderState;\n};\n\nconst attemptLoad = (global, attempt, namespace) => {\n    if (!attempt || !attempt.inject) {\n        return Promise.resolve();\n    }\n\n    if (typeof global.Swiper === 'function') {\n        return Promise.resolve(global.Swiper);\n    }\n\n    recordMetric(global, namespace, 'attempt_start', { source: attempt.key });\n\n    return loadStylesheet(global, attempt, namespace)\n        .catch(() => null)\n        .then(() => loadScript(global, attempt, namespace))\n        .then(() => {\n            if (typeof global.Swiper === 'function') {\n                recordMetric(global, namespace, 'attempt_success', { source: attempt.key });\n                return global.Swiper;\n            }\n\n            recordMetric(global, namespace, 'attempt_no_global', { source: attempt.key });\n            throw new Error('Swiper global missing after load');\n        })\n        .catch((error) => {\n            recordMetric(global, namespace, 'attempt_error', {\n                source: attempt.key,\n                message: error && error.message ? error.message : String(error),\n            });\n            throw error;\n        });\n};\n\nconst runAttemptsSequentially = (global, attempts, namespace) => {\n    return attempts.reduce((promise, attempt) => {\n        return promise.catch(() => attemptLoad(global, attempt, namespace));\n    }, Promise.reject(new Error('initial')));\n};\n\nconst getConfig = (global, explicitConfig) => {\n    if (explicitConfig && typeof explicitConfig === 'object') {\n        return explicitConfig;\n    }\n\n    if (global && global.mgaSwiperLoaderConfig && typeof global.mgaSwiperLoaderConfig === 'object') {\n        return global.mgaSwiperLoaderConfig;\n    }\n\n    if (global && global.mgaAdminConfig && typeof global.mgaAdminConfig === 'object' && global.mgaAdminConfig.swiper) {\n        return global.mgaAdminConfig.swiper;\n    }\n\n    return null;\n};\n\nexport const ensureSwiper = (global = window, options = {}) => {\n    const namespace = typeof options.namespace === 'string' && options.namespace\n        ? options.namespace\n        : 'default';\n\n    if (!global) {\n        return Promise.reject(new Error('Global scope unavailable'));\n    }\n\n    if (typeof global.Swiper === 'function') {\n        recordMetric(global, namespace, 'already_available', {});\n        return Promise.resolve(global.Swiper);\n    }\n\n    const config = getConfig(global, options.config);\n    const attempts = normalizeAttempts(config);\n\n    if (!attempts.length) {\n        recordMetric(global, namespace, 'no_attempts_configured', {});\n        return Promise.reject(new Error('No Swiper attempts configured'));\n    }\n\n    const state = getLoaderState(global);\n\n    if (state.promise) {\n        return state.promise;\n    }\n\n    recordMetric(global, namespace, 'bootstrap', {\n        version: config && config.version ? config.version : null,\n        attempts: attempts.map((attempt) => attempt.key),\n    });\n\n    state.promise = runAttemptsSequentially(global, attempts, namespace)\n        .catch(() => {\n            if (typeof global.Swiper === 'function') {\n                return global.Swiper;\n            }\n\n            recordMetric(global, namespace, 'fatal', {});\n            throw new Error('Swiper could not be loaded');\n        })\n        .then(() => {\n            if (typeof global.Swiper === 'function') {\n                recordMetric(global, namespace, 'ready', {});\n                return global.Swiper;\n            }\n\n            recordMetric(global, namespace, 'fatal', {});\n            throw new Error('Swiper global unavailable');\n        })\n        .finally(() => {\n            state.promise = null;\n        });\n\n    return state.promise;\n};\n\nexport const getSwiperLoaderConfig = (global = window) => getConfig(global, null);\n\n", "export * from './sprintf';\nexport * from './icons';\nexport * from './focus';\nexport * from './swiper';\n", "/* eslint-disable no-underscore-dangle */\nimport {\n    createIconPreview,\n    createSprintf,\n    createTranslate,\n    detectFocusOptionsSupport,\n    ensureSwiper,\n    exposeOnWindow,\n    resolveI18n,\n    safeFocus,\n    sanitizeIconKey,\n} from './shared';\n\n(function(global) {\n    exposeOnWindow();\n\n    const mgaAdminI18n = resolveI18n(global);\n    const mgaAdmin__ = createTranslate(mgaAdminI18n);\n    const mgaAdminSprintf = createSprintf(mgaAdminI18n);\n\n    if (typeof module !== 'undefined' && module.exports) {\n        module.exports = {\n            detectFocusOptionsSupport,\n            safeFocus,\n        };\n    }\n\n    const doc = global.document;\n\n    const createShareIconPreview = (iconKey) => {\n        const preview = createIconPreview(doc, sanitizeIconKey(iconKey));\n\n        if (!preview) {\n            return null;\n        }\n\n        const svg = preview.querySelector('svg');\n\n        return svg || preview;\n    };\n\n    const SHARE_TEMPLATE_SAMPLE = {\n        url: 'https://exemple.com/galerie/photo-01',\n        text: 'Une photo remarquable',\n        title: 'Collection studio',\n    };\n\n    const SHARE_TEMPLATE_PLACEHOLDERS = {\n        '%url%': SHARE_TEMPLATE_SAMPLE.url,\n        '%text%': SHARE_TEMPLATE_SAMPLE.text,\n        '%title%': SHARE_TEMPLATE_SAMPLE.title,\n    };\n\n    const SHARE_TEMPLATE_SCHEMES = ['http', 'https', 'mailto', 'tel', 'sms'];\n\n    const isValidHexColor = (value) => {\n        if (typeof value !== 'string') {\n            return false;\n        }\n\n        return /^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(value.trim());\n    };\n\n    if (!doc || typeof doc.addEventListener !== 'function') {\n        return;\n    }\n\n    doc.addEventListener('DOMContentLoaded', function() {\n        const form = doc.querySelector('[data-mga-settings-form]') || doc.querySelector('.mga-admin-wrap form');\n        let scheduleSummaryRefresh = () => {};\n\n        const EFFECT_LABELS = {\n            slide: mgaAdmin__('glissement', 'lightbox-jlg'),\n            fade: mgaAdmin__('fondu', 'lightbox-jlg'),\n            cube: mgaAdmin__('cube 3D', 'lightbox-jlg'),\n            coverflow: mgaAdmin__('coverflow 3D', 'lightbox-jlg'),\n            flip: mgaAdmin__('flip 3D', 'lightbox-jlg'),\n        };\n\n        const THUMB_LAYOUT_LABELS = {\n            bottom: mgaAdmin__('Barre inf\u00E9rieure', 'lightbox-jlg'),\n            left: mgaAdmin__('Colonne lat\u00E9rale', 'lightbox-jlg'),\n            hidden: mgaAdmin__('Miniatures masqu\u00E9es', 'lightbox-jlg'),\n        };\n\n        const BACKGROUND_STYLE_LABELS = {\n            echo: mgaAdmin__('Flou d\u2019\u00E9cho d\u2019image', 'lightbox-jlg'),\n            texture: mgaAdmin__('Texture verre d\u00E9poli', 'lightbox-jlg'),\n            blur: mgaAdmin__('Flou en temps r\u00E9el', 'lightbox-jlg'),\n        };\n\n        const EASING_LABELS = {\n            'ease-out': mgaAdmin__('D\u00E9c\u00E9l\u00E9ration (par d\u00E9faut)', 'lightbox-jlg'),\n            'ease-in-out': mgaAdmin__('Douce (aller-retour)', 'lightbox-jlg'),\n            'ease-in': mgaAdmin__('Acc\u00E9l\u00E9ration progressive', 'lightbox-jlg'),\n            ease: mgaAdmin__('Standard CSS', 'lightbox-jlg'),\n            linear: mgaAdmin__('Lin\u00E9aire', 'lightbox-jlg'),\n        };\n\n        const BOOLEAN_LABELS = {\n            true: mgaAdmin__('Activ\u00E9', 'lightbox-jlg'),\n            false: mgaAdmin__('D\u00E9sactiv\u00E9', 'lightbox-jlg'),\n        };\n\n        const formatBooleanLabel = (value) => BOOLEAN_LABELS[value ? 'true' : 'false'];\n\n        const DEFAULT_LIGHT_BACKGROUND = '#ffffff';\n        const DEFAULT_DARK_BACKGROUND = '#0f172a';\n\n        const parseHexColor = (value) => {\n            if (!isValidHexColor(value)) {\n                return null;\n            }\n\n            let hex = value.trim().replace('#', '');\n\n            if (hex.length === 3) {\n                hex = hex.split('').map((char) => char + char).join('');\n            }\n\n            const numeric = parseInt(hex, 16);\n\n            return [\n                (numeric >> 16) & 255,\n                (numeric >> 8) & 255,\n                numeric & 255,\n            ];\n        };\n\n        const srgbChannelToLinear = (channel) => {\n            const normalized = channel / 255;\n\n            if (normalized <= 0.03928) {\n                return normalized / 12.92;\n            }\n\n            return Math.pow((normalized + 0.055) / 1.055, 2.4);\n        };\n\n        const computeRelativeLuminance = (hex) => {\n            const rgb = parseHexColor(hex);\n\n            if (!rgb) {\n                return null;\n            }\n\n            const [r, g, b] = rgb.map((channel) => srgbChannelToLinear(channel));\n\n            return (0.2126 * r) + (0.7152 * g) + (0.0722 * b);\n        };\n\n        const computeContrastRatio = (foreground, background) => {\n            const foregroundLuminance = computeRelativeLuminance(foreground);\n            const backgroundLuminance = computeRelativeLuminance(background);\n\n            if (foregroundLuminance === null || backgroundLuminance === null) {\n                return null;\n            }\n\n            const lighter = Math.max(foregroundLuminance, backgroundLuminance);\n            const darker = Math.min(foregroundLuminance, backgroundLuminance);\n\n            return (lighter + 0.05) / (darker + 0.05);\n        };\n\n        const describeContrastRatio = (ratio) => {\n            if (typeof ratio !== 'number' || Number.isNaN(ratio)) {\n                return {\n                    grade: '\u2014',\n                    severity: 'warning',\n                    target: '4,5',\n                };\n            }\n\n            if (ratio >= 7) {\n                return {\n                    grade: 'AAA',\n                    severity: 'success',\n                    target: '7,0',\n                };\n            }\n\n            if (ratio >= 4.5) {\n                return {\n                    grade: 'AA',\n                    severity: 'success',\n                    target: '4,5',\n                };\n            }\n\n            if (ratio >= 3) {\n                return {\n                    grade: mgaAdmin__('AA (gros texte)', 'lightbox-jlg'),\n                    severity: 'warning',\n                    target: '4,5',\n                };\n            }\n\n            return {\n                grade: mgaAdmin__('Insuffisant', 'lightbox-jlg'),\n                severity: 'error',\n                target: '3,0',\n            };\n        };\n\n        const formatRatio = (ratio) => {\n            if (typeof ratio !== 'number' || Number.isNaN(ratio)) {\n                return '\u2014';\n            }\n\n            return ratio.toFixed(2).replace('.', ',');\n        };\n\n        const createContrastInspector = () => {\n            const inspector = doc.querySelector('[data-mga-contrast-inspector]');\n            const accentInput = doc.getElementById('mga_accent_color');\n\n            if (!inspector || !accentInput) {\n                return {\n                    update: () => null,\n                    readAudit: () => null,\n                };\n            }\n\n            const message = inspector.querySelector('[data-mga-contrast-message]');\n            const valueNodes = {\n                light: inspector.querySelector('[data-mga-contrast-value=\"light\"]'),\n                dark: inspector.querySelector('[data-mga-contrast-value=\"dark\"]'),\n            };\n            const swatches = {\n                light: inspector.querySelector('[data-mga-contrast-swatch=\"light\"]'),\n                dark: inspector.querySelector('[data-mga-contrast-swatch=\"dark\"]'),\n            };\n\n            let lastAudit = null;\n\n            const update = (rawColor) => {\n                const normalizedColor = isValidHexColor(rawColor) ? rawColor.toLowerCase() : null;\n\n                if (!normalizedColor) {\n                    inspector.setAttribute('hidden', 'hidden');\n                    lastAudit = null;\n                    return null;\n                }\n\n                inspector.removeAttribute('hidden');\n\n                const entries = [\n                    {\n                        key: 'light',\n                        label: mgaAdmin__('Fond clair', 'lightbox-jlg'),\n                        background: DEFAULT_LIGHT_BACKGROUND,\n                    },\n                    {\n                        key: 'dark',\n                        label: mgaAdmin__('Fond sombre', 'lightbox-jlg'),\n                        background: DEFAULT_DARK_BACKGROUND,\n                    },\n                ].map((entry) => {\n                    const ratio = computeContrastRatio(normalizedColor, entry.background);\n                    const descriptor = describeContrastRatio(ratio);\n                    const ratioText = formatRatio(ratio);\n\n                    if (valueNodes[entry.key]) {\n                        valueNodes[entry.key].textContent = `${ratioText} (${descriptor.grade})`;\n                    }\n\n                    if (swatches[entry.key]) {\n                        swatches[entry.key].style.setProperty('--mga-contrast-background', entry.background);\n                        swatches[entry.key].style.setProperty('--mga-contrast-foreground', normalizedColor);\n                    }\n\n                    return {\n                        key: entry.key,\n                        label: entry.label,\n                        background: entry.background,\n                        ratio,\n                        ratioText,\n                        severity: descriptor.severity,\n                        grade: descriptor.grade,\n                        target: descriptor.target,\n                    };\n                });\n\n                const severityRank = { success: 0, warning: 1, error: 2 };\n                const dominant = entries.reduce((current, next) => {\n                    if (!current) {\n                        return next;\n                    }\n\n                    return severityRank[next.severity] > severityRank[current.severity] ? next : current;\n                }, null);\n\n                inspector.setAttribute('data-mga-severity', dominant ? dominant.severity : 'success');\n\n                if (message) {\n                    message.textContent = entries\n                        .map((entry) => mgaAdminSprintf(\n                            mgaAdmin__('%1$s\u00A0: %2$s (%3$s)', 'lightbox-jlg'),\n                            entry.label,\n                            entry.ratioText,\n                            entry.grade\n                        ))\n                        .join(' \u00B7 ');\n                }\n\n                lastAudit = {\n                    color: normalizedColor,\n                    entries,\n                };\n\n                return lastAudit;\n            };\n\n            const readAudit = () => lastAudit;\n\n            const handleInput = (event) => {\n                const color = event && event.target ? event.target.value : accentInput.value;\n                update(color);\n            };\n\n            accentInput.addEventListener('input', handleInput);\n            accentInput.addEventListener('change', handleInput);\n            handleInput();\n\n            return {\n                update,\n                readAudit,\n            };\n        };\n\n        const createPresetDiffTracker = (defaultSettings = {}) => {\n            const SECTION_MAP = {\n                playback: 'mga-section-playback',\n                thumbnails: 'mga-section-thumbnails',\n                appearance: 'mga-section-appearance',\n                toolbar: 'mga-section-toolbar',\n            };\n\n            const fieldMeta = {\n                delay: {\n                    id: 'mga_delay',\n                    type: 'int',\n                    section: SECTION_MAP.playback,\n                    label: mgaAdmin__('Vitesse du diaporama', 'lightbox-jlg'),\n                    format: (value) => `${value}\u00A0s`,\n                },\n                speed: {\n                    id: 'mga_speed',\n                    type: 'int',\n                    section: SECTION_MAP.playback,\n                    label: mgaAdmin__('Vitesse de transition', 'lightbox-jlg'),\n                    format: (value) => `${value}\u00A0ms`,\n                },\n                effect: {\n                    id: 'mga_effect',\n                    type: 'select',\n                    section: SECTION_MAP.playback,\n                    label: mgaAdmin__('Effet de transition', 'lightbox-jlg'),\n                    format: (value) => EFFECT_LABELS[value] || mgaAdmin__('personnalis\u00E9e', 'lightbox-jlg'),\n                },\n                easing: {\n                    id: 'mga_easing',\n                    type: 'select',\n                    section: SECTION_MAP.playback,\n                    label: mgaAdmin__('Courbe d\u2019animation', 'lightbox-jlg'),\n                    format: (value) => EASING_LABELS[value] || value,\n                },\n                thumb_size: {\n                    id: 'mga_thumb_size',\n                    type: 'int',\n                    section: SECTION_MAP.thumbnails,\n                    label: mgaAdmin__('Miniatures (bureau)', 'lightbox-jlg'),\n                    format: (value) => mgaAdminSprintf(mgaAdmin__('%spx', 'lightbox-jlg'), value),\n                },\n                thumb_size_mobile: {\n                    id: 'mga_thumb_size_mobile',\n                    type: 'int',\n                    section: SECTION_MAP.thumbnails,\n                    label: mgaAdmin__('Miniatures (mobile)', 'lightbox-jlg'),\n                    format: (value) => mgaAdminSprintf(mgaAdmin__('%spx', 'lightbox-jlg'), value),\n                },\n                thumbs_layout: {\n                    id: 'mga_thumbs_layout',\n                    type: 'select',\n                    section: SECTION_MAP.thumbnails,\n                    label: mgaAdmin__('Disposition des miniatures', 'lightbox-jlg'),\n                    format: (value) => THUMB_LAYOUT_LABELS[value] || value,\n                },\n                accent_color: {\n                    id: 'mga_accent_color',\n                    type: 'color',\n                    section: SECTION_MAP.appearance,\n                    label: mgaAdmin__('Couleur d\u2019accentuation', 'lightbox-jlg'),\n                    format: (value) => (value ? value.toUpperCase() : '\u2014'),\n                },\n                bg_opacity: {\n                    id: 'mga_bg_opacity',\n                    type: 'float',\n                    section: SECTION_MAP.appearance,\n                    label: mgaAdmin__('Opacit\u00E9 de l\u2019arri\u00E8re-plan', 'lightbox-jlg'),\n                    format: (value) => formatRatio(value),\n                },\n                background_style: {\n                    id: 'mga_background_style',\n                    type: 'select',\n                    section: SECTION_MAP.appearance,\n                    label: mgaAdmin__('Effet d\u2019arri\u00E8re-plan', 'lightbox-jlg'),\n                    format: (value) => BACKGROUND_STYLE_LABELS[value] || value,\n                },\n                show_thumbs_mobile: {\n                    id: 'mga_show_thumbs_mobile',\n                    type: 'boolean',\n                    section: SECTION_MAP.thumbnails,\n                    label: mgaAdmin__('Miniatures sur mobile', 'lightbox-jlg'),\n                    format: formatBooleanLabel,\n                },\n                autoplay_start: {\n                    id: 'mga_autoplay_start',\n                    type: 'boolean',\n                    section: SECTION_MAP.playback,\n                    label: mgaAdmin__('Lecture auto. au chargement', 'lightbox-jlg'),\n                    format: formatBooleanLabel,\n                },\n                loop: {\n                    id: 'mga_loop',\n                    type: 'boolean',\n                    section: SECTION_MAP.playback,\n                    label: mgaAdmin__('Lecture en boucle', 'lightbox-jlg'),\n                    format: formatBooleanLabel,\n                },\n                show_zoom: {\n                    id: 'mga_show_zoom',\n                    type: 'boolean',\n                    section: SECTION_MAP.toolbar,\n                    label: mgaAdmin__('Bouton Zoom', 'lightbox-jlg'),\n                    format: formatBooleanLabel,\n                },\n                show_download: {\n                    id: 'mga_show_download',\n                    type: 'boolean',\n                    section: SECTION_MAP.toolbar,\n                    label: mgaAdmin__('Bouton T\u00E9l\u00E9chargement', 'lightbox-jlg'),\n                    format: formatBooleanLabel,\n                },\n                show_share: {\n                    id: 'mga_show_share',\n                    type: 'boolean',\n                    section: SECTION_MAP.toolbar,\n                    label: mgaAdmin__('Bouton Partage', 'lightbox-jlg'),\n                    format: formatBooleanLabel,\n                },\n                show_cta: {\n                    id: 'mga_show_cta',\n                    type: 'boolean',\n                    section: SECTION_MAP.toolbar,\n                    label: mgaAdmin__('Bouton Appel \u00E0 l\u2019action', 'lightbox-jlg'),\n                    format: formatBooleanLabel,\n                },\n                show_fullscreen: {\n                    id: 'mga_show_fullscreen',\n                    type: 'boolean',\n                    section: SECTION_MAP.toolbar,\n                    label: mgaAdmin__('Bouton Plein \u00E9cran', 'lightbox-jlg'),\n                    format: formatBooleanLabel,\n                },\n            };\n\n            const normalizeSettingValue = (key, value) => {\n                const meta = fieldMeta[key];\n\n                if (!meta) {\n                    return null;\n                }\n\n                switch (meta.type) {\n                    case 'boolean':\n                        return Boolean(value);\n                    case 'int': {\n                        const numeric = typeof value === 'number' ? value : parseFloat(value);\n                        return Number.isNaN(numeric) ? null : Math.round(numeric);\n                    }\n                    case 'float': {\n                        const numeric = typeof value === 'number' ? value : parseFloat(value);\n                        return Number.isNaN(numeric)\n                            ? null\n                            : Math.round(numeric * 100) / 100;\n                    }\n                    case 'color': {\n                        const candidate = typeof value === 'string' ? value : '';\n                        return isValidHexColor(candidate) ? candidate.toLowerCase() : null;\n                    }\n                    case 'select':\n                        return typeof value === 'string' ? value : '';\n                    default:\n                        return value;\n                }\n            };\n\n            const normalizeSettings = (settings) => {\n                const normalized = {};\n\n                if (!settings || typeof settings !== 'object') {\n                    return normalized;\n                }\n\n                Object.keys(fieldMeta).forEach((key) => {\n                    if (Object.prototype.hasOwnProperty.call(settings, key)) {\n                        normalized[key] = normalizeSettingValue(key, settings[key]);\n                    }\n                });\n\n                return normalized;\n            };\n\n            const defaultNormalized = normalizeSettings(defaultSettings);\n            const trackedSections = Array.from(new Set(Object.values(fieldMeta).map((meta) => meta.section)));\n\n            let baseline = { ...defaultNormalized };\n            let baselineLabel = mgaAdmin__('Valeurs par d\u00E9faut', 'lightbox-jlg');\n            let baselineKey = '';\n            let navigationApi = null;\n            let lastDiff = [];\n\n            const readCurrentValue = (key) => {\n                const meta = fieldMeta[key];\n\n                if (!meta) {\n                    return null;\n                }\n\n                const element = doc.getElementById(meta.id);\n\n                if (!element) {\n                    return null;\n                }\n\n                switch (meta.type) {\n                    case 'boolean':\n                        return element.type === 'checkbox'\n                            ? element.checked\n                            : element.value === '1';\n                    case 'int':\n                    case 'float': {\n                        const numeric = parseFloat(element.value);\n\n                        if (Number.isNaN(numeric)) {\n                            return null;\n                        }\n\n                        if (meta.type === 'int') {\n                            return Math.round(numeric);\n                        }\n\n                        return Math.round(numeric * 100) / 100;\n                    }\n                    case 'color':\n                        return typeof element.value === 'string'\n                            ? element.value.toLowerCase()\n                            : null;\n                    default:\n                        return element.value;\n                }\n            };\n\n            const valuesAreEqual = (meta, a, b) => {\n                if (a === b) {\n                    return true;\n                }\n\n                if ((a === null && b !== null) || (a !== null && b === null)) {\n                    return false;\n                }\n\n                if (a === null && b === null) {\n                    return true;\n                }\n\n                if ((meta.type === 'int' || meta.type === 'float') && typeof a === 'number' && typeof b === 'number') {\n                    return Math.abs(a - b) < 0.01;\n                }\n\n                return false;\n            };\n\n            const formatValue = (key, value) => {\n                const meta = fieldMeta[key];\n\n                if (!meta) {\n                    return '';\n                }\n\n                if (value === null || typeof value === 'undefined') {\n                    return '\u2014';\n                }\n\n                if (typeof meta.format === 'function') {\n                    return meta.format(value);\n                }\n\n                return value.toString();\n            };\n\n            const computeDiff = () => {\n                const diff = [];\n\n                Object.keys(fieldMeta).forEach((key) => {\n                    const meta = fieldMeta[key];\n                    const currentValue = readCurrentValue(key);\n                    const baselineValue = Object.prototype.hasOwnProperty.call(baseline, key)\n                        ? baseline[key]\n                        : defaultNormalized[key];\n\n                    if (valuesAreEqual(meta, currentValue, baselineValue)) {\n                        return;\n                    }\n\n                    diff.push({\n                        key,\n                        label: meta.label,\n                        section: meta.section,\n                        currentLabel: formatValue(key, currentValue),\n                        baselineLabel: formatValue(key, baselineValue),\n                    });\n                });\n\n                return diff;\n            };\n\n            const updateSectionIndicators = (diff) => {\n                const state = new Map();\n\n                diff.forEach((item) => {\n                    if (!state.has(item.section)) {\n                        state.set(item.section, true);\n                    }\n                });\n\n                trackedSections.forEach((sectionId) => {\n                    const sectionEl = sectionId ? doc.getElementById(sectionId) : null;\n                    const isModified = state.get(sectionId) === true;\n\n                    if (sectionEl) {\n                        if (isModified) {\n                            sectionEl.setAttribute('data-mga-modified', 'true');\n                        } else {\n                            sectionEl.removeAttribute('data-mga-modified');\n                        }\n                    }\n\n                    if (navigationApi && typeof navigationApi.setSectionModified === 'function' && sectionEl) {\n                        navigationApi.setSectionModified(sectionEl, isModified);\n                    }\n                });\n            };\n\n            const refresh = () => {\n                lastDiff = computeDiff();\n                updateSectionIndicators(lastDiff);\n                return lastDiff;\n            };\n\n            const setBaseline = ({ key = '', label = '', settings = {} }) => {\n                baseline = { ...defaultNormalized, ...normalizeSettings(settings) };\n                baselineLabel = label && label.trim() !== '' ? label : mgaAdmin__('Valeurs par d\u00E9faut', 'lightbox-jlg');\n                baselineKey = key || '';\n                refresh();\n            };\n\n            const setNavigationApi = (api) => {\n                navigationApi = api;\n                updateSectionIndicators(lastDiff);\n            };\n\n            setBaseline({ settings: defaultSettings, label: mgaAdmin__('Valeurs par d\u00E9faut', 'lightbox-jlg'), key: '' });\n\n            return {\n                setBaseline,\n                refresh,\n                getDiff: () => lastDiff.slice(),\n                getBaselineInfo: () => ({ key: baselineKey, label: baselineLabel }),\n                setNavigationApi,\n                getDefaultLabel: () => mgaAdmin__('Valeurs par d\u00E9faut', 'lightbox-jlg'),\n            };\n        };\n\n        let contrastInspector = null;\n        let presetDiffTracker = null;\n\n\n        const initializeWizard = (targetForm) => {\n            const wizard = doc.querySelector('[data-mga-wizard]');\n\n            if (!wizard) {\n                return null;\n            }\n\n            const stepPanels = Array.from(wizard.querySelectorAll('[data-mga-step-panel]'));\n            const indicators = Array.from(wizard.querySelectorAll('[data-mga-step-indicator]'));\n            const prevButton = wizard.querySelector('[data-mga-step-prev]');\n            const nextButton = wizard.querySelector('[data-mga-step-next]');\n            const submitButton = wizard.querySelector('[data-mga-step-submit]');\n            const statusElement = wizard.querySelector('[data-mga-save-status]');\n            const summaryIndex = stepPanels.length - 1;\n            let currentIndex = stepPanels.findIndex((panel) => panel.classList.contains('is-active'));\n\n            if (currentIndex < 0) {\n                currentIndex = 0;\n            }\n\n            const getMessages = () => (global.mgaAdminConfig && global.mgaAdminConfig.messages) || {};\n\n            const setStatusMessage = (state, message) => {\n                if (!statusElement) {\n                    return;\n                }\n\n                const statusMessage = message || getMessages()[state] || '';\n\n                statusElement.textContent = statusMessage;\n                statusElement.setAttribute('data-mga-status-state', state);\n            };\n\n            const updateControls = () => {\n                if (prevButton) {\n                    prevButton.disabled = currentIndex === 0;\n                }\n\n                if (nextButton) {\n                    nextButton.hidden = currentIndex >= summaryIndex;\n                }\n\n                if (submitButton) {\n                    submitButton.hidden = currentIndex < summaryIndex;\n                }\n            };\n\n            const focusPanel = (panel) => {\n                if (!panel) {\n                    return;\n                }\n\n                const focusTarget = panel.querySelector('[data-mga-step-title]') || panel;\n                const focusOptions = detectFocusOptionsSupport() ? { preventScroll: true } : undefined;\n\n                global.requestAnimationFrame(() => {\n                    safeFocus(focusTarget, focusOptions);\n                });\n            };\n\n            const deactivatePanel = (panel) => {\n                panel.classList.remove('is-active');\n                panel.setAttribute('hidden', 'hidden');\n                panel.setAttribute('aria-hidden', 'true');\n            };\n\n            const activatePanel = (panel) => {\n                panel.classList.add('is-active');\n                panel.removeAttribute('hidden');\n                panel.setAttribute('aria-hidden', 'false');\n            };\n\n            const updateIndicators = () => {\n                indicators.forEach((indicator, index) => {\n                    indicator.classList.toggle('is-active', index === currentIndex);\n                    indicator.classList.toggle('is-completed', index < currentIndex);\n                    indicator.setAttribute('aria-current', index === currentIndex ? 'step' : 'false');\n                });\n            };\n\n            const updateSummaryContainers = (() => {\n                let timeoutId = null;\n\n                const presetTarget = wizard.querySelector('[data-mga-summary-preset]');\n                const timingTarget = wizard.querySelector('[data-mga-summary-timing]');\n                const toolbarTarget = wizard.querySelector('[data-mga-summary-toolbar]');\n                const shareTarget = wizard.querySelector('[data-mga-summary-share]');\n                const validationContainer = wizard.querySelector('[data-mga-summary-validations]');\n                const diffContainer = wizard.querySelector('[data-mga-summary-diff]');\n                const diffList = diffContainer ? diffContainer.querySelector('[data-mga-summary-diff-list]') : null;\n                const diffBaseline = diffContainer ? diffContainer.querySelector('[data-mga-summary-diff-baseline]') : null;\n                const diffEmpty = diffContainer ? diffContainer.querySelector('[data-mga-summary-diff-empty]') : null;\n\n                const renderToolbarSummary = () => {\n                    if (!toolbarTarget) {\n                        return;\n                    }\n\n                    const toolbarToggles = [\n                        { id: 'mga_show_zoom', label: mgaAdmin__('Zoom', 'lightbox-jlg') },\n                        { id: 'mga_show_download', label: mgaAdmin__('T\u00E9l\u00E9chargement', 'lightbox-jlg') },\n                        { id: 'mga_show_share', label: mgaAdmin__('Partage', 'lightbox-jlg') },\n                        { id: 'mga_show_cta', label: mgaAdmin__('Appel \u00E0 l\u2019action', 'lightbox-jlg') },\n                        { id: 'mga_show_fullscreen', label: mgaAdmin__('Plein \u00E9cran', 'lightbox-jlg') },\n                    ];\n\n                    const active = toolbarToggles.filter((toggle) => {\n                        const input = doc.getElementById(toggle.id);\n                        return input ? input.checked : false;\n                    });\n\n                    toolbarTarget.textContent = active.length > 0\n                        ? active.map((toggle) => toggle.label).join(', ')\n                        : mgaAdmin__('Aucun bouton affich\u00E9', 'lightbox-jlg');\n                };\n\n                const renderPresetSummary = (diff, baselineInfo) => {\n                    if (!presetTarget) {\n                        return;\n                    }\n\n                    const presetSelect = doc.getElementById('mga_style_preset');\n                    const value = presetSelect ? presetSelect.value : '';\n                    let label = '';\n\n                    if (presetSelect && value) {\n                        const fallback = Array.from(presetSelect.options).find((option) => option.value === value);\n\n                        if (fallback) {\n                            label = fallback.textContent || '';\n                        }\n                    }\n\n                    if (!label) {\n                        if (diff.length > 0 && baselineInfo && baselineInfo.label) {\n                            label = mgaAdminSprintf(\n                                mgaAdmin__('Personnalis\u00E9 \u00E0 partir de %1$s', 'lightbox-jlg'),\n                                baselineInfo.label\n                            );\n                        } else if (diff.length > 0) {\n                            label = mgaAdmin__('R\u00E9glages personnalis\u00E9s', 'lightbox-jlg');\n                        } else if (baselineInfo && baselineInfo.label) {\n                            label = baselineInfo.label;\n                        } else if (global.mgaStylePresets && typeof global.mgaStylePresets.customDescription === 'string') {\n                            label = global.mgaStylePresets.customDescription;\n                        } else {\n                            label = mgaAdmin__('R\u00E9glages personnalis\u00E9s', 'lightbox-jlg');\n                        }\n                    }\n\n                    presetTarget.textContent = label;\n                };\n\n                const renderTimingSummary = () => {\n                    if (!timingTarget) {\n                        return;\n                    }\n\n                    const delayInput = doc.getElementById('mga_delay');\n                    const effectSelect = doc.getElementById('mga_effect');\n                    const delayValue = delayInput && delayInput.value ? delayInput.value : '\u2014';\n                    let effectLabel = mgaAdmin__('Transition personnalis\u00E9e', 'lightbox-jlg');\n\n                    if (effectSelect) {\n                        const selectedOption = Array.from(effectSelect.options).find((option) => option.selected);\n                        effectLabel = selectedOption ? selectedOption.textContent : effectLabel;\n                    }\n\n                    timingTarget.textContent = mgaAdminSprintf(\n                        mgaAdmin__('Diaporama : %1$s\u00A0s \u00B7 Effet : %2$s', 'lightbox-jlg'),\n                        delayValue,\n                        effectLabel\n                    );\n                };\n\n                const renderShareSummary = () => {\n                    if (!shareTarget) {\n                        return;\n                    }\n\n                    const items = Array.from(doc.querySelectorAll('[data-share-repeater-item]'));\n                    const activeLabels = items\n                        .filter((item) => {\n                            const enabledField = item.querySelector('[data-share-field=\"enabled\"]');\n                            return enabledField ? enabledField.checked : false;\n                        })\n                        .map((item) => {\n                            const labelField = item.querySelector('[data-share-field=\"label\"]');\n                            const keyField = item.querySelector('[data-share-field=\"key\"]');\n                            const labelValue = labelField && labelField.value ? labelField.value.trim() : '';\n                            const keyValue = keyField && keyField.value ? keyField.value.trim() : '';\n\n                            return labelValue || (keyValue ? keyValue.toUpperCase() : mgaAdmin__('Canal sans titre', 'lightbox-jlg'));\n                        });\n\n                    if (activeLabels.length > 0) {\n                        shareTarget.textContent = mgaAdminSprintf(\n                            mgaAdmin__('%1$d canaux actifs : %2$s', 'lightbox-jlg'),\n                            activeLabels.length,\n                            activeLabels.join(', ')\n                        );\n                    } else {\n                        shareTarget.textContent = mgaAdmin__('Aucun canal actif', 'lightbox-jlg');\n                    }\n                };\n\n                const collectValidations = () => {\n                    if (!contrastInspector || typeof contrastInspector.readAudit !== 'function') {\n                        return [];\n                    }\n\n                    const audit = contrastInspector.readAudit();\n\n                    if (!audit || !Array.isArray(audit.entries)) {\n                        return [];\n                    }\n\n                    return audit.entries\n                        .filter((entry) => entry && (entry.severity === 'warning' || entry.severity === 'error'))\n                        .map((entry) => {\n                            const message = entry.severity === 'error'\n                                ? mgaAdminSprintf(\n                                    mgaAdmin__('Contraste %1$s insuffisant\u00A0: %2$s. Ajustez la couleur ou le fond pour atteindre au moins 3,0 (AA\u00A0\u2265\u00A04,5).', 'lightbox-jlg'),\n                                    entry.label,\n                                    entry.ratioText\n                                )\n                                : mgaAdminSprintf(\n                                    mgaAdmin__('Contraste %1$s limit\u00E9\u00A0: %2$s. Augmentez l\u00E9g\u00E8rement pour viser AA (\u2265\u00A04,5).', 'lightbox-jlg'),\n                                    entry.label,\n                                    entry.ratioText\n                                );\n\n                            return {\n                                severity: entry.severity,\n                                message,\n                            };\n                        });\n                };\n\n                const renderValidations = (validations) => {\n                    if (!validationContainer) {\n                        return;\n                    }\n\n                    validationContainer.innerHTML = '';\n\n                    if (!validations || validations.length === 0) {\n                        validationContainer.setAttribute('hidden', 'hidden');\n                        return;\n                    }\n\n                    validationContainer.removeAttribute('hidden');\n\n                    validations.forEach((validation) => {\n                        const alert = doc.createElement('div');\n                        alert.className = 'mga-summary__alert';\n                        alert.setAttribute('data-mga-severity', validation.severity);\n                        alert.textContent = validation.message;\n                        validationContainer.appendChild(alert);\n                    });\n                };\n\n                const renderPresetDiff = (diff, baselineInfo) => {\n                    if (!diffContainer || !diffList) {\n                        return;\n                    }\n\n                    diffList.innerHTML = '';\n\n                    if (!diff || diff.length === 0) {\n                        diffContainer.setAttribute('hidden', 'hidden');\n\n                        if (diffBaseline) {\n                            diffBaseline.textContent = '';\n                        }\n\n                        if (diffEmpty) {\n                            diffEmpty.setAttribute('hidden', 'hidden');\n                        }\n\n                        return;\n                    }\n\n                    diffContainer.removeAttribute('hidden');\n\n                    if (diffBaseline) {\n                        diffBaseline.textContent = baselineInfo && baselineInfo.label\n                            ? mgaAdminSprintf(mgaAdmin__('Base\u00A0: %1$s', 'lightbox-jlg'), baselineInfo.label)\n                            : '';\n                    }\n\n                    if (diffEmpty) {\n                        diffEmpty.setAttribute('hidden', 'hidden');\n                    }\n\n                    diff.forEach((item) => {\n                        const row = doc.createElement('li');\n                        row.className = 'mga-summary__diff-item';\n\n                        const label = doc.createElement('span');\n                        label.className = 'mga-summary__diff-label';\n                        label.textContent = item.label;\n                        row.appendChild(label);\n\n                        const values = doc.createElement('span');\n                        values.className = 'mga-summary__diff-values';\n\n                        const beforeValue = doc.createElement('span');\n                        beforeValue.className = 'mga-summary__diff-before';\n                        beforeValue.textContent = item.baselineLabel;\n                        values.appendChild(beforeValue);\n\n                        const arrow = doc.createElement('span');\n                        arrow.textContent = '\u2192';\n                        values.appendChild(arrow);\n\n                        const afterValue = doc.createElement('span');\n                        afterValue.className = 'mga-summary__diff-after';\n                        afterValue.textContent = item.currentLabel;\n                        values.appendChild(afterValue);\n\n                        row.appendChild(values);\n                        diffList.appendChild(row);\n                    });\n                };\n\n                const update = () => {\n                    const diff = presetDiffTracker ? presetDiffTracker.refresh() : [];\n                    const baselineInfo = presetDiffTracker ? presetDiffTracker.getBaselineInfo() : { label: '', key: '' };\n\n                    renderPresetSummary(diff, baselineInfo);\n                    renderTimingSummary();\n                    renderToolbarSummary();\n                    renderShareSummary();\n                    renderPresetDiff(diff, baselineInfo);\n                    renderValidations(collectValidations());\n                };\n\n                return () => {\n                    if (timeoutId) {\n                        global.clearTimeout(timeoutId);\n                    }\n\n                    timeoutId = global.setTimeout(() => {\n                        timeoutId = null;\n                        update();\n                    }, 120);\n                };\n            })();\n\n            const goToStep = (targetIndex) => {\n                const normalizedIndex = Math.max(0, Math.min(stepPanels.length - 1, targetIndex));\n\n                if (normalizedIndex === currentIndex) {\n                    return;\n                }\n\n                const currentPanel = stepPanels[currentIndex];\n                const nextPanel = stepPanels[normalizedIndex];\n\n                if (currentPanel) {\n                    deactivatePanel(currentPanel);\n                }\n\n                if (nextPanel) {\n                    activatePanel(nextPanel);\n                    focusPanel(nextPanel);\n                }\n\n                currentIndex = normalizedIndex;\n                updateIndicators();\n                updateControls();\n\n                if (currentIndex === summaryIndex) {\n                    updateSummaryContainers();\n                }\n            };\n\n            const handleNext = () => {\n                if (targetForm && typeof targetForm.reportValidity === 'function' && !targetForm.reportValidity()) {\n                    return;\n                }\n\n                goToStep(currentIndex + 1);\n            };\n\n            const handlePrev = () => {\n                goToStep(currentIndex - 1);\n            };\n\n            const attachIndicatorNavigation = () => {\n                indicators.forEach((indicator, index) => {\n                    indicator.addEventListener('click', (event) => {\n                        event.preventDefault();\n\n                        if (index < currentIndex && index >= 0) {\n                            goToStep(index);\n                        } else if (index > currentIndex && index <= summaryIndex) {\n                            if (targetForm && typeof targetForm.reportValidity === 'function' && !targetForm.reportValidity()) {\n                                return;\n                            }\n\n                            goToStep(index);\n                        }\n                    });\n                });\n            };\n\n            if (prevButton) {\n                prevButton.addEventListener('click', (event) => {\n                    event.preventDefault();\n                    handlePrev();\n                });\n            }\n\n            if (nextButton) {\n                nextButton.addEventListener('click', (event) => {\n                    event.preventDefault();\n                    handleNext();\n                });\n            }\n\n            attachIndicatorNavigation();\n            updateIndicators();\n            updateControls();\n\n            if (currentIndex === summaryIndex) {\n                updateSummaryContainers();\n            }\n\n            const handleFormInput = () => {\n                updateSummaryContainers();\n            };\n\n            if (targetForm) {\n                targetForm.addEventListener('change', handleFormInput);\n                targetForm.addEventListener('input', handleFormInput);\n            }\n\n            return {\n                scheduleSummaryUpdate: updateSummaryContainers,\n                setStatusMessage,\n                goToSummary: () => goToStep(summaryIndex),\n            };\n        };\n\n        const wizardApi = initializeWizard(form);\n\n        if (wizardApi && typeof wizardApi.scheduleSummaryUpdate === 'function') {\n            scheduleSummaryRefresh = wizardApi.scheduleSummaryUpdate;\n        }\n\n        const initializeAsyncSave = (targetForm, wizard) => {\n            if (!targetForm) {\n                return;\n            }\n\n            const config = global.mgaAdminConfig || {};\n            const ajaxUrl = typeof config.ajaxUrl === 'string' && config.ajaxUrl ? config.ajaxUrl : global.ajaxurl;\n            const nonce = typeof config.nonce === 'string' ? config.nonce : '';\n            const submitButton = targetForm.querySelector('[data-mga-step-submit]');\n\n            if (!ajaxUrl || !nonce) {\n                return;\n            }\n\n            const setStatus = (state, explicitMessage) => {\n                if (wizard && typeof wizard.setStatusMessage === 'function') {\n                    wizard.setStatusMessage(state, explicitMessage);\n                }\n            };\n\n            const setSavingState = (isSaving) => {\n                if (submitButton) {\n                    submitButton.disabled = isSaving;\n                    submitButton.setAttribute('aria-busy', isSaving ? 'true' : 'false');\n                }\n\n                if (isSaving) {\n                    setStatus('saving');\n                }\n            };\n\n            targetForm.addEventListener('submit', (event) => {\n                event.preventDefault();\n\n                if (typeof targetForm.reportValidity === 'function' && !targetForm.reportValidity()) {\n                    return;\n                }\n\n                const formData = new FormData(targetForm);\n                formData.append('action', 'mga_save_settings');\n                formData.append('_ajax_nonce', nonce);\n\n                setSavingState(true);\n\n                fetch(ajaxUrl, {\n                    method: 'POST',\n                    credentials: 'same-origin',\n                    body: formData,\n                })\n                    .then((response) => {\n                        if (!response.ok) {\n                            throw new Error(response.statusText || 'HTTP error');\n                        }\n\n                        return response.json();\n                    })\n                    .then((payload) => {\n                        if (!payload || payload.success !== true) {\n                            const message = payload && payload.data && payload.data.message\n                                ? payload.data.message\n                                : null;\n\n                            throw new Error(message || (config.messages && config.messages.error) || mgaAdmin__('Impossible d\u2019enregistrer les r\u00E9glages.', 'lightbox-jlg'));\n                        }\n\n                        const successMessage = payload.data && payload.data.message\n                            ? payload.data.message\n                            : (config.messages && config.messages.success) || mgaAdmin__('R\u00E9glages enregistr\u00E9s.', 'lightbox-jlg');\n\n                        setStatus('success', successMessage);\n                        scheduleSummaryRefresh();\n                    })\n                    .catch((error) => {\n                        const fallbackMessage = (config.messages && config.messages.error)\n                            ? config.messages.error\n                            : mgaAdmin__('Impossible d\u2019enregistrer les r\u00E9glages.', 'lightbox-jlg');\n\n                        setStatus('error', error && error.message ? error.message : fallbackMessage);\n                    })\n                    .finally(() => {\n                        setSavingState(false);\n                    });\n            });\n        };\n\n        initializeAsyncSave(form, wizardApi);\n\n        const initSettingsNavigation = () => {\n            const noopApi = {\n                setSectionModified: () => {},\n            };\n\n            const layout = doc.querySelector('[data-mga-settings-layout]');\n\n            if (!layout) {\n                return noopApi;\n            }\n\n            const sections = Array.from(layout.querySelectorAll('[data-mga-settings-section]'));\n\n            if (sections.length === 0) {\n                return noopApi;\n            }\n\n            const navList = layout.querySelector('[data-mga-settings-nav]');\n            const navLinks = navList ? Array.from(navList.querySelectorAll('[data-mga-section-link]')) : [];\n            const linkBySection = new Map();\n            const navItemBySection = new Map();\n            const navBadgeBySection = new Map();\n            const viewToggle = layout.querySelector('[data-mga-view-toggle]');\n            const viewSelect = viewToggle ? viewToggle.querySelector('[data-mga-view-select]') : null;\n            const VIEW_STORAGE_KEY = 'mga-settings-view-mode';\n\n            const readStoredViewMode = () => {\n                if (typeof global.localStorage === 'undefined') {\n                    return 'essential';\n                }\n\n                try {\n                    const stored = global.localStorage.getItem(VIEW_STORAGE_KEY);\n                    return stored === 'advanced' ? 'advanced' : 'essential';\n                } catch (error) {\n                    return 'essential';\n                }\n            };\n\n            let currentViewMode = readStoredViewMode();\n\n            const syncViewSelect = () => {\n                if (viewSelect) {\n                    viewSelect.value = currentViewMode;\n                }\n            };\n\n            const persistViewMode = () => {\n                if (typeof global.localStorage === 'undefined') {\n                    return;\n                }\n\n                try {\n                    global.localStorage.setItem(VIEW_STORAGE_KEY, currentViewMode);\n                } catch (error) {\n                    // Ignore storage access restrictions.\n                }\n            };\n\n            const updateLayoutViewMode = () => {\n                layout.setAttribute('data-mga-view-mode', currentViewMode);\n            };\n\n            const getSectionVisibility = (section) => {\n                if (!section) {\n                    return 'advanced';\n                }\n\n                const visibility = section.getAttribute('data-mga-visibility');\n                return visibility === 'essential' ? 'essential' : 'advanced';\n            };\n\n            const searchInput = layout.querySelector('[data-mga-settings-search]');\n            const emptyState = layout.querySelector('[data-mga-search-empty]');\n            const highlightTimeouts = new WeakMap();\n\n            const isSearchActive = () => layout.getAttribute('data-mga-search-active') === 'true';\n\n            const updateEmptyState = (visibleCount, searchActive) => {\n                if (!emptyState) {\n                    return;\n                }\n\n                if (searchActive && visibleCount === 0) {\n                    emptyState.removeAttribute('hidden');\n                } else {\n                    emptyState.setAttribute('hidden', 'hidden');\n                }\n            };\n\n            const setActiveLink = (section) => {\n                if (!section) {\n                    return;\n                }\n\n                linkBySection.forEach((link, candidate) => {\n                    if (candidate === section) {\n                        link.setAttribute('aria-current', 'true');\n                    } else {\n                        link.removeAttribute('aria-current');\n                    }\n                });\n            };\n\n            const clearHighlights = () => {\n                sections.forEach((section) => {\n                    section.removeAttribute('data-mga-section-highlight');\n\n                    if (highlightTimeouts.has(section)) {\n                        global.clearTimeout(highlightTimeouts.get(section));\n                        highlightTimeouts.delete(section);\n                    }\n                });\n            };\n\n            const highlightSection = (section) => {\n                if (!section) {\n                    return;\n                }\n\n                section.setAttribute('data-mga-section-highlight', 'true');\n\n                if (highlightTimeouts.has(section)) {\n                    global.clearTimeout(highlightTimeouts.get(section));\n                }\n\n                const timeoutId = global.setTimeout(() => {\n                    section.removeAttribute('data-mga-section-highlight');\n                    highlightTimeouts.delete(section);\n                }, 1600);\n\n                highlightTimeouts.set(section, timeoutId);\n            };\n\n            const filterSections = (rawQuery) => {\n                const query = typeof rawQuery === 'string' ? rawQuery.trim().toLowerCase() : '';\n                const searchActive = query.length > 0;\n                let visibleCount = 0;\n\n                if (searchActive) {\n                    layout.setAttribute('data-mga-search-active', 'true');\n                } else {\n                    layout.removeAttribute('data-mga-search-active');\n                    clearHighlights();\n                }\n\n                sections.forEach((section) => {\n                    const link = linkBySection.get(section);\n                    const navItem = navItemBySection.get(section);\n\n                    if (!searchActive) {\n                        const hide = currentViewMode === 'essential' && getSectionVisibility(section) === 'advanced';\n\n                        if (hide) {\n                            section.setAttribute('hidden', 'hidden');\n\n                            if (link) {\n                                link.setAttribute('hidden', 'hidden');\n                                link.removeAttribute('aria-current');\n                            }\n\n                            if (navItem) {\n                                navItem.setAttribute('hidden', 'hidden');\n                            }\n\n                            return;\n                        }\n\n                        section.removeAttribute('hidden');\n\n                        if (link) {\n                            link.removeAttribute('hidden');\n                        }\n\n                        if (navItem) {\n                            navItem.removeAttribute('hidden');\n                        }\n\n                        return;\n                    }\n\n                    const text = (section.textContent || '').toLowerCase();\n                    const isMatch = text.includes(query);\n\n                    if (isMatch) {\n                        section.removeAttribute('hidden');\n                        section.setAttribute('data-mga-section-highlight', 'true');\n                        visibleCount += 1;\n\n                        if (link) {\n                            link.removeAttribute('hidden');\n                        }\n\n                        if (navItem) {\n                            navItem.removeAttribute('hidden');\n                        }\n                    } else {\n                        section.setAttribute('hidden', 'hidden');\n                        section.removeAttribute('data-mga-section-highlight');\n\n                        if (link) {\n                            link.setAttribute('hidden', 'hidden');\n                            link.removeAttribute('aria-current');\n                        }\n\n                        if (navItem) {\n                            navItem.setAttribute('hidden', 'hidden');\n                        }\n                    }\n                });\n\n                if (searchActive) {\n                    const firstMatch = sections.find((section) => !section.hasAttribute('hidden'));\n\n                    if (firstMatch) {\n                        setActiveLink(firstMatch);\n                    }\n                }\n\n                updateEmptyState(visibleCount, searchActive);\n            };\n\n            const applyViewMode = (nextMode, options = {}) => {\n                const normalized = nextMode === 'advanced' ? 'advanced' : 'essential';\n\n                if (normalized === currentViewMode && !options.force) {\n                    return;\n                }\n\n                currentViewMode = normalized;\n                syncViewSelect();\n                updateLayoutViewMode();\n\n                if (options.persist !== false) {\n                    persistViewMode();\n                }\n\n                const currentQuery = searchInput ? searchInput.value || '' : '';\n                filterSections(currentQuery);\n            };\n\n            navLinks.forEach((link) => {\n                const href = link.getAttribute('href');\n\n                if (!href || href.charAt(0) !== '#') {\n                    return;\n                }\n\n                const target = layout.querySelector(href);\n\n                if (!target) {\n                    return;\n                }\n\n                linkBySection.set(target, link);\n                const navItem = link.closest('[data-mga-visibility]');\n\n                if (navItem) {\n                    navItemBySection.set(target, navItem);\n\n                    let badge = navItem.querySelector('[data-mga-modified-badge]');\n\n                    if (!badge) {\n                        badge = doc.createElement('span');\n                        badge.className = 'mga-settings-layout__badge';\n                        badge.textContent = mgaAdmin__('Modifi\u00E9', 'lightbox-jlg');\n                        badge.hidden = true;\n                        badge.setAttribute('data-mga-modified-badge', 'true');\n                        navItem.appendChild(badge);\n                    }\n\n                    navBadgeBySection.set(target, badge);\n                }\n\n                link.addEventListener('click', (event) => {\n                    event.preventDefault();\n\n                    if (target.hasAttribute('hidden')) {\n                        target.removeAttribute('hidden');\n                    }\n\n                    try {\n                        target.scrollIntoView({ behavior: 'smooth', block: 'start' });\n                    } catch (error) {\n                        if (typeof target.scrollIntoView === 'function') {\n                            target.scrollIntoView();\n                        }\n                    }\n\n                    setActiveLink(target);\n                    highlightSection(target);\n\n                    const focusOptions = detectFocusOptionsSupport() ? { preventScroll: true } : undefined;\n\n                    if (typeof global.requestAnimationFrame === 'function') {\n                        global.requestAnimationFrame(() => {\n                            safeFocus(target, focusOptions);\n                        });\n                    } else {\n                        safeFocus(target, focusOptions);\n                    }\n                });\n            });\n\n            syncViewSelect();\n            updateLayoutViewMode();\n\n            if (viewSelect) {\n                viewSelect.addEventListener('change', (event) => {\n                    applyViewMode(event.target.value || 'essential');\n                });\n            }\n\n            if ('IntersectionObserver' in global) {\n                let lastVisibleSection = null;\n\n                const observer = new IntersectionObserver((entries) => {\n                    if (isSearchActive()) {\n                        return;\n                    }\n\n                    entries.forEach((entry) => {\n                        if (entry.isIntersecting) {\n                            lastVisibleSection = entry.target;\n                        }\n                    });\n\n                    if (lastVisibleSection) {\n                        setActiveLink(lastVisibleSection);\n                    }\n                }, {\n                    rootMargin: '-40% 0px -40% 0px',\n                    threshold: 0.1,\n                });\n\n                sections.forEach((section) => observer.observe(section));\n            } else {\n                const handleScroll = () => {\n                    if (isSearchActive()) {\n                        return;\n                    }\n\n                    let bestSection = null;\n                    let bestOffset = Infinity;\n                    const scrollY = global.pageYOffset || doc.documentElement.scrollTop || 0;\n\n                    sections.forEach((section) => {\n                        const rect = section.getBoundingClientRect();\n                        const absoluteTop = rect.top + scrollY;\n                        const delta = Math.abs(absoluteTop - scrollY - 140);\n\n                        if (delta < bestOffset) {\n                            bestSection = section;\n                            bestOffset = delta;\n                        }\n                    });\n\n                    if (bestSection) {\n                        setActiveLink(bestSection);\n                    }\n                };\n\n                global.addEventListener('scroll', handleScroll, { passive: true });\n                handleScroll();\n            }\n\n            if (searchInput) {\n                searchInput.addEventListener('input', (event) => {\n                    filterSections(event.target.value || '');\n                });\n\n                filterSections(searchInput.value || '');\n            } else {\n                updateEmptyState(sections.length, false);\n            }\n\n            applyViewMode(currentViewMode, { force: true, persist: false });\n\n            if (!isSearchActive()) {\n                setActiveLink(sections[0]);\n            }\n\n            return {\n                setSectionModified(section, isModified) {\n                    if (!section) {\n                        return;\n                    }\n\n                    const badge = navBadgeBySection.get(section);\n                    const navItem = navItemBySection.get(section);\n\n                    if (badge) {\n                        badge.hidden = !isModified;\n                    }\n\n                    if (navItem) {\n                        if (isModified) {\n                            navItem.setAttribute('data-mga-modified', 'true');\n                        } else {\n                            navItem.removeAttribute('data-mga-modified');\n                        }\n                    }\n                },\n            };\n        };\n\n        const navigationApi = initSettingsNavigation();\n\n        // Live update for range sliders\n        const bindRangeToOutput = (sliderId, outputId, displayFormatter, ariaFormatter) => {\n            const slider = doc.getElementById(sliderId);\n            const output = doc.getElementById(outputId);\n\n            if (!slider || !output) {\n                return;\n            }\n\n            const updateOutput = () => {\n                const value = slider.value;\n                const displayValue = typeof displayFormatter === 'function'\n                    ? displayFormatter(value)\n                    : value;\n                const ariaValue = typeof ariaFormatter === 'function'\n                    ? ariaFormatter(value)\n                    : displayValue;\n\n                if (typeof output.value !== 'undefined') {\n                    output.value = displayValue;\n                }\n\n                output.textContent = displayValue;\n                slider.setAttribute('aria-valuenow', value);\n                slider.setAttribute('aria-valuetext', ariaValue);\n            };\n\n            slider.addEventListener('input', updateOutput);\n            updateOutput();\n        };\n\n        bindRangeToOutput(\n            'mga_thumb_size',\n            'mga_thumb_size_value',\n            (value) => mgaAdminSprintf(mgaAdmin__('%spx', 'lightbox-jlg'), value),\n            (value) => mgaAdminSprintf(mgaAdmin__('%s pixels', 'lightbox-jlg'), value)\n        );\n\n        bindRangeToOutput(\n            'mga_thumb_size_mobile',\n            'mga_thumb_size_mobile_value',\n            (value) => mgaAdminSprintf(mgaAdmin__('%spx', 'lightbox-jlg'), value),\n            (value) => mgaAdminSprintf(mgaAdmin__('%s pixels', 'lightbox-jlg'), value)\n        );\n\n        bindRangeToOutput(\n            'mga_bg_opacity',\n            'mga_bg_opacity_value',\n            (value) => value,\n            (value) => mgaAdminSprintf(mgaAdmin__('%s opacity', 'lightbox-jlg'), value)\n        );\n\n        const accentColorInput = doc.getElementById('mga_accent_color');\n        const accentColorPreview = doc.getElementById('mga_accent_color_preview');\n\n        if (accentColorInput) {\n            const defaultColorAttr = accentColorInput.getAttribute('data-default-color');\n            const fallbackColor = isValidHexColor(defaultColorAttr) ? defaultColorAttr : '#ffffff';\n\n            const applyPreviewColor = (rawColor) => {\n                const color = isValidHexColor(rawColor) ? rawColor : fallbackColor;\n\n                if (accentColorPreview) {\n                    accentColorPreview.style.backgroundColor = color;\n                }\n\n                return color;\n            };\n\n            applyPreviewColor(accentColorInput.value);\n\n            const maybeJQuery = global.jQuery;\n\n            if (maybeJQuery && typeof maybeJQuery.fn === 'object' && typeof maybeJQuery.fn.wpColorPicker === 'function') {\n                maybeJQuery(accentColorInput).wpColorPicker({\n                    change(event, ui) {\n                        const colorValue = ui && ui.color ? ui.color.toString() : event.target.value;\n                        applyPreviewColor(colorValue);\n                    },\n                    clear() {\n                        const defaultColor = accentColorInput.getAttribute('data-default-color') || fallbackColor;\n                        maybeJQuery(accentColorInput).val(defaultColor);\n                        applyPreviewColor(defaultColor);\n                    },\n                });\n\n                maybeJQuery(accentColorInput).on('input', (event) => {\n                    applyPreviewColor(event.target.value);\n                });\n            } else {\n                accentColorInput.addEventListener('input', () => {\n                    applyPreviewColor(accentColorInput.value);\n                });\n            }\n        }\n\n        contrastInspector = createContrastInspector();\n\n        const initLivePreview = () => {\n            const previewContainer = doc.querySelector('[data-mga-live-preview]');\n\n            if (!previewContainer) {\n                return;\n            }\n\n            const previewMock = previewContainer.querySelector('[data-mga-live-preview-mock]');\n            const effectLabel = previewContainer.querySelector('[data-mga-preview-effect]');\n            const thumbsContainer = previewContainer.querySelector('[data-mga-preview-thumbs]');\n            const statusRegion = previewContainer.querySelector('[data-mga-preview-status]');\n            const fallbackMessage = previewContainer.querySelector('[data-mga-preview-fallback]');\n            const mainSwiperEl = previewContainer.querySelector('[data-mga-preview-swiper]');\n            const paginationEl = previewContainer.querySelector('[data-mga-preview-pagination]');\n            const nextButton = previewContainer.querySelector('[data-mga-preview-next]');\n            const prevButton = previewContainer.querySelector('[data-mga-preview-prev]');\n\n            const toolbarActions = {\n                zoom: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"zoom\"]')),\n                download: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"download\"]')),\n                share: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"share\"]')),\n                cta: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"cta\"]')),\n                fullscreen: Array.from(previewContainer.querySelectorAll('[data-preview-action=\"fullscreen\"]')),\n            };\n\n            let previewSwiper = null;\n\n            const shouldAnnounce = (event) => {\n                if (!event || typeof event !== 'object') {\n                    return false;\n                }\n\n                if (event.type === 'init') {\n                    return false;\n                }\n\n                return event.type !== 'input';\n            };\n\n            const announce = (message) => {\n                if (!statusRegion || typeof message !== 'string' || message.trim() === '') {\n                    return;\n                }\n\n                statusRegion.textContent = message;\n            };\n\n            const setPreviewState = (state) => {\n                if (!previewContainer) {\n                    return;\n                }\n\n                previewContainer.setAttribute('data-mga-preview-state', state);\n            };\n\n            const showFallback = (message) => {\n                setPreviewState('error');\n\n                if (fallbackMessage) {\n                    fallbackMessage.hidden = false;\n\n                    if (typeof message === 'string' && message.trim() !== '') {\n                        fallbackMessage.textContent = message;\n                    }\n                }\n\n                if (message) {\n                    announce(message);\n                }\n            };\n\n            const destroyPreviewSwiper = () => {\n                if (previewSwiper && typeof previewSwiper.destroy === 'function') {\n                    previewSwiper.destroy(true, true);\n                }\n\n                previewSwiper = null;\n            };\n\n            const parseNumber = (value, fallbackValue) => {\n                const numeric = typeof value === 'number' ? value : parseFloat(value);\n\n                if (Number.isNaN(numeric)) {\n                    return fallbackValue;\n                }\n\n                return numeric;\n            };\n\n            const buildSwiperConfig = () => {\n                const effectSelect = doc.getElementById('mga_effect');\n                const delayInput = doc.getElementById('mga_delay');\n                const speedInput = doc.getElementById('mga_speed');\n                const effectValue = effectSelect ? effectSelect.value : 'slide';\n                const delaySeconds = parseNumber(delayInput ? delayInput.value : null, 4);\n                const speedValue = parseNumber(speedInput ? speedInput.value : null, 600);\n\n                const autoplayDelay = Math.max(Math.round(delaySeconds * 1000), 1000);\n                const speed = Math.max(Math.round(speedValue), 100);\n\n                const config = {\n                    allowTouchMove: false,\n                    simulateTouch: false,\n                    centeredSlides: true,\n                    effect: effectValue || 'slide',\n                    loop: true,\n                    slidesPerView: 1,\n                    speed,\n                };\n\n                if (paginationEl) {\n                    config.pagination = {\n                        el: paginationEl,\n                        clickable: false,\n                    };\n                }\n\n                if (nextButton && prevButton) {\n                    config.navigation = {\n                        nextEl: nextButton,\n                        prevEl: prevButton,\n                    };\n                }\n\n                if (!Number.isNaN(autoplayDelay) && autoplayDelay > 0) {\n                    config.autoplay = {\n                        delay: autoplayDelay,\n                        disableOnInteraction: false,\n                    };\n                }\n\n                if (config.effect === 'fade') {\n                    config.fadeEffect = { crossFade: true };\n                }\n\n                config.on = {\n                    init(swiper) {\n                        if (swiper && typeof swiper.slideToLoop === 'function') {\n                            swiper.slideToLoop(0, 0, false);\n                        }\n                    },\n                };\n\n                return config;\n            };\n\n            const rebuildPreviewSwiper = () => {\n                if (!mainSwiperEl || typeof global.Swiper !== 'function') {\n                    return;\n                }\n\n                destroyPreviewSwiper();\n\n                try {\n                    previewSwiper = new global.Swiper(mainSwiperEl, buildSwiperConfig());\n                    setPreviewState('ready');\n                } catch (error) {\n                    showFallback(mgaAdmin__('Impossible d\u2019initialiser l\u2019aper\u00E7u Swiper.', 'lightbox-jlg'));\n                }\n            };\n\n            if (!mainSwiperEl) {\n                showFallback(mgaAdmin__('Pr\u00E9visualisation indisponible\u00A0: conteneur Swiper manquant.', 'lightbox-jlg'));\n            } else {\n                if (fallbackMessage) {\n                    fallbackMessage.hidden = true;\n                }\n\n                setPreviewState('loading');\n                announce(mgaAdmin__('Pr\u00E9paration de la pr\u00E9visualisation\u2026', 'lightbox-jlg'));\n\n                ensureSwiper(global, { namespace: 'admin-preview' })\n                    .then(() => {\n                        rebuildPreviewSwiper();\n                        if (previewSwiper && typeof previewSwiper.update === 'function') {\n                            previewSwiper.update();\n                        }\n                        announce(mgaAdmin__('Pr\u00E9visualisation pr\u00EAte.', 'lightbox-jlg'));\n                    })\n                    .catch(() => {\n                        showFallback(mgaAdmin__('Impossible de charger Swiper. La pr\u00E9visualisation interactive est d\u00E9sactiv\u00E9e.', 'lightbox-jlg'));\n                    });\n            }\n\n            const setAccent = (value, _element, event) => {\n                if (!previewMock) {\n                    return;\n                }\n\n                const color = isValidHexColor(value) ? value : '#6366f1';\n                previewMock.style.setProperty('--mga-preview-accent', color);\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdmin__('Couleur d\u2019accent mise \u00E0 jour.', 'lightbox-jlg'));\n                }\n            };\n\n            const setOverlay = (value, _element, event) => {\n                if (!previewMock) {\n                    return;\n                }\n\n                const numeric = parseFloat(value);\n\n                if (Number.isNaN(numeric)) {\n                    return;\n                }\n\n                const clamped = Math.min(Math.max(numeric, 0), 1);\n                previewMock.style.setProperty('--mga-preview-overlay', `rgba(15, 23, 42, ${clamped})`);\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdmin__('Opacit\u00E9 de l\u2019arri\u00E8re-plan mise \u00E0 jour.', 'lightbox-jlg'));\n                }\n            };\n\n            const setBackgroundStyle = (style, _element, event) => {\n                if (!previewMock) {\n                    return;\n                }\n\n                const normalized = typeof style === 'string' && style ? style : 'echo';\n                previewMock.setAttribute('data-preview-style', normalized);\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdmin__('Style d\u2019arri\u00E8re-plan actualis\u00E9.', 'lightbox-jlg'));\n                }\n            };\n\n            const toggleAction = (name, enabled, _element, event) => {\n                const actions = toolbarActions[name] || [];\n\n                actions.forEach((action) => {\n                    action.setAttribute('data-preview-hidden', enabled ? 'false' : 'true');\n                    action.setAttribute('aria-hidden', enabled ? 'false' : 'true');\n                });\n\n                if (shouldAnnounce(event)) {\n                    const label = {\n                        zoom: mgaAdmin__('Zoom', 'lightbox-jlg'),\n                        download: mgaAdmin__('T\u00E9l\u00E9chargement', 'lightbox-jlg'),\n                        share: mgaAdmin__('Partage', 'lightbox-jlg'),\n                        cta: mgaAdmin__('Appel \u00E0 l\u2019action', 'lightbox-jlg'),\n                        fullscreen: mgaAdmin__('Plein \u00E9cran', 'lightbox-jlg'),\n                    }[name] || name;\n\n                    announce(mgaAdminSprintf(\n                        enabled\n                            ? mgaAdmin__('%s activ\u00E9 dans l\u2019aper\u00E7u.', 'lightbox-jlg')\n                            : mgaAdmin__('%s masqu\u00E9 dans l\u2019aper\u00E7u.', 'lightbox-jlg'),\n                        label\n                    ));\n                }\n            };\n\n            const setThumbScale = (value, _element, event) => {\n                if (!thumbsContainer) {\n                    return;\n                }\n\n                const numeric = parseFloat(value);\n\n                if (Number.isNaN(numeric)) {\n                    thumbsContainer.style.setProperty('--mga-preview-thumb-scale', '1');\n                } else {\n                    const normalized = Math.min(Math.max(numeric / 90, 0.6), 1.4);\n                    thumbsContainer.style.setProperty('--mga-preview-thumb-scale', normalized.toString());\n                }\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdmin__('Taille des miniatures mise \u00E0 jour.', 'lightbox-jlg'));\n                }\n            };\n\n            const updateEffectLabel = (_value, _element, event) => {\n                if (!effectLabel) {\n                    return;\n                }\n\n                const effectSelect = doc.getElementById('mga_effect');\n                const delayInput = doc.getElementById('mga_delay');\n                const speedInput = doc.getElementById('mga_speed');\n                const effectValue = effectSelect ? effectSelect.value : '';\n                const delayValue = delayInput ? delayInput.value || '4' : '4';\n                const speedValue = speedInput ? speedInput.value || '600' : '600';\n                const effectLabelText = EFFECT_LABELS[effectValue] || mgaAdmin__('personnalis\u00E9e', 'lightbox-jlg');\n\n                effectLabel.textContent = mgaAdminSprintf(\n                    mgaAdmin__('Transition : %1$s \u2022 %2$ss / %3$sms', 'lightbox-jlg'),\n                    effectLabelText,\n                    delayValue,\n                    speedValue\n                );\n\n                if (shouldAnnounce(event)) {\n                    announce(mgaAdminSprintf(\n                        mgaAdmin__('Transition mise \u00E0 jour\u00A0: %1$s, rythme de %2$ss.', 'lightbox-jlg'),\n                        effectLabelText,\n                        delayValue\n                    ));\n                }\n\n                rebuildPreviewSwiper();\n            };\n\n            const bindPreviewControl = (id, handler, events = ['change']) => {\n                const element = doc.getElementById(id);\n\n                if (!element || typeof handler !== 'function') {\n                    return;\n                }\n\n                const invoke = (event) => {\n                    const payload = element.type === 'checkbox' ? element.checked : element.value;\n                    handler(payload, element, event || { type: 'init' });\n                };\n\n                events.forEach((eventName) => {\n                    element.addEventListener(eventName, invoke);\n                });\n\n                invoke({ type: 'init' });\n            };\n\n            bindPreviewControl('mga_accent_color', setAccent, ['input', 'change']);\n            bindPreviewControl('mga_bg_opacity', setOverlay, ['input', 'change']);\n            bindPreviewControl('mga_background_style', setBackgroundStyle);\n            bindPreviewControl('mga_thumb_size', setThumbScale, ['input', 'change']);\n            bindPreviewControl('mga_show_zoom', (checked, element, event) => toggleAction('zoom', checked, element, event));\n            bindPreviewControl('mga_show_download', (checked, element, event) => toggleAction('download', checked, element, event));\n            bindPreviewControl('mga_show_share', (checked, element, event) => toggleAction('share', checked, element, event));\n            bindPreviewControl('mga_show_cta', (checked, element, event) => toggleAction('cta', checked, element, event));\n            bindPreviewControl('mga_show_fullscreen', (checked, element, event) => toggleAction('fullscreen', checked, element, event));\n            bindPreviewControl('mga_effect', updateEffectLabel);\n            bindPreviewControl('mga_delay', updateEffectLabel, ['input', 'change']);\n            bindPreviewControl('mga_speed', updateEffectLabel, ['input', 'change']);\n        };\n\n        initLivePreview();\n\n        const stylePresetExport = global.mgaStylePresets && typeof global.mgaStylePresets === 'object'\n            ? global.mgaStylePresets\n            : {};\n        const stylePresets = stylePresetExport.presets && typeof stylePresetExport.presets === 'object'\n            ? stylePresetExport.presets\n            : {};\n        const presetSelect = doc.getElementById('mga_style_preset');\n        const applyPresetButton = doc.querySelector('[data-mga-apply-style-preset]');\n        const resetPresetButton = doc.querySelector('[data-mga-reset-style-preset]');\n        const presetDescription = doc.querySelector('[data-mga-style-preset-description]');\n        let isApplyingPreset = false;\n\n        presetDiffTracker = createPresetDiffTracker(stylePresetExport.defaults || {});\n\n        if (presetDiffTracker && typeof presetDiffTracker.setNavigationApi === 'function') {\n            presetDiffTracker.setNavigationApi(navigationApi);\n        }\n\n        const maybeDispatchEvent = (element, eventType) => {\n            if (!element || typeof element.dispatchEvent !== 'function') {\n                return;\n            }\n\n            try {\n                element.dispatchEvent(new Event(eventType, { bubbles: true }));\n            } catch (error) {\n                if (typeof doc.createEvent === 'function') {\n                    try {\n                        const fallbackEvent = doc.createEvent('Event');\n                        fallbackEvent.initEvent(eventType, true, true);\n                        element.dispatchEvent(fallbackEvent);\n                    } catch (fallbackError) {\n                        // Ignore unsupported event creation paths.\n                    }\n                }\n            }\n        };\n\n        const setNumericInputValue = (id, value) => {\n            const input = doc.getElementById(id);\n\n            if (!input) {\n                return;\n            }\n\n            input.value = value;\n            maybeDispatchEvent(input, 'input');\n            maybeDispatchEvent(input, 'change');\n        };\n\n        const setRangeInputValue = setNumericInputValue;\n\n        const setSelectValue = (id, value) => {\n            const select = doc.getElementById(id);\n\n            if (!select) {\n                return;\n            }\n\n            select.value = value;\n            maybeDispatchEvent(select, 'change');\n        };\n\n        const setCheckboxValue = (id, value) => {\n            const checkbox = doc.getElementById(id);\n\n            if (!checkbox) {\n                return;\n            }\n\n            checkbox.checked = Boolean(value);\n            maybeDispatchEvent(checkbox, 'change');\n        };\n\n        const setAccentColorValue = (value) => {\n            if (!accentColorInput) {\n                return;\n            }\n\n            const targetColor = typeof value === 'string' ? value : '';\n            const maybeJQuery = global.jQuery;\n\n            if (maybeJQuery && typeof maybeJQuery.fn === 'object' && typeof maybeJQuery.fn.wpColorPicker === 'function') {\n                const picker = maybeJQuery(accentColorInput);\n\n                if (picker && typeof picker.wpColorPicker === 'function') {\n                    picker.wpColorPicker('color', targetColor);\n                    if (contrastInspector) {\n                        contrastInspector.update(targetColor);\n                    }\n                    return;\n                }\n            }\n\n            accentColorInput.value = targetColor;\n            maybeDispatchEvent(accentColorInput, 'change');\n\n            if (contrastInspector) {\n                contrastInspector.update(targetColor);\n            }\n        };\n\n        const applyPresetSettings = (settings) => {\n            if (!settings || typeof settings !== 'object') {\n                return;\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'delay')) {\n                setNumericInputValue('mga_delay', settings.delay);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'speed')) {\n                setNumericInputValue('mga_speed', settings.speed);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'effect')) {\n                setSelectValue('mga_effect', settings.effect);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'easing')) {\n                setSelectValue('mga_easing', settings.easing);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'thumbs_layout')) {\n                setSelectValue('mga_thumbs_layout', settings.thumbs_layout);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'thumb_size')) {\n                setRangeInputValue('mga_thumb_size', settings.thumb_size);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'thumb_size_mobile')) {\n                setRangeInputValue('mga_thumb_size_mobile', settings.thumb_size_mobile);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_thumbs_mobile')) {\n                setCheckboxValue('mga_show_thumbs_mobile', settings.show_thumbs_mobile);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'accent_color')) {\n                setAccentColorValue(settings.accent_color);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'bg_opacity')) {\n                setRangeInputValue('mga_bg_opacity', settings.bg_opacity);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'background_style')) {\n                setSelectValue('mga_background_style', settings.background_style);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'autoplay_start')) {\n                setCheckboxValue('mga_autoplay_start', settings.autoplay_start);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'loop')) {\n                setCheckboxValue('mga_loop', settings.loop);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_zoom')) {\n                setCheckboxValue('mga_show_zoom', settings.show_zoom);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_download')) {\n                setCheckboxValue('mga_show_download', settings.show_download);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_share')) {\n                setCheckboxValue('mga_show_share', settings.show_share);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_cta')) {\n                setCheckboxValue('mga_show_cta', settings.show_cta);\n            }\n\n            if (Object.prototype.hasOwnProperty.call(settings, 'show_fullscreen')) {\n                setCheckboxValue('mga_show_fullscreen', settings.show_fullscreen);\n            }\n        };\n\n        const updatePresetDescription = () => {\n            if (!presetDescription) {\n                return;\n            }\n\n            const key = presetSelect ? presetSelect.value : '';\n\n            if (key && stylePresets[key] && stylePresets[key].description) {\n                presetDescription.textContent = stylePresets[key].description;\n                return;\n            }\n\n            const customDescription = typeof stylePresetExport.customDescription === 'string'\n                ? stylePresetExport.customDescription\n                : '';\n            const baselineInfo = presetDiffTracker ? presetDiffTracker.getBaselineInfo() : { label: '', key: '' };\n            const baselineNote = baselineInfo && baselineInfo.label\n                ? mgaAdminSprintf(mgaAdmin__('Base\u00A0: %1$s.', 'lightbox-jlg'), baselineInfo.label)\n                : '';\n            const segments = [customDescription, baselineNote].filter((segment) => segment && segment.trim() !== '');\n\n            if (segments.length === 0) {\n                presetDescription.textContent = '';\n                return;\n            }\n\n            presetDescription.textContent = segments.join(' ');\n        };\n\n        const markPresetAsCustom = () => {\n            if (isApplyingPreset) {\n                return;\n            }\n\n            if (presetSelect && presetSelect.value !== '') {\n                presetSelect.value = '';\n            }\n\n            updatePresetDescription();\n\n            if (presetDiffTracker && typeof presetDiffTracker.refresh === 'function') {\n                presetDiffTracker.refresh();\n            }\n\n            scheduleSummaryRefresh();\n        };\n\n        const registerPresetWatcher = (id) => {\n            const element = doc.getElementById(id);\n\n            if (!element) {\n                return;\n            }\n\n            const eventNames = ['change'];\n\n            if (element.tagName === 'INPUT' && ['text', 'number', 'range'].includes(element.type)) {\n                eventNames.push('input');\n            }\n\n            eventNames.forEach((eventName) => {\n                element.addEventListener(eventName, markPresetAsCustom);\n            });\n        };\n\n        if (presetSelect) {\n            updatePresetDescription();\n            presetSelect.addEventListener('change', updatePresetDescription);\n        }\n\n        if (presetDiffTracker) {\n            if (presetSelect && presetSelect.value && stylePresets[presetSelect.value]) {\n                const initialPreset = stylePresets[presetSelect.value];\n\n                presetDiffTracker.setBaseline({\n                    key: presetSelect.value,\n                    label: initialPreset.label || presetSelect.options[presetSelect.selectedIndex]?.text || '',\n                    settings: initialPreset.settings || {},\n                });\n            } else {\n                presetDiffTracker.setBaseline({\n                    key: '',\n                    label: presetDiffTracker.getDefaultLabel(),\n                    settings: stylePresetExport.defaults || {},\n                });\n            }\n        }\n\n        if (applyPresetButton) {\n            applyPresetButton.addEventListener('click', (event) => {\n                event.preventDefault();\n\n                if (!presetSelect) {\n                    return;\n                }\n\n                const key = presetSelect.value;\n\n                if (!key || !stylePresets[key]) {\n                    return;\n                }\n\n                isApplyingPreset = true;\n                applyPresetSettings(stylePresets[key].settings || {});\n                if (presetDiffTracker) {\n                    presetDiffTracker.setBaseline({\n                        key,\n                        label: stylePresets[key].label || '',\n                        settings: stylePresets[key].settings || {},\n                    });\n                }\n                isApplyingPreset = false;\n                updatePresetDescription();\n                scheduleSummaryRefresh();\n            });\n        }\n\n        if (resetPresetButton) {\n            resetPresetButton.addEventListener('click', (event) => {\n                event.preventDefault();\n\n                const defaults = stylePresetExport.defaults || {};\n\n                if (defaults && typeof defaults === 'object' && Object.keys(defaults).length > 0) {\n                    isApplyingPreset = true;\n                    applyPresetSettings(defaults);\n                    if (presetDiffTracker) {\n                        presetDiffTracker.setBaseline({\n                            key: '',\n                            label: presetDiffTracker.getDefaultLabel(),\n                            settings: defaults,\n                        });\n                    }\n                    isApplyingPreset = false;\n                }\n\n                if (presetSelect) {\n                    presetSelect.value = '';\n                }\n\n                updatePresetDescription();\n                scheduleSummaryRefresh();\n            });\n        }\n\n        [\n            'mga_delay',\n            'mga_speed',\n            'mga_effect',\n            'mga_easing',\n            'mga_thumb_size',\n            'mga_thumb_size_mobile',\n            'mga_thumbs_layout',\n            'mga_accent_color',\n            'mga_bg_opacity',\n            'mga_background_style',\n            'mga_show_thumbs_mobile',\n            'mga_autoplay_start',\n            'mga_loop',\n            'mga_show_zoom',\n            'mga_show_download',\n            'mga_show_share',\n            'mga_show_cta',\n            'mga_show_fullscreen',\n        ].forEach(registerPresetWatcher);\n\n        const shareRepeater = doc.querySelector('[data-share-repeater]');\n\n        if (shareRepeater) {\n            initShareRepeater(shareRepeater);\n        }\n\n        const selectorsWrapper = doc.querySelector('[data-mga-content-selectors]');\n\n        if (selectorsWrapper) {\n            const selectorsList = selectorsWrapper.querySelector('[data-mga-content-selectors-list]');\n            const selectorsTextarea = selectorsWrapper.querySelector('[data-mga-content-selectors-textarea]');\n            const template = doc.getElementById('mga-content-selector-template');\n            const placeholder = selectorsWrapper.getAttribute('data-mga-selector-placeholder') || '';\n            let isSyncingSelectors = false;\n            let addRow = () => {};\n\n            if (selectorsList) {\n                const queryRows = () => selectorsList.querySelectorAll('[data-mga-content-selector-row]');\n                const queryInputs = () => selectorsList.querySelectorAll('[data-mga-content-selector-input]');\n                const hasEmptyRow = () => Array.from(queryInputs()).some((input) => input.value.trim() === '');\n\n                const updateRemoveState = () => {\n                    const rows = queryRows();\n                    const disable = rows.length <= 1;\n\n                    rows.forEach((row) => {\n                        const removeButton = row.querySelector('[data-mga-remove-selector]');\n\n                        if (removeButton) {\n                            removeButton.disabled = disable;\n                            removeButton.setAttribute('aria-disabled', disable ? 'true' : 'false');\n                        }\n                    });\n                };\n\n                const getRowValues = () => Array.from(queryInputs()).map((input) => input.value.trim()).filter((value) => value !== '');\n\n                const syncTextareaFromRows = () => {\n                    if (!selectorsTextarea || isSyncingSelectors) {\n                        return;\n                    }\n\n                    const values = getRowValues();\n                    isSyncingSelectors = true;\n                    selectorsTextarea.value = values.join('\\n');\n                    isSyncingSelectors = false;\n                };\n\n                const bindRow = (row) => {\n                    if (!row || row.getAttribute('data-mga-selector-bound') === 'true') {\n                        return;\n                    }\n\n                    const removeButton = row.querySelector('[data-mga-remove-selector]');\n\n                    if (removeButton) {\n                        removeButton.addEventListener('click', (event) => {\n                            event.preventDefault();\n                            const rows = queryRows();\n\n                            if (rows.length <= 1) {\n                                const input = row.querySelector('[data-mga-content-selector-input]');\n\n                                if (input) {\n                                    input.value = '';\n                                    syncTextareaFromRows();\n                                }\n\n                                return;\n                            }\n\n                            row.remove();\n                            updateRemoveState();\n                            syncTextareaFromRows();\n                        });\n                    }\n\n                    const input = row.querySelector('[data-mga-content-selector-input]');\n\n                    if (input) {\n                        input.addEventListener('input', () => {\n                            if (!isSyncingSelectors) {\n                                syncTextareaFromRows();\n                            }\n                        });\n\n                        input.addEventListener('keydown', (event) => {\n                            if (event.key !== 'Enter' || event.shiftKey || event.altKey || event.metaKey || event.ctrlKey) {\n                                return;\n                            }\n\n                            event.preventDefault();\n\n                            if (!hasEmptyRow() && typeof addRow === 'function') {\n                                addRow('');\n                                return;\n                            }\n\n                            const rows = queryRows();\n\n                            if (rows.length === 0) {\n                                return;\n                            }\n\n                            const lastRow = rows[rows.length - 1];\n\n                            if (!lastRow) {\n                                return;\n                            }\n\n                            const lastInput = lastRow.querySelector('[data-mga-content-selector-input]');\n\n                            if (lastInput && lastInput !== event.target) {\n                                safeFocus(lastInput);\n                            }\n                        });\n\n                        if (placeholder && !input.getAttribute('placeholder')) {\n                            input.setAttribute('placeholder', placeholder);\n                        }\n                    }\n\n                    row.setAttribute('data-mga-selector-bound', 'true');\n                };\n\n                const createRow = (value = '') => {\n                    let row = null;\n\n                    if (template && template.content) {\n                        const fragment = doc.importNode(template.content, true);\n\n                        row = fragment.firstElementChild;\n                        if (row) {\n                            const input = row.querySelector('[data-mga-content-selector-input]');\n\n                            if (input) {\n                                input.value = value;\n\n                                if (placeholder) {\n                                    input.setAttribute('placeholder', placeholder);\n                                }\n                            }\n\n                            bindRow(row);\n\n                            return row;\n                        }\n                    }\n\n                    row = doc.createElement('div');\n                    row.className = 'mga-content-selectors__row';\n                    row.setAttribute('data-mga-content-selector-row', '');\n\n                    const input = doc.createElement('input');\n                    input.type = 'text';\n                    input.className = 'regular-text';\n                    input.setAttribute('data-mga-content-selector-input', '');\n                    input.value = value;\n\n                    if (placeholder) {\n                        input.setAttribute('placeholder', placeholder);\n                    }\n\n                    row.appendChild(input);\n\n                    const removeButton = doc.createElement('button');\n                    removeButton.type = 'button';\n                    removeButton.className = 'button-link mga-content-selectors__remove';\n                    removeButton.setAttribute('data-mga-remove-selector', '');\n                    removeButton.textContent = mgaAdmin__('Retirer', 'lightbox-jlg');\n                    row.appendChild(removeButton);\n\n                    bindRow(row);\n\n                    return row;\n                };\n\n                const renderRows = (values) => {\n                    selectorsList.innerHTML = '';\n\n                    if (values.length === 0) {\n                        const emptyRow = createRow('');\n                        if (emptyRow) {\n                            selectorsList.appendChild(emptyRow);\n                        }\n                    } else {\n                        values.forEach((value) => {\n                            const row = createRow(value);\n\n                            if (row) {\n                                selectorsList.appendChild(row);\n                            }\n                        });\n                    }\n\n                    updateRemoveState();\n                };\n\n                const syncRowsFromTextarea = () => {\n                    if (!selectorsTextarea || isSyncingSelectors) {\n                        return;\n                    }\n\n                    const values = selectorsTextarea.value\n                        .split(/\\r\\n|\\r|\\n/)\n                        .map((selector) => selector.trim())\n                        .filter((selector) => selector.length > 0);\n\n                    isSyncingSelectors = true;\n                    renderRows(values);\n                    isSyncingSelectors = false;\n                };\n\n                addRow = (value = '') => {\n                    const row = createRow(value);\n\n                    if (row) {\n                        selectorsList.appendChild(row);\n                        updateRemoveState();\n\n                        const input = row.querySelector('[data-mga-content-selector-input]');\n\n                        if (input) {\n                            safeFocus(input);\n                        }\n                    }\n\n                    syncTextareaFromRows();\n                };\n\n                if (selectorsTextarea) {\n                    syncRowsFromTextarea();\n\n                    selectorsTextarea.addEventListener('input', () => {\n                        if (!isSyncingSelectors) {\n                            syncRowsFromTextarea();\n                        }\n                    });\n                } else {\n                    renderRows([]);\n                }\n\n                const addButton = selectorsWrapper.querySelector('[data-mga-add-selector]');\n\n                if (addButton) {\n                    addButton.addEventListener('click', (event) => {\n                        event.preventDefault();\n                        addRow();\n                    });\n                }\n            }\n        }\n        function initShareRepeater(container) {\n            const list = container.querySelector('[data-share-repeater-list]');\n            const addButton = container.querySelector('[data-share-repeater-add]');\n            const template = doc.getElementById('mga-share-channel-template');\n\n            if (!list || !template) {\n                return;\n            }\n\n            let uidSeed = Date.now();\n\n            const generateUid = () => {\n                uidSeed += 1;\n                return `mga-share-channel-${uidSeed}`;\n            };\n\n            const ensureItemUid = (item) => {\n                if (!item) {\n                    return null;\n                }\n\n                if (!item.dataset.shareUid || item.dataset.shareUid.trim() === '') {\n                    item.dataset.shareUid = generateUid();\n                }\n\n                return item.dataset.shareUid;\n            };\n\n            const applyUid = (item) => {\n                const uid = ensureItemUid(item);\n\n                if (!uid) {\n                    return;\n                }\n\n                const idElements = item.querySelectorAll('[data-share-id-suffix]');\n\n                idElements.forEach((element) => {\n                    const suffix = element.getAttribute('data-share-id-suffix');\n\n                    if (!suffix) {\n                        return;\n                    }\n\n                    const id = `${uid}-${suffix}`;\n\n                    if (element.tagName === 'LABEL') {\n                        element.setAttribute('for', id);\n                    } else {\n                        element.id = id;\n                    }\n                });\n            };\n\n            const refreshItemTitle = (item) => {\n                if (!item) {\n                    return;\n                }\n\n                const title = item.querySelector('[data-share-repeater-title]');\n\n                if (!title) {\n                    return;\n                }\n\n                const labelInput = item.querySelector('[data-share-field=\"label\"]');\n                const keyInput = item.querySelector('[data-share-field=\"key\"]');\n                const labelValue = labelInput && typeof labelInput.value === 'string' ? labelInput.value.trim() : '';\n                const keyValue = keyInput && typeof keyInput.value === 'string' ? keyInput.value.trim() : '';\n                const fallback = keyValue ? keyValue.toUpperCase() : mgaAdmin__('Nouveau canal', 'lightbox-jlg');\n\n                title.textContent = labelValue || fallback;\n            };\n\n            const updateIconPreview = (item) => {\n                if (!item) {\n                    return;\n                }\n\n                const preview = item.querySelector('[data-share-icon-preview]');\n                const select = item.querySelector('[data-share-field=\"icon\"]');\n\n                if (!preview) {\n                    return;\n                }\n\n                const iconKey = select ? select.value : '';\n                const iconSvg = createShareIconPreview(iconKey);\n\n                preview.innerHTML = '';\n\n                if (iconSvg) {\n                    preview.appendChild(iconSvg);\n                }\n\n                const summaryIcon = item.querySelector('[data-share-preview-icon]');\n\n                if (summaryIcon) {\n                    summaryIcon.innerHTML = '';\n\n                    const summarySvg = createShareIconPreview(iconKey);\n\n                    if (summarySvg) {\n                        summaryIcon.appendChild(summarySvg);\n                    }\n                }\n            };\n\n            const getShareField = (item, key) => {\n                if (!item || !key) {\n                    return null;\n                }\n\n                return item.querySelector(`[data-share-field=\"${key}\"]`);\n            };\n\n            const getShareFieldValue = (item, key) => {\n                const field = getShareField(item, key);\n                const value = field && typeof field.value === 'string' ? field.value.trim() : '';\n                return value;\n            };\n\n            const buildSharePreviewUrl = (template) => {\n                if (typeof template !== 'string') {\n                    return '';\n                }\n\n                let previewValue = template;\n\n                Object.keys(SHARE_TEMPLATE_PLACEHOLDERS).forEach((token) => {\n                    const replacement = encodeURIComponent(SHARE_TEMPLATE_PLACEHOLDERS[token]);\n                    previewValue = previewValue.replace(new RegExp(token, 'gi'), replacement);\n                });\n\n                return previewValue;\n            };\n\n            const hasRequiredPlaceholder = (template) => /%url%/i.test(typeof template === 'string' ? template : '');\n\n            const isTemplateSchemeValid = (template) => {\n                if (typeof template !== 'string') {\n                    return false;\n                }\n\n                const trimmed = template.trim();\n\n                if (trimmed === '') {\n                    return false;\n                }\n\n                const scheme = trimmed.split(':')[0].toLowerCase();\n\n                if (!SHARE_TEMPLATE_SCHEMES.includes(scheme)) {\n                    return false;\n                }\n\n                if (scheme === 'http' || scheme === 'https') {\n                    return /^https?:\\/\\//i.test(trimmed);\n                }\n\n                return true;\n            };\n\n            const applyFieldError = (field, messageElement, message) => {\n                const hasMessage = typeof message === 'string' && message !== '';\n\n                if (field) {\n                    if (hasMessage) {\n                        field.classList.add('mga-field-error');\n                        field.setAttribute('aria-invalid', 'true');\n                    } else {\n                        field.classList.remove('mga-field-error');\n                        field.removeAttribute('aria-invalid');\n                    }\n                }\n\n                if (messageElement) {\n                    if (hasMessage) {\n                        messageElement.textContent = message;\n                        messageElement.removeAttribute('hidden');\n                    } else {\n                        messageElement.textContent = '';\n                        messageElement.setAttribute('hidden', 'hidden');\n                    }\n                }\n            };\n\n            const updateSharePreview = (item) => {\n                if (!item) {\n                    return;\n                }\n\n                const preview = item.querySelector('[data-share-preview]');\n\n                if (!preview) {\n                    return;\n                }\n\n                const labelElement = preview.querySelector('[data-share-preview-label]');\n                const urlElement = preview.querySelector('[data-share-preview-url]');\n                const labelValue = getShareFieldValue(item, 'label');\n                const keyValue = getShareFieldValue(item, 'key');\n                const fallbackLabel = keyValue ? keyValue.toUpperCase() : mgaAdmin__('Nouveau canal', 'lightbox-jlg');\n\n                if (labelElement) {\n                    labelElement.textContent = labelValue || fallbackLabel;\n                }\n\n                if (urlElement) {\n                    const templateValue = getShareFieldValue(item, 'template');\n\n                    if (templateValue) {\n                        const previewUrl = buildSharePreviewUrl(templateValue);\n                        urlElement.textContent = previewUrl;\n                        urlElement.setAttribute('data-preview-empty', 'false');\n                        urlElement.title = previewUrl;\n                    } else {\n                        urlElement.textContent = mgaAdmin__('Compl\u00E9tez le mod\u00E8le pour g\u00E9n\u00E9rer un lien.', 'lightbox-jlg');\n                        urlElement.setAttribute('data-preview-empty', 'true');\n                        urlElement.removeAttribute('title');\n                    }\n                }\n\n                scheduleSummaryRefresh();\n            };\n\n            const validateShareItems = () => {\n                const items = Array.from(list.querySelectorAll('[data-share-repeater-item]'));\n                const keyOccurrences = items.reduce((accumulator, item) => {\n                    const keyValue = getShareFieldValue(item, 'key').toLowerCase();\n\n                    if (keyValue) {\n                        accumulator[keyValue] = (accumulator[keyValue] || 0) + 1;\n                    }\n\n                    return accumulator;\n                }, {});\n\n                items.forEach((item) => {\n                    const keyInput = getShareField(item, 'key');\n                    const templateInput = getShareField(item, 'template');\n                    const keyMessageEl = item.querySelector('[data-share-error=\"key\"]');\n                    const templateMessageEl = item.querySelector('[data-share-error=\"template\"]');\n                    const rawKeyValue = getShareFieldValue(item, 'key');\n                    const normalizedKey = rawKeyValue.toLowerCase();\n                    let keyMessage = '';\n\n                    if (!rawKeyValue) {\n                        keyMessage = mgaAdmin__('Renseignez une cl\u00E9 pour ce canal.', 'lightbox-jlg');\n                    } else if (!/^[a-z0-9_-]+$/i.test(rawKeyValue)) {\n                        keyMessage = mgaAdmin__('Utilisez uniquement des lettres, chiffres ou tirets.', 'lightbox-jlg');\n                    } else if (keyOccurrences[normalizedKey] > 1) {\n                        keyMessage = mgaAdmin__('Chaque cl\u00E9 doit \u00EAtre unique.', 'lightbox-jlg');\n                    }\n\n                    applyFieldError(keyInput, keyMessageEl, keyMessage);\n\n                    const templateValue = getShareFieldValue(item, 'template');\n                    let templateMessage = '';\n\n                    if (!templateValue) {\n                        templateMessage = mgaAdmin__('Renseignez un mod\u00E8le d\u2019URL.', 'lightbox-jlg');\n                    } else if (!hasRequiredPlaceholder(templateValue)) {\n                        templateMessage = mgaAdmin__('Ajoutez au moins le jeton %url% pour construire le lien.', 'lightbox-jlg');\n                    } else if (!isTemplateSchemeValid(templateValue)) {\n                        templateMessage = mgaAdmin__('Indiquez une URL valide (http, https, mailto, tel ou sms).', 'lightbox-jlg');\n                    }\n\n                    applyFieldError(templateInput, templateMessageEl, templateMessage);\n                });\n            };\n\n            const updateItemNames = () => {\n                const items = Array.from(list.querySelectorAll('[data-share-repeater-item]'));\n\n                items.forEach((item, index) => {\n                    const baseName = `mga_settings[share_channels][${index}]`;\n                    const fields = item.querySelectorAll('[data-share-field]');\n\n                    fields.forEach((field) => {\n                        const fieldKey = field.getAttribute('data-share-field');\n\n                        if (!fieldKey) {\n                            return;\n                        }\n\n                        let effectiveKey = fieldKey;\n\n                        if (fieldKey === 'enabled-hidden') {\n                            effectiveKey = 'enabled';\n                        }\n\n                        field.name = `${baseName}[${effectiveKey}]`;\n                    });\n\n                    applyUid(item);\n                    refreshItemTitle(item);\n                    updateIconPreview(item);\n                    updateSharePreview(item);\n                });\n\n                validateShareItems();\n\n                scheduleSummaryRefresh();\n            };\n\n            const focusItemField = (item) => {\n                if (!item) {\n                    return;\n                }\n\n                const target = item.querySelector('[data-share-field=\"label\"]') || item;\n                safeFocus(target);\n            };\n\n            list.addEventListener('input', (event) => {\n                const target = event.target;\n\n                if (!target) {\n                    return;\n                }\n\n                const item = target.closest('[data-share-repeater-item]');\n\n                if (!item) {\n                    return;\n                }\n\n                if (target.matches('[data-share-field=\"label\"], [data-share-field=\"key\"]')) {\n                    refreshItemTitle(item);\n                }\n\n                if (target.matches('[data-share-field=\"icon\"]')) {\n                    updateIconPreview(item);\n                }\n\n                updateSharePreview(item);\n                validateShareItems();\n            });\n\n            list.addEventListener('change', (event) => {\n                const target = event.target;\n\n                if (!target || !target.matches('[data-share-field=\"icon\"]')) {\n                    return;\n                }\n\n                const item = target.closest('[data-share-repeater-item]');\n\n                if (item) {\n                    updateIconPreview(item);\n                    updateSharePreview(item);\n                    validateShareItems();\n                }\n            });\n\n            list.addEventListener('click', (event) => {\n                const button = event.target.closest('[data-share-action]');\n\n                if (!button) {\n                    return;\n                }\n\n                event.preventDefault();\n\n                const action = button.getAttribute('data-share-action');\n                const item = button.closest('[data-share-repeater-item]');\n\n                if (!item) {\n                    return;\n                }\n\n                if (action === 'remove') {\n                    const nextFocusItem = item.nextElementSibling || item.previousElementSibling;\n\n                    if (item.parentNode === list) {\n                        list.removeChild(item);\n                    }\n\n                    updateItemNames();\n                    scheduleSummaryRefresh();\n\n                    if (nextFocusItem) {\n                        focusItemField(nextFocusItem);\n                    }\n\n                    return;\n                }\n\n                if (action === 'move-up') {\n                    const previous = item.previousElementSibling;\n\n                    if (previous) {\n                        list.insertBefore(item, previous);\n                        updateItemNames();\n                        focusItemField(item);\n                        scheduleSummaryRefresh();\n                    }\n\n                    return;\n                }\n\n                if (action === 'move-down') {\n                    const next = item.nextElementSibling;\n\n                    if (next) {\n                        list.insertBefore(next, item);\n                        updateItemNames();\n                        focusItemField(item);\n                        scheduleSummaryRefresh();\n                    }\n                }\n            });\n\n            if (addButton) {\n                addButton.addEventListener('click', (event) => {\n                    event.preventDefault();\n\n                    const fragment = doc.importNode(template.content, true);\n                    const newItem = fragment.querySelector('[data-share-repeater-item]');\n\n                    if (!newItem) {\n                        return;\n                    }\n\n                    list.appendChild(newItem);\n                    updateItemNames();\n                    focusItemField(newItem);\n                    scheduleSummaryRefresh();\n                });\n            }\n\n            updateItemNames();\n            scheduleSummaryRefresh();\n        }\n    });\n})(typeof window !== 'undefined' ? window : globalThis);\n"],
  "mappings": "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",
  "names": ["TOKEN_REGEX", "createFallbackSprintf", "createSprintf", "createTranslate", "resolveI18n", "init_sprintf", "__esmMin", "format", "args", "autoIndex", "match", "position", "argIndex", "type", "numericIndex", "value", "coerced", "i18n", "text", "globalObject", "SHARE_ICON_LIBRARY", "sanitizeIconKey", "getDefinition", "createSvgElement", "createIconSvg", "createIconPreview", "init_icons", "__esmMin", "value", "iconKey", "sanitizedKey", "doc", "tag", "attributes", "element", "attribute", "definition", "svg", "pathDefinition", "path", "wrapperTag", "wrapperClass", "wrapper", "focusSupportsOptionsCache", "detectFocusOptionsSupport", "safeFocus", "exposeOnWindow", "init_focus", "__esmMin", "doc", "testElement", "root", "error", "element", "options", "getTimestamp", "getDocument", "getMetricsStore", "recordMetric", "normalizeAttempts", "loadStylesheet", "loadScript", "getLoaderState", "attemptLoad", "runAttemptsSequentially", "getConfig", "ensureSwiper", "init_swiper", "__esmMin", "global", "namespace", "event", "detail", "store", "customEvent", "error", "config", "attempt", "key", "js", "css", "inject", "jsSrc", "doc", "existing", "link", "resolve", "reject", "script", "timeoutId", "cleanup", "attempts", "promise", "explicitConfig", "options", "state", "init_shared", "__esmMin", "init_sprintf", "init_icons", "init_focus", "init_swiper", "require_admin", "__commonJSMin", "exports", "module", "init_shared", "global", "exposeOnWindow", "mgaAdminI18n", "resolveI18n", "mgaAdmin__", "createTranslate", "mgaAdminSprintf", "createSprintf", "detectFocusOptionsSupport", "safeFocus", "doc", "createShareIconPreview", "iconKey", "preview", "createIconPreview", "sanitizeIconKey", "SHARE_TEMPLATE_SAMPLE", "SHARE_TEMPLATE_PLACEHOLDERS", "SHARE_TEMPLATE_SCHEMES", "isValidHexColor", "value", "_a", "form", "scheduleSummaryRefresh", "EFFECT_LABELS", "THUMB_LAYOUT_LABELS", "BACKGROUND_STYLE_LABELS", "EASING_LABELS", "BOOLEAN_LABELS", "formatBooleanLabel", "DEFAULT_LIGHT_BACKGROUND", "DEFAULT_DARK_BACKGROUND", "parseHexColor", "hex", "char", "numeric", "srgbChannelToLinear", "channel", "normalized", "computeRelativeLuminance", "rgb", "r", "b", "computeContrastRatio", "foreground", "background", "foregroundLuminance", "backgroundLuminance", "lighter", "darker", "describeContrastRatio", "ratio", "formatRatio", "createContrastInspector", "inspector", "accentInput", "message", "valueNodes", "swatches", "lastAudit", "update", "rawColor", "normalizedColor", "entries", "entry", "descriptor", "ratioText", "severityRank", "dominant", "current", "next", "readAudit", "handleInput", "event", "color", "createPresetDiffTracker", "defaultSettings", "SECTION_MAP", "fieldMeta", "normalizeSettingValue", "key", "meta", "candidate", "normalizeSettings", "settings", "defaultNormalized", "trackedSections", "baseline", "baselineLabel", "baselineKey", "navigationApi", "lastDiff", "readCurrentValue", "element", "valuesAreEqual", "formatValue", "computeDiff", "diff", "currentValue", "baselineValue", "updateSectionIndicators", "state", "item", "sectionId", "sectionEl", "isModified", "refresh", "setBaseline", "label", "setNavigationApi", "api", "contrastInspector", "presetDiffTracker", "wizardApi", "targetForm", "wizard", "stepPanels", "indicators", "prevButton", "nextButton", "submitButton", "statusElement", "summaryIndex", "currentIndex", "panel", "getMessages", "setStatusMessage", "statusMessage", "updateControls", "focusPanel", "focusTarget", "focusOptions", "deactivatePanel", "activatePanel", "updateIndicators", "indicator", "index", "updateSummaryContainers", "timeoutId", "presetTarget", "timingTarget", "toolbarTarget", "shareTarget", "validationContainer", "diffContainer", "diffList", "diffBaseline", "diffEmpty", "renderToolbarSummary", "active", "toggle", "input", "renderPresetSummary", "baselineInfo", "presetSelect", "fallback", "option", "renderTimingSummary", "delayInput", "effectSelect", "delayValue", "effectLabel", "selectedOption", "renderShareSummary", "activeLabels", "enabledField", "labelField", "keyField", "labelValue", "keyValue", "collectValidations", "audit", "renderValidations", "validations", "validation", "alert", "renderPresetDiff", "row", "values", "beforeValue", "arrow", "afterValue", "goToStep", "targetIndex", "normalizedIndex", "currentPanel", "nextPanel", "handleNext", "handlePrev", "attachIndicatorNavigation", "handleFormInput", "config", "ajaxUrl", "nonce", "setStatus", "explicitMessage", "setSavingState", "isSaving", "formData", "response", "payload", "successMessage", "error", "fallbackMessage", "noopApi", "layout", "sections", "navList", "navLinks", "linkBySection", "navItemBySection", "navBadgeBySection", "viewToggle", "viewSelect", "VIEW_STORAGE_KEY", "currentViewMode", "syncViewSelect", "persistViewMode", "updateLayoutViewMode", "getSectionVisibility", "section", "searchInput", "emptyState", "highlightTimeouts", "isSearchActive", "updateEmptyState", "visibleCount", "searchActive", "setActiveLink", "link", "clearHighlights", "highlightSection", "filterSections", "rawQuery", "query", "navItem", "firstMatch", "applyViewMode", "nextMode", "options", "currentQuery", "href", "target", "badge", "lastVisibleSection", "observer", "handleScroll", "bestSection", "bestOffset", "scrollY", "absoluteTop", "delta", "bindRangeToOutput", "sliderId", "outputId", "displayFormatter", "ariaFormatter", "slider", "output", "updateOutput", "displayValue", "ariaValue", "accentColorInput", "accentColorPreview", "defaultColorAttr", "fallbackColor", "applyPreviewColor", "maybeJQuery", "ui", "colorValue", "defaultColor", "previewContainer", "previewMock", "thumbsContainer", "statusRegion", "mainSwiperEl", "paginationEl", "toolbarActions", "previewSwiper", "shouldAnnounce", "announce", "setPreviewState", "showFallback", "destroyPreviewSwiper", "parseNumber", "fallbackValue", "buildSwiperConfig", "speedInput", "effectValue", "delaySeconds", "speedValue", "autoplayDelay", "speed", "swiper", "rebuildPreviewSwiper", "ensureSwiper", "setAccent", "_element", "setOverlay", "clamped", "setBackgroundStyle", "style", "toggleAction", "name", "enabled", "action", "setThumbScale", "updateEffectLabel", "_value", "effectLabelText", "bindPreviewControl", "id", "handler", "events", "invoke", "eventName", "checked", "stylePresetExport", "stylePresets", "applyPresetButton", "resetPresetButton", "presetDescription", "isApplyingPreset", "maybeDispatchEvent", "eventType", "fallbackEvent", "fallbackError", "setNumericInputValue", "setRangeInputValue", "setSelectValue", "select", "setCheckboxValue", "checkbox", "setAccentColorValue", "targetColor", "picker", "applyPresetSettings", "updatePresetDescription", "customDescription", "baselineNote", "segments", "segment", "markPresetAsCustom", "registerPresetWatcher", "eventNames", "initialPreset", "defaults", "shareRepeater", "initShareRepeater", "selectorsWrapper", "selectorsList", "selectorsTextarea", "template", "placeholder", "isSyncingSelectors", "addRow", "queryRows", "queryInputs", "hasEmptyRow", "updateRemoveState", "rows", "disable", "removeButton", "getRowValues", "syncTextareaFromRows", "bindRow", "lastRow", "lastInput", "createRow", "renderRows", "emptyRow", "syncRowsFromTextarea", "selector", "addButton", "container", "list", "uidSeed", "generateUid", "ensureItemUid", "applyUid", "uid", "suffix", "refreshItemTitle", "title", "labelInput", "keyInput", "updateIconPreview", "iconSvg", "summaryIcon", "summarySvg", "getShareField", "getShareFieldValue", "field", "buildSharePreviewUrl", "previewValue", "token", "replacement", "hasRequiredPlaceholder", "isTemplateSchemeValid", "trimmed", "scheme", "applyFieldError", "messageElement", "hasMessage", "updateSharePreview", "labelElement", "urlElement", "fallbackLabel", "templateValue", "previewUrl", "validateShareItems", "items", "keyOccurrences", "accumulator", "templateInput", "keyMessageEl", "templateMessageEl", "rawKeyValue", "normalizedKey", "keyMessage", "templateMessage", "updateItemNames", "baseName", "fieldKey", "effectiveKey", "focusItemField", "button", "nextFocusItem", "previous", "newItem"]
}
