(()=>{var le=(e,n)=>()=>(e&&(n=e(e=0)),n);var Fe=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports);var $e,Ke,je,Pe,ke,Ce=le(()=>{$e=/%(\d+\$)?[sd]/g,Ke=()=>(e,...n)=>{let r=0;return String(e).replace($e,(h,o)=>{let v,K=h.charAt(h.length-1);if(o){let W=parseInt(o.slice(0,-1),10);if(Number.isNaN(W)||W<=0)return"";v=W-1}else v=r,r+=1;let j=v>=0&&v<n.length?n[v]:void 0;if(K==="d"){let W=parseInt(j,10);return Number.isNaN(W)?"":String(W)}return typeof j=="undefined"?"":String(j)})},je=e=>e&&typeof e.sprintf=="function"?e.sprintf:Ke(),Pe=e=>e&&typeof e.__=="function"?e.__:n=>n,ke=e=>!e||typeof e!="object"?null:e.wp&&e.wp.i18n?e.wp.i18n:null});var ve,we,We,Ie,Qe,qe,Le=le(()=>{ve={facebook:{viewBox:"0 0 24 24",paths:[{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z"}]},twitter:{viewBox:"0 0 24 24",paths:[{d:"M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z"}]},linkedin:{viewBox:"0 0 24 24",paths:[{d:"M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z"}]},pinterest:{viewBox:"0 0 24 24",paths:[{d:"M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z"}]},whatsapp:{viewBox:"0 0 24 24",paths:[{d:"M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z"}]},telegram:{viewBox:"0 0 24 24",paths:[{d:"M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z"}]},email:{viewBox:"0 0 24 24",paths:[{d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"}]},link:{viewBox:"0 0 24 24",paths:[{d:"M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z"}]},generic:{viewBox:"0 0 24 24",paths:[{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"},{d:"M13 17h-2v-2h2zm0-4h-2V7h2z"}]},copy:{viewBox:"0 0 24 24",paths:[{d:"M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"}]},download:{viewBox:"0 0 24 24",paths:[{d:"M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z"}]},native:{viewBox:"0 0 24 24",paths:[{d:"M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"}]}},we=e=>typeof e!="string"?"":e.trim().toLowerCase().replace(/[^a-z0-9_-]/g,""),We=e=>{let n=we(e);return n&&ve[n]?ve[n]:ve.generic},Ie=(e,n,r={})=>{if(!e||typeof e.createElementNS!="function")return null;let h=e.createElementNS("http://www.w3.org/2000/svg",n);return Object.keys(r).forEach(o=>{h.setAttribute(o,r[o])}),h},Qe=(e,n)=>{let r=We(n),h=Ie(e,"svg",{viewBox:r.viewBox,fill:"currentColor","aria-hidden":"true",focusable:"false"});return h?(Array.isArray(r.paths)&&r.paths.forEach(o=>{let v=Ie(e,"path",o);v&&h.appendChild(v)}),h):null},qe=(e,n,{wrapperTag:r="span",wrapperClass:h=""}={})=>{if(!e||typeof e.createElement!="function")return null;let o=e.createElement(r);h&&(o.className=h);let v=Qe(e,n);return v?(o.appendChild(v),o):null}});var te,ne,J,Me,Oe=le(()=>{te=null,ne=()=>{if(te!==null)return te;te=!1;let e=typeof window!="undefined"?window.document:null;if(!e||typeof e.createElement!="function"||typeof window.HTMLElement=="undefined"||!window.HTMLElement.prototype||typeof window.HTMLElement.prototype.focus!="function")return te;let n=e.createElement("button"),r=e.body||e.documentElement;try{n.type="button",r&&typeof r.appendChild=="function"&&r.appendChild(n),window.HTMLElement.prototype.focus.call(n,{get preventScroll(){return te=!0,!0}})}catch(h){te=!1}finally{n.parentNode&&typeof n.parentNode.removeChild=="function"&&n.parentNode.removeChild(n)}return te},J=(e,n={preventScroll:!0})=>{if(!e||typeof e.focus!="function")return;if(n&&ne())try{e.focus(n);return}catch(h){}e.focus()},Me=()=>{typeof window!="undefined"&&((!window.mgaFocusUtils||typeof window.mgaFocusUtils!="object")&&(window.mgaFocusUtils={}),window.mgaFocusUtils.detectFocusOptionsSupport=ne,window.mgaFocusUtils.safeFocus=J)}});var Ye,ze,Ge,N,Je,Ze,Xe,et,tt,rt,nt,Te,Ve=le(()=>{Ye=e=>e&&e.performance&&typeof e.performance.now=="function"?e.performance.now():Date.now(),ze=e=>e&&e.document||null,Ge=e=>e?((!e.mgaSwiperMetrics||typeof e.mgaSwiperMetrics!="object")&&(e.mgaSwiperMetrics={events:[]}),Array.isArray(e.mgaSwiperMetrics.events)||(e.mgaSwiperMetrics.events=[]),e.mgaSwiperMetrics):null,N=(e,n,r,h)=>{let o=Ge(e);if(o&&(o.events.push({namespace:n||"default",event:r,detail:h||{},timestamp:Ye(e)}),typeof e.dispatchEvent=="function"))try{let v=new e.CustomEvent("mga:swiper-metric",{detail:{namespace:n||"default",event:r,payload:h||{}}});e.dispatchEvent(v)}catch(v){}},Je=e=>!e||typeof e!="object"?[]:(Array.isArray(e.attempts)?e.attempts:[]).map(r=>{if(!r||typeof r!="object"||r.enabled===!1)return null;let h=typeof r.key=="string"&&r.key?r.key:"fallback",o=r.js&&typeof r.js=="object"?r.js:{},v=r.css&&typeof r.css=="object"?r.css:null,K=r.inject!==!1,j=typeof o.src=="string"&&o.src?o.src:"";return j?{key:h,label:typeof r.label=="string"&&r.label?r.label:h,js:{src:j,integrity:typeof o.integrity=="string"&&o.integrity?o.integrity:null,crossOrigin:typeof o.crossOrigin=="string"&&o.crossOrigin?o.crossOrigin:null,referrerPolicy:typeof o.referrerPolicy=="string"&&o.referrerPolicy?o.referrerPolicy:null},css:v&&typeof v.href=="string"&&v.href?{href:v.href,integrity:typeof v.integrity=="string"&&v.integrity?v.integrity:null,crossOrigin:typeof v.crossOrigin=="string"&&v.crossOrigin?v.crossOrigin:null,referrerPolicy:typeof v.referrerPolicy=="string"&&v.referrerPolicy?v.referrerPolicy:null}:null,timeout:typeof r.timeout=="number"&&r.timeout>0?r.timeout:12e3,inject:K}:null}).filter(Boolean),Ze=(e,n,r)=>{if(!n||!n.css)return Promise.resolve();let h=ze(e);if(!h)return Promise.resolve();let o=Array.from(h.querySelectorAll('link[rel="stylesheet"]')).find(v=>v.href===n.css.href);return o?Promise.resolve(o):new Promise((v,K)=>{let j=h.createElement("link");j.rel="stylesheet",j.href=n.css.href,j.dataset.mgaSwiperSource=n.key,n.css.integrity&&(j.integrity=n.css.integrity),n.css.crossOrigin?j.crossOrigin=n.css.crossOrigin:n.css.integrity&&(j.crossOrigin="anonymous"),n.css.referrerPolicy&&(j.referrerPolicy=n.css.referrerPolicy),j.onload=()=>{N(e,r,"css_load_success",{source:n.key}),v(j)},j.onerror=()=>{N(e,r,"css_load_error",{source:n.key}),K(new Error("Stylesheet load error"))},h.head.appendChild(j),N(e,r,"css_load_start",{source:n.key,href:n.css.href})})},Xe=(e,n,r)=>{if(!n||!n.js||!n.js.src)return Promise.reject(new Error("Invalid attempt configuration"));let h=ze(e);if(!h)return Promise.reject(new Error("Document unavailable"));let o=Array.from(h.querySelectorAll("script")).find(v=>v.src===n.js.src&&!v.hasAttribute("data-mga-swiper-failed"));return o?new Promise((v,K)=>{if(typeof e.Swiper=="function"){o.setAttribute("data-mga-swiper-loaded","true"),N(e,r,"js_already_available",{source:n.key}),v(o);return}if(typeof o.hasAttribute=="function"&&o.hasAttribute("data-mga-swiper-loaded")){v(o);return}o.addEventListener("load",()=>{o.setAttribute("data-mga-swiper-loaded","true"),v(o)}),o.addEventListener("error",()=>{o.setAttribute("data-mga-swiper-failed","true"),K(new Error("Existing script failed"))}),N(e,r,"js_existing_observed",{source:n.key})}):new Promise((v,K)=>{let j=h.createElement("script");j.src=n.js.src,j.async=!1,j.dataset.mgaSwiperSource=n.key,n.js.integrity&&(j.integrity=n.js.integrity),n.js.crossOrigin?j.crossOrigin=n.js.crossOrigin:n.js.integrity&&(j.crossOrigin="anonymous"),n.js.referrerPolicy&&(j.referrerPolicy=n.js.referrerPolicy);let W=null,X=()=>{W&&(e.clearTimeout(W),W=null)};j.onload=()=>{X(),j.setAttribute("data-mga-swiper-loaded","true"),N(e,r,"js_load_success",{source:n.key}),v(j)},j.onerror=()=>{X(),j.setAttribute("data-mga-swiper-failed","true"),N(e,r,"js_load_error",{source:n.key}),K(new Error("Script load error"))},W=e.setTimeout(()=>{X(),j.setAttribute("data-mga-swiper-failed","true"),N(e,r,"js_load_timeout",{source:n.key,timeout:n.timeout}),K(new Error("Script load timeout"))},n.timeout||12e3),h.head.appendChild(j),N(e,r,"js_load_start",{source:n.key,src:n.js.src})})},et=e=>e?((!e.mgaSwiperLoaderState||typeof e.mgaSwiperLoaderState!="object")&&(e.mgaSwiperLoaderState={promise:null}),e.mgaSwiperLoaderState):{promise:null},tt=(e,n,r)=>!n||!n.inject?Promise.resolve():typeof e.Swiper=="function"?Promise.resolve(e.Swiper):(N(e,r,"attempt_start",{source:n.key}),Ze(e,n,r).catch(()=>null).then(()=>Xe(e,n,r)).then(()=>{if(typeof e.Swiper=="function")return N(e,r,"attempt_success",{source:n.key}),e.Swiper;throw N(e,r,"attempt_no_global",{source:n.key}),new Error("Swiper global missing after load")}).catch(h=>{throw N(e,r,"attempt_error",{source:n.key,message:h&&h.message?h.message:String(h)}),h})),rt=(e,n,r)=>n.reduce((h,o)=>h.catch(()=>tt(e,o,r)),Promise.reject(new Error("initial"))),nt=(e,n)=>n&&typeof n=="object"?n:e&&e.mgaSwiperLoaderConfig&&typeof e.mgaSwiperLoaderConfig=="object"?e.mgaSwiperLoaderConfig:e&&e.mgaAdminConfig&&typeof e.mgaAdminConfig=="object"&&e.mgaAdminConfig.swiper?e.mgaAdminConfig.swiper:null,Te=(e=window,n={})=>{let r=typeof n.namespace=="string"&&n.namespace?n.namespace:"default";if(!e)return Promise.reject(new Error("Global scope unavailable"));if(typeof e.Swiper=="function")return N(e,r,"already_available",{}),Promise.resolve(e.Swiper);let h=nt(e,n.config),o=Je(h);if(!o.length)return N(e,r,"no_attempts_configured",{}),Promise.reject(new Error("No Swiper attempts configured"));let v=et(e);return v.promise||(N(e,r,"bootstrap",{version:h&&h.version?h.version:null,attempts:o.map(K=>K.key)}),v.promise=rt(e,o,r).catch(()=>{if(typeof e.Swiper=="function")return e.Swiper;throw N(e,r,"fatal",{}),new Error("Swiper could not be loaded")}).then(()=>{if(typeof e.Swiper=="function")return N(e,r,"ready",{}),e.Swiper;throw N(e,r,"fatal",{}),new Error("Swiper global unavailable")}).finally(()=>{v.promise=null})),v.promise}});var Be=le(()=>{Ce();Le();Oe();Ve()});var ot=Fe((wt,de)=>{Be();(function(e){Me();let n=ke(e),r=Pe(n),h=je(n);typeof de!="undefined"&&de.exports&&(de.exports={detectFocusOptionsSupport:ne,safeFocus:J});let o=e.document,v=ee=>{let Q=qe(o,we(ee));return Q?Q.querySelector("svg")||Q:null},K={url:"https://exemple.com/galerie/photo-01",text:"Une photo remarquable",title:"Collection studio"},j={"%url%":K.url,"%text%":K.text,"%title%":K.title},W=["http","https","mailto","tel","sms"],X=ee=>typeof ee!="string"?!1:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(ee.trim());!o||typeof o.addEventListener!="function"||o.addEventListener("DOMContentLoaded",function(){let ee=o.querySelector("[data-mga-settings-form]")||o.querySelector(".mga-admin-wrap form"),Q=()=>{},ue=(t=>{let a=o.querySelector("[data-mga-wizard]");if(!a)return null;let d=Array.from(a.querySelectorAll("[data-mga-step-panel]")),x=Array.from(a.querySelectorAll("[data-mga-step-indicator]")),_=a.querySelector("[data-mga-step-prev]"),P=a.querySelector("[data-mga-step-next]"),M=a.querySelector("[data-mga-step-submit]"),O=a.querySelector("[data-mga-save-status]"),I=d.length-1,E=d.findIndex(i=>i.classList.contains("is-active"));E<0&&(E=0);let k=()=>e.mgaAdminConfig&&e.mgaAdminConfig.messages||{},z=(i,p)=>{if(!O)return;let c=p||k()[i]||"";O.textContent=c,O.setAttribute("data-mga-status-state",i)},V=()=>{_&&(_.disabled=E===0),P&&(P.hidden=E>=I),M&&(M.hidden=E<I)},H=i=>{if(!i)return;let p=i.querySelector("[data-mga-step-title]")||i,c=ne()?{preventScroll:!0}:void 0;e.requestAnimationFrame(()=>{J(p,c)})},R=i=>{i.classList.remove("is-active"),i.setAttribute("hidden","hidden"),i.setAttribute("aria-hidden","true")},F=i=>{i.classList.add("is-active"),i.removeAttribute("hidden"),i.setAttribute("aria-hidden","false")},$=()=>{x.forEach((i,p)=>{i.classList.toggle("is-active",p===E),i.classList.toggle("is-completed",p<E),i.setAttribute("aria-current",p===E?"step":"false")})},b=(()=>{let i=null,p=a.querySelector("[data-mga-summary-preset]"),c=a.querySelector("[data-mga-summary-timing]"),S=a.querySelector("[data-mga-summary-toolbar]"),m=a.querySelector("[data-mga-summary-share]"),l=()=>{if(!S)return;let T=[{id:"mga_show_zoom",label:r("Zoom","lightbox-jlg")},{id:"mga_show_download",label:r("T\xE9l\xE9chargement","lightbox-jlg")},{id:"mga_show_share",label:r("Partage","lightbox-jlg")},{id:"mga_show_cta",label:r("Appel \xE0 l\u2019action","lightbox-jlg")},{id:"mga_show_fullscreen",label:r("Plein \xE9cran","lightbox-jlg")}].filter(D=>{let q=o.getElementById(D.id);return q?q.checked:!1});S.textContent=T.length>0?T.map(D=>D.label).join(", "):r("Aucun bouton affich\xE9","lightbox-jlg")},g=()=>{if(!p)return;let L=o.getElementById("mga_style_preset"),T=L?L.value:"";if(!L){p.textContent=r("R\xE9glages personnalis\xE9s","lightbox-jlg");return}let D=Array.from(L.options).find(B=>B.value===T),q=D?D.textContent:r("R\xE9glages personnalis\xE9s","lightbox-jlg");if(e.mgaStylePresets&&e.mgaStylePresets.presets){let B=e.mgaStylePresets.presets[T];B&&B.label&&(q=B.label)}T||(q=e.mgaStylePresets&&e.mgaStylePresets.customDescription?e.mgaStylePresets.customDescription:q),p.textContent=q},y=()=>{if(!c)return;let L=o.getElementById("mga_delay"),T=o.getElementById("mga_effect"),D=L&&L.value?L.value:"\u2014",q=r("Transition personnalis\xE9e","lightbox-jlg");if(T){let B=Array.from(T.options).find(ye=>ye.selected);q=B?B.textContent:q}c.textContent=h(r("Diaporama : %1$s\xA0s \xB7 Effet : %2$s","lightbox-jlg"),D,q)},A=()=>{if(!m)return;let T=Array.from(o.querySelectorAll("[data-share-repeater-item]")).filter(D=>{let q=D.querySelector('[data-share-field="enabled"]');return q?q.checked:!1}).map(D=>{let q=D.querySelector('[data-share-field="label"]'),B=D.querySelector('[data-share-field="key"]'),ye=q&&q.value?q.value.trim():"",Ee=B&&B.value?B.value.trim():"";return ye||(Ee?Ee.toUpperCase():r("Canal sans titre","lightbox-jlg"))});T.length>0?m.textContent=h(r("%1$d canaux actifs : %2$s","lightbox-jlg"),T.length,T.join(", ")):m.textContent=r("Aucun canal actif","lightbox-jlg")},U=()=>{g(),y(),l(),A()};return()=>{i&&e.clearTimeout(i),i=e.setTimeout(()=>{i=null,U()},120)}})(),w=i=>{let p=Math.max(0,Math.min(d.length-1,i));if(p===E)return;let c=d[E],S=d[p];c&&R(c),S&&(F(S),H(S)),E=p,$(),V(),E===I&&b()},C=()=>{t&&typeof t.reportValidity=="function"&&!t.reportValidity()||w(E+1)},s=()=>{w(E-1)},f=()=>{x.forEach((i,p)=>{i.addEventListener("click",c=>{if(c.preventDefault(),p<E&&p>=0)w(p);else if(p>E&&p<=I){if(t&&typeof t.reportValidity=="function"&&!t.reportValidity())return;w(p)}})})};_&&_.addEventListener("click",i=>{i.preventDefault(),s()}),P&&P.addEventListener("click",i=>{i.preventDefault(),C()}),f(),$(),V(),E===I&&b();let u=()=>{b()};return t&&(t.addEventListener("change",u),t.addEventListener("input",u)),{scheduleSummaryUpdate:b,setStatusMessage:z,goToSummary:()=>w(I)}})(ee);ue&&typeof ue.scheduleSummaryUpdate=="function"&&(Q=ue.scheduleSummaryUpdate),((t,a)=>{if(!t)return;let d=e.mgaAdminConfig||{},x=typeof d.ajaxUrl=="string"&&d.ajaxUrl?d.ajaxUrl:e.ajaxurl,_=typeof d.nonce=="string"?d.nonce:"",P=t.querySelector("[data-mga-step-submit]");if(!x||!_)return;let M=(I,E)=>{a&&typeof a.setStatusMessage=="function"&&a.setStatusMessage(I,E)},O=I=>{P&&(P.disabled=I,P.setAttribute("aria-busy",I?"true":"false")),I&&M("saving")};t.addEventListener("submit",I=>{if(I.preventDefault(),typeof t.reportValidity=="function"&&!t.reportValidity())return;let E=new FormData(t);E.append("action","mga_save_settings"),E.append("_ajax_nonce",_),O(!0),fetch(x,{method:"POST",credentials:"same-origin",body:E}).then(k=>{if(!k.ok)throw new Error(k.statusText||"HTTP error");return k.json()}).then(k=>{if(!k||k.success!==!0){let V=k&&k.data&&k.data.message?k.data.message:null;throw new Error(V||d.messages&&d.messages.error||r("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg"))}let z=k.data&&k.data.message?k.data.message:d.messages&&d.messages.success||r("R\xE9glages enregistr\xE9s.","lightbox-jlg");M("success",z),Q()}).catch(k=>{let z=d.messages&&d.messages.error?d.messages.error:r("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg");M("error",k&&k.message?k.message:z)}).finally(()=>{O(!1)})})})(ee,ue),(()=>{let t=o.querySelector("[data-mga-settings-layout]");if(!t)return;let a=Array.from(t.querySelectorAll("[data-mga-settings-section]"));if(a.length===0)return;let d=t.querySelector("[data-mga-settings-nav]"),x=d?Array.from(d.querySelectorAll("[data-mga-section-link]")):[],_=new Map,P=new Map,M=t.querySelector("[data-mga-view-toggle]"),O=M?M.querySelector("[data-mga-view-select]"):null,I="mga-settings-view-mode",k=(()=>{if(typeof e.localStorage=="undefined")return"essential";try{return e.localStorage.getItem(I)==="advanced"?"advanced":"essential"}catch(c){return"essential"}})(),z=()=>{O&&(O.value=k)},V=()=>{if(typeof e.localStorage!="undefined")try{e.localStorage.setItem(I,k)}catch(c){}},H=()=>{t.setAttribute("data-mga-view-mode",k)},R=c=>c&&c.getAttribute("data-mga-visibility")==="essential"?"essential":"advanced",F=t.querySelector("[data-mga-settings-search]"),$=t.querySelector("[data-mga-search-empty]"),b=new WeakMap,w=()=>t.getAttribute("data-mga-search-active")==="true",C=(c,S)=>{$&&(S&&c===0?$.removeAttribute("hidden"):$.setAttribute("hidden","hidden"))},s=c=>{c&&_.forEach((S,m)=>{m===c?S.setAttribute("aria-current","true"):S.removeAttribute("aria-current")})},f=()=>{a.forEach(c=>{c.removeAttribute("data-mga-section-highlight"),b.has(c)&&(e.clearTimeout(b.get(c)),b.delete(c))})},u=c=>{if(!c)return;c.setAttribute("data-mga-section-highlight","true"),b.has(c)&&e.clearTimeout(b.get(c));let S=e.setTimeout(()=>{c.removeAttribute("data-mga-section-highlight"),b.delete(c)},1600);b.set(c,S)},i=c=>{let S=typeof c=="string"?c.trim().toLowerCase():"",m=S.length>0,l=0;if(m?t.setAttribute("data-mga-search-active","true"):(t.removeAttribute("data-mga-search-active"),f()),a.forEach(g=>{let y=_.get(g),A=P.get(g);if(!m){if(k==="essential"&&R(g)==="advanced"){g.setAttribute("hidden","hidden"),y&&(y.setAttribute("hidden","hidden"),y.removeAttribute("aria-current")),A&&A.setAttribute("hidden","hidden");return}g.removeAttribute("hidden"),y&&y.removeAttribute("hidden"),A&&A.removeAttribute("hidden");return}(g.textContent||"").toLowerCase().includes(S)?(g.removeAttribute("hidden"),g.setAttribute("data-mga-section-highlight","true"),l+=1,y&&y.removeAttribute("hidden"),A&&A.removeAttribute("hidden")):(g.setAttribute("hidden","hidden"),g.removeAttribute("data-mga-section-highlight"),y&&(y.setAttribute("hidden","hidden"),y.removeAttribute("aria-current")),A&&A.setAttribute("hidden","hidden"))}),m){let g=a.find(y=>!y.hasAttribute("hidden"));g&&s(g)}C(l,m)},p=(c,S={})=>{let m=c==="advanced"?"advanced":"essential";if(m===k&&!S.force)return;k=m,z(),H(),S.persist!==!1&&V();let l=F&&F.value||"";i(l)};if(x.forEach(c=>{let S=c.getAttribute("href");if(!S||S.charAt(0)!=="#")return;let m=t.querySelector(S);if(!m)return;_.set(m,c);let l=c.closest("[data-mga-visibility]");l&&P.set(m,l),c.addEventListener("click",g=>{g.preventDefault(),m.hasAttribute("hidden")&&m.removeAttribute("hidden");try{m.scrollIntoView({behavior:"smooth",block:"start"})}catch(A){typeof m.scrollIntoView=="function"&&m.scrollIntoView()}s(m),u(m);let y=ne()?{preventScroll:!0}:void 0;typeof e.requestAnimationFrame=="function"?e.requestAnimationFrame(()=>{J(m,y)}):J(m,y)})}),z(),H(),O&&O.addEventListener("change",c=>{p(c.target.value||"essential")}),"IntersectionObserver"in e){let c=null,S=new IntersectionObserver(m=>{w()||(m.forEach(l=>{l.isIntersecting&&(c=l.target)}),c&&s(c))},{rootMargin:"-40% 0px -40% 0px",threshold:.1});a.forEach(m=>S.observe(m))}else{let c=()=>{if(w())return;let S=null,m=1/0,l=e.pageYOffset||o.documentElement.scrollTop||0;a.forEach(g=>{let A=g.getBoundingClientRect().top+l,U=Math.abs(A-l-140);U<m&&(S=g,m=U)}),S&&s(S)};e.addEventListener("scroll",c,{passive:!0}),c()}F?(F.addEventListener("input",c=>{i(c.target.value||"")}),i(F.value||"")):C(a.length,!1),p(k,{force:!0,persist:!1}),w()||s(a[0])})();let pe=(t,a,d,x)=>{let _=o.getElementById(t),P=o.getElementById(a);if(!_||!P)return;let M=()=>{let O=_.value,I=typeof d=="function"?d(O):O,E=typeof x=="function"?x(O):I;typeof P.value!="undefined"&&(P.value=I),P.textContent=I,_.setAttribute("aria-valuenow",O),_.setAttribute("aria-valuetext",E)};_.addEventListener("input",M),M()};pe("mga_thumb_size","mga_thumb_size_value",t=>h(r("%spx","lightbox-jlg"),t),t=>h(r("%s pixels","lightbox-jlg"),t)),pe("mga_thumb_size_mobile","mga_thumb_size_mobile_value",t=>h(r("%spx","lightbox-jlg"),t),t=>h(r("%s pixels","lightbox-jlg"),t)),pe("mga_bg_opacity","mga_bg_opacity_value",t=>t,t=>h(r("%s opacity","lightbox-jlg"),t));let Y=o.getElementById("mga_accent_color"),be=o.getElementById("mga_accent_color_preview");if(Y){let t=Y.getAttribute("data-default-color"),a=X(t)?t:"#ffffff",d=_=>{let P=X(_)?_:a;return be&&(be.style.backgroundColor=P),P};d(Y.value);let x=e.jQuery;x&&typeof x.fn=="object"&&typeof x.fn.wpColorPicker=="function"?(x(Y).wpColorPicker({change(_,P){let M=P&&P.color?P.color.toString():_.target.value;d(M)},clear(){let _=Y.getAttribute("data-default-color")||a;x(Y).val(_),d(_)}}),x(Y).on("input",_=>{d(_.target.value)})):Y.addEventListener("input",()=>{d(Y.value)})}(()=>{let t=o.querySelector("[data-mga-live-preview]");if(!t)return;let a=t.querySelector("[data-mga-live-preview-mock]"),d=t.querySelector("[data-mga-preview-effect]"),x=t.querySelector("[data-mga-preview-thumbs]"),_=t.querySelector("[data-mga-preview-status]"),P=t.querySelector("[data-mga-preview-fallback]"),M=t.querySelector("[data-mga-preview-swiper]"),O=t.querySelector("[data-mga-preview-pagination]"),I=t.querySelector("[data-mga-preview-next]"),E=t.querySelector("[data-mga-preview-prev]"),k={zoom:Array.from(t.querySelectorAll('[data-preview-action="zoom"]')),download:Array.from(t.querySelectorAll('[data-preview-action="download"]')),share:Array.from(t.querySelectorAll('[data-preview-action="share"]')),cta:Array.from(t.querySelectorAll('[data-preview-action="cta"]')),fullscreen:Array.from(t.querySelectorAll('[data-preview-action="fullscreen"]'))},z={slide:r("glissement","lightbox-jlg"),fade:r("fondu","lightbox-jlg"),cube:r("cube 3D","lightbox-jlg"),coverflow:r("coverflow","lightbox-jlg"),flip:r("flip 3D","lightbox-jlg")},V=null,H=l=>!l||typeof l!="object"||l.type==="init"?!1:l.type!=="input",R=l=>{!_||typeof l!="string"||l.trim()===""||(_.textContent=l)},F=l=>{t&&t.setAttribute("data-mga-preview-state",l)},$=l=>{F("error"),P&&(P.hidden=!1,typeof l=="string"&&l.trim()!==""&&(P.textContent=l)),l&&R(l)},b=()=>{V&&typeof V.destroy=="function"&&V.destroy(!0,!0),V=null},w=(l,g)=>{let y=typeof l=="number"?l:parseFloat(l);return Number.isNaN(y)?g:y},C=()=>{let l=o.getElementById("mga_effect"),g=o.getElementById("mga_delay"),y=o.getElementById("mga_speed"),A=l?l.value:"slide",U=w(g?g.value:null,4),L=w(y?y.value:null,600),T=Math.max(Math.round(U*1e3),1e3),D=Math.max(Math.round(L),100),q={allowTouchMove:!1,simulateTouch:!1,centeredSlides:!0,effect:A||"slide",loop:!0,slidesPerView:1,speed:D};return O&&(q.pagination={el:O,clickable:!1}),I&&E&&(q.navigation={nextEl:I,prevEl:E}),!Number.isNaN(T)&&T>0&&(q.autoplay={delay:T,disableOnInteraction:!1}),q.effect==="fade"&&(q.fadeEffect={crossFade:!0}),q.on={init(B){B&&typeof B.slideToLoop=="function"&&B.slideToLoop(0,0,!1)}},q},s=()=>{if(!(!M||typeof e.Swiper!="function")){b();try{V=new e.Swiper(M,C()),F("ready")}catch(l){$(r("Impossible d\u2019initialiser l\u2019aper\xE7u Swiper.","lightbox-jlg"))}}};M?(P&&(P.hidden=!0),F("loading"),R(r("Pr\xE9paration de la pr\xE9visualisation\u2026","lightbox-jlg")),Te(e,{namespace:"admin-preview"}).then(()=>{s(),V&&typeof V.update=="function"&&V.update(),R(r("Pr\xE9visualisation pr\xEAte.","lightbox-jlg"))}).catch(()=>{$(r("Impossible de charger Swiper. La pr\xE9visualisation interactive est d\xE9sactiv\xE9e.","lightbox-jlg"))})):$(r("Pr\xE9visualisation indisponible\xA0: conteneur Swiper manquant.","lightbox-jlg"));let f=(l,g,y)=>{if(!a)return;let A=X(l)?l:"#6366f1";a.style.setProperty("--mga-preview-accent",A),H(y)&&R(r("Couleur d\u2019accent mise \xE0 jour.","lightbox-jlg"))},u=(l,g,y)=>{if(!a)return;let A=parseFloat(l);if(Number.isNaN(A))return;let U=Math.min(Math.max(A,0),1);a.style.setProperty("--mga-preview-overlay",`rgba(15, 23, 42, ${U})`),H(y)&&R(r("Opacit\xE9 de l\u2019arri\xE8re-plan mise \xE0 jour.","lightbox-jlg"))},i=(l,g,y)=>{if(!a)return;let A=typeof l=="string"&&l?l:"echo";a.setAttribute("data-preview-style",A),H(y)&&R(r("Style d\u2019arri\xE8re-plan actualis\xE9.","lightbox-jlg"))},p=(l,g,y,A)=>{if((k[l]||[]).forEach(L=>{L.setAttribute("data-preview-hidden",g?"false":"true"),L.setAttribute("aria-hidden",g?"false":"true")}),H(A)){let L={zoom:r("Zoom","lightbox-jlg"),download:r("T\xE9l\xE9chargement","lightbox-jlg"),share:r("Partage","lightbox-jlg"),cta:r("Appel \xE0 l\u2019action","lightbox-jlg"),fullscreen:r("Plein \xE9cran","lightbox-jlg")}[l]||l;R(h(r(g?"%s activ\xE9 dans l\u2019aper\xE7u.":"%s masqu\xE9 dans l\u2019aper\xE7u.","lightbox-jlg"),L))}},c=(l,g,y)=>{if(!x)return;let A=parseFloat(l);if(Number.isNaN(A))x.style.setProperty("--mga-preview-thumb-scale","1");else{let U=Math.min(Math.max(A/90,.6),1.4);x.style.setProperty("--mga-preview-thumb-scale",U.toString())}H(y)&&R(r("Taille des miniatures mise \xE0 jour.","lightbox-jlg"))},S=(l,g,y)=>{if(!d)return;let A=o.getElementById("mga_effect"),U=o.getElementById("mga_delay"),L=o.getElementById("mga_speed"),T=A?A.value:"",D=U&&U.value||"4",q=L&&L.value||"600",B=z[T]||r("personnalis\xE9e","lightbox-jlg");d.textContent=h(r("Transition : %1$s \u2022 %2$ss / %3$sms","lightbox-jlg"),B,D,q),H(y)&&R(h(r("Transition mise \xE0 jour\xA0: %1$s, rythme de %2$ss.","lightbox-jlg"),B,D)),s()},m=(l,g,y=["change"])=>{let A=o.getElementById(l);if(!A||typeof g!="function")return;let U=L=>{let T=A.type==="checkbox"?A.checked:A.value;g(T,A,L||{type:"init"})};y.forEach(L=>{A.addEventListener(L,U)}),U({type:"init"})};m("mga_accent_color",f,["input","change"]),m("mga_bg_opacity",u,["input","change"]),m("mga_background_style",i),m("mga_thumb_size",c,["input","change"]),m("mga_show_zoom",(l,g,y)=>p("zoom",l,g,y)),m("mga_show_download",(l,g,y)=>p("download",l,g,y)),m("mga_show_share",(l,g,y)=>p("share",l,g,y)),m("mga_show_cta",(l,g,y)=>p("cta",l,g,y)),m("mga_show_fullscreen",(l,g,y)=>p("fullscreen",l,g,y)),m("mga_effect",S),m("mga_delay",S,["input","change"]),m("mga_speed",S,["input","change"])})();let re=e.mgaStylePresets&&typeof e.mgaStylePresets=="object"?e.mgaStylePresets:{},oe=re.presets&&typeof re.presets=="object"?re.presets:{},G=o.getElementById("mga_style_preset"),Se=o.querySelector("[data-mga-apply-style-preset]"),_e=o.querySelector("[data-mga-reset-style-preset]"),me=o.querySelector("[data-mga-style-preset-description]"),se=!1,ie=(t,a)=>{if(!(!t||typeof t.dispatchEvent!="function"))try{t.dispatchEvent(new Event(a,{bubbles:!0}))}catch(d){if(typeof o.createEvent=="function")try{let x=o.createEvent("Event");x.initEvent(a,!0,!0),t.dispatchEvent(x)}catch(x){}}},he=(t,a)=>{let d=o.getElementById(t);d&&(d.value=a,ie(d,"input"),ie(d,"change"))},ge=he,fe=(t,a)=>{let d=o.getElementById(t);d&&(d.value=a,ie(d,"change"))},Z=(t,a)=>{let d=o.getElementById(t);d&&(d.checked=!!a,ie(d,"change"))},Re=t=>{if(!Y)return;let a=typeof t=="string"?t:"",d=e.jQuery;if(d&&typeof d.fn=="object"&&typeof d.fn.wpColorPicker=="function"){let x=d(Y);if(x&&typeof x.wpColorPicker=="function"){x.wpColorPicker("color",a);return}}Y.value=a,ie(Y,"change")},Ae=t=>{!t||typeof t!="object"||(Object.prototype.hasOwnProperty.call(t,"delay")&&he("mga_delay",t.delay),Object.prototype.hasOwnProperty.call(t,"speed")&&he("mga_speed",t.speed),Object.prototype.hasOwnProperty.call(t,"effect")&&fe("mga_effect",t.effect),Object.prototype.hasOwnProperty.call(t,"easing")&&fe("mga_easing",t.easing),Object.prototype.hasOwnProperty.call(t,"thumbs_layout")&&fe("mga_thumbs_layout",t.thumbs_layout),Object.prototype.hasOwnProperty.call(t,"thumb_size")&&ge("mga_thumb_size",t.thumb_size),Object.prototype.hasOwnProperty.call(t,"thumb_size_mobile")&&ge("mga_thumb_size_mobile",t.thumb_size_mobile),Object.prototype.hasOwnProperty.call(t,"show_thumbs_mobile")&&Z("mga_show_thumbs_mobile",t.show_thumbs_mobile),Object.prototype.hasOwnProperty.call(t,"accent_color")&&Re(t.accent_color),Object.prototype.hasOwnProperty.call(t,"bg_opacity")&&ge("mga_bg_opacity",t.bg_opacity),Object.prototype.hasOwnProperty.call(t,"background_style")&&fe("mga_background_style",t.background_style),Object.prototype.hasOwnProperty.call(t,"autoplay_start")&&Z("mga_autoplay_start",t.autoplay_start),Object.prototype.hasOwnProperty.call(t,"loop")&&Z("mga_loop",t.loop),Object.prototype.hasOwnProperty.call(t,"show_zoom")&&Z("mga_show_zoom",t.show_zoom),Object.prototype.hasOwnProperty.call(t,"show_download")&&Z("mga_show_download",t.show_download),Object.prototype.hasOwnProperty.call(t,"show_share")&&Z("mga_show_share",t.show_share),Object.prototype.hasOwnProperty.call(t,"show_cta")&&Z("mga_show_cta",t.show_cta),Object.prototype.hasOwnProperty.call(t,"show_fullscreen")&&Z("mga_show_fullscreen",t.show_fullscreen))},ae=()=>{if(!me)return;let t=G?G.value:"";if(t&&oe[t]&&oe[t].description){me.textContent=oe[t].description;return}let a=typeof re.customDescription=="string"?re.customDescription:"";me.textContent=a},Ue=()=>{se||!G||G.value!==""&&(G.value="",ae())},De=t=>{let a=o.getElementById(t);if(!a)return;let d=["change"];a.tagName==="INPUT"&&["text","number","range"].includes(a.type)&&d.push("input"),d.forEach(x=>{a.addEventListener(x,Ue)})};G&&(ae(),G.addEventListener("change",ae)),Se&&Se.addEventListener("click",t=>{if(t.preventDefault(),!G)return;let a=G.value;!a||!oe[a]||(se=!0,Ae(oe[a].settings||{}),se=!1,ae())}),_e&&_e.addEventListener("click",t=>{t.preventDefault();let a=re.defaults||{};a&&typeof a=="object"&&Object.keys(a).length>0&&(se=!0,Ae(a),se=!1),G&&(G.value=""),ae()}),["mga_delay","mga_speed","mga_effect","mga_easing","mga_thumb_size","mga_thumb_size_mobile","mga_thumbs_layout","mga_accent_color","mga_bg_opacity","mga_background_style","mga_show_thumbs_mobile","mga_autoplay_start","mga_loop","mga_show_zoom","mga_show_download","mga_show_share","mga_show_cta","mga_show_fullscreen"].forEach(De);let xe=o.querySelector("[data-share-repeater]");xe&&He(xe);let ce=o.querySelector("[data-mga-content-selectors]");if(ce){let t=ce.querySelector("[data-mga-content-selectors-list]"),a=ce.querySelector("[data-mga-content-selectors-textarea]"),d=o.getElementById("mga-content-selector-template"),x=ce.getAttribute("data-mga-selector-placeholder")||"",_=!1,P=()=>{};if(t){let M=()=>t.querySelectorAll("[data-mga-content-selector-row]"),O=()=>t.querySelectorAll("[data-mga-content-selector-input]"),I=()=>Array.from(O()).some(b=>b.value.trim()===""),E=()=>{let b=M(),w=b.length<=1;b.forEach(C=>{let s=C.querySelector("[data-mga-remove-selector]");s&&(s.disabled=w,s.setAttribute("aria-disabled",w?"true":"false"))})},k=()=>Array.from(O()).map(b=>b.value.trim()).filter(b=>b!==""),z=()=>{if(!a||_)return;let b=k();_=!0,a.value=b.join(`
`),_=!1},V=b=>{if(!b||b.getAttribute("data-mga-selector-bound")==="true")return;let w=b.querySelector("[data-mga-remove-selector]");w&&w.addEventListener("click",s=>{if(s.preventDefault(),M().length<=1){let u=b.querySelector("[data-mga-content-selector-input]");u&&(u.value="",z());return}b.remove(),E(),z()});let C=b.querySelector("[data-mga-content-selector-input]");C&&(C.addEventListener("input",()=>{_||z()}),C.addEventListener("keydown",s=>{if(s.key!=="Enter"||s.shiftKey||s.altKey||s.metaKey||s.ctrlKey)return;if(s.preventDefault(),!I()&&typeof P=="function"){P("");return}let f=M();if(f.length===0)return;let u=f[f.length-1];if(!u)return;let i=u.querySelector("[data-mga-content-selector-input]");i&&i!==s.target&&J(i)}),x&&!C.getAttribute("placeholder")&&C.setAttribute("placeholder",x)),b.setAttribute("data-mga-selector-bound","true")},H=(b="")=>{let w=null;if(d&&d.content&&(w=o.importNode(d.content,!0).firstElementChild,w)){let u=w.querySelector("[data-mga-content-selector-input]");return u&&(u.value=b,x&&u.setAttribute("placeholder",x)),V(w),w}w=o.createElement("div"),w.className="mga-content-selectors__row",w.setAttribute("data-mga-content-selector-row","");let C=o.createElement("input");C.type="text",C.className="regular-text",C.setAttribute("data-mga-content-selector-input",""),C.value=b,x&&C.setAttribute("placeholder",x),w.appendChild(C);let s=o.createElement("button");return s.type="button",s.className="button-link mga-content-selectors__remove",s.setAttribute("data-mga-remove-selector",""),s.textContent=r("Retirer","lightbox-jlg"),w.appendChild(s),V(w),w},R=b=>{if(t.innerHTML="",b.length===0){let w=H("");w&&t.appendChild(w)}else b.forEach(w=>{let C=H(w);C&&t.appendChild(C)});E()},F=()=>{if(!a||_)return;let b=a.value.split(/\r\n|\r|\n/).map(w=>w.trim()).filter(w=>w.length>0);_=!0,R(b),_=!1};P=(b="")=>{let w=H(b);if(w){t.appendChild(w),E();let C=w.querySelector("[data-mga-content-selector-input]");C&&J(C)}z()},a?(F(),a.addEventListener("input",()=>{_||F()})):R([]);let $=ce.querySelector("[data-mga-add-selector]");$&&$.addEventListener("click",b=>{b.preventDefault(),P()})}}function He(t){let a=t.querySelector("[data-share-repeater-list]"),d=t.querySelector("[data-share-repeater-add]"),x=o.getElementById("mga-share-channel-template");if(!a||!x)return;let _=Date.now(),P=()=>(_+=1,`mga-share-channel-${_}`),M=s=>s?((!s.dataset.shareUid||s.dataset.shareUid.trim()==="")&&(s.dataset.shareUid=P()),s.dataset.shareUid):null,O=s=>{let f=M(s);if(!f)return;s.querySelectorAll("[data-share-id-suffix]").forEach(i=>{let p=i.getAttribute("data-share-id-suffix");if(!p)return;let c=`${f}-${p}`;i.tagName==="LABEL"?i.setAttribute("for",c):i.id=c})},I=s=>{if(!s)return;let f=s.querySelector("[data-share-repeater-title]");if(!f)return;let u=s.querySelector('[data-share-field="label"]'),i=s.querySelector('[data-share-field="key"]'),p=u&&typeof u.value=="string"?u.value.trim():"",c=i&&typeof i.value=="string"?i.value.trim():"",S=c?c.toUpperCase():r("Nouveau canal","lightbox-jlg");f.textContent=p||S},E=s=>{if(!s)return;let f=s.querySelector("[data-share-icon-preview]"),u=s.querySelector('[data-share-field="icon"]');if(!f)return;let i=u?u.value:"",p=v(i);f.innerHTML="",p&&f.appendChild(p);let c=s.querySelector("[data-share-preview-icon]");if(c){c.innerHTML="";let S=v(i);S&&c.appendChild(S)}},k=(s,f)=>!s||!f?null:s.querySelector(`[data-share-field="${f}"]`),z=(s,f)=>{let u=k(s,f);return u&&typeof u.value=="string"?u.value.trim():""},V=s=>{if(typeof s!="string")return"";let f=s;return Object.keys(j).forEach(u=>{let i=encodeURIComponent(j[u]);f=f.replace(new RegExp(u,"gi"),i)}),f},H=s=>/%url%/i.test(typeof s=="string"?s:""),R=s=>{if(typeof s!="string")return!1;let f=s.trim();if(f==="")return!1;let u=f.split(":")[0].toLowerCase();return W.includes(u)?u==="http"||u==="https"?/^https?:\/\//i.test(f):!0:!1},F=(s,f,u)=>{let i=typeof u=="string"&&u!=="";s&&(i?(s.classList.add("mga-field-error"),s.setAttribute("aria-invalid","true")):(s.classList.remove("mga-field-error"),s.removeAttribute("aria-invalid"))),f&&(i?(f.textContent=u,f.removeAttribute("hidden")):(f.textContent="",f.setAttribute("hidden","hidden")))},$=s=>{if(!s)return;let f=s.querySelector("[data-share-preview]");if(!f)return;let u=f.querySelector("[data-share-preview-label]"),i=f.querySelector("[data-share-preview-url]"),p=z(s,"label"),c=z(s,"key"),S=c?c.toUpperCase():r("Nouveau canal","lightbox-jlg");if(u&&(u.textContent=p||S),i){let m=z(s,"template");if(m){let l=V(m);i.textContent=l,i.setAttribute("data-preview-empty","false"),i.title=l}else i.textContent=r("Compl\xE9tez le mod\xE8le pour g\xE9n\xE9rer un lien.","lightbox-jlg"),i.setAttribute("data-preview-empty","true"),i.removeAttribute("title")}Q()},b=()=>{let s=Array.from(a.querySelectorAll("[data-share-repeater-item]")),f=s.reduce((u,i)=>{let p=z(i,"key").toLowerCase();return p&&(u[p]=(u[p]||0)+1),u},{});s.forEach(u=>{let i=k(u,"key"),p=k(u,"template"),c=u.querySelector('[data-share-error="key"]'),S=u.querySelector('[data-share-error="template"]'),m=z(u,"key"),l=m.toLowerCase(),g="";m?/^[a-z0-9_-]+$/i.test(m)?f[l]>1&&(g=r("Chaque cl\xE9 doit \xEAtre unique.","lightbox-jlg")):g=r("Utilisez uniquement des lettres, chiffres ou tirets.","lightbox-jlg"):g=r("Renseignez une cl\xE9 pour ce canal.","lightbox-jlg"),F(i,c,g);let y=z(u,"template"),A="";y?H(y)?R(y)||(A=r("Indiquez une URL valide (http, https, mailto, tel ou sms).","lightbox-jlg")):A=r("Ajoutez au moins le jeton %url% pour construire le lien.","lightbox-jlg"):A=r("Renseignez un mod\xE8le d\u2019URL.","lightbox-jlg"),F(p,S,A)})},w=()=>{Array.from(a.querySelectorAll("[data-share-repeater-item]")).forEach((f,u)=>{let i=`mga_settings[share_channels][${u}]`;f.querySelectorAll("[data-share-field]").forEach(c=>{let S=c.getAttribute("data-share-field");if(!S)return;let m=S;S==="enabled-hidden"&&(m="enabled"),c.name=`${i}[${m}]`}),O(f),I(f),E(f),$(f)}),b(),Q()},C=s=>{if(!s)return;let f=s.querySelector('[data-share-field="label"]')||s;J(f)};a.addEventListener("input",s=>{let f=s.target;if(!f)return;let u=f.closest("[data-share-repeater-item]");u&&(f.matches('[data-share-field="label"], [data-share-field="key"]')&&I(u),f.matches('[data-share-field="icon"]')&&E(u),$(u),b())}),a.addEventListener("change",s=>{let f=s.target;if(!f||!f.matches('[data-share-field="icon"]'))return;let u=f.closest("[data-share-repeater-item]");u&&(E(u),$(u),b())}),a.addEventListener("click",s=>{let f=s.target.closest("[data-share-action]");if(!f)return;s.preventDefault();let u=f.getAttribute("data-share-action"),i=f.closest("[data-share-repeater-item]");if(i){if(u==="remove"){let p=i.nextElementSibling||i.previousElementSibling;i.parentNode===a&&a.removeChild(i),w(),Q(),p&&C(p);return}if(u==="move-up"){let p=i.previousElementSibling;p&&(a.insertBefore(i,p),w(),C(i),Q());return}if(u==="move-down"){let p=i.nextElementSibling;p&&(a.insertBefore(p,i),w(),C(i),Q())}}}),d&&d.addEventListener("click",s=>{s.preventDefault();let u=o.importNode(x.content,!0).querySelector("[data-share-repeater-item]");u&&(a.appendChild(u),w(),C(u),Q())}),w(),Q()}})})(typeof window!="undefined"?window:globalThis)});ot();})();
//# sourceMappingURL=admin.js.map
