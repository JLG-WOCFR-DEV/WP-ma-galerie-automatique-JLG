(()=>{var ot=(t,a)=>()=>(t&&(a=t(t=0)),a);var ir=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var lr,cr,jt,kt,Ct,It=ot(()=>{lr=/%(\d+\$)?[sd]/g,cr=()=>(t,...a)=>{let e=0;return String(t).replace(lr,(m,_)=>{let n,le=m.charAt(m.length-1);if(_){let de=parseInt(_.slice(0,-1),10);if(Number.isNaN(de)||de<=0)return"";n=de-1}else n=e,e+=1;let T=n>=0&&n<a.length?a[n]:void 0;if(le==="d"){let de=parseInt(T,10);return Number.isNaN(de)?"":String(de)}return typeof T=="undefined"?"":String(T)})},jt=t=>t&&typeof t.sprintf=="function"?t.sprintf:cr(),kt=t=>t&&typeof t.__=="function"?t.__:a=>a,Ct=t=>!t||typeof t!="object"?null:t.wp&&t.wp.i18n?t.wp.i18n:null});var yt,bt,ur,Lt,dr,Pt,qt=ot(()=>{yt={facebook:{viewBox:"0 0 24 24",paths:[{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z"}]},twitter:{viewBox:"0 0 24 24",paths:[{d:"M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z"}]},linkedin:{viewBox:"0 0 24 24",paths:[{d:"M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z"}]},pinterest:{viewBox:"0 0 24 24",paths:[{d:"M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z"}]},whatsapp:{viewBox:"0 0 24 24",paths:[{d:"M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z"}]},telegram:{viewBox:"0 0 24 24",paths:[{d:"M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z"}]},email:{viewBox:"0 0 24 24",paths:[{d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"}]},link:{viewBox:"0 0 24 24",paths:[{d:"M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z"}]},generic:{viewBox:"0 0 24 24",paths:[{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"},{d:"M13 17h-2v-2h2zm0-4h-2V7h2z"}]},copy:{viewBox:"0 0 24 24",paths:[{d:"M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"}]},download:{viewBox:"0 0 24 24",paths:[{d:"M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z"}]},native:{viewBox:"0 0 24 24",paths:[{d:"M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"}]}},bt=t=>typeof t!="string"?"":t.trim().toLowerCase().replace(/[^a-z0-9_-]/g,""),ur=t=>{let a=bt(t);return a&&yt[a]?yt[a]:yt.generic},Lt=(t,a,e={})=>{if(!t||typeof t.createElementNS!="function")return null;let m=t.createElementNS("http://www.w3.org/2000/svg",a);return Object.keys(e).forEach(_=>{m.setAttribute(_,e[_])}),m},dr=(t,a)=>{let e=ur(a),m=Lt(t,"svg",{viewBox:e.viewBox,fill:"currentColor","aria-hidden":"true",focusable:"false"});return m?(Array.isArray(e.paths)&&e.paths.forEach(_=>{let n=Lt(t,"path",_);n&&m.appendChild(n)}),m):null},Pt=(t,a,{wrapperTag:e="span",wrapperClass:m=""}={})=>{if(!t||typeof t.createElement!="function")return null;let _=t.createElement(e);m&&(_.className=m);let n=dr(t,a);return n?(_.appendChild(n),_):null}});var We,Qe,Be,zt,Tt=ot(()=>{We=null,Qe=()=>{if(We!==null)return We;We=!1;let t=typeof window!="undefined"?window.document:null;if(!t||typeof t.createElement!="function"||typeof window.HTMLElement=="undefined"||!window.HTMLElement.prototype||typeof window.HTMLElement.prototype.focus!="function")return We;let a=t.createElement("button"),e=t.body||t.documentElement;try{a.type="button",e&&typeof e.appendChild=="function"&&e.appendChild(a),window.HTMLElement.prototype.focus.call(a,{get preventScroll(){return We=!0,!0}})}catch(m){We=!1}finally{a.parentNode&&typeof a.parentNode.removeChild=="function"&&a.parentNode.removeChild(a)}return We},Be=(t,a={preventScroll:!0})=>{if(!t||typeof t.focus!="function")return;if(a&&Qe())try{t.focus(a);return}catch(m){}t.focus()},zt=()=>{typeof window!="undefined"&&((!window.mgaFocusUtils||typeof window.mgaFocusUtils!="object")&&(window.mgaFocusUtils={}),window.mgaFocusUtils.detectFocusOptionsSupport=Qe,window.mgaFocusUtils.safeFocus=Be)}});var fr,Mt,mr,ee,pr,gr,hr,yr,br,vr,wr,Ot,Nt=ot(()=>{fr=t=>t&&t.performance&&typeof t.performance.now=="function"?t.performance.now():Date.now(),Mt=t=>t&&t.document||null,mr=t=>t?((!t.mgaSwiperMetrics||typeof t.mgaSwiperMetrics!="object")&&(t.mgaSwiperMetrics={events:[]}),Array.isArray(t.mgaSwiperMetrics.events)||(t.mgaSwiperMetrics.events=[]),t.mgaSwiperMetrics):null,ee=(t,a,e,m)=>{let _=mr(t);if(_&&(_.events.push({namespace:a||"default",event:e,detail:m||{},timestamp:fr(t)}),typeof t.dispatchEvent=="function"))try{let n=new t.CustomEvent("mga:swiper-metric",{detail:{namespace:a||"default",event:e,payload:m||{}}});t.dispatchEvent(n)}catch(n){}},pr=t=>!t||typeof t!="object"?[]:(Array.isArray(t.attempts)?t.attempts:[]).map(e=>{if(!e||typeof e!="object"||e.enabled===!1)return null;let m=typeof e.key=="string"&&e.key?e.key:"fallback",_=e.js&&typeof e.js=="object"?e.js:{},n=e.css&&typeof e.css=="object"?e.css:null,le=e.inject!==!1,T=typeof _.src=="string"&&_.src?_.src:"";return T?{key:m,label:typeof e.label=="string"&&e.label?e.label:m,js:{src:T,integrity:typeof _.integrity=="string"&&_.integrity?_.integrity:null,crossOrigin:typeof _.crossOrigin=="string"&&_.crossOrigin?_.crossOrigin:null,referrerPolicy:typeof _.referrerPolicy=="string"&&_.referrerPolicy?_.referrerPolicy:null},css:n&&typeof n.href=="string"&&n.href?{href:n.href,integrity:typeof n.integrity=="string"&&n.integrity?n.integrity:null,crossOrigin:typeof n.crossOrigin=="string"&&n.crossOrigin?n.crossOrigin:null,referrerPolicy:typeof n.referrerPolicy=="string"&&n.referrerPolicy?n.referrerPolicy:null}:null,timeout:typeof e.timeout=="number"&&e.timeout>0?e.timeout:12e3,inject:le}:null}).filter(Boolean),gr=(t,a,e)=>{if(!a||!a.css)return Promise.resolve();let m=Mt(t);if(!m)return Promise.resolve();let _=Array.from(m.querySelectorAll('link[rel="stylesheet"]')).find(n=>n.href===a.css.href);return _?Promise.resolve(_):new Promise((n,le)=>{let T=m.createElement("link");T.rel="stylesheet",T.href=a.css.href,T.dataset.mgaSwiperSource=a.key,a.css.integrity&&(T.integrity=a.css.integrity),a.css.crossOrigin?T.crossOrigin=a.css.crossOrigin:a.css.integrity&&(T.crossOrigin="anonymous"),a.css.referrerPolicy&&(T.referrerPolicy=a.css.referrerPolicy),T.onload=()=>{ee(t,e,"css_load_success",{source:a.key}),n(T)},T.onerror=()=>{ee(t,e,"css_load_error",{source:a.key}),le(new Error("Stylesheet load error"))},m.head.appendChild(T),ee(t,e,"css_load_start",{source:a.key,href:a.css.href})})},hr=(t,a,e)=>{if(!a||!a.js||!a.js.src)return Promise.reject(new Error("Invalid attempt configuration"));let m=Mt(t);if(!m)return Promise.reject(new Error("Document unavailable"));let _=Array.from(m.querySelectorAll("script")).find(n=>n.src===a.js.src&&!n.hasAttribute("data-mga-swiper-failed"));return _?new Promise((n,le)=>{if(typeof t.Swiper=="function"){_.setAttribute("data-mga-swiper-loaded","true"),ee(t,e,"js_already_available",{source:a.key}),n(_);return}if(typeof _.hasAttribute=="function"&&_.hasAttribute("data-mga-swiper-loaded")){n(_);return}_.addEventListener("load",()=>{_.setAttribute("data-mga-swiper-loaded","true"),n(_)}),_.addEventListener("error",()=>{_.setAttribute("data-mga-swiper-failed","true"),le(new Error("Existing script failed"))}),ee(t,e,"js_existing_observed",{source:a.key})}):new Promise((n,le)=>{let T=m.createElement("script");T.src=a.js.src,T.async=!1,T.dataset.mgaSwiperSource=a.key,a.js.integrity&&(T.integrity=a.js.integrity),a.js.crossOrigin?T.crossOrigin=a.js.crossOrigin:a.js.integrity&&(T.crossOrigin="anonymous"),a.js.referrerPolicy&&(T.referrerPolicy=a.js.referrerPolicy);let de=null,Ye=()=>{de&&(t.clearTimeout(de),de=null)};T.onload=()=>{Ye(),T.setAttribute("data-mga-swiper-loaded","true"),ee(t,e,"js_load_success",{source:a.key}),n(T)},T.onerror=()=>{Ye(),T.setAttribute("data-mga-swiper-failed","true"),ee(t,e,"js_load_error",{source:a.key}),le(new Error("Script load error"))},de=t.setTimeout(()=>{Ye(),T.setAttribute("data-mga-swiper-failed","true"),ee(t,e,"js_load_timeout",{source:a.key,timeout:a.timeout}),le(new Error("Script load timeout"))},a.timeout||12e3),m.head.appendChild(T),ee(t,e,"js_load_start",{source:a.key,src:a.js.src})})},yr=t=>t?((!t.mgaSwiperLoaderState||typeof t.mgaSwiperLoaderState!="object")&&(t.mgaSwiperLoaderState={promise:null}),t.mgaSwiperLoaderState):{promise:null},br=(t,a,e)=>!a||!a.inject?Promise.resolve():typeof t.Swiper=="function"?Promise.resolve(t.Swiper):(ee(t,e,"attempt_start",{source:a.key}),gr(t,a,e).catch(()=>null).then(()=>hr(t,a,e)).then(()=>{if(typeof t.Swiper=="function")return ee(t,e,"attempt_success",{source:a.key}),t.Swiper;throw ee(t,e,"attempt_no_global",{source:a.key}),new Error("Swiper global missing after load")}).catch(m=>{throw ee(t,e,"attempt_error",{source:a.key,message:m&&m.message?m.message:String(m)}),m})),vr=(t,a,e)=>a.reduce((m,_)=>m.catch(()=>br(t,_,e)),Promise.reject(new Error("initial"))),wr=(t,a)=>a&&typeof a=="object"?a:t&&t.mgaSwiperLoaderConfig&&typeof t.mgaSwiperLoaderConfig=="object"?t.mgaSwiperLoaderConfig:t&&t.mgaAdminConfig&&typeof t.mgaAdminConfig=="object"&&t.mgaAdminConfig.swiper?t.mgaAdminConfig.swiper:null,Ot=(t=window,a={})=>{let e=typeof a.namespace=="string"&&a.namespace?a.namespace:"default";if(!t)return Promise.reject(new Error("Global scope unavailable"));if(typeof t.Swiper=="function")return ee(t,e,"already_available",{}),Promise.resolve(t.Swiper);let m=wr(t,a.config),_=pr(m);if(!_.length)return ee(t,e,"no_attempts_configured",{}),Promise.reject(new Error("No Swiper attempts configured"));let n=yr(t);return n.promise||(ee(t,e,"bootstrap",{version:m&&m.version?m.version:null,attempts:_.map(le=>le.key)}),n.promise=vr(t,_,e).catch(()=>{if(typeof t.Swiper=="function")return t.Swiper;throw ee(t,e,"fatal",{}),new Error("Swiper could not be loaded")}).then(()=>{if(typeof t.Swiper=="function")return ee(t,e,"ready",{}),t.Swiper;throw ee(t,e,"fatal",{}),new Error("Swiper global unavailable")}).finally(()=>{n.promise=null})),n.promise}});var Bt=ot(()=>{It();qt();Tt();Nt()});var Sr=ir((zr,dt)=>{Bt();(function(t){zt();let a=Ct(t),e=kt(a),m=jt(a),_={slide:e("Glissement","lightbox-jlg"),fade:e("Fondu","lightbox-jlg"),cube:e("Cube 3D","lightbox-jlg"),coverflow:e("Coverflow 3D","lightbox-jlg"),flip:e("Flip 3D","lightbox-jlg")};typeof dt!="undefined"&&dt.exports&&(dt.exports={detectFocusOptionsSupport:Qe,safeFocus:Be});let n=t.document,le=$=>{let P=Pt(n,bt($));return P?P.querySelector("svg")||P:null},T={url:"https://exemple.com/galerie/photo-01",text:"Une photo remarquable",title:"Collection studio"},de={"%url%":T.url,"%text%":T.text,"%title%":T.title},Ye=["http","https","mailto","tel","sms"],Xe=$=>typeof $!="string"?!1:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test($.trim()),Je=$=>{if(!Xe($))return"";let P=$.trim();if(P.length===4){let M=P[1],K=P[2],q=P[3];return`#${M}${M}${K}${K}${q}${q}`.toLowerCase()}return P.toLowerCase()},Vt=$=>{let P=Je($);if(!P)return null;let M=P.slice(1),K=parseInt(M.slice(0,2),16),q=parseInt(M.slice(2,4),16),ce=parseInt(M.slice(4,6),16);return[K,q,ce].some(we=>Number.isNaN(we))?null:{red:K,green:q,blue:ce}},vt=$=>{let P=Vt($);if(!P)return null;let M=we=>{let J=we/255;return J<=.03928?J/12.92:((J+.055)/1.055)**2.4},K=M(P.red),q=M(P.green),ce=M(P.blue);return .2126*K+.7152*q+.0722*ce},$t=($,P)=>{let M=vt($),K=vt(P);if(M===null||K===null)return null;let[q,ce]=M>K?[M,K]:[K,M],we=(q+.05)/(ce+.05);return Number.isFinite(we)?we:null},Dt=$=>Number.isFinite($)?`${$.toFixed(2)}:1`:"\u2014",Ft=()=>{let $=n.querySelector("[data-mga-contrast-inspector]");if(!$)return null;let P={light:{swatch:$.querySelector('[data-mga-contrast-swatch="light"]'),value:$.querySelector('[data-mga-contrast-value="light"]')},dark:{swatch:$.querySelector('[data-mga-contrast-swatch="dark"]'),value:$.querySelector('[data-mga-contrast-value="dark"]')}},M=$.querySelector("[data-mga-contrast-message]"),K=[{key:"light",label:e("Fond clair","lightbox-jlg"),background:"#ffffff"},{key:"dark",label:e("Fond sombre","lightbox-jlg"),background:"#111827"}],q={entries:[]},ce=()=>{let Q=n.getElementById("mga_accent_color");if(!Q)return"#6366f1";let Ve=Q.getAttribute("data-default-color"),fe=Je(Ve);return fe||"#6366f1"},we=Q=>Number.isFinite(Q)?Q>=4.5?"success":Q>=3?"warning":"error":"error",J=Q=>Q?Q.severity==="success"?m(e("Contraste valid\xE9 sur %1$s (%2$s).","lightbox-jlg"),Q.label,Q.ratioText):Q.severity==="warning"?m(e("Contraste limite sur %1$s (%2$s). Renforcez l\xE9g\xE8rement pour atteindre 4,5:1.","lightbox-jlg"),Q.label,Q.ratioText):m(e("Contraste insuffisant sur %1$s (%2$s). Ajustez la couleur ou le fond.","lightbox-jlg"),Q.label,Q.ratioText):"",oe=Q=>{let fe=Je(Q)||ce();if(!fe)$.setAttribute("hidden","hidden"),$.removeAttribute("data-mga-severity"),q={entries:[]},M&&(M.textContent=""),Object.values(P).forEach(se=>{se.value&&(se.value.textContent="\u2014"),se.swatch&&(se.swatch.style.removeProperty("--mga-contrast-foreground"),se.swatch.style.removeProperty("--mga-contrast-background"))});else{$.removeAttribute("hidden");let se=K.map(te=>{let ue=$t(fe,te.background),me=Dt(ue),st=we(ue),ze=P[te.key];return ze&&(ze.value&&(ze.value.textContent=me),ze.swatch&&(ze.swatch.style.setProperty("--mga-contrast-foreground",fe),ze.swatch.style.setProperty("--mga-contrast-background",te.background))),{key:te.key,label:te.label,ratio:ue||0,ratioText:me,severity:st}});q={entries:se};let $e=se.reduce((te,ue)=>!te||!Number.isFinite(ue.ratio)||!Number.isFinite(te.ratio)||ue.ratio<te.ratio?ue:te,null),qe=$e?$e.severity:"success";$.setAttribute("data-mga-severity",qe),M&&(M.textContent=J($e))}return q};return oe(),{update:oe,readAudit(){return q}}},Rt=($={})=>{if(!n)return null;let P=()=>"\u2014",M=p=>Number.isFinite(p)?String(p):P(),K=p=>{if(!Number.isFinite(p))return P();let h=Math.round(p*10)/10,k=Math.abs(h-Math.round(h))<.01?String(Math.round(h)):h.toFixed(1);return m(e("%1$s\xA0s","lightbox-jlg"),k)},q=p=>Number.isFinite(p)?m(e("%1$s\xA0ms","lightbox-jlg"),M(p)):P(),ce=p=>Number.isFinite(p)?m(e("%1$s\xA0px","lightbox-jlg"),M(p)):P(),we=p=>{if(!Number.isFinite(p))return P();let h=Math.round(p*100)/100;return String(h).replace(/\.0+$/,"").replace(/(\.\d*?)0+$/,"$1")},J=p=>e(p?"Activ\xE9":"D\xE9sactiv\xE9","lightbox-jlg"),oe=(p,h,k="")=>{if(!h)return k||P();let Se=n.getElementById(p);if(!Se)return h;let je=Array.from(Se.options||[]).find(ke=>ke.value===h);return je&&je.textContent?je.textContent.trim():h},Q=(p,h="")=>{let k=n.querySelector(`label[for="${p}"]`);return k&&(k.textContent||"").replace(/\s+/g," ").trim()||h},Ve=[{key:"delay",controlId:"mga_delay",sectionId:"mga-section-playback",type:"float",format:K},{key:"speed",controlId:"mga_speed",sectionId:"mga-section-playback",type:"int",format:q},{key:"effect",controlId:"mga_effect",sectionId:"mga-section-playback",type:"select",format:p=>oe("mga_effect",p,p)},{key:"easing",controlId:"mga_easing",sectionId:"mga-section-playback",type:"select",format:p=>oe("mga_easing",p,p)},{key:"thumbs_layout",controlId:"mga_thumbs_layout",sectionId:"mga-section-thumbnails",type:"select",format:p=>oe("mga_thumbs_layout",p,p)},{key:"thumb_size",controlId:"mga_thumb_size",sectionId:"mga-section-thumbnails",type:"int",format:ce},{key:"thumb_size_mobile",controlId:"mga_thumb_size_mobile",sectionId:"mga-section-thumbnails",type:"int",format:ce},{key:"show_thumbs_mobile",controlId:"mga_show_thumbs_mobile",sectionId:"mga-section-thumbnails",type:"boolean",format:J},{key:"accent_color",controlId:"mga_accent_color",sectionId:"mga-section-appearance",type:"color",format:p=>p?p.toUpperCase():P()},{key:"bg_opacity",controlId:"mga_bg_opacity",sectionId:"mga-section-appearance",type:"float",format:we},{key:"background_style",controlId:"mga_background_style",sectionId:"mga-section-appearance",type:"select",format:p=>oe("mga_background_style",p,p)},{key:"autoplay_start",controlId:"mga_autoplay_start",sectionId:"mga-section-playback",type:"boolean",format:J},{key:"loop",controlId:"mga_loop",sectionId:"mga-section-playback",type:"boolean",format:J},{key:"show_zoom",controlId:"mga_show_zoom",sectionId:"mga-section-toolbar",type:"boolean",format:J},{key:"show_download",controlId:"mga_show_download",sectionId:"mga-section-toolbar",type:"boolean",format:J},{key:"show_share",controlId:"mga_show_share",sectionId:"mga-section-toolbar",type:"boolean",format:J},{key:"show_cta",controlId:"mga_show_cta",sectionId:"mga-section-toolbar",type:"boolean",format:J},{key:"show_fullscreen",controlId:"mga_show_fullscreen",sectionId:"mga-section-toolbar",type:"boolean",format:J}],fe=()=>e("R\xE9glages recommand\xE9s","lightbox-jlg"),se=(p,h)=>{switch(p.type){case"int":{let k=parseInt(h,10);return Number.isFinite(k)?k:null}case"float":{let k=parseFloat(h);return Number.isFinite(k)?Math.round(k*100)/100:null}case"boolean":return!!h;case"color":return Je(h);case"select":return typeof h=="string"?h:"";default:return h}},$e=(p={})=>{let h={};return Ve.forEach(k=>{Object.prototype.hasOwnProperty.call(p,k.key)&&(h[k.key]=se(k,p[k.key]))}),h},qe=$e($),te=null,ue=new Map,me={key:"",label:fe(),settings:{...qe}},st=p=>{let h=n.getElementById(p.controlId);if(!h)return p.type==="boolean"?!1:p.type==="select"?"":null;switch(p.type){case"boolean":return!!h.checked;case"select":return h.value||"";case"color":return Je(h.value);default:return h.value}},ze=(p,h,k)=>p.type==="float"?h===null&&k===null?!0:h===null||k===null?!1:Math.abs(h-k)<.01:h===k,ft=()=>{Ve.forEach(p=>{p.label||(p.label=Q(p.controlId,""))})},Ge=p=>{!te||typeof te.setSectionModified!="function"||p.forEach((h,k)=>{let Se=k?n.getElementById(k):null;Se&&te.setSectionModified(Se,!!h)})},ae=()=>{ft();let p=[],h=new Map;return Ve.forEach(k=>{let Se=Object.prototype.hasOwnProperty.call(me.settings,k.key)?me.settings[k.key]:qe[k.key],je=se(k,st(k)),ke=!ze(k,Se,je);ke&&p.push({key:k.key,label:k.label||"",baselineLabel:k.format(Se),currentLabel:k.format(je)}),h.has(k.sectionId)?ke&&h.set(k.sectionId,!0):h.set(k.sectionId,ke)}),Ge(h),ue=h,p},Ze=({key:p="",label:h="",settings:k={}}={})=>{me={key:p,label:h&&h.trim()!==""?h:fe(),settings:{...qe,...$e(k)}},ae()},wt=p=>{te=p,ue.size>0&&Ge(ue)},Ce=()=>({key:me.key,label:me.label});return Ze({settings:me.settings}),{refresh:ae,setBaseline:Ze,getBaselineInfo:Ce,getDefaultLabel:fe,setNavigationApi:wt}};!n||typeof n.addEventListener!="function"||n.addEventListener("DOMContentLoaded",function(){var xt;let $=n.querySelector("[data-mga-settings-form]")||n.querySelector(".mga-admin-wrap form"),P=n.querySelector(".mga-admin-wrap"),M=()=>{},K=null,q=null,ce="mgaAdminThemePreference",we=["light","dark","system"],J=P?P.querySelector("[data-mga-theme-select]"):null,oe=typeof t.matchMedia=="function"?t.matchMedia("(prefers-color-scheme: dark)"):null,Q=()=>{try{return t.localStorage?t.localStorage.getItem(ce):null}catch(r){return null}},Ve=r=>{try{if(!t.localStorage)return;if(!r){t.localStorage.removeItem(ce);return}t.localStorage.setItem(ce,r)}catch(s){}},fe=r=>{if(typeof r!="string")return"light";let s=r.trim().toLowerCase();return we.includes(s)?s:"light"},se=fe(Q()),$e=r=>r==="dark"?"dark":r==="light"?"light":(oe&&typeof oe.matches=="boolean"?oe.matches:!1)?"dark":"light",qe=(r,s={})=>{if(!P)return;let c=fe(r),E=$e(c);P.setAttribute("data-mga-theme-preference",c),P.setAttribute("data-mga-theme",E),P.classList.toggle("is-theme-dark",E==="dark"),P.classList.toggle("is-theme-light",E!=="dark"),J&&J.value!==c&&(J.value=c),s.skipStorage||Ve(c==="system"?"":c),se=c};P&&qe(se,{skipStorage:!0}),J&&(J.value=se,J.addEventListener("change",r=>{let s=fe(r.target?r.target.value:null);qe(s)}));let te=()=>{se==="system"&&qe("system",{skipStorage:!0})};oe&&(typeof oe.addEventListener=="function"?oe.addEventListener("change",te):typeof oe.addListener=="function"&&oe.addListener(te));let me=(r=>{let s=n.querySelector("[data-mga-wizard]");if(!s)return null;let c=Array.from(s.querySelectorAll("[data-mga-step-panel]")),E=Array.from(s.querySelectorAll("[data-mga-step-indicator]")),C=s.querySelector("[data-mga-step-prev]"),L=s.querySelector("[data-mga-step-next]"),W=s.querySelector("[data-mga-step-submit]"),Y=s.querySelector("[data-mga-save-status]"),F=c.length-1,I=c.findIndex(l=>l.classList.contains("is-active"));I<0&&(I=0);let D=()=>t.mgaAdminConfig&&t.mgaAdminConfig.messages||{},U=(l,w)=>{if(!Y)return;let O=w||D()[l]||"";Y.textContent=O,Y.setAttribute("data-mga-status-state",l)},G=()=>{C&&(C.disabled=I===0),L&&(L.hidden=I>=F),W&&(W.hidden=I<F)},Z=l=>{if(!l)return;let w=l.querySelector("[data-mga-step-title]")||l,O=Qe()?{preventScroll:!0}:void 0;t.requestAnimationFrame(()=>{Be(w,O)})},_e=l=>{l.classList.remove("is-active"),l.setAttribute("hidden","hidden"),l.setAttribute("aria-hidden","true")},pe=l=>{l.classList.add("is-active"),l.removeAttribute("hidden"),l.setAttribute("aria-hidden","false")},ve=()=>{E.forEach((l,w)=>{l.classList.toggle("is-active",w===I),l.classList.toggle("is-completed",w<I),l.setAttribute("aria-current",w===I?"step":"false")})},j=(()=>{let l=null,w=s.querySelector("[data-mga-summary-preset]"),O=s.querySelector("[data-mga-summary-timing]"),B=s.querySelector("[data-mga-summary-toolbar]"),o=s.querySelector("[data-mga-summary-share]"),y=s.querySelector("[data-mga-summary-validations]"),u=s.querySelector("[data-mga-summary-diff]"),S=u?u.querySelector("[data-mga-summary-diff-list]"):null,x=u?u.querySelector("[data-mga-summary-diff-baseline]"):null,V=u?u.querySelector("[data-mga-summary-diff-empty]"):null,X=s.querySelector("[data-mga-summary-scoreboard]"),xe=(()=>{let b=new Map;return X&&X.querySelectorAll("[data-mga-scorecard]").forEach(d=>{let v=d.getAttribute("data-mga-score-key");v&&b.set(v,d)}),b})(),Ae=(b,d)=>{let v=xe.get(b);if(!v||!d)return;let N=d.level||"info";v.setAttribute("data-score-level",N);let H=v.querySelector("[data-mga-scorecard-status]");H&&(H.textContent=d.message||"");let re=v.querySelector("[data-mga-scorecard-points]");re&&Array.isArray(d.points)&&d.points.forEach(ne=>{if(!ne||!ne.key)return;let Re=re.querySelector(`[data-point="${ne.key}"]`);if(!Re)return;let R=ne.state||"info";Re.setAttribute("data-point-state",R),typeof ne.text=="string"&&(Re.textContent=ne.text)})},Te=b=>{!b||!xe.size||Object.keys(b).forEach(d=>{Ae(d,b[d])})},At={positive:0,info:1,warning:2,alert:3},it=b=>{if(!Array.isArray(b)||b.length===0)return"info";let d="positive";return b.forEach(v=>{let N=v&&v.state?v.state:"info";At[N]>At[d]&&(d=N)}),d},lt=(b,d)=>{let N={ux:{positive:e("Parcours fluide et align\xE9 sur les extensions premium.","lightbox-jlg"),info:e("Quelques optimisations UX restent possibles.","lightbox-jlg"),warning:e("Ajustez le rythme ou la navigation pour \xE9galer les standards pro.","lightbox-jlg"),alert:e("Corrigez les r\xE9glages UX critiques avant publication.","lightbox-jlg")},accessibility:{positive:e("Accessible par d\xE9faut\xA0: pr\xEAt pour un audit WCAG.","lightbox-jlg"),info:e("Affinez deux ou trois points pour une accessibilit\xE9 parfaite.","lightbox-jlg"),warning:e("Renforcez l\u2019accessibilit\xE9 pour rester au niveau des lightbox professionnelles.","lightbox-jlg"),alert:e("Corrigez les probl\xE8mes d\u2019accessibilit\xE9 avant publication.","lightbox-jlg")},reliability:{positive:e("Stack pr\xEAte pour une mise en production sans surprise.","lightbox-jlg"),info:e("V\xE9rifiez vos fallbacks pour \xE9galer la robustesse des offres pro.","lightbox-jlg"),warning:e("S\xE9curisez la configuration avant de la confier \xE0 vos clients.","lightbox-jlg"),alert:e("Corrigez les risques critiques pour garantir la fiabilit\xE9.","lightbox-jlg")},visual:{positive:e("Palette pr\xEAte \xE0 impressionner vos visiteurs.","lightbox-jlg"),info:e("Peaufinez les presets pour un rendu au niveau premium.","lightbox-jlg"),warning:e("Ajustez les \xE9l\xE9ments visuels pour conserver une identit\xE9 coh\xE9rente.","lightbox-jlg"),alert:e("Corrigez la couleur ou le style avant publication.","lightbox-jlg")}}[b]||{};return N[d]||N.info||""},Gt=b=>{let d=n.getElementById(b);if(!d)return Number.NaN;let v=parseFloat(d.value);return Number.isNaN(v)?Number.NaN:v},gt=b=>{let d=n.getElementById(b);return!d||typeof d.value!="string"?"":d.value},Et=(b,d)=>{let v=n.getElementById(b);if(!v)return d||"";let N=Array.from(v.options).find(H=>H.selected);return N&&N.textContent?N.textContent:d||""},Fe=b=>{let d=n.getElementById(b);return d?!!d.checked:!1},Qt=b=>{if(!Number.isFinite(b))return"\u2014";let d=Math.round(b*10)/10;return Math.abs(d-Math.round(d))<.01?String(Math.round(d)):d.toFixed(1)},Yt=(b,d,v)=>{if(!xe.size)return null;let N=Array.isArray(b)?b.find(R=>R&&R.severity==="error")||b.find(R=>R&&R.severity==="warning"):null,H=()=>{let R=Gt("mga_delay"),ge=gt("mga_effect"),he=Et("mga_effect",ge),Ie=Fe("mga_autoplay_start"),ye=Fe("mga_show_thumbs_mobile"),Me=gt("mga_thumbs_layout"),Ee=[],be=Qt(R),ie="positive",Le=m(e("Tempo confortable : %1$s\xA0s par diapositive.","lightbox-jlg"),be);Number.isFinite(R)?R<2.5?(ie="alert",Le=m(e("Tempo tr\xE8s rapide (%1$s\xA0s) : ralentissez pour laisser le temps de lecture.","lightbox-jlg"),be)):(R<3||R>6)&&(ie="warning",Le=m(e("Tempo \xE0 %1$s\xA0s : ciblez entre 3 et 6\xA0s pour un rythme premium.","lightbox-jlg"),be)):(ie="info",Le=e("Renseignez le tempo du diaporama pour caler la cadence.","lightbox-jlg")),Ee.push({key:"delay",state:ie,text:Le});let Oe="positive",Pe=e("Miniatures ou navigation mobile affich\xE9es : rep\xE8res clairs.","lightbox-jlg");Me==="hidden"&&!ye?(Oe="warning",Pe=e("Activez les miniatures ou la navigation mobile pour guider vos visiteurs.","lightbox-jlg")):Me==="hidden"&&(Oe="info",Pe=e("Miniatures masqu\xE9es sur desktop : v\xE9rifiez que les fl\xE8ches restent visibles.","lightbox-jlg")),Ee.push({key:"navigation",state:Oe,text:Pe});let Ue=new Set(["cube","coverflow","flip"]),ct=typeof ge=="string"?ge.toLowerCase():"",He=he||ge||"slide",Ne="positive",Ke=m(e("Transition \xAB\xA0%1$s\xA0\xBB adapt\xE9e au parcours.","lightbox-jlg"),He);Ue.has(ct)&&Ie?(Ne="warning",Ke=m(e("Effet 3D \xAB\xA0%1$s\xA0\xBB avec autoplay : envisagez un d\xE9marrage manuel pour le confort utilisateur.","lightbox-jlg"),He)):Ue.has(ct)?(Ne="info",Ke=m(e("Effet 3D \xAB\xA0%1$s\xA0\xBB activ\xE9 : testez la performance sur mobile.","lightbox-jlg"),He)):ge||(Ne="info",Ke=e("Choisissez un effet pour personnaliser le ressenti.","lightbox-jlg")),Ee.push({key:"animation",state:Ne,text:Ke});let nt=it(Ee),ut=lt("ux",nt);return{level:nt,message:ut,points:Ee}},re=()=>{let R=Fe("mga_autoplay_start"),ge=Fe("mga_start_on_clicked_image"),he=[],Ie="positive",ye=e("Contraste valid\xE9 : aucun blocage d\xE9tect\xE9.","lightbox-jlg");N&&(Ie=N.severity==="error"?"alert":"warning",ye=N.message),he.push({key:"contrast",state:Ie,text:ye});let Me="positive",Ee=e("Lecture d\xE9clench\xE9e par l\u2019utilisateur : confort respect\xE9.","lightbox-jlg");R&&(Me="warning",Ee=e("D\xE9sactivez le d\xE9marrage automatique pour laisser le contr\xF4le aux visiteurs.","lightbox-jlg")),he.push({key:"autoplay",state:Me,text:Ee});let be="positive",ie=e("La visionneuse s\u2019ouvre sur l\u2019image cliqu\xE9e : orientation conserv\xE9e.","lightbox-jlg");ge||(be="info",ie=e("Activez \xAB\xA0D\xE9marrer sur l\u2019image cliqu\xE9e\xA0\xBB pour \xE9viter les sauts de focus.","lightbox-jlg")),he.push({key:"context",state:be,text:ie});let Le=it(he),Oe=lt("accessibility",Le);return{level:Le,message:Oe,points:he}},ne=()=>{let R=Fe("mga_include_svg"),ge=Fe("mga_allow_body_fallback"),he=Fe("mga_debug_mode"),Ie=Fe("mga_load_on_archives"),ye=[],Me=R?"positive":"alert",Ee=e(R?"Ic\xF4nes SVG locales actives : vos contr\xF4les restent visibles hors connexion.":"R\xE9activez les ic\xF4nes SVG locales pour \xE9viter les boutons invisibles si le CDN est indisponible.","lightbox-jlg");ye.push({key:"assets",state:Me,text:Ee});let be=ge?"positive":"info",ie=e(ge?"Fallback \xAB\xA0body\xA0\xBB actif : compatibilit\xE9 renforc\xE9e avec les constructeurs de pages.":"Activez le fallback \xAB\xA0body\xA0\xBB si vos galeries sont inject\xE9es dynamiquement.","lightbox-jlg");Ie&&(be="positive",ie=e("Chargement sur les pages d\u2019archives activ\xE9 : visionneuse pr\xEAte dans les listes.","lightbox-jlg")),ye.push({key:"fallback",state:be,text:ie});let Le=he?"warning":"positive",Oe=e(he?"D\xE9sactivez le mode debug pour \xE9viter les logs verbeux en production.":"Mode debug d\xE9sactiv\xE9 : stabilit\xE9 optimale.","lightbox-jlg");ye.push({key:"debug",state:Le,text:Oe});let Pe=it(ye),Ue=lt("reliability",Pe);return{level:Pe,message:Ue,points:ye}},Re=()=>{let R=n.getElementById("mga_style_preset"),ge=R&&typeof R.value=="string"?R.value:"",he=n.getElementById("mga_accent_color"),Ie=he&&typeof he.value=="string"?he.value.trim():"",ye=gt("mga_background_style"),Me=Et("mga_background_style",ye),Ee=Array.isArray(d)&&d.length>0,be=v&&v.label?v.label:"",ie=[],Oe=(()=>{if(R){let ht=Array.from(R.options).find(ar=>ar.value===ge);if(ht&&ht.textContent)return ht.textContent.trim()}return be||""})(),Pe="info",Ue=e("Aucun preset s\xE9lectionn\xE9 : testez les styles propos\xE9s pour un rendu premium.","lightbox-jlg");ge?(Pe="positive",Ue=m(e("Preset professionnel \xAB\xA0%1$s\xA0\xBB appliqu\xE9.","lightbox-jlg"),Oe||ge)):Ee&&(Pe="positive",Ue=be?m(e("Palette personnalis\xE9e bas\xE9e sur \xAB\xA0%1$s\xA0\xBB.","lightbox-jlg"),be):e("Palette personnalis\xE9e active.","lightbox-jlg")),ie.push({key:"preset",state:Pe,text:Ue});let ct=Ie.toLowerCase(),He="positive",Ne=e("Couleur d\u2019accent personnalis\xE9e pr\xEAte \xE0 \xEAtre d\xE9clin\xE9e.","lightbox-jlg");Xe(Ie)?ct==="#ffffff"?(He="info",Ne=e("Personnalisez la couleur d\u2019accent pour refl\xE9ter votre marque.","lightbox-jlg")):Ne=m(e("Accent d\xE9fini sur %1$s : pensez \xE0 l\u2019harmoniser avec vos CTA.","lightbox-jlg"),Ie.toUpperCase()):(He="alert",Ne=e("Couleur d\u2019accent invalide : utilisez un code hexad\xE9cimal (#123ABC).","lightbox-jlg")),ie.push({key:"accent",state:He,text:Ne});let Ke="info",nt=e("Choisissez un style de fond (\xE9cho, blur, texture) pour enrichir la sc\xE9nographie.","lightbox-jlg");ye&&(Ke="positive",nt=m(e("Arri\xE8re-plan \xAB\xA0%1$s\xA0\xBB activ\xE9 pour cr\xE9er de la profondeur.","lightbox-jlg"),Me||ye)),ie.push({key:"background",state:Ke,text:nt});let ut=it(ie),sr=lt("visual",ut);return{level:ut,message:sr,points:ie}};return{ux:H(),accessibility:re(),reliability:ne(),visual:Re()}},Xt=()=>{if(!B)return;let d=[{id:"mga_show_zoom",label:e("Zoom","lightbox-jlg")},{id:"mga_show_download",label:e("T\xE9l\xE9chargement","lightbox-jlg")},{id:"mga_show_share",label:e("Partage","lightbox-jlg")},{id:"mga_show_cta",label:e("Appel \xE0 l\u2019action","lightbox-jlg")},{id:"mga_show_fullscreen",label:e("Plein \xE9cran","lightbox-jlg")}].filter(v=>{let N=n.getElementById(v.id);return N?N.checked:!1});B.textContent=d.length>0?d.map(v=>v.label).join(", "):e("Aucun bouton affich\xE9","lightbox-jlg")},Jt=(b,d)=>{if(!w)return;let v=n.getElementById("mga_style_preset"),N=v?v.value:"",H="";if(v&&N){let re=Array.from(v.options).find(ne=>ne.value===N);re&&(H=re.textContent||"")}H||(b.length>0&&d&&d.label?H=m(e("Personnalis\xE9 \xE0 partir de %1$s","lightbox-jlg"),d.label):b.length>0?H=e("R\xE9glages personnalis\xE9s","lightbox-jlg"):d&&d.label?H=d.label:t.mgaStylePresets&&typeof t.mgaStylePresets.customDescription=="string"?H=t.mgaStylePresets.customDescription:H=e("R\xE9glages personnalis\xE9s","lightbox-jlg")),w.textContent=H},Zt=()=>{if(!O)return;let b=n.getElementById("mga_delay"),d=n.getElementById("mga_effect"),v=b&&b.value?b.value:"\u2014",N=e("Transition personnalis\xE9e","lightbox-jlg");if(d){let H=Array.from(d.options).find(re=>re.selected);N=H?H.textContent:N}O.textContent=m(e("Diaporama : %1$s\xA0s \xB7 Effet : %2$s","lightbox-jlg"),v,N)},er=()=>{if(!o)return;let d=Array.from(n.querySelectorAll("[data-share-repeater-item]")).filter(v=>{let N=v.querySelector('[data-share-field="enabled"]');return N?N.checked:!1}).map(v=>{let N=v.querySelector('[data-share-field="label"]'),H=v.querySelector('[data-share-field="key"]'),re=N&&N.value?N.value.trim():"",ne=H&&H.value?H.value.trim():"";return re||(ne?ne.toUpperCase():e("Canal sans titre","lightbox-jlg"))});d.length>0?o.textContent=m(e("%1$d canaux actifs : %2$s","lightbox-jlg"),d.length,d.join(", ")):o.textContent=e("Aucun canal actif","lightbox-jlg")},tr=()=>{if(!K||typeof K.readAudit!="function")return[];let b=K.readAudit();return!b||!Array.isArray(b.entries)?[]:b.entries.filter(d=>d&&(d.severity==="warning"||d.severity==="error")).map(d=>{let v=d.severity==="error"?m(e("Contraste %1$s insuffisant\xA0: %2$s. Ajustez la couleur ou le fond pour atteindre au moins 3,0 (AA\xA0\u2265\xA04,5).","lightbox-jlg"),d.label,d.ratioText):m(e("Contraste %1$s limit\xE9\xA0: %2$s. Augmentez l\xE9g\xE8rement pour viser AA (\u2265\xA04,5).","lightbox-jlg"),d.label,d.ratioText);return{severity:d.severity,message:v}})},rr=b=>{if(y){if(y.innerHTML="",!b||b.length===0){y.setAttribute("hidden","hidden");return}y.removeAttribute("hidden"),b.forEach(d=>{let v=n.createElement("div");v.className="mga-summary__alert",v.setAttribute("data-mga-severity",d.severity),v.textContent=d.message,y.appendChild(v)})}},nr=(b,d)=>{if(!(!u||!S)){if(S.innerHTML="",!b||b.length===0){u.setAttribute("hidden","hidden"),x&&(x.textContent=""),V&&V.setAttribute("hidden","hidden");return}u.removeAttribute("hidden"),x&&(x.textContent=d&&d.label?m(e("Base\xA0: %1$s","lightbox-jlg"),d.label):""),V&&V.setAttribute("hidden","hidden"),b.forEach(v=>{let N=n.createElement("li");N.className="mga-summary__diff-item";let H=n.createElement("span");H.className="mga-summary__diff-label",H.textContent=v.label,N.appendChild(H);let re=n.createElement("span");re.className="mga-summary__diff-values";let ne=n.createElement("span");ne.className="mga-summary__diff-before",ne.textContent=v.baselineLabel,re.appendChild(ne);let Re=n.createElement("span");Re.textContent="\u2192",re.appendChild(Re);let R=n.createElement("span");R.className="mga-summary__diff-after",R.textContent=v.currentLabel,re.appendChild(R),N.appendChild(re),S.appendChild(N)})}},or=()=>{let b=q?q.refresh():[],d=q?q.getBaselineInfo():{label:"",key:""},v=tr();Jt(b,d),Zt(),Xt(),er(),nr(b,d),rr(v),Te(Yt(v,b,d))};return()=>{l&&t.clearTimeout(l),l=t.setTimeout(()=>{l=null,or()},120)}})(),A=l=>{let w=Math.max(0,Math.min(c.length-1,l));if(w===I)return;let O=c[I],B=c[w];O&&_e(O),B&&(pe(B),Z(B)),I=w,ve(),G(),I===F&&j()},z=()=>{r&&typeof r.reportValidity=="function"&&!r.reportValidity()||A(I+1)},i=()=>{A(I-1)},g=()=>{E.forEach((l,w)=>{l.addEventListener("click",O=>{if(O.preventDefault(),w<I&&w>=0)A(w);else if(w>I&&w<=F){if(r&&typeof r.reportValidity=="function"&&!r.reportValidity())return;A(w)}})})};C&&C.addEventListener("click",l=>{l.preventDefault(),i()}),L&&L.addEventListener("click",l=>{l.preventDefault(),z()}),g(),ve(),G(),I===F&&j();let f=()=>{j()};return r&&(r.addEventListener("change",f),r.addEventListener("input",f)),{scheduleSummaryUpdate:j,setStatusMessage:U,goToSummary:()=>A(F)}})($);me&&typeof me.scheduleSummaryUpdate=="function"&&(M=me.scheduleSummaryUpdate),((r,s)=>{if(!r)return;let c=t.mgaAdminConfig||{},E=typeof c.ajaxUrl=="string"&&c.ajaxUrl?c.ajaxUrl:t.ajaxurl,C=typeof c.nonce=="string"?c.nonce:"",L=r.querySelector("[data-mga-step-submit]");if(!E||!C)return;let W=(F,I)=>{s&&typeof s.setStatusMessage=="function"&&s.setStatusMessage(F,I)},Y=F=>{L&&(L.disabled=F,L.setAttribute("aria-busy",F?"true":"false")),F&&W("saving")};r.addEventListener("submit",F=>{if(F.preventDefault(),typeof r.reportValidity=="function"&&!r.reportValidity())return;let I=new FormData(r);I.append("action","mga_save_settings"),I.append("_ajax_nonce",C),Y(!0),fetch(E,{method:"POST",credentials:"same-origin",body:I}).then(D=>{if(!D.ok)throw new Error(D.statusText||"HTTP error");return D.json()}).then(D=>{if(!D||D.success!==!0){let G=D&&D.data&&D.data.message?D.data.message:null;throw new Error(G||c.messages&&c.messages.error||e("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg"))}let U=D.data&&D.data.message?D.data.message:c.messages&&c.messages.success||e("R\xE9glages enregistr\xE9s.","lightbox-jlg");W("success",U),M()}).catch(D=>{let U=c.messages&&c.messages.error?c.messages.error:e("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg");W("error",D&&D.message?D.message:U)}).finally(()=>{Y(!1)})})})($,me);let ft=(()=>{let r={setSectionModified:()=>{}},s=n.querySelector("[data-mga-settings-layout]");if(!s)return r;let c=Array.from(s.querySelectorAll("[data-mga-settings-section]"));if(c.length===0)return r;let E=s.querySelector("[data-mga-settings-nav]"),C=E?Array.from(E.querySelectorAll("[data-mga-section-link]")):[],L=new Map,W=new Map,Y=new Map,F=s.querySelector("[data-mga-view-toggle]"),I=F?F.querySelector("[data-mga-view-select]"):null,D="mga-settings-view-mode",G=(()=>{if(typeof t.localStorage=="undefined")return"essential";try{return t.localStorage.getItem(D)==="advanced"?"advanced":"essential"}catch(o){return"essential"}})(),Z=()=>{I&&(I.value=G)},_e=()=>{if(typeof t.localStorage!="undefined")try{t.localStorage.setItem(D,G)}catch(o){}},pe=()=>{s.setAttribute("data-mga-view-mode",G)},ve=o=>o&&o.getAttribute("data-mga-visibility")==="essential"?"essential":"advanced",j=s.querySelector("[data-mga-settings-search]"),A=s.querySelector("[data-mga-search-empty]"),z=new WeakMap,i=()=>s.getAttribute("data-mga-search-active")==="true",g=(o,y)=>{A&&(y&&o===0?A.removeAttribute("hidden"):A.setAttribute("hidden","hidden"))},f=o=>{o&&L.forEach((y,u)=>{u===o?y.setAttribute("aria-current","true"):y.removeAttribute("aria-current")})},l=()=>{c.forEach(o=>{o.removeAttribute("data-mga-section-highlight"),z.has(o)&&(t.clearTimeout(z.get(o)),z.delete(o))})},w=o=>{if(!o)return;o.setAttribute("data-mga-section-highlight","true"),z.has(o)&&t.clearTimeout(z.get(o));let y=t.setTimeout(()=>{o.removeAttribute("data-mga-section-highlight"),z.delete(o)},1600);z.set(o,y)},O=o=>{let y=typeof o=="string"?o.trim().toLowerCase():"",u=y.length>0,S=0;if(u?s.setAttribute("data-mga-search-active","true"):(s.removeAttribute("data-mga-search-active"),l()),c.forEach(x=>{let V=L.get(x),X=W.get(x);if(!u){if(G==="essential"&&ve(x)==="advanced"){x.setAttribute("hidden","hidden"),V&&(V.setAttribute("hidden","hidden"),V.removeAttribute("aria-current")),X&&X.setAttribute("hidden","hidden");return}x.removeAttribute("hidden"),V&&V.removeAttribute("hidden"),X&&X.removeAttribute("hidden");return}(x.textContent||"").toLowerCase().includes(y)?(x.removeAttribute("hidden"),x.setAttribute("data-mga-section-highlight","true"),S+=1,V&&V.removeAttribute("hidden"),X&&X.removeAttribute("hidden")):(x.setAttribute("hidden","hidden"),x.removeAttribute("data-mga-section-highlight"),V&&(V.setAttribute("hidden","hidden"),V.removeAttribute("aria-current")),X&&X.setAttribute("hidden","hidden"))}),u){let x=c.find(V=>!V.hasAttribute("hidden"));x&&f(x)}g(S,u)},B=(o,y={})=>{let u=o==="advanced"?"advanced":"essential";if(u===G&&!y.force)return;G=u,Z(),pe(),y.persist!==!1&&_e();let S=j&&j.value||"";O(S)};if(C.forEach(o=>{let y=o.getAttribute("href");if(!y||y.charAt(0)!=="#")return;let u=s.querySelector(y);if(!u)return;L.set(u,o);let S=o.closest("[data-mga-visibility]");if(S){W.set(u,S);let x=S.querySelector("[data-mga-modified-badge]");x||(x=n.createElement("span"),x.className="mga-settings-layout__badge",x.textContent=e("Modifi\xE9","lightbox-jlg"),x.hidden=!0,x.setAttribute("data-mga-modified-badge","true"),S.appendChild(x)),Y.set(u,x)}o.addEventListener("click",x=>{x.preventDefault(),u.hasAttribute("hidden")&&u.removeAttribute("hidden");try{u.scrollIntoView({behavior:"smooth",block:"start"})}catch(X){typeof u.scrollIntoView=="function"&&u.scrollIntoView()}f(u),w(u);let V=Qe()?{preventScroll:!0}:void 0;typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame(()=>{Be(u,V)}):Be(u,V)})}),Z(),pe(),I&&I.addEventListener("change",o=>{B(o.target.value||"essential")}),"IntersectionObserver"in t){let o=null,y=new IntersectionObserver(u=>{i()||(u.forEach(S=>{S.isIntersecting&&(o=S.target)}),o&&f(o))},{rootMargin:"-40% 0px -40% 0px",threshold:.1});c.forEach(u=>y.observe(u))}else{let o=()=>{if(i())return;let y=null,u=1/0,S=t.pageYOffset||n.documentElement.scrollTop||0;c.forEach(x=>{let X=x.getBoundingClientRect().top+S,xe=Math.abs(X-S-140);xe<u&&(y=x,u=xe)}),y&&f(y)};t.addEventListener("scroll",o,{passive:!0}),o()}return j?(j.addEventListener("input",o=>{O(o.target.value||"")}),O(j.value||"")):g(c.length,!1),B(G,{force:!0,persist:!1}),i()||f(c[0]),{setSectionModified(o,y){if(!o)return;let u=Y.get(o),S=W.get(o);u&&(u.hidden=!y),S&&(y?S.setAttribute("data-mga-modified","true"):S.removeAttribute("data-mga-modified"))}}})(),Ge=(r,s,c,E)=>{let C=n.getElementById(r),L=n.getElementById(s);if(!C||!L)return;let W=()=>{let Y=C.value,F=typeof c=="function"?c(Y):Y,I=typeof E=="function"?E(Y):F;typeof L.value!="undefined"&&(L.value=F),L.textContent=F,C.setAttribute("aria-valuenow",Y),C.setAttribute("aria-valuetext",I)};C.addEventListener("input",W),W()};Ge("mga_thumb_size","mga_thumb_size_value",r=>m(e("%spx","lightbox-jlg"),r),r=>m(e("%s pixels","lightbox-jlg"),r)),Ge("mga_thumb_size_mobile","mga_thumb_size_mobile_value",r=>m(e("%spx","lightbox-jlg"),r),r=>m(e("%s pixels","lightbox-jlg"),r)),Ge("mga_bg_opacity","mga_bg_opacity_value",r=>r,r=>m(e("%s opacity","lightbox-jlg"),r));let ae=n.getElementById("mga_accent_color"),Ze=n.getElementById("mga_accent_color_preview");if(ae){let r=ae.getAttribute("data-default-color"),s=Xe(r)?r:"#ffffff",c=C=>{let L=Xe(C)?C:s;return Ze&&(Ze.style.backgroundColor=L),L};c(ae.value);let E=t.jQuery;E&&typeof E.fn=="object"&&typeof E.fn.wpColorPicker=="function"?(E(ae).wpColorPicker({change(C,L){let W=L&&L.color?L.color.toString():C.target.value;c(W)},clear(){let C=ae.getAttribute("data-default-color")||s;E(ae).val(C),c(C)}}),E(ae).on("input",C=>{c(C.target.value)})):ae.addEventListener("input",()=>{c(ae.value)})}K=Ft(),(()=>{let r=n.querySelector("[data-mga-live-preview]");if(!r)return;let s=r.querySelector("[data-mga-live-preview-mock]"),c=r.querySelector("[data-mga-preview-effect]"),E=r.querySelector("[data-mga-preview-thumbs]"),C=r.querySelector("[data-mga-preview-status]"),L=r.querySelector("[data-mga-preview-fallback]"),W=r.querySelector("[data-mga-preview-swiper]"),Y=r.querySelector("[data-mga-preview-pagination]"),F=r.querySelector("[data-mga-preview-next]"),I=r.querySelector("[data-mga-preview-prev]"),D={zoom:Array.from(r.querySelectorAll('[data-preview-action="zoom"]')),download:Array.from(r.querySelectorAll('[data-preview-action="download"]')),share:Array.from(r.querySelectorAll('[data-preview-action="share"]')),cta:Array.from(r.querySelectorAll('[data-preview-action="cta"]')),fullscreen:Array.from(r.querySelectorAll('[data-preview-action="fullscreen"]'))},U=null,G=o=>!o||typeof o!="object"||o.type==="init"?!1:o.type!=="input",Z=o=>{!C||typeof o!="string"||o.trim()===""||(C.textContent=o)},_e=o=>{r&&r.setAttribute("data-mga-preview-state",o)},pe=o=>{_e("error"),L&&(L.hidden=!1,typeof o=="string"&&o.trim()!==""&&(L.textContent=o)),o&&Z(o)},ve=()=>{U&&typeof U.destroy=="function"&&U.destroy(!0,!0),U=null},j=(o,y)=>{let u=typeof o=="number"?o:parseFloat(o);return Number.isNaN(u)?y:u},A=()=>{let o=n.getElementById("mga_effect"),y=n.getElementById("mga_delay"),u=n.getElementById("mga_speed"),S=o?o.value:"slide",x=j(y?y.value:null,4),V=j(u?u.value:null,600),X=Math.max(Math.round(x*1e3),1e3),xe=Math.max(Math.round(V),100),Ae={allowTouchMove:!1,simulateTouch:!1,centeredSlides:!0,effect:S||"slide",loop:!0,slidesPerView:1,speed:xe};return Y&&(Ae.pagination={el:Y,clickable:!1}),F&&I&&(Ae.navigation={nextEl:F,prevEl:I}),!Number.isNaN(X)&&X>0&&(Ae.autoplay={delay:X,disableOnInteraction:!1}),Ae.effect==="fade"&&(Ae.fadeEffect={crossFade:!0}),Ae.on={init(Te){Te&&typeof Te.slideToLoop=="function"&&Te.slideToLoop(0,0,!1)}},Ae},z=()=>{if(!(!W||typeof t.Swiper!="function")){ve();try{U=new t.Swiper(W,A()),_e("ready")}catch(o){pe(e("Impossible d\u2019initialiser l\u2019aper\xE7u Swiper.","lightbox-jlg"))}}};W?(L&&(L.hidden=!0),_e("loading"),Z(e("Pr\xE9paration de la pr\xE9visualisation\u2026","lightbox-jlg")),Ot(t,{namespace:"admin-preview"}).then(()=>{z(),U&&typeof U.update=="function"&&U.update(),Z(e("Pr\xE9visualisation pr\xEAte.","lightbox-jlg"))}).catch(()=>{pe(e("Impossible de charger Swiper. La pr\xE9visualisation interactive est d\xE9sactiv\xE9e.","lightbox-jlg"))})):pe(e("Pr\xE9visualisation indisponible\xA0: conteneur Swiper manquant.","lightbox-jlg"));let i=(o,y,u)=>{if(!s)return;let S=Xe(o)?o:"#6366f1";s.style.setProperty("--mga-preview-accent",S),G(u)&&Z(e("Couleur d\u2019accent mise \xE0 jour.","lightbox-jlg"))},g=(o,y,u)=>{if(!s)return;let S=parseFloat(o);if(Number.isNaN(S))return;let x=Math.min(Math.max(S,0),1);s.style.setProperty("--mga-preview-overlay",`rgba(15, 23, 42, ${x})`),G(u)&&Z(e("Opacit\xE9 de l\u2019arri\xE8re-plan mise \xE0 jour.","lightbox-jlg"))},f=(o,y,u)=>{if(!s)return;let S=typeof o=="string"&&o?o:"echo";s.setAttribute("data-preview-style",S),G(u)&&Z(e("Style d\u2019arri\xE8re-plan actualis\xE9.","lightbox-jlg"))},l=(o,y,u,S)=>{if((D[o]||[]).forEach(V=>{V.setAttribute("data-preview-hidden",y?"false":"true"),V.setAttribute("aria-hidden",y?"false":"true")}),G(S)){let V={zoom:e("Zoom","lightbox-jlg"),download:e("T\xE9l\xE9chargement","lightbox-jlg"),share:e("Partage","lightbox-jlg"),cta:e("Appel \xE0 l\u2019action","lightbox-jlg"),fullscreen:e("Plein \xE9cran","lightbox-jlg")}[o]||o;Z(m(e(y?"%s activ\xE9 dans l\u2019aper\xE7u.":"%s masqu\xE9 dans l\u2019aper\xE7u.","lightbox-jlg"),V))}},w=(o,y,u)=>{if(!E)return;let S=parseFloat(o);if(Number.isNaN(S))E.style.setProperty("--mga-preview-thumb-scale","1");else{let x=Math.min(Math.max(S/90,.6),1.4);E.style.setProperty("--mga-preview-thumb-scale",x.toString())}G(u)&&Z(e("Taille des miniatures mise \xE0 jour.","lightbox-jlg"))},O=(o,y,u)=>{if(!c)return;let S=n.getElementById("mga_effect"),x=n.getElementById("mga_delay"),V=n.getElementById("mga_speed"),X=S?S.value:"",xe=x&&x.value||"4",Ae=V&&V.value||"600",Te=_[X]||e("personnalis\xE9e","lightbox-jlg");c.textContent=m(e("Transition : %1$s \u2022 %2$ss / %3$sms","lightbox-jlg"),Te,xe,Ae),G(u)&&Z(m(e("Transition mise \xE0 jour\xA0: %1$s, rythme de %2$ss.","lightbox-jlg"),Te,xe)),z()},B=(o,y,u=["change"])=>{let S=n.getElementById(o);if(!S||typeof y!="function")return;let x=V=>{let X=S.type==="checkbox"?S.checked:S.value;y(X,S,V||{type:"init"})};u.forEach(V=>{S.addEventListener(V,x)}),x({type:"init"})};B("mga_accent_color",i,["input","change"]),B("mga_bg_opacity",g,["input","change"]),B("mga_background_style",f),B("mga_thumb_size",w,["input","change"]),B("mga_show_zoom",(o,y,u)=>l("zoom",o,y,u)),B("mga_show_download",(o,y,u)=>l("download",o,y,u)),B("mga_show_share",(o,y,u)=>l("share",o,y,u)),B("mga_show_cta",(o,y,u)=>l("cta",o,y,u)),B("mga_show_fullscreen",(o,y,u)=>l("fullscreen",o,y,u)),B("mga_effect",O),B("mga_delay",O,["input","change"]),B("mga_speed",O,["input","change"])})();let Ce=t.mgaStylePresets&&typeof t.mgaStylePresets=="object"?t.mgaStylePresets:{},p=Ce.presets&&typeof Ce.presets=="object"?Ce.presets:{},h=n.getElementById("mga_style_preset"),k=n.querySelector("[data-mga-apply-style-preset]"),Se=n.querySelector("[data-mga-reset-style-preset]"),je=n.querySelector("[data-mga-style-preset-description]"),ke=!1;q=Rt(Ce.defaults||{}),q&&typeof q.setNavigationApi=="function"&&q.setNavigationApi(ft);let et=(r,s)=>{if(!(!r||typeof r.dispatchEvent!="function"))try{r.dispatchEvent(new Event(s,{bubbles:!0}))}catch(c){if(typeof n.createEvent=="function")try{let E=n.createEvent("Event");E.initEvent(s,!0,!0),r.dispatchEvent(E)}catch(E){}}},mt=(r,s)=>{let c=n.getElementById(r);c&&(c.value=s,et(c,"input"),et(c,"change"))},pt=mt,at=(r,s)=>{let c=n.getElementById(r);c&&(c.value=s,et(c,"change"))},De=(r,s)=>{let c=n.getElementById(r);c&&(c.checked=!!s,et(c,"change"))},Ut=r=>{if(!ae)return;let s=typeof r=="string"?r:"",c=t.jQuery;if(c&&typeof c.fn=="object"&&typeof c.fn.wpColorPicker=="function"){let E=c(ae);if(E&&typeof E.wpColorPicker=="function"){E.wpColorPicker("color",s),K&&K.update(s);return}}ae.value=s,et(ae,"change"),K&&K.update(s)},St=r=>{!r||typeof r!="object"||(Object.prototype.hasOwnProperty.call(r,"delay")&&mt("mga_delay",r.delay),Object.prototype.hasOwnProperty.call(r,"speed")&&mt("mga_speed",r.speed),Object.prototype.hasOwnProperty.call(r,"effect")&&at("mga_effect",r.effect),Object.prototype.hasOwnProperty.call(r,"easing")&&at("mga_easing",r.easing),Object.prototype.hasOwnProperty.call(r,"thumbs_layout")&&at("mga_thumbs_layout",r.thumbs_layout),Object.prototype.hasOwnProperty.call(r,"thumb_size")&&pt("mga_thumb_size",r.thumb_size),Object.prototype.hasOwnProperty.call(r,"thumb_size_mobile")&&pt("mga_thumb_size_mobile",r.thumb_size_mobile),Object.prototype.hasOwnProperty.call(r,"show_thumbs_mobile")&&De("mga_show_thumbs_mobile",r.show_thumbs_mobile),Object.prototype.hasOwnProperty.call(r,"accent_color")&&Ut(r.accent_color),Object.prototype.hasOwnProperty.call(r,"bg_opacity")&&pt("mga_bg_opacity",r.bg_opacity),Object.prototype.hasOwnProperty.call(r,"background_style")&&at("mga_background_style",r.background_style),Object.prototype.hasOwnProperty.call(r,"autoplay_start")&&De("mga_autoplay_start",r.autoplay_start),Object.prototype.hasOwnProperty.call(r,"loop")&&De("mga_loop",r.loop),Object.prototype.hasOwnProperty.call(r,"show_zoom")&&De("mga_show_zoom",r.show_zoom),Object.prototype.hasOwnProperty.call(r,"show_download")&&De("mga_show_download",r.show_download),Object.prototype.hasOwnProperty.call(r,"show_share")&&De("mga_show_share",r.show_share),Object.prototype.hasOwnProperty.call(r,"show_cta")&&De("mga_show_cta",r.show_cta),Object.prototype.hasOwnProperty.call(r,"show_fullscreen")&&De("mga_show_fullscreen",r.show_fullscreen))},tt=()=>{if(!je)return;let r=h?h.value:"";if(r&&p[r]&&p[r].description){je.textContent=p[r].description;return}let s=typeof Ce.customDescription=="string"?Ce.customDescription:"",c=q?q.getBaselineInfo():{label:"",key:""},E=c&&c.label?m(e("Base\xA0: %1$s.","lightbox-jlg"),c.label):"",C=[s,E].filter(L=>L&&L.trim()!=="");if(C.length===0){je.textContent="";return}je.textContent=C.join(" ")},Ht=()=>{ke||(h&&h.value!==""&&(h.value=""),tt(),q&&typeof q.refresh=="function"&&q.refresh(),M())},Kt=r=>{let s=n.getElementById(r);if(!s)return;let c=["change"];s.tagName==="INPUT"&&["text","number","range"].includes(s.type)&&c.push("input"),c.forEach(E=>{s.addEventListener(E,Ht)})};if(h&&(tt(),h.addEventListener("change",tt)),q)if(h&&h.value&&p[h.value]){let r=p[h.value];q.setBaseline({key:h.value,label:r.label||((xt=h.options[h.selectedIndex])==null?void 0:xt.text)||"",settings:r.settings||{}})}else q.setBaseline({key:"",label:q.getDefaultLabel(),settings:Ce.defaults||{}});k&&k.addEventListener("click",r=>{if(r.preventDefault(),!h)return;let s=h.value;!s||!p[s]||(ke=!0,St(p[s].settings||{}),q&&q.setBaseline({key:s,label:p[s].label||"",settings:p[s].settings||{}}),ke=!1,tt(),M())}),Se&&Se.addEventListener("click",r=>{r.preventDefault();let s=Ce.defaults||{};s&&typeof s=="object"&&Object.keys(s).length>0&&(ke=!0,St(s),q&&q.setBaseline({key:"",label:q.getDefaultLabel(),settings:s}),ke=!1),h&&(h.value=""),tt(),M()}),["mga_delay","mga_speed","mga_effect","mga_easing","mga_thumb_size","mga_thumb_size_mobile","mga_thumbs_layout","mga_accent_color","mga_bg_opacity","mga_background_style","mga_show_thumbs_mobile","mga_autoplay_start","mga_loop","mga_show_zoom","mga_show_download","mga_show_share","mga_show_cta","mga_show_fullscreen"].forEach(Kt);let _t=n.querySelector("[data-share-repeater]");_t&&Wt(_t);let rt=n.querySelector("[data-mga-content-selectors]");if(rt){let r=rt.querySelector("[data-mga-content-selectors-list]"),s=rt.querySelector("[data-mga-content-selectors-textarea]"),c=n.getElementById("mga-content-selector-template"),E=rt.getAttribute("data-mga-selector-placeholder")||"",C=!1,L=()=>{};if(r){let W=()=>r.querySelectorAll("[data-mga-content-selector-row]"),Y=()=>r.querySelectorAll("[data-mga-content-selector-input]"),F=()=>Array.from(Y()).some(j=>j.value.trim()===""),I=()=>{let j=W(),A=j.length<=1;j.forEach(z=>{let i=z.querySelector("[data-mga-remove-selector]");i&&(i.disabled=A,i.setAttribute("aria-disabled",A?"true":"false"))})},D=()=>Array.from(Y()).map(j=>j.value.trim()).filter(j=>j!==""),U=()=>{if(!s||C)return;let j=D();C=!0,s.value=j.join(`
`),C=!1},G=j=>{if(!j||j.getAttribute("data-mga-selector-bound")==="true")return;let A=j.querySelector("[data-mga-remove-selector]");A&&A.addEventListener("click",i=>{if(i.preventDefault(),W().length<=1){let f=j.querySelector("[data-mga-content-selector-input]");f&&(f.value="",U());return}j.remove(),I(),U()});let z=j.querySelector("[data-mga-content-selector-input]");z&&(z.addEventListener("input",()=>{C||U()}),z.addEventListener("keydown",i=>{if(i.key!=="Enter"||i.shiftKey||i.altKey||i.metaKey||i.ctrlKey)return;if(i.preventDefault(),!F()&&typeof L=="function"){L("");return}let g=W();if(g.length===0)return;let f=g[g.length-1];if(!f)return;let l=f.querySelector("[data-mga-content-selector-input]");l&&l!==i.target&&Be(l)}),E&&!z.getAttribute("placeholder")&&z.setAttribute("placeholder",E)),j.setAttribute("data-mga-selector-bound","true")},Z=(j="")=>{let A=null;if(c&&c.content&&(A=n.importNode(c.content,!0).firstElementChild,A)){let f=A.querySelector("[data-mga-content-selector-input]");return f&&(f.value=j,E&&f.setAttribute("placeholder",E)),G(A),A}A=n.createElement("div"),A.className="mga-content-selectors__row",A.setAttribute("data-mga-content-selector-row","");let z=n.createElement("input");z.type="text",z.className="regular-text",z.setAttribute("data-mga-content-selector-input",""),z.value=j,E&&z.setAttribute("placeholder",E),A.appendChild(z);let i=n.createElement("button");return i.type="button",i.className="button-link mga-content-selectors__remove",i.setAttribute("data-mga-remove-selector",""),i.textContent=e("Retirer","lightbox-jlg"),A.appendChild(i),G(A),A},_e=j=>{if(r.innerHTML="",j.length===0){let A=Z("");A&&r.appendChild(A)}else j.forEach(A=>{let z=Z(A);z&&r.appendChild(z)});I()},pe=()=>{if(!s||C)return;let j=s.value.split(/\r\n|\r|\n/).map(A=>A.trim()).filter(A=>A.length>0);C=!0,_e(j),C=!1};L=(j="")=>{let A=Z(j);if(A){r.appendChild(A),I();let z=A.querySelector("[data-mga-content-selector-input]");z&&Be(z)}U()},s?(pe(),s.addEventListener("input",()=>{C||pe()})):_e([]);let ve=rt.querySelector("[data-mga-add-selector]");ve&&ve.addEventListener("click",j=>{j.preventDefault(),L()})}}function Wt(r){let s=r.querySelector("[data-share-repeater-list]"),c=r.querySelector("[data-share-repeater-add]"),E=n.getElementById("mga-share-channel-template");if(!s||!E)return;let C=Date.now(),L=()=>(C+=1,`mga-share-channel-${C}`),W=i=>i?((!i.dataset.shareUid||i.dataset.shareUid.trim()==="")&&(i.dataset.shareUid=L()),i.dataset.shareUid):null,Y=i=>{let g=W(i);if(!g)return;i.querySelectorAll("[data-share-id-suffix]").forEach(l=>{let w=l.getAttribute("data-share-id-suffix");if(!w)return;let O=`${g}-${w}`;l.tagName==="LABEL"?l.setAttribute("for",O):l.id=O})},F=i=>{if(!i)return;let g=i.querySelector("[data-share-repeater-title]");if(!g)return;let f=i.querySelector('[data-share-field="label"]'),l=i.querySelector('[data-share-field="key"]'),w=f&&typeof f.value=="string"?f.value.trim():"",O=l&&typeof l.value=="string"?l.value.trim():"",B=O?O.toUpperCase():e("Nouveau canal","lightbox-jlg");g.textContent=w||B},I=i=>{if(!i)return;let g=i.querySelector("[data-share-icon-preview]"),f=i.querySelector('[data-share-field="icon"]');if(!g)return;let l=f?f.value:"",w=le(l);g.innerHTML="",w&&g.appendChild(w);let O=i.querySelector("[data-share-preview-icon]");if(O){O.innerHTML="";let B=le(l);B&&O.appendChild(B)}},D=(i,g)=>!i||!g?null:i.querySelector(`[data-share-field="${g}"]`),U=(i,g)=>{let f=D(i,g);return f&&typeof f.value=="string"?f.value.trim():""},G=i=>{if(typeof i!="string")return"";let g=i;return Object.keys(de).forEach(f=>{let l=encodeURIComponent(de[f]);g=g.replace(new RegExp(f,"gi"),l)}),g},Z=i=>/%url%/i.test(typeof i=="string"?i:""),_e=i=>{if(typeof i!="string")return!1;let g=i.trim();if(g==="")return!1;let f=g.split(":")[0].toLowerCase();return Ye.includes(f)?f==="http"||f==="https"?/^https?:\/\//i.test(g):!0:!1},pe=(i,g,f)=>{let l=typeof f=="string"&&f!=="";i&&(l?(i.classList.add("mga-field-error"),i.setAttribute("aria-invalid","true")):(i.classList.remove("mga-field-error"),i.removeAttribute("aria-invalid"))),g&&(l?(g.textContent=f,g.removeAttribute("hidden")):(g.textContent="",g.setAttribute("hidden","hidden")))},ve=i=>{if(!i)return;let g=i.querySelector("[data-share-preview]");if(!g)return;let f=g.querySelector("[data-share-preview-label]"),l=g.querySelector("[data-share-preview-url]"),w=U(i,"label"),O=U(i,"key"),B=O?O.toUpperCase():e("Nouveau canal","lightbox-jlg");if(f&&(f.textContent=w||B),l){let o=U(i,"template");if(o){let y=G(o);l.textContent=y,l.setAttribute("data-preview-empty","false"),l.title=y}else l.textContent=e("Compl\xE9tez le mod\xE8le pour g\xE9n\xE9rer un lien.","lightbox-jlg"),l.setAttribute("data-preview-empty","true"),l.removeAttribute("title")}M()},j=()=>{let i=Array.from(s.querySelectorAll("[data-share-repeater-item]")),g=i.reduce((f,l)=>{let w=U(l,"key").toLowerCase();return w&&(f[w]=(f[w]||0)+1),f},{});i.forEach(f=>{let l=D(f,"key"),w=D(f,"template"),O=f.querySelector('[data-share-error="key"]'),B=f.querySelector('[data-share-error="template"]'),o=U(f,"key"),y=o.toLowerCase(),u="";o?/^[a-z0-9_-]+$/i.test(o)?g[y]>1&&(u=e("Chaque cl\xE9 doit \xEAtre unique.","lightbox-jlg")):u=e("Utilisez uniquement des lettres, chiffres ou tirets.","lightbox-jlg"):u=e("Renseignez une cl\xE9 pour ce canal.","lightbox-jlg"),pe(l,O,u);let S=U(f,"template"),x="";S?Z(S)?_e(S)||(x=e("Indiquez une URL valide (http, https, mailto, tel ou sms).","lightbox-jlg")):x=e("Ajoutez au moins le jeton %url% pour construire le lien.","lightbox-jlg"):x=e("Renseignez un mod\xE8le d\u2019URL.","lightbox-jlg"),pe(w,B,x)})},A=()=>{Array.from(s.querySelectorAll("[data-share-repeater-item]")).forEach((g,f)=>{let l=`mga_settings[share_channels][${f}]`;g.querySelectorAll("[data-share-field]").forEach(O=>{let B=O.getAttribute("data-share-field");if(!B)return;let o=B;B==="enabled-hidden"&&(o="enabled"),O.name=`${l}[${o}]`}),Y(g),F(g),I(g),ve(g)}),j(),M()},z=i=>{if(!i)return;let g=i.querySelector('[data-share-field="label"]')||i;Be(g)};s.addEventListener("input",i=>{let g=i.target;if(!g)return;let f=g.closest("[data-share-repeater-item]");f&&(g.matches('[data-share-field="label"], [data-share-field="key"]')&&F(f),g.matches('[data-share-field="icon"]')&&I(f),ve(f),j())}),s.addEventListener("change",i=>{let g=i.target;if(!g||!g.matches('[data-share-field="icon"]'))return;let f=g.closest("[data-share-repeater-item]");f&&(I(f),ve(f),j())}),s.addEventListener("click",i=>{let g=i.target.closest("[data-share-action]");if(!g)return;i.preventDefault();let f=g.getAttribute("data-share-action"),l=g.closest("[data-share-repeater-item]");if(l){if(f==="remove"){let w=l.nextElementSibling||l.previousElementSibling;l.parentNode===s&&s.removeChild(l),A(),M(),w&&z(w);return}if(f==="move-up"){let w=l.previousElementSibling;w&&(s.insertBefore(l,w),A(),z(l),M());return}if(f==="move-down"){let w=l.nextElementSibling;w&&(s.insertBefore(w,l),A(),z(l),M())}}}),c&&c.addEventListener("click",i=>{i.preventDefault();let f=n.importNode(E.content,!0).querySelector("[data-share-repeater-item]");f&&(s.appendChild(f),A(),z(f),M())}),A(),M()}})})(typeof window!="undefined"?window:globalThis)});Sr();})();
//# sourceMappingURL=admin.js.map
