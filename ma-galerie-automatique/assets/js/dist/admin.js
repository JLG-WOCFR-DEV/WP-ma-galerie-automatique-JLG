(()=>{var pe=(r,w)=>()=>(r&&(w=r(r=0)),w);var Je=(r,w)=>()=>(w||r((w={exports:{}}).exports,w),w.exports);var Xe,Ze,ze,Te,Me,Oe=pe(()=>{Xe=/%(\d+\$)?[sd]/g,Ze=()=>(r,...w)=>{let l=0;return String(r).replace(Xe,(L,u)=>{let B,ae=L.charAt(L.length-1);if(u){let Q=parseInt(u.slice(0,-1),10);if(Number.isNaN(Q)||Q<=0)return"";B=Q-1}else B=l,l+=1;let Z=B>=0&&B<w.length?w[B]:void 0;if(ae==="d"){let Q=parseInt(Z,10);return Number.isNaN(Q)?"":String(Q)}return typeof Z=="undefined"?"":String(Z)})},ze=r=>r&&typeof r.sprintf=="function"?r.sprintf:Ze(),Te=r=>r&&typeof r.__=="function"?r.__:w=>w,Me=r=>!r||typeof r!="object"?null:r.wp&&r.wp.i18n?r.wp.i18n:null});var Ae,Ee,et,Ve,tt,Be,Ne=pe(()=>{Ae={facebook:{viewBox:"0 0 24 24",paths:[{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z"}]},twitter:{viewBox:"0 0 24 24",paths:[{d:"M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z"}]},linkedin:{viewBox:"0 0 24 24",paths:[{d:"M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z"}]},pinterest:{viewBox:"0 0 24 24",paths:[{d:"M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z"}]},whatsapp:{viewBox:"0 0 24 24",paths:[{d:"M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z"}]},telegram:{viewBox:"0 0 24 24",paths:[{d:"M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z"}]},email:{viewBox:"0 0 24 24",paths:[{d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"}]},link:{viewBox:"0 0 24 24",paths:[{d:"M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z"}]},generic:{viewBox:"0 0 24 24",paths:[{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"},{d:"M13 17h-2v-2h2zm0-4h-2V7h2z"}]},copy:{viewBox:"0 0 24 24",paths:[{d:"M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"}]},download:{viewBox:"0 0 24 24",paths:[{d:"M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z"}]},native:{viewBox:"0 0 24 24",paths:[{d:"M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"}]}},Ee=r=>typeof r!="string"?"":r.trim().toLowerCase().replace(/[^a-z0-9_-]/g,""),et=r=>{let w=Ee(r);return w&&Ae[w]?Ae[w]:Ae.generic},Ve=(r,w,l={})=>{if(!r||typeof r.createElementNS!="function")return null;let L=r.createElementNS("http://www.w3.org/2000/svg",w);return Object.keys(l).forEach(u=>{L.setAttribute(u,l[u])}),L},tt=(r,w)=>{let l=et(w),L=Ve(r,"svg",{viewBox:l.viewBox,fill:"currentColor","aria-hidden":"true",focusable:"false"});return L?(Array.isArray(l.paths)&&l.paths.forEach(u=>{let B=Ve(r,"path",u);B&&L.appendChild(B)}),L):null},Be=(r,w,{wrapperTag:l="span",wrapperClass:L=""}={})=>{if(!r||typeof r.createElement!="function")return null;let u=r.createElement(l);L&&(u.className=L);let B=tt(r,w);return B?(u.appendChild(B),u):null}});var X,re,W,Re,Ue=pe(()=>{X=null,re=()=>{if(X!==null)return X;X=!1;let r=typeof window!="undefined"?window.document:null;if(!r||typeof r.createElement!="function"||typeof window.HTMLElement=="undefined"||!window.HTMLElement.prototype||typeof window.HTMLElement.prototype.focus!="function")return X;let w=r.createElement("button"),l=r.body||r.documentElement;try{w.type="button",l&&typeof l.appendChild=="function"&&l.appendChild(w),window.HTMLElement.prototype.focus.call(w,{get preventScroll(){return X=!0,!0}})}catch(L){X=!1}finally{w.parentNode&&typeof w.parentNode.removeChild=="function"&&w.parentNode.removeChild(w)}return X},W=(r,w={preventScroll:!0})=>{if(!r||typeof r.focus!="function")return;if(w&&re())try{r.focus(w);return}catch(L){}r.focus()},Re=()=>{typeof window!="undefined"&&((!window.mgaFocusUtils||typeof window.mgaFocusUtils!="object")&&(window.mgaFocusUtils={}),window.mgaFocusUtils.detectFocusOptionsSupport=re,window.mgaFocusUtils.safeFocus=W)}});var De=pe(()=>{Oe();Ne();Ue()});var rt=Je((gt,me)=>{De();(function(r){Re();let w=Me(r),l=Te(w),L=ze(w);typeof me!="undefined"&&me.exports&&(me.exports={detectFocusOptionsSupport:re,safeFocus:W});let u=r.document,B=J=>{let D=Be(u,Ee(J));return D?D.querySelector("svg")||D:null},ae={url:"https://exemple.com/galerie/photo-01",text:"Une photo remarquable",title:"Collection studio"},Z={"%url%":ae.url,"%text%":ae.text,"%title%":ae.title},Q=["http","https","mailto","tel","sms"],he=J=>typeof J!="string"?!1:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(J.trim());!u||typeof u.addEventListener!="function"||u.addEventListener("DOMContentLoaded",function(){let J=u.querySelector("[data-mga-settings-form]")||u.querySelector(".mga-admin-wrap form"),D=u.querySelector(".mga-admin-wrap"),K=()=>{},ge="mgaAdminThemePreference",He=["light","dark","system"],ee=D?D.querySelector("[data-mga-theme-select]"):null,Y=typeof r.matchMedia=="function"?r.matchMedia("(prefers-color-scheme: dark)"):null,$e=()=>{try{return r.localStorage?r.localStorage.getItem(ge):null}catch(e){return null}},Fe=e=>{try{if(!r.localStorage)return;if(!e){r.localStorage.removeItem(ge);return}r.localStorage.setItem(ge,e)}catch(t){}},ye=e=>{if(typeof e!="string")return"system";let t=e.trim().toLowerCase();return He.includes(t)?t:"system"},ue=ye($e()),Ke=e=>e==="dark"?"dark":e==="light"?"light":(Y&&typeof Y.matches=="boolean"?Y.matches:!1)?"dark":"light",ve=(e,t={})=>{if(!D)return;let s=ye(e),m=Ke(s);D.setAttribute("data-mga-theme-preference",s),D.setAttribute("data-mga-theme",m),D.classList.toggle("is-theme-dark",m==="dark"),D.classList.toggle("is-theme-light",m!=="dark"),ee&&ee.value!==s&&(ee.value=s),t.skipStorage||Fe(s==="system"?"":s),ue=s};D&&ve(ue,{skipStorage:!0}),ee&&(ee.value=ue,ee.addEventListener("change",e=>{let t=ye(e.target?e.target.value:null);ve(t)}));let Ie=()=>{ue==="system"&&ve("system",{skipStorage:!0})};Y&&(typeof Y.addEventListener=="function"?Y.addEventListener("change",Ie):typeof Y.addListener=="function"&&Y.addListener(Ie));let de=(e=>{let t=u.querySelector("[data-mga-wizard]");if(!t)return null;let s=Array.from(t.querySelectorAll("[data-mga-step-panel]")),m=Array.from(t.querySelectorAll("[data-mga-step-indicator]")),y=t.querySelector("[data-mga-step-prev]"),_=t.querySelector("[data-mga-step-next]"),z=t.querySelector("[data-mga-step-submit]"),P=t.querySelector("[data-mga-save-status]"),A=s.length-1,v=s.findIndex(n=>n.classList.contains("is-active"));v<0&&(v=0);let S=()=>r.mgaAdminConfig&&r.mgaAdminConfig.messages||{},C=(n,p)=>{if(!P)return;let o=p||S()[n]||"";P.textContent=o,P.setAttribute("data-mga-status-state",n)},k=()=>{y&&(y.disabled=v===0),_&&(_.hidden=v>=A),z&&(z.hidden=v<A)},b=n=>{if(!n)return;let p=n.querySelector("[data-mga-step-title]")||n,o=re()?{preventScroll:!0}:void 0;r.requestAnimationFrame(()=>{W(p,o)})},E=n=>{n.classList.remove("is-active"),n.setAttribute("hidden","hidden"),n.setAttribute("aria-hidden","true")},I=n=>{n.classList.add("is-active"),n.removeAttribute("hidden"),n.setAttribute("aria-hidden","false")},j=()=>{m.forEach((n,p)=>{n.classList.toggle("is-active",p===v),n.classList.toggle("is-completed",p<v),n.setAttribute("aria-current",p===v?"step":"false")})},d=(()=>{let n=null,p=t.querySelector("[data-mga-summary-preset]"),o=t.querySelector("[data-mga-summary-timing]"),h=t.querySelector("[data-mga-summary-toolbar]"),g=t.querySelector("[data-mga-summary-share]"),M=()=>{if(!h)return;let N=[{id:"mga_show_zoom",label:l("Zoom","lightbox-jlg")},{id:"mga_show_download",label:l("T\xE9l\xE9chargement","lightbox-jlg")},{id:"mga_show_share",label:l("Partage","lightbox-jlg")},{id:"mga_show_cta",label:l("Appel \xE0 l\u2019action","lightbox-jlg")},{id:"mga_show_fullscreen",label:l("Plein \xE9cran","lightbox-jlg")}].filter(U=>{let V=u.getElementById(U.id);return V?V.checked:!1});h.textContent=N.length>0?N.map(U=>U.label).join(", "):l("Aucun bouton affich\xE9","lightbox-jlg")},q=()=>{if(!p)return;let F=u.getElementById("mga_style_preset"),N=F?F.value:"";if(!F){p.textContent=l("R\xE9glages personnalis\xE9s","lightbox-jlg");return}let U=Array.from(F.options).find(H=>H.value===N),V=U?U.textContent:l("R\xE9glages personnalis\xE9s","lightbox-jlg");if(r.mgaStylePresets&&r.mgaStylePresets.presets){let H=r.mgaStylePresets.presets[N];H&&H.label&&(V=H.label)}N||(V=r.mgaStylePresets&&r.mgaStylePresets.customDescription?r.mgaStylePresets.customDescription:V),p.textContent=V},T=()=>{if(!o)return;let F=u.getElementById("mga_delay"),N=u.getElementById("mga_effect"),U=F&&F.value?F.value:"\u2014",V=l("Transition personnalis\xE9e","lightbox-jlg");if(N){let H=Array.from(N.options).find(xe=>xe.selected);V=H?H.textContent:V}o.textContent=L(l("Diaporama : %1$s\xA0s \xB7 Effet : %2$s","lightbox-jlg"),U,V)},O=()=>{if(!g)return;let N=Array.from(u.querySelectorAll("[data-share-repeater-item]")).filter(U=>{let V=U.querySelector('[data-share-field="enabled"]');return V?V.checked:!1}).map(U=>{let V=U.querySelector('[data-share-field="label"]'),H=U.querySelector('[data-share-field="key"]'),xe=V&&V.value?V.value.trim():"",je=H&&H.value?H.value.trim():"";return xe||(je?je.toUpperCase():l("Canal sans titre","lightbox-jlg"))});N.length>0?g.textContent=L(l("%1$d canaux actifs : %2$s","lightbox-jlg"),N.length,N.join(", ")):g.textContent=l("Aucun canal actif","lightbox-jlg")},le=()=>{q(),T(),M(),O()};return()=>{n&&r.clearTimeout(n),n=r.setTimeout(()=>{n=null,le()},120)}})(),f=n=>{let p=Math.max(0,Math.min(s.length-1,n));if(p===v)return;let o=s[v],h=s[p];o&&E(o),h&&(I(h),b(h)),v=p,j(),k(),v===A&&d()},x=()=>{e&&typeof e.reportValidity=="function"&&!e.reportValidity()||f(v+1)},a=()=>{f(v-1)},c=()=>{m.forEach((n,p)=>{n.addEventListener("click",o=>{if(o.preventDefault(),p<v&&p>=0)f(p);else if(p>v&&p<=A){if(e&&typeof e.reportValidity=="function"&&!e.reportValidity())return;f(p)}})})};y&&y.addEventListener("click",n=>{n.preventDefault(),a()}),_&&_.addEventListener("click",n=>{n.preventDefault(),x()}),c(),j(),k(),v===A&&d();let i=()=>{d()};return e&&(e.addEventListener("change",i),e.addEventListener("input",i)),{scheduleSummaryUpdate:d,setStatusMessage:C,goToSummary:()=>f(A)}})(J);de&&typeof de.scheduleSummaryUpdate=="function"&&(K=de.scheduleSummaryUpdate),((e,t)=>{if(!e)return;let s=r.mgaAdminConfig||{},m=typeof s.ajaxUrl=="string"&&s.ajaxUrl?s.ajaxUrl:r.ajaxurl,y=typeof s.nonce=="string"?s.nonce:"",_=e.querySelector("[data-mga-step-submit]");if(!m||!y)return;let z=(A,v)=>{t&&typeof t.setStatusMessage=="function"&&t.setStatusMessage(A,v)},P=A=>{_&&(_.disabled=A,_.setAttribute("aria-busy",A?"true":"false")),A&&z("saving")};e.addEventListener("submit",A=>{if(A.preventDefault(),typeof e.reportValidity=="function"&&!e.reportValidity())return;let v=new FormData(e);v.append("action","mga_save_settings"),v.append("_ajax_nonce",y),P(!0),fetch(m,{method:"POST",credentials:"same-origin",body:v}).then(S=>{if(!S.ok)throw new Error(S.statusText||"HTTP error");return S.json()}).then(S=>{if(!S||S.success!==!0){let k=S&&S.data&&S.data.message?S.data.message:null;throw new Error(k||s.messages&&s.messages.error||l("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg"))}let C=S.data&&S.data.message?S.data.message:s.messages&&s.messages.success||l("R\xE9glages enregistr\xE9s.","lightbox-jlg");z("success",C),K()}).catch(S=>{let C=s.messages&&s.messages.error?s.messages.error:l("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg");z("error",S&&S.message?S.message:C)}).finally(()=>{P(!1)})})})(J,de),(()=>{let e=u.querySelector("[data-mga-settings-layout]");if(!e)return;let t=Array.from(e.querySelectorAll("[data-mga-settings-section]"));if(t.length===0)return;let s=e.querySelector("[data-mga-settings-nav]"),m=s?Array.from(s.querySelectorAll("[data-mga-section-link]")):[],y=new Map,_=new Map,z=e.querySelector("[data-mga-view-toggle]"),P=z?z.querySelector("[data-mga-view-select]"):null,A="mga-settings-view-mode",S=(()=>{if(typeof r.localStorage=="undefined")return"essential";try{return r.localStorage.getItem(A)==="advanced"?"advanced":"essential"}catch(o){return"essential"}})(),C=()=>{P&&(P.value=S)},k=()=>{if(typeof r.localStorage!="undefined")try{r.localStorage.setItem(A,S)}catch(o){}},b=()=>{e.setAttribute("data-mga-view-mode",S)},E=o=>o&&o.getAttribute("data-mga-visibility")==="essential"?"essential":"advanced",I=e.querySelector("[data-mga-settings-search]"),j=e.querySelector("[data-mga-search-empty]"),d=new WeakMap,f=()=>e.getAttribute("data-mga-search-active")==="true",x=(o,h)=>{j&&(h&&o===0?j.removeAttribute("hidden"):j.setAttribute("hidden","hidden"))},a=o=>{o&&y.forEach((h,g)=>{g===o?h.setAttribute("aria-current","true"):h.removeAttribute("aria-current")})},c=()=>{t.forEach(o=>{o.removeAttribute("data-mga-section-highlight"),d.has(o)&&(r.clearTimeout(d.get(o)),d.delete(o))})},i=o=>{if(!o)return;o.setAttribute("data-mga-section-highlight","true"),d.has(o)&&r.clearTimeout(d.get(o));let h=r.setTimeout(()=>{o.removeAttribute("data-mga-section-highlight"),d.delete(o)},1600);d.set(o,h)},n=o=>{let h=typeof o=="string"?o.trim().toLowerCase():"",g=h.length>0,M=0;if(g?e.setAttribute("data-mga-search-active","true"):(e.removeAttribute("data-mga-search-active"),c()),t.forEach(q=>{let T=y.get(q),O=_.get(q);if(!g){if(S==="essential"&&E(q)==="advanced"){q.setAttribute("hidden","hidden"),T&&(T.setAttribute("hidden","hidden"),T.removeAttribute("aria-current")),O&&O.setAttribute("hidden","hidden");return}q.removeAttribute("hidden"),T&&T.removeAttribute("hidden"),O&&O.removeAttribute("hidden");return}(q.textContent||"").toLowerCase().includes(h)?(q.removeAttribute("hidden"),q.setAttribute("data-mga-section-highlight","true"),M+=1,T&&T.removeAttribute("hidden"),O&&O.removeAttribute("hidden")):(q.setAttribute("hidden","hidden"),q.removeAttribute("data-mga-section-highlight"),T&&(T.setAttribute("hidden","hidden"),T.removeAttribute("aria-current")),O&&O.setAttribute("hidden","hidden"))}),g){let q=t.find(T=>!T.hasAttribute("hidden"));q&&a(q)}x(M,g)},p=(o,h={})=>{let g=o==="advanced"?"advanced":"essential";if(g===S&&!h.force)return;S=g,C(),b(),h.persist!==!1&&k();let M=I&&I.value||"";n(M)};if(m.forEach(o=>{let h=o.getAttribute("href");if(!h||h.charAt(0)!=="#")return;let g=e.querySelector(h);if(!g)return;y.set(g,o);let M=o.closest("[data-mga-visibility]");M&&_.set(g,M),o.addEventListener("click",q=>{q.preventDefault(),g.hasAttribute("hidden")&&g.removeAttribute("hidden");try{g.scrollIntoView({behavior:"smooth",block:"start"})}catch(O){typeof g.scrollIntoView=="function"&&g.scrollIntoView()}a(g),i(g);let T=re()?{preventScroll:!0}:void 0;typeof r.requestAnimationFrame=="function"?r.requestAnimationFrame(()=>{W(g,T)}):W(g,T)})}),C(),b(),P&&P.addEventListener("change",o=>{p(o.target.value||"essential")}),"IntersectionObserver"in r){let o=null,h=new IntersectionObserver(g=>{f()||(g.forEach(M=>{M.isIntersecting&&(o=M.target)}),o&&a(o))},{rootMargin:"-40% 0px -40% 0px",threshold:.1});t.forEach(g=>h.observe(g))}else{let o=()=>{if(f())return;let h=null,g=1/0,M=r.pageYOffset||u.documentElement.scrollTop||0;t.forEach(q=>{let O=q.getBoundingClientRect().top+M,le=Math.abs(O-M-140);le<g&&(h=q,g=le)}),h&&a(h)};r.addEventListener("scroll",o,{passive:!0}),o()}I?(I.addEventListener("input",o=>{n(o.target.value||"")}),n(I.value||"")):x(t.length,!1),p(S,{force:!0,persist:!1}),f()||a(t[0])})();let be=(e,t,s,m)=>{let y=u.getElementById(e),_=u.getElementById(t);if(!y||!_)return;let z=()=>{let P=y.value,A=typeof s=="function"?s(P):P,v=typeof m=="function"?m(P):A;typeof _.value!="undefined"&&(_.value=A),_.textContent=A,y.setAttribute("aria-valuenow",P),y.setAttribute("aria-valuetext",v)};y.addEventListener("input",z),z()};be("mga_thumb_size","mga_thumb_size_value",e=>L(l("%spx","lightbox-jlg"),e),e=>L(l("%s pixels","lightbox-jlg"),e)),be("mga_thumb_size_mobile","mga_thumb_size_mobile_value",e=>L(l("%spx","lightbox-jlg"),e),e=>L(l("%s pixels","lightbox-jlg"),e)),be("mga_bg_opacity","mga_bg_opacity_value",e=>e,e=>L(l("%s opacity","lightbox-jlg"),e));let R=u.getElementById("mga_accent_color"),qe=u.getElementById("mga_accent_color_preview");if(R){let e=R.getAttribute("data-default-color"),t=he(e)?e:"#ffffff",s=y=>{let _=he(y)?y:t;return qe&&(qe.style.backgroundColor=_),_};s(R.value);let m=r.jQuery;m&&typeof m.fn=="object"&&typeof m.fn.wpColorPicker=="function"?(m(R).wpColorPicker({change(y,_){let z=_&&_.color?_.color.toString():y.target.value;s(z)},clear(){let y=R.getAttribute("data-default-color")||t;m(R).val(y),s(y)}}),m(R).on("input",y=>{s(y.target.value)})):R.addEventListener("input",()=>{s(R.value)})}(()=>{let e=u.querySelector("[data-mga-live-preview]");if(!e)return;let t=e.querySelector("[data-mga-live-preview-mock]"),s=e.querySelector("[data-mga-preview-effect]"),m=e.querySelector("[data-mga-preview-thumbs]"),y={zoom:e.querySelector('[data-preview-action="zoom"]'),download:e.querySelector('[data-preview-action="download"]'),share:e.querySelector('[data-preview-action="share"]'),cta:e.querySelector('[data-preview-action="cta"]'),fullscreen:e.querySelector('[data-preview-action="fullscreen"]')},_={slide:l("glissement","lightbox-jlg"),fade:l("fondu","lightbox-jlg"),cube:l("cube 3D","lightbox-jlg"),coverflow:l("coverflow","lightbox-jlg"),flip:l("flip 3D","lightbox-jlg")},z=b=>{if(!t)return;let E=he(b)?b:"#6366f1";t.style.setProperty("--mga-preview-accent",E)},P=b=>{if(!t)return;let E=parseFloat(b);if(Number.isNaN(E))return;let I=Math.min(Math.max(E,0),1);t.style.setProperty("--mga-preview-overlay",`rgba(15, 23, 42, ${I})`)},A=b=>{if(!t)return;let E=typeof b=="string"&&b?b:"echo";t.setAttribute("data-preview-style",E)},v=(b,E)=>{let I=y[b];I&&(I.setAttribute("data-preview-hidden",E?"false":"true"),I.setAttribute("aria-hidden",E?"false":"true"))},S=b=>{if(!m)return;let E=parseFloat(b);if(Number.isNaN(E)){m.style.setProperty("--mga-preview-thumb-scale","1");return}let I=Math.min(Math.max(E/90,.6),1.4);m.style.setProperty("--mga-preview-thumb-scale",I.toString())},C=()=>{if(!s)return;let b=u.getElementById("mga_effect"),E=u.getElementById("mga_delay"),I=u.getElementById("mga_speed"),j=b?b.value:"",d=E&&E.value||"4",f=I&&I.value||"600",x=_[j]||l("personnalis\xE9e","lightbox-jlg");s.textContent=L(l("Transition : %1$s \u2022 %2$ss / %3$sms","lightbox-jlg"),x,d,f)},k=(b,E,I=["change"])=>{let j=u.getElementById(b);if(!j||typeof E!="function")return;let d=()=>{j.type==="checkbox"?E(j.checked,j):E(j.value,j)};I.forEach(f=>{j.addEventListener(f,d)}),d()};k("mga_accent_color",z,["input","change"]),k("mga_bg_opacity",P,["input","change"]),k("mga_background_style",A),k("mga_thumb_size",S,["input","change"]),k("mga_show_zoom",b=>v("zoom",b)),k("mga_show_download",b=>v("download",b)),k("mga_show_share",b=>v("share",b)),k("mga_show_cta",b=>v("cta",b)),k("mga_show_fullscreen",b=>v("fullscreen",b)),k("mga_effect",C),k("mga_delay",C,["input","change"]),k("mga_speed",C,["input","change"])})();let te=r.mgaStylePresets&&typeof r.mgaStylePresets=="object"?r.mgaStylePresets:{},ne=te.presets&&typeof te.presets=="object"?te.presets:{},$=u.getElementById("mga_style_preset"),Ce=u.querySelector("[data-mga-apply-style-preset]"),ke=u.querySelector("[data-mga-reset-style-preset]"),we=u.querySelector("[data-mga-style-preset-description]"),oe=!1,se=(e,t)=>{if(!(!e||typeof e.dispatchEvent!="function"))try{e.dispatchEvent(new Event(t,{bubbles:!0}))}catch(s){if(typeof u.createEvent=="function")try{let m=u.createEvent("Event");m.initEvent(t,!0,!0),e.dispatchEvent(m)}catch(m){}}},Se=(e,t)=>{let s=u.getElementById(e);s&&(s.value=t,se(s,"input"),se(s,"change"))},_e=Se,fe=(e,t)=>{let s=u.getElementById(e);s&&(s.value=t,se(s,"change"))},G=(e,t)=>{let s=u.getElementById(e);s&&(s.checked=!!t,se(s,"change"))},We=e=>{if(!R)return;let t=typeof e=="string"?e:"",s=r.jQuery;if(s&&typeof s.fn=="object"&&typeof s.fn.wpColorPicker=="function"){let m=s(R);if(m&&typeof m.wpColorPicker=="function"){m.wpColorPicker("color",t);return}}R.value=t,se(R,"change")},Le=e=>{!e||typeof e!="object"||(Object.prototype.hasOwnProperty.call(e,"delay")&&Se("mga_delay",e.delay),Object.prototype.hasOwnProperty.call(e,"speed")&&Se("mga_speed",e.speed),Object.prototype.hasOwnProperty.call(e,"effect")&&fe("mga_effect",e.effect),Object.prototype.hasOwnProperty.call(e,"easing")&&fe("mga_easing",e.easing),Object.prototype.hasOwnProperty.call(e,"thumbs_layout")&&fe("mga_thumbs_layout",e.thumbs_layout),Object.prototype.hasOwnProperty.call(e,"thumb_size")&&_e("mga_thumb_size",e.thumb_size),Object.prototype.hasOwnProperty.call(e,"thumb_size_mobile")&&_e("mga_thumb_size_mobile",e.thumb_size_mobile),Object.prototype.hasOwnProperty.call(e,"show_thumbs_mobile")&&G("mga_show_thumbs_mobile",e.show_thumbs_mobile),Object.prototype.hasOwnProperty.call(e,"accent_color")&&We(e.accent_color),Object.prototype.hasOwnProperty.call(e,"bg_opacity")&&_e("mga_bg_opacity",e.bg_opacity),Object.prototype.hasOwnProperty.call(e,"background_style")&&fe("mga_background_style",e.background_style),Object.prototype.hasOwnProperty.call(e,"autoplay_start")&&G("mga_autoplay_start",e.autoplay_start),Object.prototype.hasOwnProperty.call(e,"loop")&&G("mga_loop",e.loop),Object.prototype.hasOwnProperty.call(e,"show_zoom")&&G("mga_show_zoom",e.show_zoom),Object.prototype.hasOwnProperty.call(e,"show_download")&&G("mga_show_download",e.show_download),Object.prototype.hasOwnProperty.call(e,"show_share")&&G("mga_show_share",e.show_share),Object.prototype.hasOwnProperty.call(e,"show_cta")&&G("mga_show_cta",e.show_cta),Object.prototype.hasOwnProperty.call(e,"show_fullscreen")&&G("mga_show_fullscreen",e.show_fullscreen))},ie=()=>{if(!we)return;let e=$?$.value:"";if(e&&ne[e]&&ne[e].description){we.textContent=ne[e].description;return}let t=typeof te.customDescription=="string"?te.customDescription:"";we.textContent=t},Qe=()=>{oe||!$||$.value!==""&&($.value="",ie())},Ye=e=>{let t=u.getElementById(e);if(!t)return;let s=["change"];t.tagName==="INPUT"&&["text","number","range"].includes(t.type)&&s.push("input"),s.forEach(m=>{t.addEventListener(m,Qe)})};$&&(ie(),$.addEventListener("change",ie)),Ce&&Ce.addEventListener("click",e=>{if(e.preventDefault(),!$)return;let t=$.value;!t||!ne[t]||(oe=!0,Le(ne[t].settings||{}),oe=!1,ie())}),ke&&ke.addEventListener("click",e=>{e.preventDefault();let t=te.defaults||{};t&&typeof t=="object"&&Object.keys(t).length>0&&(oe=!0,Le(t),oe=!1),$&&($.value=""),ie()}),["mga_delay","mga_speed","mga_effect","mga_easing","mga_thumb_size","mga_thumb_size_mobile","mga_thumbs_layout","mga_accent_color","mga_bg_opacity","mga_background_style","mga_show_thumbs_mobile","mga_autoplay_start","mga_loop","mga_show_zoom","mga_show_download","mga_show_share","mga_show_cta","mga_show_fullscreen"].forEach(Ye);let Pe=u.querySelector("[data-share-repeater]");Pe&&Ge(Pe);let ce=u.querySelector("[data-mga-content-selectors]");if(ce){let e=ce.querySelector("[data-mga-content-selectors-list]"),t=ce.querySelector("[data-mga-content-selectors-textarea]"),s=u.getElementById("mga-content-selector-template"),m=ce.getAttribute("data-mga-selector-placeholder")||"",y=!1,_=()=>{};if(e){let z=()=>e.querySelectorAll("[data-mga-content-selector-row]"),P=()=>e.querySelectorAll("[data-mga-content-selector-input]"),A=()=>Array.from(P()).some(d=>d.value.trim()===""),v=()=>{let d=z(),f=d.length<=1;d.forEach(x=>{let a=x.querySelector("[data-mga-remove-selector]");a&&(a.disabled=f,a.setAttribute("aria-disabled",f?"true":"false"))})},S=()=>Array.from(P()).map(d=>d.value.trim()).filter(d=>d!==""),C=()=>{if(!t||y)return;let d=S();y=!0,t.value=d.join(`
`),y=!1},k=d=>{if(!d||d.getAttribute("data-mga-selector-bound")==="true")return;let f=d.querySelector("[data-mga-remove-selector]");f&&f.addEventListener("click",a=>{if(a.preventDefault(),z().length<=1){let i=d.querySelector("[data-mga-content-selector-input]");i&&(i.value="",C());return}d.remove(),v(),C()});let x=d.querySelector("[data-mga-content-selector-input]");x&&(x.addEventListener("input",()=>{y||C()}),x.addEventListener("keydown",a=>{if(a.key!=="Enter"||a.shiftKey||a.altKey||a.metaKey||a.ctrlKey)return;if(a.preventDefault(),!A()&&typeof _=="function"){_("");return}let c=z();if(c.length===0)return;let i=c[c.length-1];if(!i)return;let n=i.querySelector("[data-mga-content-selector-input]");n&&n!==a.target&&W(n)}),m&&!x.getAttribute("placeholder")&&x.setAttribute("placeholder",m)),d.setAttribute("data-mga-selector-bound","true")},b=(d="")=>{let f=null;if(s&&s.content&&(f=u.importNode(s.content,!0).firstElementChild,f)){let i=f.querySelector("[data-mga-content-selector-input]");return i&&(i.value=d,m&&i.setAttribute("placeholder",m)),k(f),f}f=u.createElement("div"),f.className="mga-content-selectors__row",f.setAttribute("data-mga-content-selector-row","");let x=u.createElement("input");x.type="text",x.className="regular-text",x.setAttribute("data-mga-content-selector-input",""),x.value=d,m&&x.setAttribute("placeholder",m),f.appendChild(x);let a=u.createElement("button");return a.type="button",a.className="button-link mga-content-selectors__remove",a.setAttribute("data-mga-remove-selector",""),a.textContent=l("Retirer","lightbox-jlg"),f.appendChild(a),k(f),f},E=d=>{if(e.innerHTML="",d.length===0){let f=b("");f&&e.appendChild(f)}else d.forEach(f=>{let x=b(f);x&&e.appendChild(x)});v()},I=()=>{if(!t||y)return;let d=t.value.split(/\r\n|\r|\n/).map(f=>f.trim()).filter(f=>f.length>0);y=!0,E(d),y=!1};_=(d="")=>{let f=b(d);if(f){e.appendChild(f),v();let x=f.querySelector("[data-mga-content-selector-input]");x&&W(x)}C()},t?(I(),t.addEventListener("input",()=>{y||I()})):E([]);let j=ce.querySelector("[data-mga-add-selector]");j&&j.addEventListener("click",d=>{d.preventDefault(),_()})}}function Ge(e){let t=e.querySelector("[data-share-repeater-list]"),s=e.querySelector("[data-share-repeater-add]"),m=u.getElementById("mga-share-channel-template");if(!t||!m)return;let y=Date.now(),_=()=>(y+=1,`mga-share-channel-${y}`),z=a=>a?((!a.dataset.shareUid||a.dataset.shareUid.trim()==="")&&(a.dataset.shareUid=_()),a.dataset.shareUid):null,P=a=>{let c=z(a);if(!c)return;a.querySelectorAll("[data-share-id-suffix]").forEach(n=>{let p=n.getAttribute("data-share-id-suffix");if(!p)return;let o=`${c}-${p}`;n.tagName==="LABEL"?n.setAttribute("for",o):n.id=o})},A=a=>{if(!a)return;let c=a.querySelector("[data-share-repeater-title]");if(!c)return;let i=a.querySelector('[data-share-field="label"]'),n=a.querySelector('[data-share-field="key"]'),p=i&&typeof i.value=="string"?i.value.trim():"",o=n&&typeof n.value=="string"?n.value.trim():"",h=o?o.toUpperCase():l("Nouveau canal","lightbox-jlg");c.textContent=p||h},v=a=>{if(!a)return;let c=a.querySelector("[data-share-icon-preview]"),i=a.querySelector('[data-share-field="icon"]');if(!c)return;let n=i?i.value:"",p=B(n);c.innerHTML="",p&&c.appendChild(p);let o=a.querySelector("[data-share-preview-icon]");if(o){o.innerHTML="";let h=B(n);h&&o.appendChild(h)}},S=(a,c)=>!a||!c?null:a.querySelector(`[data-share-field="${c}"]`),C=(a,c)=>{let i=S(a,c);return i&&typeof i.value=="string"?i.value.trim():""},k=a=>{if(typeof a!="string")return"";let c=a;return Object.keys(Z).forEach(i=>{let n=encodeURIComponent(Z[i]);c=c.replace(new RegExp(i,"gi"),n)}),c},b=a=>/%url%/i.test(typeof a=="string"?a:""),E=a=>{if(typeof a!="string")return!1;let c=a.trim();if(c==="")return!1;let i=c.split(":")[0].toLowerCase();return Q.includes(i)?i==="http"||i==="https"?/^https?:\/\//i.test(c):!0:!1},I=(a,c,i)=>{let n=typeof i=="string"&&i!=="";a&&(n?(a.classList.add("mga-field-error"),a.setAttribute("aria-invalid","true")):(a.classList.remove("mga-field-error"),a.removeAttribute("aria-invalid"))),c&&(n?(c.textContent=i,c.removeAttribute("hidden")):(c.textContent="",c.setAttribute("hidden","hidden")))},j=a=>{if(!a)return;let c=a.querySelector("[data-share-preview]");if(!c)return;let i=c.querySelector("[data-share-preview-label]"),n=c.querySelector("[data-share-preview-url]"),p=C(a,"label"),o=C(a,"key"),h=o?o.toUpperCase():l("Nouveau canal","lightbox-jlg");if(i&&(i.textContent=p||h),n){let g=C(a,"template");if(g){let M=k(g);n.textContent=M,n.setAttribute("data-preview-empty","false"),n.title=M}else n.textContent=l("Compl\xE9tez le mod\xE8le pour g\xE9n\xE9rer un lien.","lightbox-jlg"),n.setAttribute("data-preview-empty","true"),n.removeAttribute("title")}K()},d=()=>{let a=Array.from(t.querySelectorAll("[data-share-repeater-item]")),c=a.reduce((i,n)=>{let p=C(n,"key").toLowerCase();return p&&(i[p]=(i[p]||0)+1),i},{});a.forEach(i=>{let n=S(i,"key"),p=S(i,"template"),o=i.querySelector('[data-share-error="key"]'),h=i.querySelector('[data-share-error="template"]'),g=C(i,"key"),M=g.toLowerCase(),q="";g?/^[a-z0-9_-]+$/i.test(g)?c[M]>1&&(q=l("Chaque cl\xE9 doit \xEAtre unique.","lightbox-jlg")):q=l("Utilisez uniquement des lettres, chiffres ou tirets.","lightbox-jlg"):q=l("Renseignez une cl\xE9 pour ce canal.","lightbox-jlg"),I(n,o,q);let T=C(i,"template"),O="";T?b(T)?E(T)||(O=l("Indiquez une URL valide (http, https, mailto, tel ou sms).","lightbox-jlg")):O=l("Ajoutez au moins le jeton %url% pour construire le lien.","lightbox-jlg"):O=l("Renseignez un mod\xE8le d\u2019URL.","lightbox-jlg"),I(p,h,O)})},f=()=>{Array.from(t.querySelectorAll("[data-share-repeater-item]")).forEach((c,i)=>{let n=`mga_settings[share_channels][${i}]`;c.querySelectorAll("[data-share-field]").forEach(o=>{let h=o.getAttribute("data-share-field");if(!h)return;let g=h;h==="enabled-hidden"&&(g="enabled"),o.name=`${n}[${g}]`}),P(c),A(c),v(c),j(c)}),d(),K()},x=a=>{if(!a)return;let c=a.querySelector('[data-share-field="label"]')||a;W(c)};t.addEventListener("input",a=>{let c=a.target;if(!c)return;let i=c.closest("[data-share-repeater-item]");i&&(c.matches('[data-share-field="label"], [data-share-field="key"]')&&A(i),c.matches('[data-share-field="icon"]')&&v(i),j(i),d())}),t.addEventListener("change",a=>{let c=a.target;if(!c||!c.matches('[data-share-field="icon"]'))return;let i=c.closest("[data-share-repeater-item]");i&&(v(i),j(i),d())}),t.addEventListener("click",a=>{let c=a.target.closest("[data-share-action]");if(!c)return;a.preventDefault();let i=c.getAttribute("data-share-action"),n=c.closest("[data-share-repeater-item]");if(n){if(i==="remove"){let p=n.nextElementSibling||n.previousElementSibling;n.parentNode===t&&t.removeChild(n),f(),K(),p&&x(p);return}if(i==="move-up"){let p=n.previousElementSibling;p&&(t.insertBefore(n,p),f(),x(n),K());return}if(i==="move-down"){let p=n.nextElementSibling;p&&(t.insertBefore(p,n),f(),x(n),K())}}}),s&&s.addEventListener("click",a=>{a.preventDefault();let i=u.importNode(m.content,!0).querySelector("[data-share-repeater-item]");i&&(t.appendChild(i),f(),x(i),K())}),f(),K()}})})(typeof window!="undefined"?window:globalThis)});rt();})();
//# sourceMappingURL=admin.js.map
