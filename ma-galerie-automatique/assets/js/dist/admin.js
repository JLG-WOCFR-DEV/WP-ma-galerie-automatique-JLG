(()=>{var be=(t,u)=>()=>(t&&(u=t(t=0)),u);var vt=(t,u)=>()=>(u||t((u={exports:{}}).exports,u),u.exports);var wt,_t,Ve,De,Re,Ue=be(()=>{wt=/%(\d+\$)?[sd]/g,_t=()=>(t,...u)=>{let e=0;return String(t).replace(wt,(m,c)=>{let x,Y=m.charAt(m.length-1);if(c){let Z=parseInt(c.slice(0,-1),10);if(Number.isNaN(Z)||Z<=0)return"";x=Z-1}else x=e,e+=1;let P=x>=0&&x<u.length?u[x]:void 0;if(Y==="d"){let Z=parseInt(P,10);return Number.isNaN(Z)?"":String(Z)}return typeof P=="undefined"?"":String(P)})},Ve=t=>t&&typeof t.sprintf=="function"?t.sprintf:_t(),De=t=>t&&typeof t.__=="function"?t.__:u=>u,Re=t=>!t||typeof t!="object"?null:t.wp&&t.wp.i18n?t.wp.i18n:null});var ke,Le,St,Fe,xt,$e,He=be(()=>{ke={facebook:{viewBox:"0 0 24 24",paths:[{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z"}]},twitter:{viewBox:"0 0 24 24",paths:[{d:"M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z"}]},linkedin:{viewBox:"0 0 24 24",paths:[{d:"M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z"}]},pinterest:{viewBox:"0 0 24 24",paths:[{d:"M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z"}]},whatsapp:{viewBox:"0 0 24 24",paths:[{d:"M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z"}]},telegram:{viewBox:"0 0 24 24",paths:[{d:"M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z"}]},email:{viewBox:"0 0 24 24",paths:[{d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"}]},link:{viewBox:"0 0 24 24",paths:[{d:"M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z"}]},generic:{viewBox:"0 0 24 24",paths:[{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"},{d:"M13 17h-2v-2h2zm0-4h-2V7h2z"}]},copy:{viewBox:"0 0 24 24",paths:[{d:"M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"}]},download:{viewBox:"0 0 24 24",paths:[{d:"M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z"}]},native:{viewBox:"0 0 24 24",paths:[{d:"M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"}]}},Le=t=>typeof t!="string"?"":t.trim().toLowerCase().replace(/[^a-z0-9_-]/g,""),St=t=>{let u=Le(t);return u&&ke[u]?ke[u]:ke.generic},Fe=(t,u,e={})=>{if(!t||typeof t.createElementNS!="function")return null;let m=t.createElementNS("http://www.w3.org/2000/svg",u);return Object.keys(e).forEach(c=>{m.setAttribute(c,e[c])}),m},xt=(t,u)=>{let e=St(u),m=Fe(t,"svg",{viewBox:e.viewBox,fill:"currentColor","aria-hidden":"true",focusable:"false"});return m?(Array.isArray(e.paths)&&e.paths.forEach(c=>{let x=Fe(t,"path",c);x&&m.appendChild(x)}),m):null},$e=(t,u,{wrapperTag:e="span",wrapperClass:m=""}={})=>{if(!t||typeof t.createElement!="function")return null;let c=t.createElement(e);m&&(c.className=m);let x=xt(t,u);return x?(c.appendChild(x),c):null}});var fe,pe,ae,Ke,Ge=be(()=>{fe=null,pe=()=>{if(fe!==null)return fe;fe=!1;let t=typeof window!="undefined"?window.document:null;if(!t||typeof t.createElement!="function"||typeof window.HTMLElement=="undefined"||!window.HTMLElement.prototype||typeof window.HTMLElement.prototype.focus!="function")return fe;let u=t.createElement("button"),e=t.body||t.documentElement;try{u.type="button",e&&typeof e.appendChild=="function"&&e.appendChild(u),window.HTMLElement.prototype.focus.call(u,{get preventScroll(){return fe=!0,!0}})}catch(m){fe=!1}finally{u.parentNode&&typeof u.parentNode.removeChild=="function"&&u.parentNode.removeChild(u)}return fe},ae=(t,u={preventScroll:!0})=>{if(!t||typeof t.focus!="function")return;if(u&&pe())try{t.focus(u);return}catch(m){}t.focus()},Ke=()=>{typeof window!="undefined"&&((!window.mgaFocusUtils||typeof window.mgaFocusUtils!="object")&&(window.mgaFocusUtils={}),window.mgaFocusUtils.detectFocusOptionsSupport=pe,window.mgaFocusUtils.safeFocus=ae)}});var At,We,Et,G,jt,Ct,kt,Lt,Pt,qt,It,Ye,Qe=be(()=>{At=t=>t&&t.performance&&typeof t.performance.now=="function"?t.performance.now():Date.now(),We=t=>t&&t.document||null,Et=t=>t?((!t.mgaSwiperMetrics||typeof t.mgaSwiperMetrics!="object")&&(t.mgaSwiperMetrics={events:[]}),Array.isArray(t.mgaSwiperMetrics.events)||(t.mgaSwiperMetrics.events=[]),t.mgaSwiperMetrics):null,G=(t,u,e,m)=>{let c=Et(t);if(c&&(c.events.push({namespace:u||"default",event:e,detail:m||{},timestamp:At(t)}),typeof t.dispatchEvent=="function"))try{let x=new t.CustomEvent("mga:swiper-metric",{detail:{namespace:u||"default",event:e,payload:m||{}}});t.dispatchEvent(x)}catch(x){}},jt=t=>!t||typeof t!="object"?[]:(Array.isArray(t.attempts)?t.attempts:[]).map(e=>{if(!e||typeof e!="object"||e.enabled===!1)return null;let m=typeof e.key=="string"&&e.key?e.key:"fallback",c=e.js&&typeof e.js=="object"?e.js:{},x=e.css&&typeof e.css=="object"?e.css:null,Y=e.inject!==!1,P=typeof c.src=="string"&&c.src?c.src:"";return P?{key:m,label:typeof e.label=="string"&&e.label?e.label:m,js:{src:P,integrity:typeof c.integrity=="string"&&c.integrity?c.integrity:null,crossOrigin:typeof c.crossOrigin=="string"&&c.crossOrigin?c.crossOrigin:null,referrerPolicy:typeof c.referrerPolicy=="string"&&c.referrerPolicy?c.referrerPolicy:null},css:x&&typeof x.href=="string"&&x.href?{href:x.href,integrity:typeof x.integrity=="string"&&x.integrity?x.integrity:null,crossOrigin:typeof x.crossOrigin=="string"&&x.crossOrigin?x.crossOrigin:null,referrerPolicy:typeof x.referrerPolicy=="string"&&x.referrerPolicy?x.referrerPolicy:null}:null,timeout:typeof e.timeout=="number"&&e.timeout>0?e.timeout:12e3,inject:Y}:null}).filter(Boolean),Ct=(t,u,e)=>{if(!u||!u.css)return Promise.resolve();let m=We(t);if(!m)return Promise.resolve();let c=Array.from(m.querySelectorAll('link[rel="stylesheet"]')).find(x=>x.href===u.css.href);return c?Promise.resolve(c):new Promise((x,Y)=>{let P=m.createElement("link");P.rel="stylesheet",P.href=u.css.href,P.dataset.mgaSwiperSource=u.key,u.css.integrity&&(P.integrity=u.css.integrity),u.css.crossOrigin?P.crossOrigin=u.css.crossOrigin:u.css.integrity&&(P.crossOrigin="anonymous"),u.css.referrerPolicy&&(P.referrerPolicy=u.css.referrerPolicy),P.onload=()=>{G(t,e,"css_load_success",{source:u.key}),x(P)},P.onerror=()=>{G(t,e,"css_load_error",{source:u.key}),Y(new Error("Stylesheet load error"))},m.head.appendChild(P),G(t,e,"css_load_start",{source:u.key,href:u.css.href})})},kt=(t,u,e)=>{if(!u||!u.js||!u.js.src)return Promise.reject(new Error("Invalid attempt configuration"));let m=We(t);if(!m)return Promise.reject(new Error("Document unavailable"));let c=Array.from(m.querySelectorAll("script")).find(x=>x.src===u.js.src&&!x.hasAttribute("data-mga-swiper-failed"));return c?new Promise((x,Y)=>{if(typeof t.Swiper=="function"){c.setAttribute("data-mga-swiper-loaded","true"),G(t,e,"js_already_available",{source:u.key}),x(c);return}if(typeof c.hasAttribute=="function"&&c.hasAttribute("data-mga-swiper-loaded")){x(c);return}c.addEventListener("load",()=>{c.setAttribute("data-mga-swiper-loaded","true"),x(c)}),c.addEventListener("error",()=>{c.setAttribute("data-mga-swiper-failed","true"),Y(new Error("Existing script failed"))}),G(t,e,"js_existing_observed",{source:u.key})}):new Promise((x,Y)=>{let P=m.createElement("script");P.src=u.js.src,P.async=!1,P.dataset.mgaSwiperSource=u.key,u.js.integrity&&(P.integrity=u.js.integrity),u.js.crossOrigin?P.crossOrigin=u.js.crossOrigin:u.js.integrity&&(P.crossOrigin="anonymous"),u.js.referrerPolicy&&(P.referrerPolicy=u.js.referrerPolicy);let Z=null,te=()=>{Z&&(t.clearTimeout(Z),Z=null)};P.onload=()=>{te(),P.setAttribute("data-mga-swiper-loaded","true"),G(t,e,"js_load_success",{source:u.key}),x(P)},P.onerror=()=>{te(),P.setAttribute("data-mga-swiper-failed","true"),G(t,e,"js_load_error",{source:u.key}),Y(new Error("Script load error"))},Z=t.setTimeout(()=>{te(),P.setAttribute("data-mga-swiper-failed","true"),G(t,e,"js_load_timeout",{source:u.key,timeout:u.timeout}),Y(new Error("Script load timeout"))},u.timeout||12e3),m.head.appendChild(P),G(t,e,"js_load_start",{source:u.key,src:u.js.src})})},Lt=t=>t?((!t.mgaSwiperLoaderState||typeof t.mgaSwiperLoaderState!="object")&&(t.mgaSwiperLoaderState={promise:null}),t.mgaSwiperLoaderState):{promise:null},Pt=(t,u,e)=>!u||!u.inject?Promise.resolve():typeof t.Swiper=="function"?Promise.resolve(t.Swiper):(G(t,e,"attempt_start",{source:u.key}),Ct(t,u,e).catch(()=>null).then(()=>kt(t,u,e)).then(()=>{if(typeof t.Swiper=="function")return G(t,e,"attempt_success",{source:u.key}),t.Swiper;throw G(t,e,"attempt_no_global",{source:u.key}),new Error("Swiper global missing after load")}).catch(m=>{throw G(t,e,"attempt_error",{source:u.key,message:m&&m.message?m.message:String(m)}),m})),qt=(t,u,e)=>u.reduce((m,c)=>m.catch(()=>Pt(t,c,e)),Promise.reject(new Error("initial"))),It=(t,u)=>u&&typeof u=="object"?u:t&&t.mgaSwiperLoaderConfig&&typeof t.mgaSwiperLoaderConfig=="object"?t.mgaSwiperLoaderConfig:t&&t.mgaAdminConfig&&typeof t.mgaAdminConfig=="object"&&t.mgaAdminConfig.swiper?t.mgaAdminConfig.swiper:null,Ye=(t=window,u={})=>{let e=typeof u.namespace=="string"&&u.namespace?u.namespace:"default";if(!t)return Promise.reject(new Error("Global scope unavailable"));if(typeof t.Swiper=="function")return G(t,e,"already_available",{}),Promise.resolve(t.Swiper);let m=It(t,u.config),c=jt(m);if(!c.length)return G(t,e,"no_attempts_configured",{}),Promise.reject(new Error("No Swiper attempts configured"));let x=Lt(t);return x.promise||(G(t,e,"bootstrap",{version:m&&m.version?m.version:null,attempts:c.map(Y=>Y.key)}),x.promise=qt(t,c,e).catch(()=>{if(typeof t.Swiper=="function")return t.Swiper;throw G(t,e,"fatal",{}),new Error("Swiper could not be loaded")}).then(()=>{if(typeof t.Swiper=="function")return G(t,e,"ready",{}),t.Swiper;throw G(t,e,"fatal",{}),new Error("Swiper global unavailable")}).finally(()=>{x.promise=null})),x.promise}});var Ze=be(()=>{Ue();He();Ge();Qe()});var Mt=vt((Yt,Se)=>{Ze();(function(t){Ke();let u=Re(t),e=De(u),m=Ve(u);typeof Se!="undefined"&&Se.exports&&(Se.exports={detectFocusOptionsSupport:pe,safeFocus:ae});let c=t.document,x=de=>{let Q=$e(c,Le(de));return Q?Q.querySelector("svg")||Q:null},Y={url:"https://exemple.com/galerie/photo-01",text:"Une photo remarquable",title:"Collection studio"},P={"%url%":Y.url,"%text%":Y.text,"%title%":Y.title},Z=["http","https","mailto","tel","sms"],te=de=>typeof de!="string"?!1:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(de.trim());!c||typeof c.addEventListener!="function"||c.addEventListener("DOMContentLoaded",function(){var ze;let de=c.querySelector("[data-mga-settings-form]")||c.querySelector(".mga-admin-wrap form"),Q=()=>{},xe={slide:e("glissement","lightbox-jlg"),fade:e("fondu","lightbox-jlg"),cube:e("cube 3D","lightbox-jlg"),coverflow:e("coverflow 3D","lightbox-jlg"),flip:e("flip 3D","lightbox-jlg")},Je={bottom:e("Barre inf\xE9rieure","lightbox-jlg"),left:e("Colonne lat\xE9rale","lightbox-jlg"),hidden:e("Miniatures masqu\xE9es","lightbox-jlg")},Xe={echo:e("Flou d\u2019\xE9cho d\u2019image","lightbox-jlg"),texture:e("Texture verre d\xE9poli","lightbox-jlg"),blur:e("Flou en temps r\xE9el","lightbox-jlg")},et={"ease-out":e("D\xE9c\xE9l\xE9ration (par d\xE9faut)","lightbox-jlg"),"ease-in-out":e("Douce (aller-retour)","lightbox-jlg"),"ease-in":e("Acc\xE9l\xE9ration progressive","lightbox-jlg"),ease:e("Standard CSS","lightbox-jlg"),linear:e("Lin\xE9aire","lightbox-jlg")},tt={true:e("Activ\xE9","lightbox-jlg"),false:e("D\xE9sactiv\xE9","lightbox-jlg")},ie=r=>tt[r?"true":"false"],rt="#ffffff",nt="#0f172a",ot=r=>{if(!te(r))return null;let o=r.trim().replace("#","");o.length===3&&(o=o.split("").map(g=>g+g).join(""));let d=parseInt(o,16);return[d>>16&255,d>>8&255,d&255]},at=r=>{let o=r/255;return o<=.03928?o/12.92:Math.pow((o+.055)/1.055,2.4)},Pe=r=>{let o=ot(r);if(!o)return null;let[d,g,y]=o.map(v=>at(v));return .2126*d+.7152*g+.0722*y},it=(r,o)=>{let d=Pe(r),g=Pe(o);if(d===null||g===null)return null;let y=Math.max(d,g),v=Math.min(d,g);return(y+.05)/(v+.05)},st=r=>typeof r!="number"||Number.isNaN(r)?{grade:"\u2014",severity:"warning",target:"4,5"}:r>=7?{grade:"AAA",severity:"success",target:"7,0"}:r>=4.5?{grade:"AA",severity:"success",target:"4,5"}:r>=3?{grade:e("AA (gros texte)","lightbox-jlg"),severity:"warning",target:"4,5"}:{grade:e("Insuffisant","lightbox-jlg"),severity:"error",target:"3,0"},qe=r=>typeof r!="number"||Number.isNaN(r)?"\u2014":r.toFixed(2).replace(".",","),lt=()=>{let r=c.querySelector("[data-mga-contrast-inspector]"),o=c.getElementById("mga_accent_color");if(!r||!o)return{update:()=>null,readAudit:()=>null};let d=r.querySelector("[data-mga-contrast-message]"),g={light:r.querySelector('[data-mga-contrast-value="light"]'),dark:r.querySelector('[data-mga-contrast-value="dark"]')},y={light:r.querySelector('[data-mga-contrast-swatch="light"]'),dark:r.querySelector('[data-mga-contrast-swatch="dark"]')},v=null,B=_=>{let E=te(_)?_.toLowerCase():null;if(!E)return r.setAttribute("hidden","hidden"),v=null,null;r.removeAttribute("hidden");let C=[{key:"light",label:e("Fond clair","lightbox-jlg"),background:rt},{key:"dark",label:e("Fond sombre","lightbox-jlg"),background:nt}].map(O=>{let D=it(E,O.background),F=st(D),b=qe(D);return g[O.key]&&(g[O.key].textContent=`${b} (${F.grade})`),y[O.key]&&(y[O.key].style.setProperty("--mga-contrast-background",O.background),y[O.key].style.setProperty("--mga-contrast-foreground",E)),{key:O.key,label:O.label,background:O.background,ratio:D,ratioText:b,severity:F.severity,grade:F.grade,target:F.target}}),T={success:0,warning:1,error:2},V=C.reduce((O,D)=>O?T[D.severity]>T[O.severity]?D:O:D,null);return r.setAttribute("data-mga-severity",V?V.severity:"success"),d&&(d.textContent=C.map(O=>m(e("%1$s\xA0: %2$s (%3$s)","lightbox-jlg"),O.label,O.ratioText,O.grade)).join(" \xB7 ")),v={color:E,entries:C},v},z=()=>v,q=_=>{let E=_&&_.target?_.target.value:o.value;B(E)};return o.addEventListener("input",q),o.addEventListener("change",q),q(),{update:B,readAudit:z}},ct=(r={})=>{let o={playback:"mga-section-playback",thumbnails:"mga-section-thumbnails",appearance:"mga-section-appearance",toolbar:"mga-section-toolbar"},d={delay:{id:"mga_delay",type:"int",section:o.playback,label:e("Vitesse du diaporama","lightbox-jlg"),format:n=>`${n}\xA0s`},speed:{id:"mga_speed",type:"int",section:o.playback,label:e("Vitesse de transition","lightbox-jlg"),format:n=>`${n}\xA0ms`},effect:{id:"mga_effect",type:"select",section:o.playback,label:e("Effet de transition","lightbox-jlg"),format:n=>xe[n]||e("personnalis\xE9e","lightbox-jlg")},easing:{id:"mga_easing",type:"select",section:o.playback,label:e("Courbe d\u2019animation","lightbox-jlg"),format:n=>et[n]||n},thumb_size:{id:"mga_thumb_size",type:"int",section:o.thumbnails,label:e("Miniatures (bureau)","lightbox-jlg"),format:n=>m(e("%spx","lightbox-jlg"),n)},thumb_size_mobile:{id:"mga_thumb_size_mobile",type:"int",section:o.thumbnails,label:e("Miniatures (mobile)","lightbox-jlg"),format:n=>m(e("%spx","lightbox-jlg"),n)},thumbs_layout:{id:"mga_thumbs_layout",type:"select",section:o.thumbnails,label:e("Disposition des miniatures","lightbox-jlg"),format:n=>Je[n]||n},accent_color:{id:"mga_accent_color",type:"color",section:o.appearance,label:e("Couleur d\u2019accentuation","lightbox-jlg"),format:n=>n?n.toUpperCase():"\u2014"},bg_opacity:{id:"mga_bg_opacity",type:"float",section:o.appearance,label:e("Opacit\xE9 de l\u2019arri\xE8re-plan","lightbox-jlg"),format:n=>qe(n)},background_style:{id:"mga_background_style",type:"select",section:o.appearance,label:e("Effet d\u2019arri\xE8re-plan","lightbox-jlg"),format:n=>Xe[n]||n},show_thumbs_mobile:{id:"mga_show_thumbs_mobile",type:"boolean",section:o.thumbnails,label:e("Miniatures sur mobile","lightbox-jlg"),format:ie},autoplay_start:{id:"mga_autoplay_start",type:"boolean",section:o.playback,label:e("Lecture auto. au chargement","lightbox-jlg"),format:ie},loop:{id:"mga_loop",type:"boolean",section:o.playback,label:e("Lecture en boucle","lightbox-jlg"),format:ie},show_zoom:{id:"mga_show_zoom",type:"boolean",section:o.toolbar,label:e("Bouton Zoom","lightbox-jlg"),format:ie},show_download:{id:"mga_show_download",type:"boolean",section:o.toolbar,label:e("Bouton T\xE9l\xE9chargement","lightbox-jlg"),format:ie},show_share:{id:"mga_show_share",type:"boolean",section:o.toolbar,label:e("Bouton Partage","lightbox-jlg"),format:ie},show_cta:{id:"mga_show_cta",type:"boolean",section:o.toolbar,label:e("Bouton Appel \xE0 l\u2019action","lightbox-jlg"),format:ie},show_fullscreen:{id:"mga_show_fullscreen",type:"boolean",section:o.toolbar,label:e("Bouton Plein \xE9cran","lightbox-jlg"),format:ie}},g=(n,a)=>{let i=d[n];if(!i)return null;switch(i.type){case"boolean":return!!a;case"int":{let l=typeof a=="number"?a:parseFloat(a);return Number.isNaN(l)?null:Math.round(l)}case"float":{let l=typeof a=="number"?a:parseFloat(a);return Number.isNaN(l)?null:Math.round(l*100)/100}case"color":{let l=typeof a=="string"?a:"";return te(l)?l.toLowerCase():null}case"select":return typeof a=="string"?a:"";default:return a}},y=n=>{let a={};return!n||typeof n!="object"||Object.keys(d).forEach(i=>{Object.prototype.hasOwnProperty.call(n,i)&&(a[i]=g(i,n[i]))}),a},v=y(r),B=Array.from(new Set(Object.values(d).map(n=>n.section))),z={...v},q=e("Valeurs par d\xE9faut","lightbox-jlg"),_="",E=null,C=[],T=n=>{let a=d[n];if(!a)return null;let i=c.getElementById(a.id);if(!i)return null;switch(a.type){case"boolean":return i.type==="checkbox"?i.checked:i.value==="1";case"int":case"float":{let l=parseFloat(i.value);return Number.isNaN(l)?null:a.type==="int"?Math.round(l):Math.round(l*100)/100}case"color":return typeof i.value=="string"?i.value.toLowerCase():null;default:return i.value}},V=(n,a,i)=>a===i?!0:a===null&&i!==null||a!==null&&i===null?!1:a===null&&i===null?!0:(n.type==="int"||n.type==="float")&&typeof a=="number"&&typeof i=="number"?Math.abs(a-i)<.01:!1,O=(n,a)=>{let i=d[n];return i?a===null||typeof a=="undefined"?"\u2014":typeof i.format=="function"?i.format(a):a.toString():""},D=()=>{let n=[];return Object.keys(d).forEach(a=>{let i=d[a],l=T(a),h=Object.prototype.hasOwnProperty.call(z,a)?z[a]:v[a];V(i,l,h)||n.push({key:a,label:i.label,section:i.section,currentLabel:O(a,l),baselineLabel:O(a,h)})}),n},F=n=>{let a=new Map;n.forEach(i=>{a.has(i.section)||a.set(i.section,!0)}),B.forEach(i=>{let l=i?c.getElementById(i):null,h=a.get(i)===!0;l&&(h?l.setAttribute("data-mga-modified","true"):l.removeAttribute("data-mga-modified")),E&&typeof E.setSectionModified=="function"&&l&&E.setSectionModified(l,h)})},b=()=>(C=D(),F(C),C),w=({key:n="",label:a="",settings:i={}})=>{z={...v,...y(i)},q=a&&a.trim()!==""?a:e("Valeurs par d\xE9faut","lightbox-jlg"),_=n||"",b()},j=n=>{E=n,F(C)};return w({settings:r,label:e("Valeurs par d\xE9faut","lightbox-jlg"),key:""}),{setBaseline:w,refresh:b,getDiff:()=>C.slice(),getBaselineInfo:()=>({key:_,label:q}),setNavigationApi:j,getDefaultLabel:()=>e("Valeurs par d\xE9faut","lightbox-jlg")}},se=null,U=null,ve=(r=>{let o=c.querySelector("[data-mga-wizard]");if(!o)return null;let d=Array.from(o.querySelectorAll("[data-mga-step-panel]")),g=Array.from(o.querySelectorAll("[data-mga-step-indicator]")),y=o.querySelector("[data-mga-step-prev]"),v=o.querySelector("[data-mga-step-next]"),B=o.querySelector("[data-mga-step-submit]"),z=o.querySelector("[data-mga-save-status]"),q=d.length-1,_=d.findIndex(l=>l.classList.contains("is-active"));_<0&&(_=0);let E=()=>t.mgaAdminConfig&&t.mgaAdminConfig.messages||{},C=(l,h)=>{if(!z)return;let k=h||E()[l]||"";z.textContent=k,z.setAttribute("data-mga-status-state",l)},T=()=>{y&&(y.disabled=_===0),v&&(v.hidden=_>=q),B&&(B.hidden=_<q)},V=l=>{if(!l)return;let h=l.querySelector("[data-mga-step-title]")||l,k=pe()?{preventScroll:!0}:void 0;t.requestAnimationFrame(()=>{ae(h,k)})},O=l=>{l.classList.remove("is-active"),l.setAttribute("hidden","hidden"),l.setAttribute("aria-hidden","true")},D=l=>{l.classList.add("is-active"),l.removeAttribute("hidden"),l.setAttribute("aria-hidden","false")},F=()=>{g.forEach((l,h)=>{l.classList.toggle("is-active",h===_),l.classList.toggle("is-completed",h<_),l.setAttribute("aria-current",h===_?"step":"false")})},b=(()=>{let l=null,h=o.querySelector("[data-mga-summary-preset]"),k=o.querySelector("[data-mga-summary-timing]"),I=o.querySelector("[data-mga-summary-toolbar]"),s=o.querySelector("[data-mga-summary-share]"),p=o.querySelector("[data-mga-summary-validations]"),f=o.querySelector("[data-mga-summary-diff]"),S=f?f.querySelector("[data-mga-summary-diff-list]"):null,A=f?f.querySelector("[data-mga-summary-diff-baseline]"):null,M=f?f.querySelector("[data-mga-summary-diff-empty]"):null,$=()=>{if(!I)return;let L=[{id:"mga_show_zoom",label:e("Zoom","lightbox-jlg")},{id:"mga_show_download",label:e("T\xE9l\xE9chargement","lightbox-jlg")},{id:"mga_show_share",label:e("Partage","lightbox-jlg")},{id:"mga_show_cta",label:e("Appel \xE0 l\u2019action","lightbox-jlg")},{id:"mga_show_fullscreen",label:e("Plein \xE9cran","lightbox-jlg")}].filter(N=>{let H=c.getElementById(N.id);return H?H.checked:!1});I.textContent=L.length>0?L.map(N=>N.label).join(", "):e("Aucun bouton affich\xE9","lightbox-jlg")},re=(R,L)=>{if(!h)return;let N=c.getElementById("mga_style_preset"),H=N?N.value:"",K="";if(N&&H){let ee=Array.from(N.options).find(ue=>ue.value===H);ee&&(K=ee.textContent||"")}K||(R.length>0&&L&&L.label?K=m(e("Personnalis\xE9 \xE0 partir de %1$s","lightbox-jlg"),L.label):R.length>0?K=e("R\xE9glages personnalis\xE9s","lightbox-jlg"):L&&L.label?K=L.label:t.mgaStylePresets&&typeof t.mgaStylePresets.customDescription=="string"?K=t.mgaStylePresets.customDescription:K=e("R\xE9glages personnalis\xE9s","lightbox-jlg")),h.textContent=K},X=()=>{if(!k)return;let R=c.getElementById("mga_delay"),L=c.getElementById("mga_effect"),N=R&&R.value?R.value:"\u2014",H=e("Transition personnalis\xE9e","lightbox-jlg");if(L){let K=Array.from(L.options).find(ee=>ee.selected);H=K?K.textContent:H}k.textContent=m(e("Diaporama : %1$s\xA0s \xB7 Effet : %2$s","lightbox-jlg"),N,H)},oe=()=>{if(!s)return;let L=Array.from(c.querySelectorAll("[data-share-repeater-item]")).filter(N=>{let H=N.querySelector('[data-share-field="enabled"]');return H?H.checked:!1}).map(N=>{let H=N.querySelector('[data-share-field="label"]'),K=N.querySelector('[data-share-field="key"]'),ee=H&&H.value?H.value.trim():"",ue=K&&K.value?K.value.trim():"";return ee||(ue?ue.toUpperCase():e("Canal sans titre","lightbox-jlg"))});L.length>0?s.textContent=m(e("%1$d canaux actifs : %2$s","lightbox-jlg"),L.length,L.join(", ")):s.textContent=e("Aucun canal actif","lightbox-jlg")},gt=()=>{if(!se||typeof se.readAudit!="function")return[];let R=se.readAudit();return!R||!Array.isArray(R.entries)?[]:R.entries.filter(L=>L&&(L.severity==="warning"||L.severity==="error")).map(L=>{let N=L.severity==="error"?m(e("Contraste %1$s insuffisant\xA0: %2$s. Ajustez la couleur ou le fond pour atteindre au moins 3,0 (AA\xA0\u2265\xA04,5).","lightbox-jlg"),L.label,L.ratioText):m(e("Contraste %1$s limit\xE9\xA0: %2$s. Augmentez l\xE9g\xE8rement pour viser AA (\u2265\xA04,5).","lightbox-jlg"),L.label,L.ratioText);return{severity:L.severity,message:N}})},ht=R=>{if(p){if(p.innerHTML="",!R||R.length===0){p.setAttribute("hidden","hidden");return}p.removeAttribute("hidden"),R.forEach(L=>{let N=c.createElement("div");N.className="mga-summary__alert",N.setAttribute("data-mga-severity",L.severity),N.textContent=L.message,p.appendChild(N)})}},yt=(R,L)=>{if(!(!f||!S)){if(S.innerHTML="",!R||R.length===0){f.setAttribute("hidden","hidden"),A&&(A.textContent=""),M&&M.setAttribute("hidden","hidden");return}f.removeAttribute("hidden"),A&&(A.textContent=L&&L.label?m(e("Base\xA0: %1$s","lightbox-jlg"),L.label):""),M&&M.setAttribute("hidden","hidden"),R.forEach(N=>{let H=c.createElement("li");H.className="mga-summary__diff-item";let K=c.createElement("span");K.className="mga-summary__diff-label",K.textContent=N.label,H.appendChild(K);let ee=c.createElement("span");ee.className="mga-summary__diff-values";let ue=c.createElement("span");ue.className="mga-summary__diff-before",ue.textContent=N.baselineLabel,ee.appendChild(ue);let Ne=c.createElement("span");Ne.textContent="\u2192",ee.appendChild(Ne);let Ce=c.createElement("span");Ce.className="mga-summary__diff-after",Ce.textContent=N.currentLabel,ee.appendChild(Ce),H.appendChild(ee),S.appendChild(H)})}},bt=()=>{let R=U?U.refresh():[],L=U?U.getBaselineInfo():{label:"",key:""};re(R,L),X(),$(),oe(),yt(R,L),ht(gt())};return()=>{l&&t.clearTimeout(l),l=t.setTimeout(()=>{l=null,bt()},120)}})(),w=l=>{let h=Math.max(0,Math.min(d.length-1,l));if(h===_)return;let k=d[_],I=d[h];k&&O(k),I&&(D(I),V(I)),_=h,F(),T(),_===q&&b()},j=()=>{r&&typeof r.reportValidity=="function"&&!r.reportValidity()||w(_+1)},n=()=>{w(_-1)},a=()=>{g.forEach((l,h)=>{l.addEventListener("click",k=>{if(k.preventDefault(),h<_&&h>=0)w(h);else if(h>_&&h<=q){if(r&&typeof r.reportValidity=="function"&&!r.reportValidity())return;w(h)}})})};y&&y.addEventListener("click",l=>{l.preventDefault(),n()}),v&&v.addEventListener("click",l=>{l.preventDefault(),j()}),a(),F(),T(),_===q&&b();let i=()=>{b()};return r&&(r.addEventListener("change",i),r.addEventListener("input",i)),{scheduleSummaryUpdate:b,setStatusMessage:C,goToSummary:()=>w(q)}})(de);ve&&typeof ve.scheduleSummaryUpdate=="function"&&(Q=ve.scheduleSummaryUpdate),((r,o)=>{if(!r)return;let d=t.mgaAdminConfig||{},g=typeof d.ajaxUrl=="string"&&d.ajaxUrl?d.ajaxUrl:t.ajaxurl,y=typeof d.nonce=="string"?d.nonce:"",v=r.querySelector("[data-mga-step-submit]");if(!g||!y)return;let B=(q,_)=>{o&&typeof o.setStatusMessage=="function"&&o.setStatusMessage(q,_)},z=q=>{v&&(v.disabled=q,v.setAttribute("aria-busy",q?"true":"false")),q&&B("saving")};r.addEventListener("submit",q=>{if(q.preventDefault(),typeof r.reportValidity=="function"&&!r.reportValidity())return;let _=new FormData(r);_.append("action","mga_save_settings"),_.append("_ajax_nonce",y),z(!0),fetch(g,{method:"POST",credentials:"same-origin",body:_}).then(E=>{if(!E.ok)throw new Error(E.statusText||"HTTP error");return E.json()}).then(E=>{if(!E||E.success!==!0){let T=E&&E.data&&E.data.message?E.data.message:null;throw new Error(T||d.messages&&d.messages.error||e("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg"))}let C=E.data&&E.data.message?E.data.message:d.messages&&d.messages.success||e("R\xE9glages enregistr\xE9s.","lightbox-jlg");B("success",C),Q()}).catch(E=>{let C=d.messages&&d.messages.error?d.messages.error:e("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg");B("error",E&&E.message?E.message:C)}).finally(()=>{z(!1)})})})(de,ve);let ut=(()=>{let r={setSectionModified:()=>{}},o=c.querySelector("[data-mga-settings-layout]");if(!o)return r;let d=Array.from(o.querySelectorAll("[data-mga-settings-section]"));if(d.length===0)return r;let g=o.querySelector("[data-mga-settings-nav]"),y=g?Array.from(g.querySelectorAll("[data-mga-section-link]")):[],v=new Map,B=new Map,z=new Map,q=o.querySelector("[data-mga-view-toggle]"),_=q?q.querySelector("[data-mga-view-select]"):null,E="mga-settings-view-mode",T=(()=>{if(typeof t.localStorage=="undefined")return"essential";try{return t.localStorage.getItem(E)==="advanced"?"advanced":"essential"}catch(s){return"essential"}})(),V=()=>{_&&(_.value=T)},O=()=>{if(typeof t.localStorage!="undefined")try{t.localStorage.setItem(E,T)}catch(s){}},D=()=>{o.setAttribute("data-mga-view-mode",T)},F=s=>s&&s.getAttribute("data-mga-visibility")==="essential"?"essential":"advanced",b=o.querySelector("[data-mga-settings-search]"),w=o.querySelector("[data-mga-search-empty]"),j=new WeakMap,n=()=>o.getAttribute("data-mga-search-active")==="true",a=(s,p)=>{w&&(p&&s===0?w.removeAttribute("hidden"):w.setAttribute("hidden","hidden"))},i=s=>{s&&v.forEach((p,f)=>{f===s?p.setAttribute("aria-current","true"):p.removeAttribute("aria-current")})},l=()=>{d.forEach(s=>{s.removeAttribute("data-mga-section-highlight"),j.has(s)&&(t.clearTimeout(j.get(s)),j.delete(s))})},h=s=>{if(!s)return;s.setAttribute("data-mga-section-highlight","true"),j.has(s)&&t.clearTimeout(j.get(s));let p=t.setTimeout(()=>{s.removeAttribute("data-mga-section-highlight"),j.delete(s)},1600);j.set(s,p)},k=s=>{let p=typeof s=="string"?s.trim().toLowerCase():"",f=p.length>0,S=0;if(f?o.setAttribute("data-mga-search-active","true"):(o.removeAttribute("data-mga-search-active"),l()),d.forEach(A=>{let M=v.get(A),$=B.get(A);if(!f){if(T==="essential"&&F(A)==="advanced"){A.setAttribute("hidden","hidden"),M&&(M.setAttribute("hidden","hidden"),M.removeAttribute("aria-current")),$&&$.setAttribute("hidden","hidden");return}A.removeAttribute("hidden"),M&&M.removeAttribute("hidden"),$&&$.removeAttribute("hidden");return}(A.textContent||"").toLowerCase().includes(p)?(A.removeAttribute("hidden"),A.setAttribute("data-mga-section-highlight","true"),S+=1,M&&M.removeAttribute("hidden"),$&&$.removeAttribute("hidden")):(A.setAttribute("hidden","hidden"),A.removeAttribute("data-mga-section-highlight"),M&&(M.setAttribute("hidden","hidden"),M.removeAttribute("aria-current")),$&&$.setAttribute("hidden","hidden"))}),f){let A=d.find(M=>!M.hasAttribute("hidden"));A&&i(A)}a(S,f)},I=(s,p={})=>{let f=s==="advanced"?"advanced":"essential";if(f===T&&!p.force)return;T=f,V(),D(),p.persist!==!1&&O();let S=b&&b.value||"";k(S)};if(y.forEach(s=>{let p=s.getAttribute("href");if(!p||p.charAt(0)!=="#")return;let f=o.querySelector(p);if(!f)return;v.set(f,s);let S=s.closest("[data-mga-visibility]");if(S){B.set(f,S);let A=S.querySelector("[data-mga-modified-badge]");A||(A=c.createElement("span"),A.className="mga-settings-layout__badge",A.textContent=e("Modifi\xE9","lightbox-jlg"),A.hidden=!0,A.setAttribute("data-mga-modified-badge","true"),S.appendChild(A)),z.set(f,A)}s.addEventListener("click",A=>{A.preventDefault(),f.hasAttribute("hidden")&&f.removeAttribute("hidden");try{f.scrollIntoView({behavior:"smooth",block:"start"})}catch($){typeof f.scrollIntoView=="function"&&f.scrollIntoView()}i(f),h(f);let M=pe()?{preventScroll:!0}:void 0;typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame(()=>{ae(f,M)}):ae(f,M)})}),V(),D(),_&&_.addEventListener("change",s=>{I(s.target.value||"essential")}),"IntersectionObserver"in t){let s=null,p=new IntersectionObserver(f=>{n()||(f.forEach(S=>{S.isIntersecting&&(s=S.target)}),s&&i(s))},{rootMargin:"-40% 0px -40% 0px",threshold:.1});d.forEach(f=>p.observe(f))}else{let s=()=>{if(n())return;let p=null,f=1/0,S=t.pageYOffset||c.documentElement.scrollTop||0;d.forEach(A=>{let $=A.getBoundingClientRect().top+S,re=Math.abs($-S-140);re<f&&(p=A,f=re)}),p&&i(p)};t.addEventListener("scroll",s,{passive:!0}),s()}return b?(b.addEventListener("input",s=>{k(s.target.value||"")}),k(b.value||"")):a(d.length,!1),I(T,{force:!0,persist:!1}),n()||i(d[0]),{setSectionModified(s,p){if(!s)return;let f=z.get(s),S=B.get(s);f&&(f.hidden=!p),S&&(p?S.setAttribute("data-mga-modified","true"):S.removeAttribute("data-mga-modified"))}}})(),Ae=(r,o,d,g)=>{let y=c.getElementById(r),v=c.getElementById(o);if(!y||!v)return;let B=()=>{let z=y.value,q=typeof d=="function"?d(z):z,_=typeof g=="function"?g(z):q;typeof v.value!="undefined"&&(v.value=q),v.textContent=q,y.setAttribute("aria-valuenow",z),y.setAttribute("aria-valuetext",_)};y.addEventListener("input",B),B()};Ae("mga_thumb_size","mga_thumb_size_value",r=>m(e("%spx","lightbox-jlg"),r),r=>m(e("%s pixels","lightbox-jlg"),r)),Ae("mga_thumb_size_mobile","mga_thumb_size_mobile_value",r=>m(e("%spx","lightbox-jlg"),r),r=>m(e("%s pixels","lightbox-jlg"),r)),Ae("mga_bg_opacity","mga_bg_opacity_value",r=>r,r=>m(e("%s opacity","lightbox-jlg"),r));let J=c.getElementById("mga_accent_color"),Ie=c.getElementById("mga_accent_color_preview");if(J){let r=J.getAttribute("data-default-color"),o=te(r)?r:"#ffffff",d=y=>{let v=te(y)?y:o;return Ie&&(Ie.style.backgroundColor=v),v};d(J.value);let g=t.jQuery;g&&typeof g.fn=="object"&&typeof g.fn.wpColorPicker=="function"?(g(J).wpColorPicker({change(y,v){let B=v&&v.color?v.color.toString():y.target.value;d(B)},clear(){let y=J.getAttribute("data-default-color")||o;g(J).val(y),d(y)}}),g(J).on("input",y=>{d(y.target.value)})):J.addEventListener("input",()=>{d(J.value)})}se=lt(),(()=>{let r=c.querySelector("[data-mga-live-preview]");if(!r)return;let o=r.querySelector("[data-mga-live-preview-mock]"),d=r.querySelector("[data-mga-preview-effect]"),g=r.querySelector("[data-mga-preview-thumbs]"),y=r.querySelector("[data-mga-preview-status]"),v=r.querySelector("[data-mga-preview-fallback]"),B=r.querySelector("[data-mga-preview-swiper]"),z=r.querySelector("[data-mga-preview-pagination]"),q=r.querySelector("[data-mga-preview-next]"),_=r.querySelector("[data-mga-preview-prev]"),E={zoom:Array.from(r.querySelectorAll('[data-preview-action="zoom"]')),download:Array.from(r.querySelectorAll('[data-preview-action="download"]')),share:Array.from(r.querySelectorAll('[data-preview-action="share"]')),cta:Array.from(r.querySelectorAll('[data-preview-action="cta"]')),fullscreen:Array.from(r.querySelectorAll('[data-preview-action="fullscreen"]'))},C=null,T=s=>!s||typeof s!="object"||s.type==="init"?!1:s.type!=="input",V=s=>{!y||typeof s!="string"||s.trim()===""||(y.textContent=s)},O=s=>{r&&r.setAttribute("data-mga-preview-state",s)},D=s=>{O("error"),v&&(v.hidden=!1,typeof s=="string"&&s.trim()!==""&&(v.textContent=s)),s&&V(s)},F=()=>{C&&typeof C.destroy=="function"&&C.destroy(!0,!0),C=null},b=(s,p)=>{let f=typeof s=="number"?s:parseFloat(s);return Number.isNaN(f)?p:f},w=()=>{let s=c.getElementById("mga_effect"),p=c.getElementById("mga_delay"),f=c.getElementById("mga_speed"),S=s?s.value:"slide",A=b(p?p.value:null,4),M=b(f?f.value:null,600),$=Math.max(Math.round(A*1e3),1e3),re=Math.max(Math.round(M),100),X={allowTouchMove:!1,simulateTouch:!1,centeredSlides:!0,effect:S||"slide",loop:!0,slidesPerView:1,speed:re};return z&&(X.pagination={el:z,clickable:!1}),q&&_&&(X.navigation={nextEl:q,prevEl:_}),!Number.isNaN($)&&$>0&&(X.autoplay={delay:$,disableOnInteraction:!1}),X.effect==="fade"&&(X.fadeEffect={crossFade:!0}),X.on={init(oe){oe&&typeof oe.slideToLoop=="function"&&oe.slideToLoop(0,0,!1)}},X},j=()=>{if(!(!B||typeof t.Swiper!="function")){F();try{C=new t.Swiper(B,w()),O("ready")}catch(s){D(e("Impossible d\u2019initialiser l\u2019aper\xE7u Swiper.","lightbox-jlg"))}}};B?(v&&(v.hidden=!0),O("loading"),V(e("Pr\xE9paration de la pr\xE9visualisation\u2026","lightbox-jlg")),Ye(t,{namespace:"admin-preview"}).then(()=>{j(),C&&typeof C.update=="function"&&C.update(),V(e("Pr\xE9visualisation pr\xEAte.","lightbox-jlg"))}).catch(()=>{D(e("Impossible de charger Swiper. La pr\xE9visualisation interactive est d\xE9sactiv\xE9e.","lightbox-jlg"))})):D(e("Pr\xE9visualisation indisponible\xA0: conteneur Swiper manquant.","lightbox-jlg"));let n=(s,p,f)=>{if(!o)return;let S=te(s)?s:"#6366f1";o.style.setProperty("--mga-preview-accent",S),T(f)&&V(e("Couleur d\u2019accent mise \xE0 jour.","lightbox-jlg"))},a=(s,p,f)=>{if(!o)return;let S=parseFloat(s);if(Number.isNaN(S))return;let A=Math.min(Math.max(S,0),1);o.style.setProperty("--mga-preview-overlay",`rgba(15, 23, 42, ${A})`),T(f)&&V(e("Opacit\xE9 de l\u2019arri\xE8re-plan mise \xE0 jour.","lightbox-jlg"))},i=(s,p,f)=>{if(!o)return;let S=typeof s=="string"&&s?s:"echo";o.setAttribute("data-preview-style",S),T(f)&&V(e("Style d\u2019arri\xE8re-plan actualis\xE9.","lightbox-jlg"))},l=(s,p,f,S)=>{if((E[s]||[]).forEach(M=>{M.setAttribute("data-preview-hidden",p?"false":"true"),M.setAttribute("aria-hidden",p?"false":"true")}),T(S)){let M={zoom:e("Zoom","lightbox-jlg"),download:e("T\xE9l\xE9chargement","lightbox-jlg"),share:e("Partage","lightbox-jlg"),cta:e("Appel \xE0 l\u2019action","lightbox-jlg"),fullscreen:e("Plein \xE9cran","lightbox-jlg")}[s]||s;V(m(e(p?"%s activ\xE9 dans l\u2019aper\xE7u.":"%s masqu\xE9 dans l\u2019aper\xE7u.","lightbox-jlg"),M))}},h=(s,p,f)=>{if(!g)return;let S=parseFloat(s);if(Number.isNaN(S))g.style.setProperty("--mga-preview-thumb-scale","1");else{let A=Math.min(Math.max(S/90,.6),1.4);g.style.setProperty("--mga-preview-thumb-scale",A.toString())}T(f)&&V(e("Taille des miniatures mise \xE0 jour.","lightbox-jlg"))},k=(s,p,f)=>{if(!d)return;let S=c.getElementById("mga_effect"),A=c.getElementById("mga_delay"),M=c.getElementById("mga_speed"),$=S?S.value:"",re=A&&A.value||"4",X=M&&M.value||"600",oe=xe[$]||e("personnalis\xE9e","lightbox-jlg");d.textContent=m(e("Transition : %1$s \u2022 %2$ss / %3$sms","lightbox-jlg"),oe,re,X),T(f)&&V(m(e("Transition mise \xE0 jour\xA0: %1$s, rythme de %2$ss.","lightbox-jlg"),oe,re)),j()},I=(s,p,f=["change"])=>{let S=c.getElementById(s);if(!S||typeof p!="function")return;let A=M=>{let $=S.type==="checkbox"?S.checked:S.value;p($,S,M||{type:"init"})};f.forEach(M=>{S.addEventListener(M,A)}),A({type:"init"})};I("mga_accent_color",n,["input","change"]),I("mga_bg_opacity",a,["input","change"]),I("mga_background_style",i),I("mga_thumb_size",h,["input","change"]),I("mga_show_zoom",(s,p,f)=>l("zoom",s,p,f)),I("mga_show_download",(s,p,f)=>l("download",s,p,f)),I("mga_show_share",(s,p,f)=>l("share",s,p,f)),I("mga_show_cta",(s,p,f)=>l("cta",s,p,f)),I("mga_show_fullscreen",(s,p,f)=>l("fullscreen",s,p,f)),I("mga_effect",k),I("mga_delay",k,["input","change"]),I("mga_speed",k,["input","change"])})();let le=t.mgaStylePresets&&typeof t.mgaStylePresets=="object"?t.mgaStylePresets:{},ne=le.presets&&typeof le.presets=="object"?le.presets:{},W=c.getElementById("mga_style_preset"),Me=c.querySelector("[data-mga-apply-style-preset]"),Oe=c.querySelector("[data-mga-reset-style-preset]"),we=c.querySelector("[data-mga-style-preset-description]"),me=!1;U=ct(le.defaults||{}),U&&typeof U.setNavigationApi=="function"&&U.setNavigationApi(ut);let ge=(r,o)=>{if(!(!r||typeof r.dispatchEvent!="function"))try{r.dispatchEvent(new Event(o,{bubbles:!0}))}catch(d){if(typeof c.createEvent=="function")try{let g=c.createEvent("Event");g.initEvent(o,!0,!0),r.dispatchEvent(g)}catch(g){}}},Ee=(r,o)=>{let d=c.getElementById(r);d&&(d.value=o,ge(d,"input"),ge(d,"change"))},je=Ee,_e=(r,o)=>{let d=c.getElementById(r);d&&(d.value=o,ge(d,"change"))},ce=(r,o)=>{let d=c.getElementById(r);d&&(d.checked=!!o,ge(d,"change"))},dt=r=>{if(!J)return;let o=typeof r=="string"?r:"",d=t.jQuery;if(d&&typeof d.fn=="object"&&typeof d.fn.wpColorPicker=="function"){let g=d(J);if(g&&typeof g.wpColorPicker=="function"){g.wpColorPicker("color",o),se&&se.update(o);return}}J.value=o,ge(J,"change"),se&&se.update(o)},Be=r=>{!r||typeof r!="object"||(Object.prototype.hasOwnProperty.call(r,"delay")&&Ee("mga_delay",r.delay),Object.prototype.hasOwnProperty.call(r,"speed")&&Ee("mga_speed",r.speed),Object.prototype.hasOwnProperty.call(r,"effect")&&_e("mga_effect",r.effect),Object.prototype.hasOwnProperty.call(r,"easing")&&_e("mga_easing",r.easing),Object.prototype.hasOwnProperty.call(r,"thumbs_layout")&&_e("mga_thumbs_layout",r.thumbs_layout),Object.prototype.hasOwnProperty.call(r,"thumb_size")&&je("mga_thumb_size",r.thumb_size),Object.prototype.hasOwnProperty.call(r,"thumb_size_mobile")&&je("mga_thumb_size_mobile",r.thumb_size_mobile),Object.prototype.hasOwnProperty.call(r,"show_thumbs_mobile")&&ce("mga_show_thumbs_mobile",r.show_thumbs_mobile),Object.prototype.hasOwnProperty.call(r,"accent_color")&&dt(r.accent_color),Object.prototype.hasOwnProperty.call(r,"bg_opacity")&&je("mga_bg_opacity",r.bg_opacity),Object.prototype.hasOwnProperty.call(r,"background_style")&&_e("mga_background_style",r.background_style),Object.prototype.hasOwnProperty.call(r,"autoplay_start")&&ce("mga_autoplay_start",r.autoplay_start),Object.prototype.hasOwnProperty.call(r,"loop")&&ce("mga_loop",r.loop),Object.prototype.hasOwnProperty.call(r,"show_zoom")&&ce("mga_show_zoom",r.show_zoom),Object.prototype.hasOwnProperty.call(r,"show_download")&&ce("mga_show_download",r.show_download),Object.prototype.hasOwnProperty.call(r,"show_share")&&ce("mga_show_share",r.show_share),Object.prototype.hasOwnProperty.call(r,"show_cta")&&ce("mga_show_cta",r.show_cta),Object.prototype.hasOwnProperty.call(r,"show_fullscreen")&&ce("mga_show_fullscreen",r.show_fullscreen))},he=()=>{if(!we)return;let r=W?W.value:"";if(r&&ne[r]&&ne[r].description){we.textContent=ne[r].description;return}let o=typeof le.customDescription=="string"?le.customDescription:"",d=U?U.getBaselineInfo():{label:"",key:""},g=d&&d.label?m(e("Base\xA0: %1$s.","lightbox-jlg"),d.label):"",y=[o,g].filter(v=>v&&v.trim()!=="");if(y.length===0){we.textContent="";return}we.textContent=y.join(" ")},ft=()=>{me||(W&&W.value!==""&&(W.value=""),he(),U&&typeof U.refresh=="function"&&U.refresh(),Q())},pt=r=>{let o=c.getElementById(r);if(!o)return;let d=["change"];o.tagName==="INPUT"&&["text","number","range"].includes(o.type)&&d.push("input"),d.forEach(g=>{o.addEventListener(g,ft)})};if(W&&(he(),W.addEventListener("change",he)),U)if(W&&W.value&&ne[W.value]){let r=ne[W.value];U.setBaseline({key:W.value,label:r.label||((ze=W.options[W.selectedIndex])==null?void 0:ze.text)||"",settings:r.settings||{}})}else U.setBaseline({key:"",label:U.getDefaultLabel(),settings:le.defaults||{}});Me&&Me.addEventListener("click",r=>{if(r.preventDefault(),!W)return;let o=W.value;!o||!ne[o]||(me=!0,Be(ne[o].settings||{}),U&&U.setBaseline({key:o,label:ne[o].label||"",settings:ne[o].settings||{}}),me=!1,he(),Q())}),Oe&&Oe.addEventListener("click",r=>{r.preventDefault();let o=le.defaults||{};o&&typeof o=="object"&&Object.keys(o).length>0&&(me=!0,Be(o),U&&U.setBaseline({key:"",label:U.getDefaultLabel(),settings:o}),me=!1),W&&(W.value=""),he(),Q()}),["mga_delay","mga_speed","mga_effect","mga_easing","mga_thumb_size","mga_thumb_size_mobile","mga_thumbs_layout","mga_accent_color","mga_bg_opacity","mga_background_style","mga_show_thumbs_mobile","mga_autoplay_start","mga_loop","mga_show_zoom","mga_show_download","mga_show_share","mga_show_cta","mga_show_fullscreen"].forEach(pt);let Te=c.querySelector("[data-share-repeater]");Te&&mt(Te);let ye=c.querySelector("[data-mga-content-selectors]");if(ye){let r=ye.querySelector("[data-mga-content-selectors-list]"),o=ye.querySelector("[data-mga-content-selectors-textarea]"),d=c.getElementById("mga-content-selector-template"),g=ye.getAttribute("data-mga-selector-placeholder")||"",y=!1,v=()=>{};if(r){let B=()=>r.querySelectorAll("[data-mga-content-selector-row]"),z=()=>r.querySelectorAll("[data-mga-content-selector-input]"),q=()=>Array.from(z()).some(b=>b.value.trim()===""),_=()=>{let b=B(),w=b.length<=1;b.forEach(j=>{let n=j.querySelector("[data-mga-remove-selector]");n&&(n.disabled=w,n.setAttribute("aria-disabled",w?"true":"false"))})},E=()=>Array.from(z()).map(b=>b.value.trim()).filter(b=>b!==""),C=()=>{if(!o||y)return;let b=E();y=!0,o.value=b.join(`
`),y=!1},T=b=>{if(!b||b.getAttribute("data-mga-selector-bound")==="true")return;let w=b.querySelector("[data-mga-remove-selector]");w&&w.addEventListener("click",n=>{if(n.preventDefault(),B().length<=1){let i=b.querySelector("[data-mga-content-selector-input]");i&&(i.value="",C());return}b.remove(),_(),C()});let j=b.querySelector("[data-mga-content-selector-input]");j&&(j.addEventListener("input",()=>{y||C()}),j.addEventListener("keydown",n=>{if(n.key!=="Enter"||n.shiftKey||n.altKey||n.metaKey||n.ctrlKey)return;if(n.preventDefault(),!q()&&typeof v=="function"){v("");return}let a=B();if(a.length===0)return;let i=a[a.length-1];if(!i)return;let l=i.querySelector("[data-mga-content-selector-input]");l&&l!==n.target&&ae(l)}),g&&!j.getAttribute("placeholder")&&j.setAttribute("placeholder",g)),b.setAttribute("data-mga-selector-bound","true")},V=(b="")=>{let w=null;if(d&&d.content&&(w=c.importNode(d.content,!0).firstElementChild,w)){let i=w.querySelector("[data-mga-content-selector-input]");return i&&(i.value=b,g&&i.setAttribute("placeholder",g)),T(w),w}w=c.createElement("div"),w.className="mga-content-selectors__row",w.setAttribute("data-mga-content-selector-row","");let j=c.createElement("input");j.type="text",j.className="regular-text",j.setAttribute("data-mga-content-selector-input",""),j.value=b,g&&j.setAttribute("placeholder",g),w.appendChild(j);let n=c.createElement("button");return n.type="button",n.className="button-link mga-content-selectors__remove",n.setAttribute("data-mga-remove-selector",""),n.textContent=e("Retirer","lightbox-jlg"),w.appendChild(n),T(w),w},O=b=>{if(r.innerHTML="",b.length===0){let w=V("");w&&r.appendChild(w)}else b.forEach(w=>{let j=V(w);j&&r.appendChild(j)});_()},D=()=>{if(!o||y)return;let b=o.value.split(/\r\n|\r|\n/).map(w=>w.trim()).filter(w=>w.length>0);y=!0,O(b),y=!1};v=(b="")=>{let w=V(b);if(w){r.appendChild(w),_();let j=w.querySelector("[data-mga-content-selector-input]");j&&ae(j)}C()},o?(D(),o.addEventListener("input",()=>{y||D()})):O([]);let F=ye.querySelector("[data-mga-add-selector]");F&&F.addEventListener("click",b=>{b.preventDefault(),v()})}}function mt(r){let o=r.querySelector("[data-share-repeater-list]"),d=r.querySelector("[data-share-repeater-add]"),g=c.getElementById("mga-share-channel-template");if(!o||!g)return;let y=Date.now(),v=()=>(y+=1,`mga-share-channel-${y}`),B=n=>n?((!n.dataset.shareUid||n.dataset.shareUid.trim()==="")&&(n.dataset.shareUid=v()),n.dataset.shareUid):null,z=n=>{let a=B(n);if(!a)return;n.querySelectorAll("[data-share-id-suffix]").forEach(l=>{let h=l.getAttribute("data-share-id-suffix");if(!h)return;let k=`${a}-${h}`;l.tagName==="LABEL"?l.setAttribute("for",k):l.id=k})},q=n=>{if(!n)return;let a=n.querySelector("[data-share-repeater-title]");if(!a)return;let i=n.querySelector('[data-share-field="label"]'),l=n.querySelector('[data-share-field="key"]'),h=i&&typeof i.value=="string"?i.value.trim():"",k=l&&typeof l.value=="string"?l.value.trim():"",I=k?k.toUpperCase():e("Nouveau canal","lightbox-jlg");a.textContent=h||I},_=n=>{if(!n)return;let a=n.querySelector("[data-share-icon-preview]"),i=n.querySelector('[data-share-field="icon"]');if(!a)return;let l=i?i.value:"",h=x(l);a.innerHTML="",h&&a.appendChild(h);let k=n.querySelector("[data-share-preview-icon]");if(k){k.innerHTML="";let I=x(l);I&&k.appendChild(I)}},E=(n,a)=>!n||!a?null:n.querySelector(`[data-share-field="${a}"]`),C=(n,a)=>{let i=E(n,a);return i&&typeof i.value=="string"?i.value.trim():""},T=n=>{if(typeof n!="string")return"";let a=n;return Object.keys(P).forEach(i=>{let l=encodeURIComponent(P[i]);a=a.replace(new RegExp(i,"gi"),l)}),a},V=n=>/%url%/i.test(typeof n=="string"?n:""),O=n=>{if(typeof n!="string")return!1;let a=n.trim();if(a==="")return!1;let i=a.split(":")[0].toLowerCase();return Z.includes(i)?i==="http"||i==="https"?/^https?:\/\//i.test(a):!0:!1},D=(n,a,i)=>{let l=typeof i=="string"&&i!=="";n&&(l?(n.classList.add("mga-field-error"),n.setAttribute("aria-invalid","true")):(n.classList.remove("mga-field-error"),n.removeAttribute("aria-invalid"))),a&&(l?(a.textContent=i,a.removeAttribute("hidden")):(a.textContent="",a.setAttribute("hidden","hidden")))},F=n=>{if(!n)return;let a=n.querySelector("[data-share-preview]");if(!a)return;let i=a.querySelector("[data-share-preview-label]"),l=a.querySelector("[data-share-preview-url]"),h=C(n,"label"),k=C(n,"key"),I=k?k.toUpperCase():e("Nouveau canal","lightbox-jlg");if(i&&(i.textContent=h||I),l){let s=C(n,"template");if(s){let p=T(s);l.textContent=p,l.setAttribute("data-preview-empty","false"),l.title=p}else l.textContent=e("Compl\xE9tez le mod\xE8le pour g\xE9n\xE9rer un lien.","lightbox-jlg"),l.setAttribute("data-preview-empty","true"),l.removeAttribute("title")}Q()},b=()=>{let n=Array.from(o.querySelectorAll("[data-share-repeater-item]")),a=n.reduce((i,l)=>{let h=C(l,"key").toLowerCase();return h&&(i[h]=(i[h]||0)+1),i},{});n.forEach(i=>{let l=E(i,"key"),h=E(i,"template"),k=i.querySelector('[data-share-error="key"]'),I=i.querySelector('[data-share-error="template"]'),s=C(i,"key"),p=s.toLowerCase(),f="";s?/^[a-z0-9_-]+$/i.test(s)?a[p]>1&&(f=e("Chaque cl\xE9 doit \xEAtre unique.","lightbox-jlg")):f=e("Utilisez uniquement des lettres, chiffres ou tirets.","lightbox-jlg"):f=e("Renseignez une cl\xE9 pour ce canal.","lightbox-jlg"),D(l,k,f);let S=C(i,"template"),A="";S?V(S)?O(S)||(A=e("Indiquez une URL valide (http, https, mailto, tel ou sms).","lightbox-jlg")):A=e("Ajoutez au moins le jeton %url% pour construire le lien.","lightbox-jlg"):A=e("Renseignez un mod\xE8le d\u2019URL.","lightbox-jlg"),D(h,I,A)})},w=()=>{Array.from(o.querySelectorAll("[data-share-repeater-item]")).forEach((a,i)=>{let l=`mga_settings[share_channels][${i}]`;a.querySelectorAll("[data-share-field]").forEach(k=>{let I=k.getAttribute("data-share-field");if(!I)return;let s=I;I==="enabled-hidden"&&(s="enabled"),k.name=`${l}[${s}]`}),z(a),q(a),_(a),F(a)}),b(),Q()},j=n=>{if(!n)return;let a=n.querySelector('[data-share-field="label"]')||n;ae(a)};o.addEventListener("input",n=>{let a=n.target;if(!a)return;let i=a.closest("[data-share-repeater-item]");i&&(a.matches('[data-share-field="label"], [data-share-field="key"]')&&q(i),a.matches('[data-share-field="icon"]')&&_(i),F(i),b())}),o.addEventListener("change",n=>{let a=n.target;if(!a||!a.matches('[data-share-field="icon"]'))return;let i=a.closest("[data-share-repeater-item]");i&&(_(i),F(i),b())}),o.addEventListener("click",n=>{let a=n.target.closest("[data-share-action]");if(!a)return;n.preventDefault();let i=a.getAttribute("data-share-action"),l=a.closest("[data-share-repeater-item]");if(l){if(i==="remove"){let h=l.nextElementSibling||l.previousElementSibling;l.parentNode===o&&o.removeChild(l),w(),Q(),h&&j(h);return}if(i==="move-up"){let h=l.previousElementSibling;h&&(o.insertBefore(l,h),w(),j(l),Q());return}if(i==="move-down"){let h=l.nextElementSibling;h&&(o.insertBefore(h,l),w(),j(l),Q())}}}),d&&d.addEventListener("click",n=>{n.preventDefault();let i=c.importNode(g.content,!0).querySelector("[data-share-repeater-item]");i&&(o.appendChild(i),w(),j(i),Q())}),w(),Q()}})})(typeof window!="undefined"?window:globalThis)});Mt();})();
//# sourceMappingURL=admin.js.map
