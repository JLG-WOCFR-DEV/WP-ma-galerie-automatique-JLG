(()=>{var nt=(t,a)=>()=>(t&&(a=t(t=0)),a);var ar=(t,a)=>()=>(a||t((a={exports:{}}).exports,a),a.exports);var ir,lr,Et,kt,jt,Ct=nt(()=>{ir=/%(\d+\$)?[sd]/g,lr=()=>(t,...a)=>{let e=0;return String(t).replace(ir,(m,n)=>{let _,oe=m.charAt(m.length-1);if(n){let be=parseInt(n.slice(0,-1),10);if(Number.isNaN(be)||be<=0)return"";_=be-1}else _=e,e+=1;let N=_>=0&&_<a.length?a[_]:void 0;if(oe==="d"){let be=parseInt(N,10);return Number.isNaN(be)?"":String(be)}return typeof N=="undefined"?"":String(N)})},Et=t=>t&&typeof t.sprintf=="function"?t.sprintf:lr(),kt=t=>t&&typeof t.__=="function"?t.__:a=>a,jt=t=>!t||typeof t!="object"?null:t.wp&&t.wp.i18n?t.wp.i18n:null});var ht,yt,cr,It,ur,Lt,Pt=nt(()=>{ht={facebook:{viewBox:"0 0 24 24",paths:[{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z"}]},twitter:{viewBox:"0 0 24 24",paths:[{d:"M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z"}]},linkedin:{viewBox:"0 0 24 24",paths:[{d:"M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z"}]},pinterest:{viewBox:"0 0 24 24",paths:[{d:"M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z"}]},whatsapp:{viewBox:"0 0 24 24",paths:[{d:"M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z"}]},telegram:{viewBox:"0 0 24 24",paths:[{d:"M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z"}]},email:{viewBox:"0 0 24 24",paths:[{d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"}]},link:{viewBox:"0 0 24 24",paths:[{d:"M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z"}]},generic:{viewBox:"0 0 24 24",paths:[{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"},{d:"M13 17h-2v-2h2zm0-4h-2V7h2z"}]},copy:{viewBox:"0 0 24 24",paths:[{d:"M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"}]},download:{viewBox:"0 0 24 24",paths:[{d:"M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z"}]},native:{viewBox:"0 0 24 24",paths:[{d:"M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"}]}},yt=t=>typeof t!="string"?"":t.trim().toLowerCase().replace(/[^a-z0-9_-]/g,""),cr=t=>{let a=yt(t);return a&&ht[a]?ht[a]:ht.generic},It=(t,a,e={})=>{if(!t||typeof t.createElementNS!="function")return null;let m=t.createElementNS("http://www.w3.org/2000/svg",a);return Object.keys(e).forEach(n=>{m.setAttribute(n,e[n])}),m},ur=(t,a)=>{let e=cr(a),m=It(t,"svg",{viewBox:e.viewBox,fill:"currentColor","aria-hidden":"true",focusable:"false"});return m?(Array.isArray(e.paths)&&e.paths.forEach(n=>{let _=It(t,"path",n);_&&m.appendChild(_)}),m):null},Lt=(t,a,{wrapperTag:e="span",wrapperClass:m=""}={})=>{if(!t||typeof t.createElement!="function")return null;let n=t.createElement(e);m&&(n.className=m);let _=ur(t,a);return _?(n.appendChild(_),n):null}});var Ge,Ye,Ve,qt,zt=nt(()=>{Ge=null,Ye=()=>{if(Ge!==null)return Ge;Ge=!1;let t=typeof window!="undefined"?window.document:null;if(!t||typeof t.createElement!="function"||typeof window.HTMLElement=="undefined"||!window.HTMLElement.prototype||typeof window.HTMLElement.prototype.focus!="function")return Ge;let a=t.createElement("button"),e=t.body||t.documentElement;try{a.type="button",e&&typeof e.appendChild=="function"&&e.appendChild(a),window.HTMLElement.prototype.focus.call(a,{get preventScroll(){return Ge=!0,!0}})}catch(m){Ge=!1}finally{a.parentNode&&typeof a.parentNode.removeChild=="function"&&a.parentNode.removeChild(a)}return Ge},Ve=(t,a={preventScroll:!0})=>{if(!t||typeof t.focus!="function")return;if(a&&Ye())try{t.focus(a);return}catch(m){}t.focus()},qt=()=>{typeof window!="undefined"&&((!window.mgaFocusUtils||typeof window.mgaFocusUtils!="object")&&(window.mgaFocusUtils={}),window.mgaFocusUtils.detectFocusOptionsSupport=Ye,window.mgaFocusUtils.safeFocus=Ve)}});var dr,Tt,fr,ee,mr,pr,gr,hr,yr,br,vr,Mt,Ot=nt(()=>{dr=t=>t&&t.performance&&typeof t.performance.now=="function"?t.performance.now():Date.now(),Tt=t=>t&&t.document||null,fr=t=>t?((!t.mgaSwiperMetrics||typeof t.mgaSwiperMetrics!="object")&&(t.mgaSwiperMetrics={events:[]}),Array.isArray(t.mgaSwiperMetrics.events)||(t.mgaSwiperMetrics.events=[]),t.mgaSwiperMetrics):null,ee=(t,a,e,m)=>{let n=fr(t);if(n&&(n.events.push({namespace:a||"default",event:e,detail:m||{},timestamp:dr(t)}),typeof t.dispatchEvent=="function"))try{let _=new t.CustomEvent("mga:swiper-metric",{detail:{namespace:a||"default",event:e,payload:m||{}}});t.dispatchEvent(_)}catch(_){}},mr=t=>!t||typeof t!="object"?[]:(Array.isArray(t.attempts)?t.attempts:[]).map(e=>{if(!e||typeof e!="object"||e.enabled===!1)return null;let m=typeof e.key=="string"&&e.key?e.key:"fallback",n=e.js&&typeof e.js=="object"?e.js:{},_=e.css&&typeof e.css=="object"?e.css:null,oe=e.inject!==!1,N=typeof n.src=="string"&&n.src?n.src:"";return N?{key:m,label:typeof e.label=="string"&&e.label?e.label:m,js:{src:N,integrity:typeof n.integrity=="string"&&n.integrity?n.integrity:null,crossOrigin:typeof n.crossOrigin=="string"&&n.crossOrigin?n.crossOrigin:null,referrerPolicy:typeof n.referrerPolicy=="string"&&n.referrerPolicy?n.referrerPolicy:null},css:_&&typeof _.href=="string"&&_.href?{href:_.href,integrity:typeof _.integrity=="string"&&_.integrity?_.integrity:null,crossOrigin:typeof _.crossOrigin=="string"&&_.crossOrigin?_.crossOrigin:null,referrerPolicy:typeof _.referrerPolicy=="string"&&_.referrerPolicy?_.referrerPolicy:null}:null,timeout:typeof e.timeout=="number"&&e.timeout>0?e.timeout:12e3,inject:oe}:null}).filter(Boolean),pr=(t,a,e)=>{if(!a||!a.css)return Promise.resolve();let m=Tt(t);if(!m)return Promise.resolve();let n=Array.from(m.querySelectorAll('link[rel="stylesheet"]')).find(_=>_.href===a.css.href);return n?Promise.resolve(n):new Promise((_,oe)=>{let N=m.createElement("link");N.rel="stylesheet",N.href=a.css.href,N.dataset.mgaSwiperSource=a.key,a.css.integrity&&(N.integrity=a.css.integrity),a.css.crossOrigin?N.crossOrigin=a.css.crossOrigin:a.css.integrity&&(N.crossOrigin="anonymous"),a.css.referrerPolicy&&(N.referrerPolicy=a.css.referrerPolicy),N.onload=()=>{ee(t,e,"css_load_success",{source:a.key}),_(N)},N.onerror=()=>{ee(t,e,"css_load_error",{source:a.key}),oe(new Error("Stylesheet load error"))},m.head.appendChild(N),ee(t,e,"css_load_start",{source:a.key,href:a.css.href})})},gr=(t,a,e)=>{if(!a||!a.js||!a.js.src)return Promise.reject(new Error("Invalid attempt configuration"));let m=Tt(t);if(!m)return Promise.reject(new Error("Document unavailable"));let n=Array.from(m.querySelectorAll("script")).find(_=>_.src===a.js.src&&!_.hasAttribute("data-mga-swiper-failed"));return n?new Promise((_,oe)=>{if(typeof t.Swiper=="function"){n.setAttribute("data-mga-swiper-loaded","true"),ee(t,e,"js_already_available",{source:a.key}),_(n);return}if(typeof n.hasAttribute=="function"&&n.hasAttribute("data-mga-swiper-loaded")){_(n);return}n.addEventListener("load",()=>{n.setAttribute("data-mga-swiper-loaded","true"),_(n)}),n.addEventListener("error",()=>{n.setAttribute("data-mga-swiper-failed","true"),oe(new Error("Existing script failed"))}),ee(t,e,"js_existing_observed",{source:a.key})}):new Promise((_,oe)=>{let N=m.createElement("script");N.src=a.js.src,N.async=!1,N.dataset.mgaSwiperSource=a.key,a.js.integrity&&(N.integrity=a.js.integrity),a.js.crossOrigin?N.crossOrigin=a.js.crossOrigin:a.js.integrity&&(N.crossOrigin="anonymous"),a.js.referrerPolicy&&(N.referrerPolicy=a.js.referrerPolicy);let be=null,qe=()=>{be&&(t.clearTimeout(be),be=null)};N.onload=()=>{qe(),N.setAttribute("data-mga-swiper-loaded","true"),ee(t,e,"js_load_success",{source:a.key}),_(N)},N.onerror=()=>{qe(),N.setAttribute("data-mga-swiper-failed","true"),ee(t,e,"js_load_error",{source:a.key}),oe(new Error("Script load error"))},be=t.setTimeout(()=>{qe(),N.setAttribute("data-mga-swiper-failed","true"),ee(t,e,"js_load_timeout",{source:a.key,timeout:a.timeout}),oe(new Error("Script load timeout"))},a.timeout||12e3),m.head.appendChild(N),ee(t,e,"js_load_start",{source:a.key,src:a.js.src})})},hr=t=>t?((!t.mgaSwiperLoaderState||typeof t.mgaSwiperLoaderState!="object")&&(t.mgaSwiperLoaderState={promise:null}),t.mgaSwiperLoaderState):{promise:null},yr=(t,a,e)=>!a||!a.inject?Promise.resolve():typeof t.Swiper=="function"?Promise.resolve(t.Swiper):(ee(t,e,"attempt_start",{source:a.key}),pr(t,a,e).catch(()=>null).then(()=>gr(t,a,e)).then(()=>{if(typeof t.Swiper=="function")return ee(t,e,"attempt_success",{source:a.key}),t.Swiper;throw ee(t,e,"attempt_no_global",{source:a.key}),new Error("Swiper global missing after load")}).catch(m=>{throw ee(t,e,"attempt_error",{source:a.key,message:m&&m.message?m.message:String(m)}),m})),br=(t,a,e)=>a.reduce((m,n)=>m.catch(()=>yr(t,n,e)),Promise.reject(new Error("initial"))),vr=(t,a)=>a&&typeof a=="object"?a:t&&t.mgaSwiperLoaderConfig&&typeof t.mgaSwiperLoaderConfig=="object"?t.mgaSwiperLoaderConfig:t&&t.mgaAdminConfig&&typeof t.mgaAdminConfig=="object"&&t.mgaAdminConfig.swiper?t.mgaAdminConfig.swiper:null,Mt=(t=window,a={})=>{let e=typeof a.namespace=="string"&&a.namespace?a.namespace:"default";if(!t)return Promise.reject(new Error("Global scope unavailable"));if(typeof t.Swiper=="function")return ee(t,e,"already_available",{}),Promise.resolve(t.Swiper);let m=vr(t,a.config),n=mr(m);if(!n.length)return ee(t,e,"no_attempts_configured",{}),Promise.reject(new Error("No Swiper attempts configured"));let _=hr(t);return _.promise||(ee(t,e,"bootstrap",{version:m&&m.version?m.version:null,attempts:n.map(oe=>oe.key)}),_.promise=br(t,n,e).catch(()=>{if(typeof t.Swiper=="function")return t.Swiper;throw ee(t,e,"fatal",{}),new Error("Swiper could not be loaded")}).then(()=>{if(typeof t.Swiper=="function")return ee(t,e,"ready",{}),t.Swiper;throw ee(t,e,"fatal",{}),new Error("Swiper global unavailable")}).finally(()=>{_.promise=null})),_.promise}});var Nt=nt(()=>{Ct();Pt();zt();Ot()});var wr=ar((qr,ut)=>{Nt();(function(t){qt();let a=jt(t),e=kt(a),m=Et(a);typeof ut!="undefined"&&ut.exports&&(ut.exports={detectFocusOptionsSupport:Ye,safeFocus:Ve});let n=t.document,_=$=>{let P=Lt(n,yt($));return P?P.querySelector("svg")||P:null},oe={url:"https://exemple.com/galerie/photo-01",text:"Une photo remarquable",title:"Collection studio"},N={"%url%":oe.url,"%text%":oe.text,"%title%":oe.title},be=["http","https","mailto","tel","sms"],qe=$=>typeof $!="string"?!1:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test($.trim()),Xe=$=>{if(!qe($))return"";let P=$.trim();if(P.length===4){let T=P[1],K=P[2],q=P[3];return`#${T}${T}${K}${K}${q}${q}`.toLowerCase()}return P.toLowerCase()},Bt=$=>{let P=Xe($);if(!P)return null;let T=P.slice(1),K=parseInt(T.slice(0,2),16),q=parseInt(T.slice(2,4),16),ce=parseInt(T.slice(4,6),16);return[K,q,ce].some(we=>Number.isNaN(we))?null:{red:K,green:q,blue:ce}},bt=$=>{let P=Bt($);if(!P)return null;let T=we=>{let J=we/255;return J<=.03928?J/12.92:((J+.055)/1.055)**2.4},K=T(P.red),q=T(P.green),ce=T(P.blue);return .2126*K+.7152*q+.0722*ce},Vt=($,P)=>{let T=bt($),K=bt(P);if(T===null||K===null)return null;let[q,ce]=T>K?[T,K]:[K,T],we=(q+.05)/(ce+.05);return Number.isFinite(we)?we:null},$t=$=>Number.isFinite($)?`${$.toFixed(2)}:1`:"\u2014",Dt=()=>{let $=n.querySelector("[data-mga-contrast-inspector]");if(!$)return null;let P={light:{swatch:$.querySelector('[data-mga-contrast-swatch="light"]'),value:$.querySelector('[data-mga-contrast-value="light"]')},dark:{swatch:$.querySelector('[data-mga-contrast-swatch="dark"]'),value:$.querySelector('[data-mga-contrast-value="dark"]')}},T=$.querySelector("[data-mga-contrast-message]"),K=[{key:"light",label:e("Fond clair","lightbox-jlg"),background:"#ffffff"},{key:"dark",label:e("Fond sombre","lightbox-jlg"),background:"#111827"}],q={entries:[]},ce=()=>{let Q=n.getElementById("mga_accent_color");if(!Q)return"#6366f1";let $e=Q.getAttribute("data-default-color"),de=Xe($e);return de||"#6366f1"},we=Q=>Number.isFinite(Q)?Q>=4.5?"success":Q>=3?"warning":"error":"error",J=Q=>Q?Q.severity==="success"?m(e("Contraste valid\xE9 sur %1$s (%2$s).","lightbox-jlg"),Q.label,Q.ratioText):Q.severity==="warning"?m(e("Contraste limite sur %1$s (%2$s). Renforcez l\xE9g\xE8rement pour atteindre 4,5:1.","lightbox-jlg"),Q.label,Q.ratioText):m(e("Contraste insuffisant sur %1$s (%2$s). Ajustez la couleur ou le fond.","lightbox-jlg"),Q.label,Q.ratioText):"",se=Q=>{let de=Xe(Q)||ce();if(!de)$.setAttribute("hidden","hidden"),$.removeAttribute("data-mga-severity"),q={entries:[]},T&&(T.textContent=""),Object.values(P).forEach(ae=>{ae.value&&(ae.value.textContent="\u2014"),ae.swatch&&(ae.swatch.style.removeProperty("--mga-contrast-foreground"),ae.swatch.style.removeProperty("--mga-contrast-background"))});else{$.removeAttribute("hidden");let ae=K.map(te=>{let ue=Vt(de,te.background),fe=$t(ue),ot=we(ue),Te=P[te.key];return Te&&(Te.value&&(Te.value.textContent=fe),Te.swatch&&(Te.swatch.style.setProperty("--mga-contrast-foreground",de),Te.swatch.style.setProperty("--mga-contrast-background",te.background))),{key:te.key,label:te.label,ratio:ue||0,ratioText:fe,severity:ot}});q={entries:ae};let De=ae.reduce((te,ue)=>!te||!Number.isFinite(ue.ratio)||!Number.isFinite(te.ratio)||ue.ratio<te.ratio?ue:te,null),ze=De?De.severity:"success";$.setAttribute("data-mga-severity",ze),T&&(T.textContent=J(De))}return q};return se(),{update:se,readAudit(){return q}}},Rt=($={})=>{if(!n)return null;let P=()=>"\u2014",T=p=>Number.isFinite(p)?String(p):P(),K=p=>{if(!Number.isFinite(p))return P();let h=Math.round(p*10)/10,j=Math.abs(h-Math.round(h))<.01?String(Math.round(h)):h.toFixed(1);return m(e("%1$s\xA0s","lightbox-jlg"),j)},q=p=>Number.isFinite(p)?m(e("%1$s\xA0ms","lightbox-jlg"),T(p)):P(),ce=p=>Number.isFinite(p)?m(e("%1$s\xA0px","lightbox-jlg"),T(p)):P(),we=p=>{if(!Number.isFinite(p))return P();let h=Math.round(p*100)/100;return String(h).replace(/\.0+$/,"").replace(/(\.\d*?)0+$/,"$1")},J=p=>e(p?"Activ\xE9":"D\xE9sactiv\xE9","lightbox-jlg"),se=(p,h,j="")=>{if(!h)return j||P();let Se=n.getElementById(p);if(!Se)return h;let ke=Array.from(Se.options||[]).find(je=>je.value===h);return ke&&ke.textContent?ke.textContent.trim():h},Q=(p,h="")=>{let j=n.querySelector(`label[for="${p}"]`);return j&&(j.textContent||"").replace(/\s+/g," ").trim()||h},$e=[{key:"delay",controlId:"mga_delay",sectionId:"mga-section-playback",type:"float",format:K},{key:"speed",controlId:"mga_speed",sectionId:"mga-section-playback",type:"int",format:q},{key:"effect",controlId:"mga_effect",sectionId:"mga-section-playback",type:"select",format:p=>se("mga_effect",p,p)},{key:"easing",controlId:"mga_easing",sectionId:"mga-section-playback",type:"select",format:p=>se("mga_easing",p,p)},{key:"thumbs_layout",controlId:"mga_thumbs_layout",sectionId:"mga-section-thumbnails",type:"select",format:p=>se("mga_thumbs_layout",p,p)},{key:"thumb_size",controlId:"mga_thumb_size",sectionId:"mga-section-thumbnails",type:"int",format:ce},{key:"thumb_size_mobile",controlId:"mga_thumb_size_mobile",sectionId:"mga-section-thumbnails",type:"int",format:ce},{key:"show_thumbs_mobile",controlId:"mga_show_thumbs_mobile",sectionId:"mga-section-thumbnails",type:"boolean",format:J},{key:"accent_color",controlId:"mga_accent_color",sectionId:"mga-section-appearance",type:"color",format:p=>p?p.toUpperCase():P()},{key:"bg_opacity",controlId:"mga_bg_opacity",sectionId:"mga-section-appearance",type:"float",format:we},{key:"background_style",controlId:"mga_background_style",sectionId:"mga-section-appearance",type:"select",format:p=>se("mga_background_style",p,p)},{key:"autoplay_start",controlId:"mga_autoplay_start",sectionId:"mga-section-playback",type:"boolean",format:J},{key:"loop",controlId:"mga_loop",sectionId:"mga-section-playback",type:"boolean",format:J},{key:"show_zoom",controlId:"mga_show_zoom",sectionId:"mga-section-toolbar",type:"boolean",format:J},{key:"show_download",controlId:"mga_show_download",sectionId:"mga-section-toolbar",type:"boolean",format:J},{key:"show_share",controlId:"mga_show_share",sectionId:"mga-section-toolbar",type:"boolean",format:J},{key:"show_cta",controlId:"mga_show_cta",sectionId:"mga-section-toolbar",type:"boolean",format:J},{key:"show_fullscreen",controlId:"mga_show_fullscreen",sectionId:"mga-section-toolbar",type:"boolean",format:J}],de=()=>e("R\xE9glages recommand\xE9s","lightbox-jlg"),ae=(p,h)=>{switch(p.type){case"int":{let j=parseInt(h,10);return Number.isFinite(j)?j:null}case"float":{let j=parseFloat(h);return Number.isFinite(j)?Math.round(j*100)/100:null}case"boolean":return!!h;case"color":return Xe(h);case"select":return typeof h=="string"?h:"";default:return h}},De=(p={})=>{let h={};return $e.forEach(j=>{Object.prototype.hasOwnProperty.call(p,j.key)&&(h[j.key]=ae(j,p[j.key]))}),h},ze=De($),te=null,ue=new Map,fe={key:"",label:de(),settings:{...ze}},ot=p=>{let h=n.getElementById(p.controlId);if(!h)return p.type==="boolean"?!1:p.type==="select"?"":null;switch(p.type){case"boolean":return!!h.checked;case"select":return h.value||"";case"color":return Xe(h.value);default:return h.value}},Te=(p,h,j)=>p.type==="float"?h===null&&j===null?!0:h===null||j===null?!1:Math.abs(h-j)<.01:h===j,dt=()=>{$e.forEach(p=>{p.label||(p.label=Q(p.controlId,""))})},Qe=p=>{!te||typeof te.setSectionModified!="function"||p.forEach((h,j)=>{let Se=j?n.getElementById(j):null;Se&&te.setSectionModified(Se,!!h)})},ie=()=>{dt();let p=[],h=new Map;return $e.forEach(j=>{let Se=Object.prototype.hasOwnProperty.call(fe.settings,j.key)?fe.settings[j.key]:ze[j.key],ke=ae(j,ot(j)),je=!Te(j,Se,ke);je&&p.push({key:j.key,label:j.label||"",baselineLabel:j.format(Se),currentLabel:j.format(ke)}),h.has(j.sectionId)?je&&h.set(j.sectionId,!0):h.set(j.sectionId,je)}),Qe(h),ue=h,p},Je=({key:p="",label:h="",settings:j={}}={})=>{fe={key:p,label:h&&h.trim()!==""?h:de(),settings:{...ze,...De(j)}},ie()},vt=p=>{te=p,ue.size>0&&Qe(ue)},Ce=()=>({key:fe.key,label:fe.label});return Je({settings:fe.settings}),{refresh:ie,setBaseline:Je,getBaselineInfo:Ce,getDefaultLabel:de,setNavigationApi:vt}};!n||typeof n.addEventListener!="function"||n.addEventListener("DOMContentLoaded",function(){var _t;let $=n.querySelector("[data-mga-settings-form]")||n.querySelector(".mga-admin-wrap form"),P=n.querySelector(".mga-admin-wrap"),T=()=>{},K=null,q=null,ce="mgaAdminThemePreference",we=["light","dark","system"],J=P?P.querySelector("[data-mga-theme-select]"):null,se=typeof t.matchMedia=="function"?t.matchMedia("(prefers-color-scheme: dark)"):null,Q=()=>{try{return t.localStorage?t.localStorage.getItem(ce):null}catch(r){return null}},$e=r=>{try{if(!t.localStorage)return;if(!r){t.localStorage.removeItem(ce);return}t.localStorage.setItem(ce,r)}catch(s){}},de=r=>{if(typeof r!="string")return"system";let s=r.trim().toLowerCase();return we.includes(s)?s:"system"},ae=de(Q()),De=r=>r==="dark"?"dark":r==="light"?"light":(se&&typeof se.matches=="boolean"?se.matches:!1)?"dark":"light",ze=(r,s={})=>{if(!P)return;let c=de(r),E=De(c);P.setAttribute("data-mga-theme-preference",c),P.setAttribute("data-mga-theme",E),P.classList.toggle("is-theme-dark",E==="dark"),P.classList.toggle("is-theme-light",E!=="dark"),J&&J.value!==c&&(J.value=c),s.skipStorage||$e(c==="system"?"":c),ae=c};P&&ze(ae,{skipStorage:!0}),J&&(J.value=ae,J.addEventListener("change",r=>{let s=de(r.target?r.target.value:null);ze(s)}));let te=()=>{ae==="system"&&ze("system",{skipStorage:!0})};se&&(typeof se.addEventListener=="function"?se.addEventListener("change",te):typeof se.addListener=="function"&&se.addListener(te));let fe=(r=>{let s=n.querySelector("[data-mga-wizard]");if(!s)return null;let c=Array.from(s.querySelectorAll("[data-mga-step-panel]")),E=Array.from(s.querySelectorAll("[data-mga-step-indicator]")),C=s.querySelector("[data-mga-step-prev]"),L=s.querySelector("[data-mga-step-next]"),W=s.querySelector("[data-mga-step-submit]"),Y=s.querySelector("[data-mga-save-status]"),R=c.length-1,I=c.findIndex(l=>l.classList.contains("is-active"));I<0&&(I=0);let D=()=>t.mgaAdminConfig&&t.mgaAdminConfig.messages||{},U=(l,w)=>{if(!Y)return;let M=w||D()[l]||"";Y.textContent=M,Y.setAttribute("data-mga-status-state",l)},G=()=>{C&&(C.disabled=I===0),L&&(L.hidden=I>=R),W&&(W.hidden=I<R)},Z=l=>{if(!l)return;let w=l.querySelector("[data-mga-step-title]")||l,M=Ye()?{preventScroll:!0}:void 0;t.requestAnimationFrame(()=>{Ve(w,M)})},_e=l=>{l.classList.remove("is-active"),l.setAttribute("hidden","hidden"),l.setAttribute("aria-hidden","true")},me=l=>{l.classList.add("is-active"),l.removeAttribute("hidden"),l.setAttribute("aria-hidden","false")},ve=()=>{E.forEach((l,w)=>{l.classList.toggle("is-active",w===I),l.classList.toggle("is-completed",w<I),l.setAttribute("aria-current",w===I?"step":"false")})},k=(()=>{let l=null,w=s.querySelector("[data-mga-summary-preset]"),M=s.querySelector("[data-mga-summary-timing]"),B=s.querySelector("[data-mga-summary-toolbar]"),o=s.querySelector("[data-mga-summary-share]"),y=s.querySelector("[data-mga-summary-validations]"),u=s.querySelector("[data-mga-summary-diff]"),S=u?u.querySelector("[data-mga-summary-diff-list]"):null,x=u?u.querySelector("[data-mga-summary-diff-baseline]"):null,V=u?u.querySelector("[data-mga-summary-diff-empty]"):null,X=s.querySelector("[data-mga-summary-scoreboard]"),xe=(()=>{let b=new Map;return X&&X.querySelectorAll("[data-mga-scorecard]").forEach(d=>{let v=d.getAttribute("data-mga-score-key");v&&b.set(v,d)}),b})(),Ae=(b,d)=>{let v=xe.get(b);if(!v||!d)return;let O=d.level||"info";v.setAttribute("data-score-level",O);let H=v.querySelector("[data-mga-scorecard-status]");H&&(H.textContent=d.message||"");let re=v.querySelector("[data-mga-scorecard-points]");re&&Array.isArray(d.points)&&d.points.forEach(ne=>{if(!ne||!ne.key)return;let Ue=re.querySelector(`[data-point="${ne.key}"]`);if(!Ue)return;let F=ne.state||"info";Ue.setAttribute("data-point-state",F),typeof ne.text=="string"&&(Ue.textContent=ne.text)})},Me=b=>{!b||!xe.size||Object.keys(b).forEach(d=>{Ae(d,b[d])})},xt={positive:0,info:1,warning:2,alert:3},at=b=>{if(!Array.isArray(b)||b.length===0)return"info";let d="positive";return b.forEach(v=>{let O=v&&v.state?v.state:"info";xt[O]>xt[d]&&(d=O)}),d},it=(b,d)=>{let O={ux:{positive:e("Parcours fluide et align\xE9 sur les extensions premium.","lightbox-jlg"),info:e("Quelques optimisations UX restent possibles.","lightbox-jlg"),warning:e("Ajustez le rythme ou la navigation pour \xE9galer les standards pro.","lightbox-jlg"),alert:e("Corrigez les r\xE9glages UX critiques avant publication.","lightbox-jlg")},accessibility:{positive:e("Accessible par d\xE9faut\xA0: pr\xEAt pour un audit WCAG.","lightbox-jlg"),info:e("Affinez deux ou trois points pour une accessibilit\xE9 parfaite.","lightbox-jlg"),warning:e("Renforcez l\u2019accessibilit\xE9 pour rester au niveau des lightbox professionnelles.","lightbox-jlg"),alert:e("Corrigez les probl\xE8mes d\u2019accessibilit\xE9 avant publication.","lightbox-jlg")},reliability:{positive:e("Stack pr\xEAte pour une mise en production sans surprise.","lightbox-jlg"),info:e("V\xE9rifiez vos fallbacks pour \xE9galer la robustesse des offres pro.","lightbox-jlg"),warning:e("S\xE9curisez la configuration avant de la confier \xE0 vos clients.","lightbox-jlg"),alert:e("Corrigez les risques critiques pour garantir la fiabilit\xE9.","lightbox-jlg")},visual:{positive:e("Palette pr\xEAte \xE0 impressionner vos visiteurs.","lightbox-jlg"),info:e("Peaufinez les presets pour un rendu au niveau premium.","lightbox-jlg"),warning:e("Ajustez les \xE9l\xE9ments visuels pour conserver une identit\xE9 coh\xE9rente.","lightbox-jlg"),alert:e("Corrigez la couleur ou le style avant publication.","lightbox-jlg")}}[b]||{};return O[d]||O.info||""},Wt=b=>{let d=n.getElementById(b);if(!d)return Number.NaN;let v=parseFloat(d.value);return Number.isNaN(v)?Number.NaN:v},pt=b=>{let d=n.getElementById(b);return!d||typeof d.value!="string"?"":d.value},At=(b,d)=>{let v=n.getElementById(b);if(!v)return d||"";let O=Array.from(v.options).find(H=>H.selected);return O&&O.textContent?O.textContent:d||""},Fe=b=>{let d=n.getElementById(b);return d?!!d.checked:!1},Gt=b=>{if(!Number.isFinite(b))return"\u2014";let d=Math.round(b*10)/10;return Math.abs(d-Math.round(d))<.01?String(Math.round(d)):d.toFixed(1)},Qt=(b,d,v)=>{if(!xe.size)return null;let O=Array.isArray(b)?b.find(F=>F&&F.severity==="error")||b.find(F=>F&&F.severity==="warning"):null,H=()=>{let F=Wt("mga_delay"),pe=pt("mga_effect"),ge=At("mga_effect",pe),Ie=Fe("mga_autoplay_start"),he=Fe("mga_show_thumbs_mobile"),Oe=pt("mga_thumbs_layout"),Ee=[],ye=Gt(F),le="positive",Le=m(e("Tempo confortable : %1$s\xA0s par diapositive.","lightbox-jlg"),ye);Number.isFinite(F)?F<2.5?(le="alert",Le=m(e("Tempo tr\xE8s rapide (%1$s\xA0s) : ralentissez pour laisser le temps de lecture.","lightbox-jlg"),ye)):(F<3||F>6)&&(le="warning",Le=m(e("Tempo \xE0 %1$s\xA0s : ciblez entre 3 et 6\xA0s pour un rythme premium.","lightbox-jlg"),ye)):(le="info",Le=e("Renseignez le tempo du diaporama pour caler la cadence.","lightbox-jlg")),Ee.push({key:"delay",state:le,text:Le});let Ne="positive",Pe=e("Miniatures ou navigation mobile affich\xE9es : rep\xE8res clairs.","lightbox-jlg");Oe==="hidden"&&!he?(Ne="warning",Pe=e("Activez les miniatures ou la navigation mobile pour guider vos visiteurs.","lightbox-jlg")):Oe==="hidden"&&(Ne="info",Pe=e("Miniatures masqu\xE9es sur desktop : v\xE9rifiez que les fl\xE8ches restent visibles.","lightbox-jlg")),Ee.push({key:"navigation",state:Ne,text:Pe});let He=new Set(["cube","coverflow","flip"]),lt=typeof pe=="string"?pe.toLowerCase():"",Ke=ge||pe||"slide",Be="positive",We=m(e("Transition \xAB\xA0%1$s\xA0\xBB adapt\xE9e au parcours.","lightbox-jlg"),Ke);He.has(lt)&&Ie?(Be="warning",We=m(e("Effet 3D \xAB\xA0%1$s\xA0\xBB avec autoplay : envisagez un d\xE9marrage manuel pour le confort utilisateur.","lightbox-jlg"),Ke)):He.has(lt)?(Be="info",We=m(e("Effet 3D \xAB\xA0%1$s\xA0\xBB activ\xE9 : testez la performance sur mobile.","lightbox-jlg"),Ke)):pe||(Be="info",We=e("Choisissez un effet pour personnaliser le ressenti.","lightbox-jlg")),Ee.push({key:"animation",state:Be,text:We});let rt=at(Ee),ct=it("ux",rt);return{level:rt,message:ct,points:Ee}},re=()=>{let F=Fe("mga_autoplay_start"),pe=Fe("mga_start_on_clicked_image"),ge=[],Ie="positive",he=e("Contraste valid\xE9 : aucun blocage d\xE9tect\xE9.","lightbox-jlg");O&&(Ie=O.severity==="error"?"alert":"warning",he=O.message),ge.push({key:"contrast",state:Ie,text:he});let Oe="positive",Ee=e("Lecture d\xE9clench\xE9e par l\u2019utilisateur : confort respect\xE9.","lightbox-jlg");F&&(Oe="warning",Ee=e("D\xE9sactivez le d\xE9marrage automatique pour laisser le contr\xF4le aux visiteurs.","lightbox-jlg")),ge.push({key:"autoplay",state:Oe,text:Ee});let ye="positive",le=e("La visionneuse s\u2019ouvre sur l\u2019image cliqu\xE9e : orientation conserv\xE9e.","lightbox-jlg");pe||(ye="info",le=e("Activez \xAB\xA0D\xE9marrer sur l\u2019image cliqu\xE9e\xA0\xBB pour \xE9viter les sauts de focus.","lightbox-jlg")),ge.push({key:"context",state:ye,text:le});let Le=at(ge),Ne=it("accessibility",Le);return{level:Le,message:Ne,points:ge}},ne=()=>{let F=Fe("mga_include_svg"),pe=Fe("mga_allow_body_fallback"),ge=Fe("mga_debug_mode"),Ie=Fe("mga_load_on_archives"),he=[],Oe=F?"positive":"alert",Ee=e(F?"Ic\xF4nes SVG locales actives : vos contr\xF4les restent visibles hors connexion.":"R\xE9activez les ic\xF4nes SVG locales pour \xE9viter les boutons invisibles si le CDN est indisponible.","lightbox-jlg");he.push({key:"assets",state:Oe,text:Ee});let ye=pe?"positive":"info",le=e(pe?"Fallback \xAB\xA0body\xA0\xBB actif : compatibilit\xE9 renforc\xE9e avec les constructeurs de pages.":"Activez le fallback \xAB\xA0body\xA0\xBB si vos galeries sont inject\xE9es dynamiquement.","lightbox-jlg");Ie&&(ye="positive",le=e("Chargement sur les pages d\u2019archives activ\xE9 : visionneuse pr\xEAte dans les listes.","lightbox-jlg")),he.push({key:"fallback",state:ye,text:le});let Le=ge?"warning":"positive",Ne=e(ge?"D\xE9sactivez le mode debug pour \xE9viter les logs verbeux en production.":"Mode debug d\xE9sactiv\xE9 : stabilit\xE9 optimale.","lightbox-jlg");he.push({key:"debug",state:Le,text:Ne});let Pe=at(he),He=it("reliability",Pe);return{level:Pe,message:He,points:he}},Ue=()=>{let F=n.getElementById("mga_style_preset"),pe=F&&typeof F.value=="string"?F.value:"",ge=n.getElementById("mga_accent_color"),Ie=ge&&typeof ge.value=="string"?ge.value.trim():"",he=pt("mga_background_style"),Oe=At("mga_background_style",he),Ee=Array.isArray(d)&&d.length>0,ye=v&&v.label?v.label:"",le=[],Ne=(()=>{if(F){let gt=Array.from(F.options).find(sr=>sr.value===pe);if(gt&&gt.textContent)return gt.textContent.trim()}return ye||""})(),Pe="info",He=e("Aucun preset s\xE9lectionn\xE9 : testez les styles propos\xE9s pour un rendu premium.","lightbox-jlg");pe?(Pe="positive",He=m(e("Preset professionnel \xAB\xA0%1$s\xA0\xBB appliqu\xE9.","lightbox-jlg"),Ne||pe)):Ee&&(Pe="positive",He=ye?m(e("Palette personnalis\xE9e bas\xE9e sur \xAB\xA0%1$s\xA0\xBB.","lightbox-jlg"),ye):e("Palette personnalis\xE9e active.","lightbox-jlg")),le.push({key:"preset",state:Pe,text:He});let lt=Ie.toLowerCase(),Ke="positive",Be=e("Couleur d\u2019accent personnalis\xE9e pr\xEAte \xE0 \xEAtre d\xE9clin\xE9e.","lightbox-jlg");qe(Ie)?lt==="#ffffff"?(Ke="info",Be=e("Personnalisez la couleur d\u2019accent pour refl\xE9ter votre marque.","lightbox-jlg")):Be=m(e("Accent d\xE9fini sur %1$s : pensez \xE0 l\u2019harmoniser avec vos CTA.","lightbox-jlg"),Ie.toUpperCase()):(Ke="alert",Be=e("Couleur d\u2019accent invalide : utilisez un code hexad\xE9cimal (#123ABC).","lightbox-jlg")),le.push({key:"accent",state:Ke,text:Be});let We="info",rt=e("Choisissez un style de fond (\xE9cho, blur, texture) pour enrichir la sc\xE9nographie.","lightbox-jlg");he&&(We="positive",rt=m(e("Arri\xE8re-plan \xAB\xA0%1$s\xA0\xBB activ\xE9 pour cr\xE9er de la profondeur.","lightbox-jlg"),Oe||he)),le.push({key:"background",state:We,text:rt});let ct=at(le),or=it("visual",ct);return{level:ct,message:or,points:le}};return{ux:H(),accessibility:re(),reliability:ne(),visual:Ue()}},Yt=()=>{if(!B)return;let d=[{id:"mga_show_zoom",label:e("Zoom","lightbox-jlg")},{id:"mga_show_download",label:e("T\xE9l\xE9chargement","lightbox-jlg")},{id:"mga_show_share",label:e("Partage","lightbox-jlg")},{id:"mga_show_cta",label:e("Appel \xE0 l\u2019action","lightbox-jlg")},{id:"mga_show_fullscreen",label:e("Plein \xE9cran","lightbox-jlg")}].filter(v=>{let O=n.getElementById(v.id);return O?O.checked:!1});B.textContent=d.length>0?d.map(v=>v.label).join(", "):e("Aucun bouton affich\xE9","lightbox-jlg")},Xt=(b,d)=>{if(!w)return;let v=n.getElementById("mga_style_preset"),O=v?v.value:"",H="";if(v&&O){let re=Array.from(v.options).find(ne=>ne.value===O);re&&(H=re.textContent||"")}H||(b.length>0&&d&&d.label?H=m(e("Personnalis\xE9 \xE0 partir de %1$s","lightbox-jlg"),d.label):b.length>0?H=e("R\xE9glages personnalis\xE9s","lightbox-jlg"):d&&d.label?H=d.label:t.mgaStylePresets&&typeof t.mgaStylePresets.customDescription=="string"?H=t.mgaStylePresets.customDescription:H=e("R\xE9glages personnalis\xE9s","lightbox-jlg")),w.textContent=H},Jt=()=>{if(!M)return;let b=n.getElementById("mga_delay"),d=n.getElementById("mga_effect"),v=b&&b.value?b.value:"\u2014",O=e("Transition personnalis\xE9e","lightbox-jlg");if(d){let H=Array.from(d.options).find(re=>re.selected);O=H?H.textContent:O}M.textContent=m(e("Diaporama : %1$s\xA0s \xB7 Effet : %2$s","lightbox-jlg"),v,O)},Zt=()=>{if(!o)return;let d=Array.from(n.querySelectorAll("[data-share-repeater-item]")).filter(v=>{let O=v.querySelector('[data-share-field="enabled"]');return O?O.checked:!1}).map(v=>{let O=v.querySelector('[data-share-field="label"]'),H=v.querySelector('[data-share-field="key"]'),re=O&&O.value?O.value.trim():"",ne=H&&H.value?H.value.trim():"";return re||(ne?ne.toUpperCase():e("Canal sans titre","lightbox-jlg"))});d.length>0?o.textContent=m(e("%1$d canaux actifs : %2$s","lightbox-jlg"),d.length,d.join(", ")):o.textContent=e("Aucun canal actif","lightbox-jlg")},er=()=>{if(!K||typeof K.readAudit!="function")return[];let b=K.readAudit();return!b||!Array.isArray(b.entries)?[]:b.entries.filter(d=>d&&(d.severity==="warning"||d.severity==="error")).map(d=>{let v=d.severity==="error"?m(e("Contraste %1$s insuffisant\xA0: %2$s. Ajustez la couleur ou le fond pour atteindre au moins 3,0 (AA\xA0\u2265\xA04,5).","lightbox-jlg"),d.label,d.ratioText):m(e("Contraste %1$s limit\xE9\xA0: %2$s. Augmentez l\xE9g\xE8rement pour viser AA (\u2265\xA04,5).","lightbox-jlg"),d.label,d.ratioText);return{severity:d.severity,message:v}})},tr=b=>{if(y){if(y.innerHTML="",!b||b.length===0){y.setAttribute("hidden","hidden");return}y.removeAttribute("hidden"),b.forEach(d=>{let v=n.createElement("div");v.className="mga-summary__alert",v.setAttribute("data-mga-severity",d.severity),v.textContent=d.message,y.appendChild(v)})}},rr=(b,d)=>{if(!(!u||!S)){if(S.innerHTML="",!b||b.length===0){u.setAttribute("hidden","hidden"),x&&(x.textContent=""),V&&V.setAttribute("hidden","hidden");return}u.removeAttribute("hidden"),x&&(x.textContent=d&&d.label?m(e("Base\xA0: %1$s","lightbox-jlg"),d.label):""),V&&V.setAttribute("hidden","hidden"),b.forEach(v=>{let O=n.createElement("li");O.className="mga-summary__diff-item";let H=n.createElement("span");H.className="mga-summary__diff-label",H.textContent=v.label,O.appendChild(H);let re=n.createElement("span");re.className="mga-summary__diff-values";let ne=n.createElement("span");ne.className="mga-summary__diff-before",ne.textContent=v.baselineLabel,re.appendChild(ne);let Ue=n.createElement("span");Ue.textContent="\u2192",re.appendChild(Ue);let F=n.createElement("span");F.className="mga-summary__diff-after",F.textContent=v.currentLabel,re.appendChild(F),O.appendChild(re),S.appendChild(O)})}},nr=()=>{let b=q?q.refresh():[],d=q?q.getBaselineInfo():{label:"",key:""},v=er();Xt(b,d),Jt(),Yt(),Zt(),rr(b,d),tr(v),Me(Qt(v,b,d))};return()=>{l&&t.clearTimeout(l),l=t.setTimeout(()=>{l=null,nr()},120)}})(),A=l=>{let w=Math.max(0,Math.min(c.length-1,l));if(w===I)return;let M=c[I],B=c[w];M&&_e(M),B&&(me(B),Z(B)),I=w,ve(),G(),I===R&&k()},z=()=>{r&&typeof r.reportValidity=="function"&&!r.reportValidity()||A(I+1)},i=()=>{A(I-1)},g=()=>{E.forEach((l,w)=>{l.addEventListener("click",M=>{if(M.preventDefault(),w<I&&w>=0)A(w);else if(w>I&&w<=R){if(r&&typeof r.reportValidity=="function"&&!r.reportValidity())return;A(w)}})})};C&&C.addEventListener("click",l=>{l.preventDefault(),i()}),L&&L.addEventListener("click",l=>{l.preventDefault(),z()}),g(),ve(),G(),I===R&&k();let f=()=>{k()};return r&&(r.addEventListener("change",f),r.addEventListener("input",f)),{scheduleSummaryUpdate:k,setStatusMessage:U,goToSummary:()=>A(R)}})($);fe&&typeof fe.scheduleSummaryUpdate=="function"&&(T=fe.scheduleSummaryUpdate),((r,s)=>{if(!r)return;let c=t.mgaAdminConfig||{},E=typeof c.ajaxUrl=="string"&&c.ajaxUrl?c.ajaxUrl:t.ajaxurl,C=typeof c.nonce=="string"?c.nonce:"",L=r.querySelector("[data-mga-step-submit]");if(!E||!C)return;let W=(R,I)=>{s&&typeof s.setStatusMessage=="function"&&s.setStatusMessage(R,I)},Y=R=>{L&&(L.disabled=R,L.setAttribute("aria-busy",R?"true":"false")),R&&W("saving")};r.addEventListener("submit",R=>{if(R.preventDefault(),typeof r.reportValidity=="function"&&!r.reportValidity())return;let I=new FormData(r);I.append("action","mga_save_settings"),I.append("_ajax_nonce",C),Y(!0),fetch(E,{method:"POST",credentials:"same-origin",body:I}).then(D=>{if(!D.ok)throw new Error(D.statusText||"HTTP error");return D.json()}).then(D=>{if(!D||D.success!==!0){let G=D&&D.data&&D.data.message?D.data.message:null;throw new Error(G||c.messages&&c.messages.error||e("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg"))}let U=D.data&&D.data.message?D.data.message:c.messages&&c.messages.success||e("R\xE9glages enregistr\xE9s.","lightbox-jlg");W("success",U),T()}).catch(D=>{let U=c.messages&&c.messages.error?c.messages.error:e("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg");W("error",D&&D.message?D.message:U)}).finally(()=>{Y(!1)})})})($,fe);let dt=(()=>{let r={setSectionModified:()=>{}},s=n.querySelector("[data-mga-settings-layout]");if(!s)return r;let c=Array.from(s.querySelectorAll("[data-mga-settings-section]"));if(c.length===0)return r;let E=s.querySelector("[data-mga-settings-nav]"),C=E?Array.from(E.querySelectorAll("[data-mga-section-link]")):[],L=new Map,W=new Map,Y=new Map,R=s.querySelector("[data-mga-view-toggle]"),I=R?R.querySelector("[data-mga-view-select]"):null,D="mga-settings-view-mode",G=(()=>{if(typeof t.localStorage=="undefined")return"essential";try{return t.localStorage.getItem(D)==="advanced"?"advanced":"essential"}catch(o){return"essential"}})(),Z=()=>{I&&(I.value=G)},_e=()=>{if(typeof t.localStorage!="undefined")try{t.localStorage.setItem(D,G)}catch(o){}},me=()=>{s.setAttribute("data-mga-view-mode",G)},ve=o=>o&&o.getAttribute("data-mga-visibility")==="essential"?"essential":"advanced",k=s.querySelector("[data-mga-settings-search]"),A=s.querySelector("[data-mga-search-empty]"),z=new WeakMap,i=()=>s.getAttribute("data-mga-search-active")==="true",g=(o,y)=>{A&&(y&&o===0?A.removeAttribute("hidden"):A.setAttribute("hidden","hidden"))},f=o=>{o&&L.forEach((y,u)=>{u===o?y.setAttribute("aria-current","true"):y.removeAttribute("aria-current")})},l=()=>{c.forEach(o=>{o.removeAttribute("data-mga-section-highlight"),z.has(o)&&(t.clearTimeout(z.get(o)),z.delete(o))})},w=o=>{if(!o)return;o.setAttribute("data-mga-section-highlight","true"),z.has(o)&&t.clearTimeout(z.get(o));let y=t.setTimeout(()=>{o.removeAttribute("data-mga-section-highlight"),z.delete(o)},1600);z.set(o,y)},M=o=>{let y=typeof o=="string"?o.trim().toLowerCase():"",u=y.length>0,S=0;if(u?s.setAttribute("data-mga-search-active","true"):(s.removeAttribute("data-mga-search-active"),l()),c.forEach(x=>{let V=L.get(x),X=W.get(x);if(!u){if(G==="essential"&&ve(x)==="advanced"){x.setAttribute("hidden","hidden"),V&&(V.setAttribute("hidden","hidden"),V.removeAttribute("aria-current")),X&&X.setAttribute("hidden","hidden");return}x.removeAttribute("hidden"),V&&V.removeAttribute("hidden"),X&&X.removeAttribute("hidden");return}(x.textContent||"").toLowerCase().includes(y)?(x.removeAttribute("hidden"),x.setAttribute("data-mga-section-highlight","true"),S+=1,V&&V.removeAttribute("hidden"),X&&X.removeAttribute("hidden")):(x.setAttribute("hidden","hidden"),x.removeAttribute("data-mga-section-highlight"),V&&(V.setAttribute("hidden","hidden"),V.removeAttribute("aria-current")),X&&X.setAttribute("hidden","hidden"))}),u){let x=c.find(V=>!V.hasAttribute("hidden"));x&&f(x)}g(S,u)},B=(o,y={})=>{let u=o==="advanced"?"advanced":"essential";if(u===G&&!y.force)return;G=u,Z(),me(),y.persist!==!1&&_e();let S=k&&k.value||"";M(S)};if(C.forEach(o=>{let y=o.getAttribute("href");if(!y||y.charAt(0)!=="#")return;let u=s.querySelector(y);if(!u)return;L.set(u,o);let S=o.closest("[data-mga-visibility]");if(S){W.set(u,S);let x=S.querySelector("[data-mga-modified-badge]");x||(x=n.createElement("span"),x.className="mga-settings-layout__badge",x.textContent=e("Modifi\xE9","lightbox-jlg"),x.hidden=!0,x.setAttribute("data-mga-modified-badge","true"),S.appendChild(x)),Y.set(u,x)}o.addEventListener("click",x=>{x.preventDefault(),u.hasAttribute("hidden")&&u.removeAttribute("hidden");try{u.scrollIntoView({behavior:"smooth",block:"start"})}catch(X){typeof u.scrollIntoView=="function"&&u.scrollIntoView()}f(u),w(u);let V=Ye()?{preventScroll:!0}:void 0;typeof t.requestAnimationFrame=="function"?t.requestAnimationFrame(()=>{Ve(u,V)}):Ve(u,V)})}),Z(),me(),I&&I.addEventListener("change",o=>{B(o.target.value||"essential")}),"IntersectionObserver"in t){let o=null,y=new IntersectionObserver(u=>{i()||(u.forEach(S=>{S.isIntersecting&&(o=S.target)}),o&&f(o))},{rootMargin:"-40% 0px -40% 0px",threshold:.1});c.forEach(u=>y.observe(u))}else{let o=()=>{if(i())return;let y=null,u=1/0,S=t.pageYOffset||n.documentElement.scrollTop||0;c.forEach(x=>{let X=x.getBoundingClientRect().top+S,xe=Math.abs(X-S-140);xe<u&&(y=x,u=xe)}),y&&f(y)};t.addEventListener("scroll",o,{passive:!0}),o()}return k?(k.addEventListener("input",o=>{M(o.target.value||"")}),M(k.value||"")):g(c.length,!1),B(G,{force:!0,persist:!1}),i()||f(c[0]),{setSectionModified(o,y){if(!o)return;let u=Y.get(o),S=W.get(o);u&&(u.hidden=!y),S&&(y?S.setAttribute("data-mga-modified","true"):S.removeAttribute("data-mga-modified"))}}})(),Qe=(r,s,c,E)=>{let C=n.getElementById(r),L=n.getElementById(s);if(!C||!L)return;let W=()=>{let Y=C.value,R=typeof c=="function"?c(Y):Y,I=typeof E=="function"?E(Y):R;typeof L.value!="undefined"&&(L.value=R),L.textContent=R,C.setAttribute("aria-valuenow",Y),C.setAttribute("aria-valuetext",I)};C.addEventListener("input",W),W()};Qe("mga_thumb_size","mga_thumb_size_value",r=>m(e("%spx","lightbox-jlg"),r),r=>m(e("%s pixels","lightbox-jlg"),r)),Qe("mga_thumb_size_mobile","mga_thumb_size_mobile_value",r=>m(e("%spx","lightbox-jlg"),r),r=>m(e("%s pixels","lightbox-jlg"),r)),Qe("mga_bg_opacity","mga_bg_opacity_value",r=>r,r=>m(e("%s opacity","lightbox-jlg"),r));let ie=n.getElementById("mga_accent_color"),Je=n.getElementById("mga_accent_color_preview");if(ie){let r=ie.getAttribute("data-default-color"),s=qe(r)?r:"#ffffff",c=C=>{let L=qe(C)?C:s;return Je&&(Je.style.backgroundColor=L),L};c(ie.value);let E=t.jQuery;E&&typeof E.fn=="object"&&typeof E.fn.wpColorPicker=="function"?(E(ie).wpColorPicker({change(C,L){let W=L&&L.color?L.color.toString():C.target.value;c(W)},clear(){let C=ie.getAttribute("data-default-color")||s;E(ie).val(C),c(C)}}),E(ie).on("input",C=>{c(C.target.value)})):ie.addEventListener("input",()=>{c(ie.value)})}K=Dt(),(()=>{let r=n.querySelector("[data-mga-live-preview]");if(!r)return;let s=r.querySelector("[data-mga-live-preview-mock]"),c=r.querySelector("[data-mga-preview-effect]"),E=r.querySelector("[data-mga-preview-thumbs]"),C=r.querySelector("[data-mga-preview-status]"),L=r.querySelector("[data-mga-preview-fallback]"),W=r.querySelector("[data-mga-preview-swiper]"),Y=r.querySelector("[data-mga-preview-pagination]"),R=r.querySelector("[data-mga-preview-next]"),I=r.querySelector("[data-mga-preview-prev]"),D={zoom:Array.from(r.querySelectorAll('[data-preview-action="zoom"]')),download:Array.from(r.querySelectorAll('[data-preview-action="download"]')),share:Array.from(r.querySelectorAll('[data-preview-action="share"]')),cta:Array.from(r.querySelectorAll('[data-preview-action="cta"]')),fullscreen:Array.from(r.querySelectorAll('[data-preview-action="fullscreen"]'))},U=null,G=o=>!o||typeof o!="object"||o.type==="init"?!1:o.type!=="input",Z=o=>{!C||typeof o!="string"||o.trim()===""||(C.textContent=o)},_e=o=>{r&&r.setAttribute("data-mga-preview-state",o)},me=o=>{_e("error"),L&&(L.hidden=!1,typeof o=="string"&&o.trim()!==""&&(L.textContent=o)),o&&Z(o)},ve=()=>{U&&typeof U.destroy=="function"&&U.destroy(!0,!0),U=null},k=(o,y)=>{let u=typeof o=="number"?o:parseFloat(o);return Number.isNaN(u)?y:u},A=()=>{let o=n.getElementById("mga_effect"),y=n.getElementById("mga_delay"),u=n.getElementById("mga_speed"),S=o?o.value:"slide",x=k(y?y.value:null,4),V=k(u?u.value:null,600),X=Math.max(Math.round(x*1e3),1e3),xe=Math.max(Math.round(V),100),Ae={allowTouchMove:!1,simulateTouch:!1,centeredSlides:!0,effect:S||"slide",loop:!0,slidesPerView:1,speed:xe};return Y&&(Ae.pagination={el:Y,clickable:!1}),R&&I&&(Ae.navigation={nextEl:R,prevEl:I}),!Number.isNaN(X)&&X>0&&(Ae.autoplay={delay:X,disableOnInteraction:!1}),Ae.effect==="fade"&&(Ae.fadeEffect={crossFade:!0}),Ae.on={init(Me){Me&&typeof Me.slideToLoop=="function"&&Me.slideToLoop(0,0,!1)}},Ae},z=()=>{if(!(!W||typeof t.Swiper!="function")){ve();try{U=new t.Swiper(W,A()),_e("ready")}catch(o){me(e("Impossible d\u2019initialiser l\u2019aper\xE7u Swiper.","lightbox-jlg"))}}};W?(L&&(L.hidden=!0),_e("loading"),Z(e("Pr\xE9paration de la pr\xE9visualisation\u2026","lightbox-jlg")),Mt(t,{namespace:"admin-preview"}).then(()=>{z(),U&&typeof U.update=="function"&&U.update(),Z(e("Pr\xE9visualisation pr\xEAte.","lightbox-jlg"))}).catch(()=>{me(e("Impossible de charger Swiper. La pr\xE9visualisation interactive est d\xE9sactiv\xE9e.","lightbox-jlg"))})):me(e("Pr\xE9visualisation indisponible\xA0: conteneur Swiper manquant.","lightbox-jlg"));let i=(o,y,u)=>{if(!s)return;let S=qe(o)?o:"#6366f1";s.style.setProperty("--mga-preview-accent",S),G(u)&&Z(e("Couleur d\u2019accent mise \xE0 jour.","lightbox-jlg"))},g=(o,y,u)=>{if(!s)return;let S=parseFloat(o);if(Number.isNaN(S))return;let x=Math.min(Math.max(S,0),1);s.style.setProperty("--mga-preview-overlay",`rgba(15, 23, 42, ${x})`),G(u)&&Z(e("Opacit\xE9 de l\u2019arri\xE8re-plan mise \xE0 jour.","lightbox-jlg"))},f=(o,y,u)=>{if(!s)return;let S=typeof o=="string"&&o?o:"echo";s.setAttribute("data-preview-style",S),G(u)&&Z(e("Style d\u2019arri\xE8re-plan actualis\xE9.","lightbox-jlg"))},l=(o,y,u,S)=>{if((D[o]||[]).forEach(V=>{V.setAttribute("data-preview-hidden",y?"false":"true"),V.setAttribute("aria-hidden",y?"false":"true")}),G(S)){let V={zoom:e("Zoom","lightbox-jlg"),download:e("T\xE9l\xE9chargement","lightbox-jlg"),share:e("Partage","lightbox-jlg"),cta:e("Appel \xE0 l\u2019action","lightbox-jlg"),fullscreen:e("Plein \xE9cran","lightbox-jlg")}[o]||o;Z(m(e(y?"%s activ\xE9 dans l\u2019aper\xE7u.":"%s masqu\xE9 dans l\u2019aper\xE7u.","lightbox-jlg"),V))}},w=(o,y,u)=>{if(!E)return;let S=parseFloat(o);if(Number.isNaN(S))E.style.setProperty("--mga-preview-thumb-scale","1");else{let x=Math.min(Math.max(S/90,.6),1.4);E.style.setProperty("--mga-preview-thumb-scale",x.toString())}G(u)&&Z(e("Taille des miniatures mise \xE0 jour.","lightbox-jlg"))},M=(o,y,u)=>{if(!c)return;let S=n.getElementById("mga_effect"),x=n.getElementById("mga_delay"),V=n.getElementById("mga_speed"),X=S?S.value:"",xe=x&&x.value||"4",Ae=V&&V.value||"600",Me=EFFECT_LABELS[X]||e("personnalis\xE9e","lightbox-jlg");c.textContent=m(e("Transition : %1$s \u2022 %2$ss / %3$sms","lightbox-jlg"),Me,xe,Ae),G(u)&&Z(m(e("Transition mise \xE0 jour\xA0: %1$s, rythme de %2$ss.","lightbox-jlg"),Me,xe)),z()},B=(o,y,u=["change"])=>{let S=n.getElementById(o);if(!S||typeof y!="function")return;let x=V=>{let X=S.type==="checkbox"?S.checked:S.value;y(X,S,V||{type:"init"})};u.forEach(V=>{S.addEventListener(V,x)}),x({type:"init"})};B("mga_accent_color",i,["input","change"]),B("mga_bg_opacity",g,["input","change"]),B("mga_background_style",f),B("mga_thumb_size",w,["input","change"]),B("mga_show_zoom",(o,y,u)=>l("zoom",o,y,u)),B("mga_show_download",(o,y,u)=>l("download",o,y,u)),B("mga_show_share",(o,y,u)=>l("share",o,y,u)),B("mga_show_cta",(o,y,u)=>l("cta",o,y,u)),B("mga_show_fullscreen",(o,y,u)=>l("fullscreen",o,y,u)),B("mga_effect",M),B("mga_delay",M,["input","change"]),B("mga_speed",M,["input","change"])})();let Ce=t.mgaStylePresets&&typeof t.mgaStylePresets=="object"?t.mgaStylePresets:{},p=Ce.presets&&typeof Ce.presets=="object"?Ce.presets:{},h=n.getElementById("mga_style_preset"),j=n.querySelector("[data-mga-apply-style-preset]"),Se=n.querySelector("[data-mga-reset-style-preset]"),ke=n.querySelector("[data-mga-style-preset-description]"),je=!1;q=Rt(Ce.defaults||{}),q&&typeof q.setNavigationApi=="function"&&q.setNavigationApi(dt);let Ze=(r,s)=>{if(!(!r||typeof r.dispatchEvent!="function"))try{r.dispatchEvent(new Event(s,{bubbles:!0}))}catch(c){if(typeof n.createEvent=="function")try{let E=n.createEvent("Event");E.initEvent(s,!0,!0),r.dispatchEvent(E)}catch(E){}}},ft=(r,s)=>{let c=n.getElementById(r);c&&(c.value=s,Ze(c,"input"),Ze(c,"change"))},mt=ft,st=(r,s)=>{let c=n.getElementById(r);c&&(c.value=s,Ze(c,"change"))},Re=(r,s)=>{let c=n.getElementById(r);c&&(c.checked=!!s,Ze(c,"change"))},Ft=r=>{if(!ie)return;let s=typeof r=="string"?r:"",c=t.jQuery;if(c&&typeof c.fn=="object"&&typeof c.fn.wpColorPicker=="function"){let E=c(ie);if(E&&typeof E.wpColorPicker=="function"){E.wpColorPicker("color",s),K&&K.update(s);return}}ie.value=s,Ze(ie,"change"),K&&K.update(s)},wt=r=>{!r||typeof r!="object"||(Object.prototype.hasOwnProperty.call(r,"delay")&&ft("mga_delay",r.delay),Object.prototype.hasOwnProperty.call(r,"speed")&&ft("mga_speed",r.speed),Object.prototype.hasOwnProperty.call(r,"effect")&&st("mga_effect",r.effect),Object.prototype.hasOwnProperty.call(r,"easing")&&st("mga_easing",r.easing),Object.prototype.hasOwnProperty.call(r,"thumbs_layout")&&st("mga_thumbs_layout",r.thumbs_layout),Object.prototype.hasOwnProperty.call(r,"thumb_size")&&mt("mga_thumb_size",r.thumb_size),Object.prototype.hasOwnProperty.call(r,"thumb_size_mobile")&&mt("mga_thumb_size_mobile",r.thumb_size_mobile),Object.prototype.hasOwnProperty.call(r,"show_thumbs_mobile")&&Re("mga_show_thumbs_mobile",r.show_thumbs_mobile),Object.prototype.hasOwnProperty.call(r,"accent_color")&&Ft(r.accent_color),Object.prototype.hasOwnProperty.call(r,"bg_opacity")&&mt("mga_bg_opacity",r.bg_opacity),Object.prototype.hasOwnProperty.call(r,"background_style")&&st("mga_background_style",r.background_style),Object.prototype.hasOwnProperty.call(r,"autoplay_start")&&Re("mga_autoplay_start",r.autoplay_start),Object.prototype.hasOwnProperty.call(r,"loop")&&Re("mga_loop",r.loop),Object.prototype.hasOwnProperty.call(r,"show_zoom")&&Re("mga_show_zoom",r.show_zoom),Object.prototype.hasOwnProperty.call(r,"show_download")&&Re("mga_show_download",r.show_download),Object.prototype.hasOwnProperty.call(r,"show_share")&&Re("mga_show_share",r.show_share),Object.prototype.hasOwnProperty.call(r,"show_cta")&&Re("mga_show_cta",r.show_cta),Object.prototype.hasOwnProperty.call(r,"show_fullscreen")&&Re("mga_show_fullscreen",r.show_fullscreen))},et=()=>{if(!ke)return;let r=h?h.value:"";if(r&&p[r]&&p[r].description){ke.textContent=p[r].description;return}let s=typeof Ce.customDescription=="string"?Ce.customDescription:"",c=q?q.getBaselineInfo():{label:"",key:""},E=c&&c.label?m(e("Base\xA0: %1$s.","lightbox-jlg"),c.label):"",C=[s,E].filter(L=>L&&L.trim()!=="");if(C.length===0){ke.textContent="";return}ke.textContent=C.join(" ")},Ut=()=>{je||(h&&h.value!==""&&(h.value=""),et(),q&&typeof q.refresh=="function"&&q.refresh(),T())},Ht=r=>{let s=n.getElementById(r);if(!s)return;let c=["change"];s.tagName==="INPUT"&&["text","number","range"].includes(s.type)&&c.push("input"),c.forEach(E=>{s.addEventListener(E,Ut)})};if(h&&(et(),h.addEventListener("change",et)),q)if(h&&h.value&&p[h.value]){let r=p[h.value];q.setBaseline({key:h.value,label:r.label||((_t=h.options[h.selectedIndex])==null?void 0:_t.text)||"",settings:r.settings||{}})}else q.setBaseline({key:"",label:q.getDefaultLabel(),settings:Ce.defaults||{}});j&&j.addEventListener("click",r=>{if(r.preventDefault(),!h)return;let s=h.value;!s||!p[s]||(je=!0,wt(p[s].settings||{}),q&&q.setBaseline({key:s,label:p[s].label||"",settings:p[s].settings||{}}),je=!1,et(),T())}),Se&&Se.addEventListener("click",r=>{r.preventDefault();let s=Ce.defaults||{};s&&typeof s=="object"&&Object.keys(s).length>0&&(je=!0,wt(s),q&&q.setBaseline({key:"",label:q.getDefaultLabel(),settings:s}),je=!1),h&&(h.value=""),et(),T()}),["mga_delay","mga_speed","mga_effect","mga_easing","mga_thumb_size","mga_thumb_size_mobile","mga_thumbs_layout","mga_accent_color","mga_bg_opacity","mga_background_style","mga_show_thumbs_mobile","mga_autoplay_start","mga_loop","mga_show_zoom","mga_show_download","mga_show_share","mga_show_cta","mga_show_fullscreen"].forEach(Ht);let St=n.querySelector("[data-share-repeater]");St&&Kt(St);let tt=n.querySelector("[data-mga-content-selectors]");if(tt){let r=tt.querySelector("[data-mga-content-selectors-list]"),s=tt.querySelector("[data-mga-content-selectors-textarea]"),c=n.getElementById("mga-content-selector-template"),E=tt.getAttribute("data-mga-selector-placeholder")||"",C=!1,L=()=>{};if(r){let W=()=>r.querySelectorAll("[data-mga-content-selector-row]"),Y=()=>r.querySelectorAll("[data-mga-content-selector-input]"),R=()=>Array.from(Y()).some(k=>k.value.trim()===""),I=()=>{let k=W(),A=k.length<=1;k.forEach(z=>{let i=z.querySelector("[data-mga-remove-selector]");i&&(i.disabled=A,i.setAttribute("aria-disabled",A?"true":"false"))})},D=()=>Array.from(Y()).map(k=>k.value.trim()).filter(k=>k!==""),U=()=>{if(!s||C)return;let k=D();C=!0,s.value=k.join(`
`),C=!1},G=k=>{if(!k||k.getAttribute("data-mga-selector-bound")==="true")return;let A=k.querySelector("[data-mga-remove-selector]");A&&A.addEventListener("click",i=>{if(i.preventDefault(),W().length<=1){let f=k.querySelector("[data-mga-content-selector-input]");f&&(f.value="",U());return}k.remove(),I(),U()});let z=k.querySelector("[data-mga-content-selector-input]");z&&(z.addEventListener("input",()=>{C||U()}),z.addEventListener("keydown",i=>{if(i.key!=="Enter"||i.shiftKey||i.altKey||i.metaKey||i.ctrlKey)return;if(i.preventDefault(),!R()&&typeof L=="function"){L("");return}let g=W();if(g.length===0)return;let f=g[g.length-1];if(!f)return;let l=f.querySelector("[data-mga-content-selector-input]");l&&l!==i.target&&Ve(l)}),E&&!z.getAttribute("placeholder")&&z.setAttribute("placeholder",E)),k.setAttribute("data-mga-selector-bound","true")},Z=(k="")=>{let A=null;if(c&&c.content&&(A=n.importNode(c.content,!0).firstElementChild,A)){let f=A.querySelector("[data-mga-content-selector-input]");return f&&(f.value=k,E&&f.setAttribute("placeholder",E)),G(A),A}A=n.createElement("div"),A.className="mga-content-selectors__row",A.setAttribute("data-mga-content-selector-row","");let z=n.createElement("input");z.type="text",z.className="regular-text",z.setAttribute("data-mga-content-selector-input",""),z.value=k,E&&z.setAttribute("placeholder",E),A.appendChild(z);let i=n.createElement("button");return i.type="button",i.className="button-link mga-content-selectors__remove",i.setAttribute("data-mga-remove-selector",""),i.textContent=e("Retirer","lightbox-jlg"),A.appendChild(i),G(A),A},_e=k=>{if(r.innerHTML="",k.length===0){let A=Z("");A&&r.appendChild(A)}else k.forEach(A=>{let z=Z(A);z&&r.appendChild(z)});I()},me=()=>{if(!s||C)return;let k=s.value.split(/\r\n|\r|\n/).map(A=>A.trim()).filter(A=>A.length>0);C=!0,_e(k),C=!1};L=(k="")=>{let A=Z(k);if(A){r.appendChild(A),I();let z=A.querySelector("[data-mga-content-selector-input]");z&&Ve(z)}U()},s?(me(),s.addEventListener("input",()=>{C||me()})):_e([]);let ve=tt.querySelector("[data-mga-add-selector]");ve&&ve.addEventListener("click",k=>{k.preventDefault(),L()})}}function Kt(r){let s=r.querySelector("[data-share-repeater-list]"),c=r.querySelector("[data-share-repeater-add]"),E=n.getElementById("mga-share-channel-template");if(!s||!E)return;let C=Date.now(),L=()=>(C+=1,`mga-share-channel-${C}`),W=i=>i?((!i.dataset.shareUid||i.dataset.shareUid.trim()==="")&&(i.dataset.shareUid=L()),i.dataset.shareUid):null,Y=i=>{let g=W(i);if(!g)return;i.querySelectorAll("[data-share-id-suffix]").forEach(l=>{let w=l.getAttribute("data-share-id-suffix");if(!w)return;let M=`${g}-${w}`;l.tagName==="LABEL"?l.setAttribute("for",M):l.id=M})},R=i=>{if(!i)return;let g=i.querySelector("[data-share-repeater-title]");if(!g)return;let f=i.querySelector('[data-share-field="label"]'),l=i.querySelector('[data-share-field="key"]'),w=f&&typeof f.value=="string"?f.value.trim():"",M=l&&typeof l.value=="string"?l.value.trim():"",B=M?M.toUpperCase():e("Nouveau canal","lightbox-jlg");g.textContent=w||B},I=i=>{if(!i)return;let g=i.querySelector("[data-share-icon-preview]"),f=i.querySelector('[data-share-field="icon"]');if(!g)return;let l=f?f.value:"",w=_(l);g.innerHTML="",w&&g.appendChild(w);let M=i.querySelector("[data-share-preview-icon]");if(M){M.innerHTML="";let B=_(l);B&&M.appendChild(B)}},D=(i,g)=>!i||!g?null:i.querySelector(`[data-share-field="${g}"]`),U=(i,g)=>{let f=D(i,g);return f&&typeof f.value=="string"?f.value.trim():""},G=i=>{if(typeof i!="string")return"";let g=i;return Object.keys(N).forEach(f=>{let l=encodeURIComponent(N[f]);g=g.replace(new RegExp(f,"gi"),l)}),g},Z=i=>/%url%/i.test(typeof i=="string"?i:""),_e=i=>{if(typeof i!="string")return!1;let g=i.trim();if(g==="")return!1;let f=g.split(":")[0].toLowerCase();return be.includes(f)?f==="http"||f==="https"?/^https?:\/\//i.test(g):!0:!1},me=(i,g,f)=>{let l=typeof f=="string"&&f!=="";i&&(l?(i.classList.add("mga-field-error"),i.setAttribute("aria-invalid","true")):(i.classList.remove("mga-field-error"),i.removeAttribute("aria-invalid"))),g&&(l?(g.textContent=f,g.removeAttribute("hidden")):(g.textContent="",g.setAttribute("hidden","hidden")))},ve=i=>{if(!i)return;let g=i.querySelector("[data-share-preview]");if(!g)return;let f=g.querySelector("[data-share-preview-label]"),l=g.querySelector("[data-share-preview-url]"),w=U(i,"label"),M=U(i,"key"),B=M?M.toUpperCase():e("Nouveau canal","lightbox-jlg");if(f&&(f.textContent=w||B),l){let o=U(i,"template");if(o){let y=G(o);l.textContent=y,l.setAttribute("data-preview-empty","false"),l.title=y}else l.textContent=e("Compl\xE9tez le mod\xE8le pour g\xE9n\xE9rer un lien.","lightbox-jlg"),l.setAttribute("data-preview-empty","true"),l.removeAttribute("title")}T()},k=()=>{let i=Array.from(s.querySelectorAll("[data-share-repeater-item]")),g=i.reduce((f,l)=>{let w=U(l,"key").toLowerCase();return w&&(f[w]=(f[w]||0)+1),f},{});i.forEach(f=>{let l=D(f,"key"),w=D(f,"template"),M=f.querySelector('[data-share-error="key"]'),B=f.querySelector('[data-share-error="template"]'),o=U(f,"key"),y=o.toLowerCase(),u="";o?/^[a-z0-9_-]+$/i.test(o)?g[y]>1&&(u=e("Chaque cl\xE9 doit \xEAtre unique.","lightbox-jlg")):u=e("Utilisez uniquement des lettres, chiffres ou tirets.","lightbox-jlg"):u=e("Renseignez une cl\xE9 pour ce canal.","lightbox-jlg"),me(l,M,u);let S=U(f,"template"),x="";S?Z(S)?_e(S)||(x=e("Indiquez une URL valide (http, https, mailto, tel ou sms).","lightbox-jlg")):x=e("Ajoutez au moins le jeton %url% pour construire le lien.","lightbox-jlg"):x=e("Renseignez un mod\xE8le d\u2019URL.","lightbox-jlg"),me(w,B,x)})},A=()=>{Array.from(s.querySelectorAll("[data-share-repeater-item]")).forEach((g,f)=>{let l=`mga_settings[share_channels][${f}]`;g.querySelectorAll("[data-share-field]").forEach(M=>{let B=M.getAttribute("data-share-field");if(!B)return;let o=B;B==="enabled-hidden"&&(o="enabled"),M.name=`${l}[${o}]`}),Y(g),R(g),I(g),ve(g)}),k(),T()},z=i=>{if(!i)return;let g=i.querySelector('[data-share-field="label"]')||i;Ve(g)};s.addEventListener("input",i=>{let g=i.target;if(!g)return;let f=g.closest("[data-share-repeater-item]");f&&(g.matches('[data-share-field="label"], [data-share-field="key"]')&&R(f),g.matches('[data-share-field="icon"]')&&I(f),ve(f),k())}),s.addEventListener("change",i=>{let g=i.target;if(!g||!g.matches('[data-share-field="icon"]'))return;let f=g.closest("[data-share-repeater-item]");f&&(I(f),ve(f),k())}),s.addEventListener("click",i=>{let g=i.target.closest("[data-share-action]");if(!g)return;i.preventDefault();let f=g.getAttribute("data-share-action"),l=g.closest("[data-share-repeater-item]");if(l){if(f==="remove"){let w=l.nextElementSibling||l.previousElementSibling;l.parentNode===s&&s.removeChild(l),A(),T(),w&&z(w);return}if(f==="move-up"){let w=l.previousElementSibling;w&&(s.insertBefore(l,w),A(),z(l),T());return}if(f==="move-down"){let w=l.nextElementSibling;w&&(s.insertBefore(w,l),A(),z(l),T())}}}),c&&c.addEventListener("click",i=>{i.preventDefault();let f=n.importNode(E.content,!0).querySelector("[data-share-repeater-item]");f&&(s.appendChild(f),A(),z(f),T())}),A(),T()}})})(typeof window!="undefined"?window:globalThis)});wr();})();
//# sourceMappingURL=admin.js.map
