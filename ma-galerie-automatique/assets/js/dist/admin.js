(()=>{var le=(n,w)=>()=>(n&&(w=n(n=0)),w);var Re=(n,w)=>()=>(w||n((w={exports:{}}).exports,w),w.exports);var Ue,De,Ee,qe,Ce,Ie=le(()=>{Ue=/%(\d+\$)?[sd]/g,De=()=>(n,...w)=>{let l=0;return String(n).replace(Ue,(j,u)=>{let B,ee=j.charAt(j.length-1);if(u){let W=parseInt(u.slice(0,-1),10);if(Number.isNaN(W)||W<=0)return"";B=W-1}else B=l,l+=1;let J=B>=0&&B<w.length?w[B]:void 0;if(ee==="d"){let W=parseInt(J,10);return Number.isNaN(W)?"":String(W)}return typeof J=="undefined"?"":String(J)})},Ee=n=>n&&typeof n.sprintf=="function"?n.sprintf:De(),qe=n=>n&&typeof n.__=="function"?n.__:w=>w,Ce=n=>!n||typeof n!="object"?null:n.wp&&n.wp.i18n?n.wp.i18n:null});var ye,ve,He,Le,$e,je,Pe=le(()=>{ye={facebook:{viewBox:"0 0 24 24",paths:[{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z"}]},twitter:{viewBox:"0 0 24 24",paths:[{d:"M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z"}]},linkedin:{viewBox:"0 0 24 24",paths:[{d:"M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z"}]},pinterest:{viewBox:"0 0 24 24",paths:[{d:"M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z"}]},whatsapp:{viewBox:"0 0 24 24",paths:[{d:"M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z"}]},telegram:{viewBox:"0 0 24 24",paths:[{d:"M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z"}]},email:{viewBox:"0 0 24 24",paths:[{d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"}]},link:{viewBox:"0 0 24 24",paths:[{d:"M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z"}]},generic:{viewBox:"0 0 24 24",paths:[{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"},{d:"M13 17h-2v-2h2zm0-4h-2V7h2z"}]},copy:{viewBox:"0 0 24 24",paths:[{d:"M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"}]},download:{viewBox:"0 0 24 24",paths:[{d:"M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z"}]},native:{viewBox:"0 0 24 24",paths:[{d:"M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"}]}},ve=n=>typeof n!="string"?"":n.trim().toLowerCase().replace(/[^a-z0-9_-]/g,""),He=n=>{let w=ve(n);return w&&ye[w]?ye[w]:ye.generic},Le=(n,w,l={})=>{if(!n||typeof n.createElementNS!="function")return null;let j=n.createElementNS("http://www.w3.org/2000/svg",w);return Object.keys(l).forEach(u=>{j.setAttribute(u,l[u])}),j},$e=(n,w)=>{let l=He(w),j=Le(n,"svg",{viewBox:l.viewBox,fill:"currentColor","aria-hidden":"true",focusable:"false"});return j?(Array.isArray(l.paths)&&l.paths.forEach(u=>{let B=Le(n,"path",u);B&&j.appendChild(B)}),j):null},je=(n,w,{wrapperTag:l="span",wrapperClass:j=""}={})=>{if(!n||typeof n.createElement!="function")return null;let u=n.createElement(l);j&&(u.className=j);let B=$e(n,w);return B?(u.appendChild(B),u):null}});var G,Z,K,ke,ze=le(()=>{G=null,Z=()=>{if(G!==null)return G;G=!1;let n=typeof window!="undefined"?window.document:null;if(!n||typeof n.createElement!="function"||typeof window.HTMLElement=="undefined"||!window.HTMLElement.prototype||typeof window.HTMLElement.prototype.focus!="function")return G;let w=n.createElement("button"),l=n.body||n.documentElement;try{w.type="button",l&&typeof l.appendChild=="function"&&l.appendChild(w),window.HTMLElement.prototype.focus.call(w,{get preventScroll(){return G=!0,!0}})}catch(j){G=!1}finally{w.parentNode&&typeof w.parentNode.removeChild=="function"&&w.parentNode.removeChild(w)}return G},K=(n,w={preventScroll:!0})=>{if(!n||typeof n.focus!="function")return;if(w&&Z())try{n.focus(w);return}catch(j){}n.focus()},ke=()=>{typeof window!="undefined"&&((!window.mgaFocusUtils||typeof window.mgaFocusUtils!="object")&&(window.mgaFocusUtils={}),window.mgaFocusUtils.detectFocusOptionsSupport=Z,window.mgaFocusUtils.safeFocus=K)}});var Me=le(()=>{Ie();Pe();ze()});var Fe=Re((nt,ue)=>{Me();(function(n){ke();let w=Ce(n),l=qe(w),j=Ee(w);typeof ue!="undefined"&&ue.exports&&(ue.exports={detectFocusOptionsSupport:Z,safeFocus:K});let u=n.document,B=Y=>{let R=je(u,ve(Y));return R?R.querySelector("svg")||R:null},ee={url:"https://exemple.com/galerie/photo-01",text:"Une photo remarquable",title:"Collection studio"},J={"%url%":ee.url,"%text%":ee.text,"%title%":ee.title},W=["http","https","mailto","tel","sms"],de=Y=>typeof Y!="string"?!1:/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/.test(Y.trim());!u||typeof u.addEventListener!="function"||u.addEventListener("DOMContentLoaded",function(){let Y=u.querySelector("[data-mga-settings-form]")||u.querySelector(".mga-admin-wrap form"),R=()=>{},ie=(e=>{let a=u.querySelector("[data-mga-wizard]");if(!a)return null;let c=Array.from(a.querySelectorAll("[data-mga-step-panel]")),g=Array.from(a.querySelectorAll("[data-mga-step-indicator]")),y=a.querySelector("[data-mga-step-prev]"),_=a.querySelector("[data-mga-step-next]"),z=a.querySelector("[data-mga-step-submit]"),P=a.querySelector("[data-mga-save-status]"),A=c.length-1,v=c.findIndex(r=>r.classList.contains("is-active"));v<0&&(v=0);let S=()=>n.mgaAdminConfig&&n.mgaAdminConfig.messages||{},I=(r,p)=>{if(!P)return;let o=p||S()[r]||"";P.textContent=o,P.setAttribute("data-mga-status-state",r)},L=()=>{y&&(y.disabled=v===0),_&&(_.hidden=v>=A),z&&(z.hidden=v<A)},b=r=>{if(!r)return;let p=r.querySelector("[data-mga-step-title]")||r,o=Z()?{preventScroll:!0}:void 0;n.requestAnimationFrame(()=>{K(p,o)})},E=r=>{r.classList.remove("is-active"),r.setAttribute("hidden","hidden"),r.setAttribute("aria-hidden","true")},q=r=>{r.classList.add("is-active"),r.removeAttribute("hidden"),r.setAttribute("aria-hidden","false")},k=()=>{g.forEach((r,p)=>{r.classList.toggle("is-active",p===v),r.classList.toggle("is-completed",p<v),r.setAttribute("aria-current",p===v?"step":"false")})},d=(()=>{let r=null,p=a.querySelector("[data-mga-summary-preset]"),o=a.querySelector("[data-mga-summary-timing]"),m=a.querySelector("[data-mga-summary-toolbar]"),h=a.querySelector("[data-mga-summary-share]"),V=()=>{if(!m)return;let N=[{id:"mga_show_zoom",label:l("Zoom","lightbox-jlg")},{id:"mga_show_download",label:l("T\xE9l\xE9chargement","lightbox-jlg")},{id:"mga_show_share",label:l("Partage","lightbox-jlg")},{id:"mga_show_cta",label:l("Appel \xE0 l\u2019action","lightbox-jlg")},{id:"mga_show_fullscreen",label:l("Plein \xE9cran","lightbox-jlg")}].filter(D=>{let T=u.getElementById(D.id);return T?T.checked:!1});m.textContent=N.length>0?N.map(D=>D.label).join(", "):l("Aucun bouton affich\xE9","lightbox-jlg")},C=()=>{if(!p)return;let F=u.getElementById("mga_style_preset"),N=F?F.value:"";if(!F){p.textContent=l("R\xE9glages personnalis\xE9s","lightbox-jlg");return}let D=Array.from(F.options).find(H=>H.value===N),T=D?D.textContent:l("R\xE9glages personnalis\xE9s","lightbox-jlg");if(n.mgaStylePresets&&n.mgaStylePresets.presets){let H=n.mgaStylePresets.presets[N];H&&H.label&&(T=H.label)}N||(T=n.mgaStylePresets&&n.mgaStylePresets.customDescription?n.mgaStylePresets.customDescription:T),p.textContent=T},M=()=>{if(!o)return;let F=u.getElementById("mga_delay"),N=u.getElementById("mga_effect"),D=F&&F.value?F.value:"\u2014",T=l("Transition personnalis\xE9e","lightbox-jlg");if(N){let H=Array.from(N.options).find(ge=>ge.selected);T=H?H.textContent:T}o.textContent=j(l("Diaporama : %1$s\xA0s \xB7 Effet : %2$s","lightbox-jlg"),D,T)},O=()=>{if(!h)return;let N=Array.from(u.querySelectorAll("[data-share-repeater-item]")).filter(D=>{let T=D.querySelector('[data-share-field="enabled"]');return T?T.checked:!1}).map(D=>{let T=D.querySelector('[data-share-field="label"]'),H=D.querySelector('[data-share-field="key"]'),ge=T&&T.value?T.value.trim():"",Ae=H&&H.value?H.value.trim():"";return ge||(Ae?Ae.toUpperCase():l("Canal sans titre","lightbox-jlg"))});N.length>0?h.textContent=j(l("%1$d canaux actifs : %2$s","lightbox-jlg"),N.length,N.join(", ")):h.textContent=l("Aucun canal actif","lightbox-jlg")},se=()=>{C(),M(),V(),O()};return()=>{r&&n.clearTimeout(r),r=n.setTimeout(()=>{r=null,se()},120)}})(),f=r=>{let p=Math.max(0,Math.min(c.length-1,r));if(p===v)return;let o=c[v],m=c[p];o&&E(o),m&&(q(m),b(m)),v=p,k(),L(),v===A&&d()},x=()=>{e&&typeof e.reportValidity=="function"&&!e.reportValidity()||f(v+1)},t=()=>{f(v-1)},i=()=>{g.forEach((r,p)=>{r.addEventListener("click",o=>{if(o.preventDefault(),p<v&&p>=0)f(p);else if(p>v&&p<=A){if(e&&typeof e.reportValidity=="function"&&!e.reportValidity())return;f(p)}})})};y&&y.addEventListener("click",r=>{r.preventDefault(),t()}),_&&_.addEventListener("click",r=>{r.preventDefault(),x()}),i(),k(),L(),v===A&&d();let s=()=>{d()};return e&&(e.addEventListener("change",s),e.addEventListener("input",s)),{scheduleSummaryUpdate:d,setStatusMessage:I,goToSummary:()=>f(A)}})(Y);ie&&typeof ie.scheduleSummaryUpdate=="function"&&(R=ie.scheduleSummaryUpdate),((e,a)=>{if(!e)return;let c=n.mgaAdminConfig||{},g=typeof c.ajaxUrl=="string"&&c.ajaxUrl?c.ajaxUrl:n.ajaxurl,y=typeof c.nonce=="string"?c.nonce:"",_=e.querySelector("[data-mga-step-submit]");if(!g||!y)return;let z=(A,v)=>{a&&typeof a.setStatusMessage=="function"&&a.setStatusMessage(A,v)},P=A=>{_&&(_.disabled=A,_.setAttribute("aria-busy",A?"true":"false")),A&&z("saving")};e.addEventListener("submit",A=>{if(A.preventDefault(),typeof e.reportValidity=="function"&&!e.reportValidity())return;let v=new FormData(e);v.append("action","mga_save_settings"),v.append("_ajax_nonce",y),P(!0),fetch(g,{method:"POST",credentials:"same-origin",body:v}).then(S=>{if(!S.ok)throw new Error(S.statusText||"HTTP error");return S.json()}).then(S=>{if(!S||S.success!==!0){let L=S&&S.data&&S.data.message?S.data.message:null;throw new Error(L||c.messages&&c.messages.error||l("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg"))}let I=S.data&&S.data.message?S.data.message:c.messages&&c.messages.success||l("R\xE9glages enregistr\xE9s.","lightbox-jlg");z("success",I),R()}).catch(S=>{let I=c.messages&&c.messages.error?c.messages.error:l("Impossible d\u2019enregistrer les r\xE9glages.","lightbox-jlg");z("error",S&&S.message?S.message:I)}).finally(()=>{P(!1)})})})(Y,ie),(()=>{let e=u.querySelector("[data-mga-settings-layout]");if(!e)return;let a=Array.from(e.querySelectorAll("[data-mga-settings-section]"));if(a.length===0)return;let c=e.querySelector("[data-mga-settings-nav]"),g=c?Array.from(c.querySelectorAll("[data-mga-section-link]")):[],y=new Map,_=new Map,z=e.querySelector("[data-mga-view-toggle]"),P=z?z.querySelector("[data-mga-view-select]"):null,A="mga-settings-view-mode",S=(()=>{if(typeof n.localStorage=="undefined")return"essential";try{return n.localStorage.getItem(A)==="advanced"?"advanced":"essential"}catch(o){return"essential"}})(),I=()=>{P&&(P.value=S)},L=()=>{if(typeof n.localStorage!="undefined")try{n.localStorage.setItem(A,S)}catch(o){}},b=()=>{e.setAttribute("data-mga-view-mode",S)},E=o=>o&&o.getAttribute("data-mga-visibility")==="essential"?"essential":"advanced",q=e.querySelector("[data-mga-settings-search]"),k=e.querySelector("[data-mga-search-empty]"),d=new WeakMap,f=()=>e.getAttribute("data-mga-search-active")==="true",x=(o,m)=>{k&&(m&&o===0?k.removeAttribute("hidden"):k.setAttribute("hidden","hidden"))},t=o=>{o&&y.forEach((m,h)=>{h===o?m.setAttribute("aria-current","true"):m.removeAttribute("aria-current")})},i=()=>{a.forEach(o=>{o.removeAttribute("data-mga-section-highlight"),d.has(o)&&(n.clearTimeout(d.get(o)),d.delete(o))})},s=o=>{if(!o)return;o.setAttribute("data-mga-section-highlight","true"),d.has(o)&&n.clearTimeout(d.get(o));let m=n.setTimeout(()=>{o.removeAttribute("data-mga-section-highlight"),d.delete(o)},1600);d.set(o,m)},r=o=>{let m=typeof o=="string"?o.trim().toLowerCase():"",h=m.length>0,V=0;if(h?e.setAttribute("data-mga-search-active","true"):(e.removeAttribute("data-mga-search-active"),i()),a.forEach(C=>{let M=y.get(C),O=_.get(C);if(!h){if(S==="essential"&&E(C)==="advanced"){C.setAttribute("hidden","hidden"),M&&(M.setAttribute("hidden","hidden"),M.removeAttribute("aria-current")),O&&O.setAttribute("hidden","hidden");return}C.removeAttribute("hidden"),M&&M.removeAttribute("hidden"),O&&O.removeAttribute("hidden");return}(C.textContent||"").toLowerCase().includes(m)?(C.removeAttribute("hidden"),C.setAttribute("data-mga-section-highlight","true"),V+=1,M&&M.removeAttribute("hidden"),O&&O.removeAttribute("hidden")):(C.setAttribute("hidden","hidden"),C.removeAttribute("data-mga-section-highlight"),M&&(M.setAttribute("hidden","hidden"),M.removeAttribute("aria-current")),O&&O.setAttribute("hidden","hidden"))}),h){let C=a.find(M=>!M.hasAttribute("hidden"));C&&t(C)}x(V,h)},p=(o,m={})=>{let h=o==="advanced"?"advanced":"essential";if(h===S&&!m.force)return;S=h,I(),b(),m.persist!==!1&&L();let V=q&&q.value||"";r(V)};if(g.forEach(o=>{let m=o.getAttribute("href");if(!m||m.charAt(0)!=="#")return;let h=e.querySelector(m);if(!h)return;y.set(h,o);let V=o.closest("[data-mga-visibility]");V&&_.set(h,V),o.addEventListener("click",C=>{C.preventDefault(),h.hasAttribute("hidden")&&h.removeAttribute("hidden");try{h.scrollIntoView({behavior:"smooth",block:"start"})}catch(O){typeof h.scrollIntoView=="function"&&h.scrollIntoView()}t(h),s(h);let M=Z()?{preventScroll:!0}:void 0;typeof n.requestAnimationFrame=="function"?n.requestAnimationFrame(()=>{K(h,M)}):K(h,M)})}),I(),b(),P&&P.addEventListener("change",o=>{p(o.target.value||"essential")}),"IntersectionObserver"in n){let o=null,m=new IntersectionObserver(h=>{f()||(h.forEach(V=>{V.isIntersecting&&(o=V.target)}),o&&t(o))},{rootMargin:"-40% 0px -40% 0px",threshold:.1});a.forEach(h=>m.observe(h))}else{let o=()=>{if(f())return;let m=null,h=1/0,V=n.pageYOffset||u.documentElement.scrollTop||0;a.forEach(C=>{let O=C.getBoundingClientRect().top+V,se=Math.abs(O-V-140);se<h&&(m=C,h=se)}),m&&t(m)};n.addEventListener("scroll",o,{passive:!0}),o()}q?(q.addEventListener("input",o=>{r(o.target.value||"")}),r(q.value||"")):x(a.length,!1),p(S,{force:!0,persist:!1}),f()||t(a[0])})();let fe=(e,a,c,g)=>{let y=u.getElementById(e),_=u.getElementById(a);if(!y||!_)return;let z=()=>{let P=y.value,A=typeof c=="function"?c(P):P,v=typeof g=="function"?g(P):A;typeof _.value!="undefined"&&(_.value=A),_.textContent=A,y.setAttribute("aria-valuenow",P),y.setAttribute("aria-valuetext",v)};y.addEventListener("input",z),z()};fe("mga_thumb_size","mga_thumb_size_value",e=>j(l("%spx","lightbox-jlg"),e),e=>j(l("%s pixels","lightbox-jlg"),e)),fe("mga_thumb_size_mobile","mga_thumb_size_mobile_value",e=>j(l("%spx","lightbox-jlg"),e),e=>j(l("%s pixels","lightbox-jlg"),e)),fe("mga_bg_opacity","mga_bg_opacity_value",e=>e,e=>j(l("%s opacity","lightbox-jlg"),e));let U=u.getElementById("mga_accent_color"),be=u.getElementById("mga_accent_color_preview");if(U){let e=U.getAttribute("data-default-color"),a=de(e)?e:"#ffffff",c=y=>{let _=de(y)?y:a;return be&&(be.style.backgroundColor=_),_};c(U.value);let g=n.jQuery;g&&typeof g.fn=="object"&&typeof g.fn.wpColorPicker=="function"?(g(U).wpColorPicker({change(y,_){let z=_&&_.color?_.color.toString():y.target.value;c(z)},clear(){let y=U.getAttribute("data-default-color")||a;g(U).val(y),c(y)}}),g(U).on("input",y=>{c(y.target.value)})):U.addEventListener("input",()=>{c(U.value)})}(()=>{let e=u.querySelector("[data-mga-live-preview]");if(!e)return;let a=e.querySelector("[data-mga-live-preview-mock]"),c=e.querySelector("[data-mga-preview-effect]"),g=e.querySelector("[data-mga-preview-thumbs]"),y={zoom:e.querySelector('[data-preview-action="zoom"]'),download:e.querySelector('[data-preview-action="download"]'),share:e.querySelector('[data-preview-action="share"]'),cta:e.querySelector('[data-preview-action="cta"]'),fullscreen:e.querySelector('[data-preview-action="fullscreen"]')},_={slide:l("glissement","lightbox-jlg"),fade:l("fondu","lightbox-jlg"),cube:l("cube 3D","lightbox-jlg"),coverflow:l("coverflow","lightbox-jlg"),flip:l("flip 3D","lightbox-jlg")},z=b=>{if(!a)return;let E=de(b)?b:"#6366f1";a.style.setProperty("--mga-preview-accent",E)},P=b=>{if(!a)return;let E=parseFloat(b);if(Number.isNaN(E))return;let q=Math.min(Math.max(E,0),1);a.style.setProperty("--mga-preview-overlay",`rgba(15, 23, 42, ${q})`)},A=b=>{if(!a)return;let E=typeof b=="string"&&b?b:"echo";a.setAttribute("data-preview-style",E)},v=(b,E)=>{let q=y[b];q&&(q.setAttribute("data-preview-hidden",E?"false":"true"),q.setAttribute("aria-hidden",E?"false":"true"))},S=b=>{if(!g)return;let E=parseFloat(b);if(Number.isNaN(E)){g.style.setProperty("--mga-preview-thumb-scale","1");return}let q=Math.min(Math.max(E/90,.6),1.4);g.style.setProperty("--mga-preview-thumb-scale",q.toString())},I=()=>{if(!c)return;let b=u.getElementById("mga_effect"),E=u.getElementById("mga_delay"),q=u.getElementById("mga_speed"),k=b?b.value:"",d=E&&E.value||"4",f=q&&q.value||"600",x=_[k]||l("personnalis\xE9e","lightbox-jlg");c.textContent=j(l("Transition : %1$s \u2022 %2$ss / %3$sms","lightbox-jlg"),x,d,f)},L=(b,E,q=["change"])=>{let k=u.getElementById(b);if(!k||typeof E!="function")return;let d=()=>{k.type==="checkbox"?E(k.checked,k):E(k.value,k)};q.forEach(f=>{k.addEventListener(f,d)}),d()};L("mga_accent_color",z,["input","change"]),L("mga_bg_opacity",P,["input","change"]),L("mga_background_style",A),L("mga_thumb_size",S,["input","change"]),L("mga_show_zoom",b=>v("zoom",b)),L("mga_show_download",b=>v("download",b)),L("mga_show_share",b=>v("share",b)),L("mga_show_cta",b=>v("cta",b)),L("mga_show_fullscreen",b=>v("fullscreen",b)),L("mga_effect",I),L("mga_delay",I,["input","change"]),L("mga_speed",I,["input","change"])})();let X=n.mgaStylePresets&&typeof n.mgaStylePresets=="object"?n.mgaStylePresets:{},te=X.presets&&typeof X.presets=="object"?X.presets:{},$=u.getElementById("mga_style_preset"),we=u.querySelector("[data-mga-apply-style-preset]"),Se=u.querySelector("[data-mga-reset-style-preset]"),pe=u.querySelector("[data-mga-style-preset-description]"),re=!1,ae=(e,a)=>{if(!(!e||typeof e.dispatchEvent!="function"))try{e.dispatchEvent(new Event(a,{bubbles:!0}))}catch(c){if(typeof u.createEvent=="function")try{let g=u.createEvent("Event");g.initEvent(a,!0,!0),e.dispatchEvent(g)}catch(g){}}},me=(e,a)=>{let c=u.getElementById(e);c&&(c.value=a,ae(c,"input"),ae(c,"change"))},he=me,ce=(e,a)=>{let c=u.getElementById(e);c&&(c.value=a,ae(c,"change"))},Q=(e,a)=>{let c=u.getElementById(e);c&&(c.checked=!!a,ae(c,"change"))},Oe=e=>{if(!U)return;let a=typeof e=="string"?e:"",c=n.jQuery;if(c&&typeof c.fn=="object"&&typeof c.fn.wpColorPicker=="function"){let g=c(U);if(g&&typeof g.wpColorPicker=="function"){g.wpColorPicker("color",a);return}}U.value=a,ae(U,"change")},_e=e=>{!e||typeof e!="object"||(Object.prototype.hasOwnProperty.call(e,"delay")&&me("mga_delay",e.delay),Object.prototype.hasOwnProperty.call(e,"speed")&&me("mga_speed",e.speed),Object.prototype.hasOwnProperty.call(e,"effect")&&ce("mga_effect",e.effect),Object.prototype.hasOwnProperty.call(e,"easing")&&ce("mga_easing",e.easing),Object.prototype.hasOwnProperty.call(e,"thumbs_layout")&&ce("mga_thumbs_layout",e.thumbs_layout),Object.prototype.hasOwnProperty.call(e,"thumb_size")&&he("mga_thumb_size",e.thumb_size),Object.prototype.hasOwnProperty.call(e,"thumb_size_mobile")&&he("mga_thumb_size_mobile",e.thumb_size_mobile),Object.prototype.hasOwnProperty.call(e,"show_thumbs_mobile")&&Q("mga_show_thumbs_mobile",e.show_thumbs_mobile),Object.prototype.hasOwnProperty.call(e,"accent_color")&&Oe(e.accent_color),Object.prototype.hasOwnProperty.call(e,"bg_opacity")&&he("mga_bg_opacity",e.bg_opacity),Object.prototype.hasOwnProperty.call(e,"background_style")&&ce("mga_background_style",e.background_style),Object.prototype.hasOwnProperty.call(e,"autoplay_start")&&Q("mga_autoplay_start",e.autoplay_start),Object.prototype.hasOwnProperty.call(e,"loop")&&Q("mga_loop",e.loop),Object.prototype.hasOwnProperty.call(e,"show_zoom")&&Q("mga_show_zoom",e.show_zoom),Object.prototype.hasOwnProperty.call(e,"show_download")&&Q("mga_show_download",e.show_download),Object.prototype.hasOwnProperty.call(e,"show_share")&&Q("mga_show_share",e.show_share),Object.prototype.hasOwnProperty.call(e,"show_cta")&&Q("mga_show_cta",e.show_cta),Object.prototype.hasOwnProperty.call(e,"show_fullscreen")&&Q("mga_show_fullscreen",e.show_fullscreen))},ne=()=>{if(!pe)return;let e=$?$.value:"";if(e&&te[e]&&te[e].description){pe.textContent=te[e].description;return}let a=typeof X.customDescription=="string"?X.customDescription:"";pe.textContent=a},Te=()=>{re||!$||$.value!==""&&($.value="",ne())},Be=e=>{let a=u.getElementById(e);if(!a)return;let c=["change"];a.tagName==="INPUT"&&["text","number","range"].includes(a.type)&&c.push("input"),c.forEach(g=>{a.addEventListener(g,Te)})};$&&(ne(),$.addEventListener("change",ne)),we&&we.addEventListener("click",e=>{if(e.preventDefault(),!$)return;let a=$.value;!a||!te[a]||(re=!0,_e(te[a].settings||{}),re=!1,ne())}),Se&&Se.addEventListener("click",e=>{e.preventDefault();let a=X.defaults||{};a&&typeof a=="object"&&Object.keys(a).length>0&&(re=!0,_e(a),re=!1),$&&($.value=""),ne()}),["mga_delay","mga_speed","mga_effect","mga_easing","mga_thumb_size","mga_thumb_size_mobile","mga_thumbs_layout","mga_accent_color","mga_bg_opacity","mga_background_style","mga_show_thumbs_mobile","mga_autoplay_start","mga_loop","mga_show_zoom","mga_show_download","mga_show_share","mga_show_cta","mga_show_fullscreen"].forEach(Be);let xe=u.querySelector("[data-share-repeater]");xe&&Ne(xe);let oe=u.querySelector("[data-mga-content-selectors]");if(oe){let e=oe.querySelector("[data-mga-content-selectors-list]"),a=oe.querySelector("[data-mga-content-selectors-textarea]"),c=u.getElementById("mga-content-selector-template"),g=oe.getAttribute("data-mga-selector-placeholder")||"",y=!1,_=()=>{};if(e){let z=()=>e.querySelectorAll("[data-mga-content-selector-row]"),P=()=>e.querySelectorAll("[data-mga-content-selector-input]"),A=()=>Array.from(P()).some(d=>d.value.trim()===""),v=()=>{let d=z(),f=d.length<=1;d.forEach(x=>{let t=x.querySelector("[data-mga-remove-selector]");t&&(t.disabled=f,t.setAttribute("aria-disabled",f?"true":"false"))})},S=()=>Array.from(P()).map(d=>d.value.trim()).filter(d=>d!==""),I=()=>{if(!a||y)return;let d=S();y=!0,a.value=d.join(`
`),y=!1},L=d=>{if(!d||d.getAttribute("data-mga-selector-bound")==="true")return;let f=d.querySelector("[data-mga-remove-selector]");f&&f.addEventListener("click",t=>{if(t.preventDefault(),z().length<=1){let s=d.querySelector("[data-mga-content-selector-input]");s&&(s.value="",I());return}d.remove(),v(),I()});let x=d.querySelector("[data-mga-content-selector-input]");x&&(x.addEventListener("input",()=>{y||I()}),x.addEventListener("keydown",t=>{if(t.key!=="Enter"||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey)return;if(t.preventDefault(),!A()&&typeof _=="function"){_("");return}let i=z();if(i.length===0)return;let s=i[i.length-1];if(!s)return;let r=s.querySelector("[data-mga-content-selector-input]");r&&r!==t.target&&K(r)}),g&&!x.getAttribute("placeholder")&&x.setAttribute("placeholder",g)),d.setAttribute("data-mga-selector-bound","true")},b=(d="")=>{let f=null;if(c&&c.content&&(f=u.importNode(c.content,!0).firstElementChild,f)){let s=f.querySelector("[data-mga-content-selector-input]");return s&&(s.value=d,g&&s.setAttribute("placeholder",g)),L(f),f}f=u.createElement("div"),f.className="mga-content-selectors__row",f.setAttribute("data-mga-content-selector-row","");let x=u.createElement("input");x.type="text",x.className="regular-text",x.setAttribute("data-mga-content-selector-input",""),x.value=d,g&&x.setAttribute("placeholder",g),f.appendChild(x);let t=u.createElement("button");return t.type="button",t.className="button-link mga-content-selectors__remove",t.setAttribute("data-mga-remove-selector",""),t.textContent=l("Retirer","lightbox-jlg"),f.appendChild(t),L(f),f},E=d=>{if(e.innerHTML="",d.length===0){let f=b("");f&&e.appendChild(f)}else d.forEach(f=>{let x=b(f);x&&e.appendChild(x)});v()},q=()=>{if(!a||y)return;let d=a.value.split(/\r\n|\r|\n/).map(f=>f.trim()).filter(f=>f.length>0);y=!0,E(d),y=!1};_=(d="")=>{let f=b(d);if(f){e.appendChild(f),v();let x=f.querySelector("[data-mga-content-selector-input]");x&&K(x)}I()},a?(q(),a.addEventListener("input",()=>{y||q()})):E([]);let k=oe.querySelector("[data-mga-add-selector]");k&&k.addEventListener("click",d=>{d.preventDefault(),_()})}}function Ne(e){let a=e.querySelector("[data-share-repeater-list]"),c=e.querySelector("[data-share-repeater-add]"),g=u.getElementById("mga-share-channel-template");if(!a||!g)return;let y=Date.now(),_=()=>(y+=1,`mga-share-channel-${y}`),z=t=>t?((!t.dataset.shareUid||t.dataset.shareUid.trim()==="")&&(t.dataset.shareUid=_()),t.dataset.shareUid):null,P=t=>{let i=z(t);if(!i)return;t.querySelectorAll("[data-share-id-suffix]").forEach(r=>{let p=r.getAttribute("data-share-id-suffix");if(!p)return;let o=`${i}-${p}`;r.tagName==="LABEL"?r.setAttribute("for",o):r.id=o})},A=t=>{if(!t)return;let i=t.querySelector("[data-share-repeater-title]");if(!i)return;let s=t.querySelector('[data-share-field="label"]'),r=t.querySelector('[data-share-field="key"]'),p=s&&typeof s.value=="string"?s.value.trim():"",o=r&&typeof r.value=="string"?r.value.trim():"",m=o?o.toUpperCase():l("Nouveau canal","lightbox-jlg");i.textContent=p||m},v=t=>{if(!t)return;let i=t.querySelector("[data-share-icon-preview]"),s=t.querySelector('[data-share-field="icon"]');if(!i)return;let r=s?s.value:"",p=B(r);i.innerHTML="",p&&i.appendChild(p);let o=t.querySelector("[data-share-preview-icon]");if(o){o.innerHTML="";let m=B(r);m&&o.appendChild(m)}},S=(t,i)=>!t||!i?null:t.querySelector(`[data-share-field="${i}"]`),I=(t,i)=>{let s=S(t,i);return s&&typeof s.value=="string"?s.value.trim():""},L=t=>{if(typeof t!="string")return"";let i=t;return Object.keys(J).forEach(s=>{let r=encodeURIComponent(J[s]);i=i.replace(new RegExp(s,"gi"),r)}),i},b=t=>/%url%/i.test(typeof t=="string"?t:""),E=t=>{if(typeof t!="string")return!1;let i=t.trim();if(i==="")return!1;let s=i.split(":")[0].toLowerCase();return W.includes(s)?s==="http"||s==="https"?/^https?:\/\//i.test(i):!0:!1},q=(t,i,s)=>{let r=typeof s=="string"&&s!=="";t&&(r?(t.classList.add("mga-field-error"),t.setAttribute("aria-invalid","true")):(t.classList.remove("mga-field-error"),t.removeAttribute("aria-invalid"))),i&&(r?(i.textContent=s,i.removeAttribute("hidden")):(i.textContent="",i.setAttribute("hidden","hidden")))},k=t=>{if(!t)return;let i=t.querySelector("[data-share-preview]");if(!i)return;let s=i.querySelector("[data-share-preview-label]"),r=i.querySelector("[data-share-preview-url]"),p=I(t,"label"),o=I(t,"key"),m=o?o.toUpperCase():l("Nouveau canal","lightbox-jlg");if(s&&(s.textContent=p||m),r){let h=I(t,"template");if(h){let V=L(h);r.textContent=V,r.setAttribute("data-preview-empty","false"),r.title=V}else r.textContent=l("Compl\xE9tez le mod\xE8le pour g\xE9n\xE9rer un lien.","lightbox-jlg"),r.setAttribute("data-preview-empty","true"),r.removeAttribute("title")}R()},d=()=>{let t=Array.from(a.querySelectorAll("[data-share-repeater-item]")),i=t.reduce((s,r)=>{let p=I(r,"key").toLowerCase();return p&&(s[p]=(s[p]||0)+1),s},{});t.forEach(s=>{let r=S(s,"key"),p=S(s,"template"),o=s.querySelector('[data-share-error="key"]'),m=s.querySelector('[data-share-error="template"]'),h=I(s,"key"),V=h.toLowerCase(),C="";h?/^[a-z0-9_-]+$/i.test(h)?i[V]>1&&(C=l("Chaque cl\xE9 doit \xEAtre unique.","lightbox-jlg")):C=l("Utilisez uniquement des lettres, chiffres ou tirets.","lightbox-jlg"):C=l("Renseignez une cl\xE9 pour ce canal.","lightbox-jlg"),q(r,o,C);let M=I(s,"template"),O="";M?b(M)?E(M)||(O=l("Indiquez une URL valide (http, https, mailto, tel ou sms).","lightbox-jlg")):O=l("Ajoutez au moins le jeton %url% pour construire le lien.","lightbox-jlg"):O=l("Renseignez un mod\xE8le d\u2019URL.","lightbox-jlg"),q(p,m,O)})},f=()=>{Array.from(a.querySelectorAll("[data-share-repeater-item]")).forEach((i,s)=>{let r=`mga_settings[share_channels][${s}]`;i.querySelectorAll("[data-share-field]").forEach(o=>{let m=o.getAttribute("data-share-field");if(!m)return;let h=m;m==="enabled-hidden"&&(h="enabled"),o.name=`${r}[${h}]`}),P(i),A(i),v(i),k(i)}),d(),R()},x=t=>{if(!t)return;let i=t.querySelector('[data-share-field="label"]')||t;K(i)};a.addEventListener("input",t=>{let i=t.target;if(!i)return;let s=i.closest("[data-share-repeater-item]");s&&(i.matches('[data-share-field="label"], [data-share-field="key"]')&&A(s),i.matches('[data-share-field="icon"]')&&v(s),k(s),d())}),a.addEventListener("change",t=>{let i=t.target;if(!i||!i.matches('[data-share-field="icon"]'))return;let s=i.closest("[data-share-repeater-item]");s&&(v(s),k(s),d())}),a.addEventListener("click",t=>{let i=t.target.closest("[data-share-action]");if(!i)return;t.preventDefault();let s=i.getAttribute("data-share-action"),r=i.closest("[data-share-repeater-item]");if(r){if(s==="remove"){let p=r.nextElementSibling||r.previousElementSibling;r.parentNode===a&&a.removeChild(r),f(),R(),p&&x(p);return}if(s==="move-up"){let p=r.previousElementSibling;p&&(a.insertBefore(r,p),f(),x(r),R());return}if(s==="move-down"){let p=r.nextElementSibling;p&&(a.insertBefore(p,r),f(),x(r),R())}}}),c&&c.addEventListener("click",t=>{t.preventDefault();let s=u.importNode(g.content,!0).querySelector("[data-share-repeater-item]");s&&(a.appendChild(s),f(),x(s),R())}),f(),R()}})})(typeof window!="undefined"?window:globalThis)});Fe();})();
//# sourceMappingURL=admin.js.map
