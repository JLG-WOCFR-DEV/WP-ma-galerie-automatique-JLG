(()=>{var Ze=(S,a)=>()=>(S&&(a=S(S=0)),a);var eo=(S,a)=>()=>(a||S((a={exports:{}}).exports,a),a.exports);var to,no,Xt,Jt,oo,en,tn=Ze(()=>{to=/%(\d+\$)?[sd]/g,no=()=>(S,...a)=>{let w=0;return String(S).replace(to,(W,te)=>{let Z,Ye=W.charAt(W.length-1);if(te){let Y=parseInt(te.slice(0,-1),10);if(Number.isNaN(Y)||Y<=0)return"";Z=Y-1}else Z=w,w+=1;let ae=Z>=0&&Z<a.length?a[Z]:void 0;if(Ye==="d"){let Y=parseInt(ae,10);return Number.isNaN(Y)?"":String(Y)}return typeof ae=="undefined"?"":String(ae)})},Xt=S=>S&&typeof S.sprintf=="function"?S.sprintf:no(),Jt=S=>S&&typeof S.__=="function"?S.__:a=>a,oo=S=>!S||typeof S!="object"?null:S.wp&&S.wp.i18n?S.wp.i18n:null,en=()=>oo(typeof window!="undefined"?window:globalThis)});var yt,Se,ro,nn,on,rn=Ze(()=>{yt={facebook:{viewBox:"0 0 24 24",paths:[{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z"}]},twitter:{viewBox:"0 0 24 24",paths:[{d:"M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z"}]},linkedin:{viewBox:"0 0 24 24",paths:[{d:"M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z"}]},pinterest:{viewBox:"0 0 24 24",paths:[{d:"M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z"}]},whatsapp:{viewBox:"0 0 24 24",paths:[{d:"M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z"}]},telegram:{viewBox:"0 0 24 24",paths:[{d:"M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z"}]},email:{viewBox:"0 0 24 24",paths:[{d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"}]},link:{viewBox:"0 0 24 24",paths:[{d:"M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z"}]},generic:{viewBox:"0 0 24 24",paths:[{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"},{d:"M13 17h-2v-2h2zm0-4h-2V7h2z"}]},copy:{viewBox:"0 0 24 24",paths:[{d:"M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"}]},download:{viewBox:"0 0 24 24",paths:[{d:"M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z"}]},native:{viewBox:"0 0 24 24",paths:[{d:"M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"}]}},Se=S=>typeof S!="string"?"":S.trim().toLowerCase().replace(/[^a-z0-9_-]/g,""),ro=S=>{let a=Se(S);return a&&yt[a]?yt[a]:yt.generic},nn=(S,a,w={})=>{if(!S||typeof S.createElementNS!="function")return null;let W=S.createElementNS("http://www.w3.org/2000/svg",a);return Object.keys(w).forEach(te=>{W.setAttribute(te,w[te])}),W},on=(S,a)=>{let w=ro(a),W=nn(S,"svg",{viewBox:w.viewBox,fill:"currentColor","aria-hidden":"true",focusable:"false"});return W?(Array.isArray(w.paths)&&w.paths.forEach(te=>{let Z=nn(S,"path",te);Z&&W.appendChild(Z)}),W):null}});var an=Ze(()=>{});var sn=Ze(()=>{tn();rn();an()});var io=eo((bo,T)=>{sn();(function(){"use strict";let S=en(),a=Jt(S),w=Xt(S),W=typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame.bind(window):g=>window.setTimeout(g,0),te=typeof window.cancelAnimationFrame=="function"?window.cancelAnimationFrame.bind(window):g=>{typeof window.clearTimeout=="function"&&window.clearTimeout(g)},Z=g=>typeof g!="string"||g.trim()===""?"":g.trim().split(/[-_\s]+/).filter(Boolean).map(v=>v.charAt(0).toUpperCase()+v.slice(1)).join(" "),Ye=g=>{let v=document.createElement("span");v.className="mga-share-option__icon";let k=on(document,Se(g));return k&&v.appendChild(k),v};function ae(g){let v=[];Array.isArray(g)?g.forEach(x=>{v.push(x)}):g&&typeof g=="object"&&Object.keys(g).forEach(x=>{let b=g[x];b&&typeof b=="object"&&v.push(Object.assign({key:x},b))});let k=new Set;return v.reduce((x,b)=>{if(!b||typeof b!="object")return x;let ne="";typeof b.key=="string"?ne=b.key:typeof b.slug=="string"&&(ne=b.slug);let B=Se(ne);if(!B&&typeof b.label=="string"&&(B=Se(b.label.replace(/\s+/g,"-"))),!B||k.has(B))return x;k.add(B);let O=typeof b.label=="string"&&b.label.trim()?b.label.trim():Z(B),X=typeof b.template=="string"?b.template.trim():"",l=Se(b.icon||B)||B,Ce=b.enabled===!0||b.enabled==="1"||b.enabled===1||b.enabled==="true"||b.enabled==="on";return x.push({key:B,label:O,template:X,icon:l,enabled:Ce}),x},[])}let Y="slide",ln=600,bt="ease-out",cn=["slide","fade","cube","coverflow","flip"],wt=new Set(["cube","coverflow","flip"]),un=["ease","ease-in","ease-out","ease-in-out","linear"],vt="bottom",dn=["bottom","left","hidden"],fn=g=>{if(typeof g!="string")return Y;let v=g.trim().toLowerCase();return cn.includes(v)?v:Y},pn=g=>{let v=parseInt(g,10);return Number.isNaN(v)?ln:Math.min(Math.max(v,100),5e3)},gn=g=>{if(typeof g!="string")return bt;let v=g.trim().toLowerCase();return un.includes(v)?v:bt},mn=g=>{if(typeof g!="string")return vt;let v=g.trim().toLowerCase();return dn.includes(v)?v:vt},me=(g,v)=>{!g||!g.wrapperEl||(g.wrapperEl.style.transitionTimingFunction=v)};function Qe(g,v){if(!g)return;let k=g.querySelector(".mga-echo-bg");if(!k)return;let x=typeof v=="string"?v.trim():"";if(!x){let O=k.querySelector(".mga-visible");O&&(O.classList.remove("mga-visible"),setTimeout(()=>{O.parentElement&&O.parentElement.removeChild(O)},400)),g.classList.remove("mga-has-texture");return}let b=document.createElement("img");b.className="mga-echo-bg__image",b.alt="",b.setAttribute("aria-hidden","true"),b.setAttribute("role","presentation"),b.decoding="async";let ne=!1,B=()=>{if(ne)return;ne=!0;let O=k.querySelector(".mga-visible");O&&(O.classList.remove("mga-visible"),setTimeout(()=>{O.parentElement&&O.parentElement.removeChild(O)},400)),k.appendChild(b),setTimeout(()=>b.classList.add("mga-visible"),10),g.classList.remove("mga-has-texture")};b.onload=B,b.onerror=()=>{g.classList.remove("mga-has-texture")},b.src=x,b.complete&&setTimeout(()=>B())}let Xe=!1,hn=()=>{if(Xe||typeof Swiper!="function")return;if(typeof Swiper.use!="function"){Xe=!0;return}let v=["Navigation","Autoplay","Thumbs","Zoom","Keyboard","A11y","EffectFade","EffectCube","EffectCoverflow","EffectFlip"].reduce((k,x)=>(Swiper[x]&&k.push(Swiper[x]),k),[]);v.length&&Swiper.use(v),Xe=!0};function Ae(g,v){if(!g)return;let k=g.querySelector("#mga-play-pause");if(!k)return;k.setAttribute("aria-pressed",v?"true":"false");let x=a(v?"Mettre le diaporama en pause":"Lancer le diaporama","lightbox-jlg");k.setAttribute("aria-label",x),k.setAttribute("title",x)}function xt(){let g=window.mga_settings||{},v=mn(g.thumbs_layout),k=()=>{},x=(e,t=!0)=>{if(typeof e=="undefined")return t;if(typeof e=="string"){let n=e.trim().toLowerCase();if(["false","0","no","off"].includes(n))return!1;if(["true","1","yes","on"].includes(n))return!0}return typeof e=="number"?e!==0:!!e},b=x(g.include_svg,!0),ne="jpe?g|png|gif|bmp|webp|avif",B=b?`${ne}|svg`:ne,O=new RegExp(`.(${B})(?:\\?.*)?(?:#.*)?$`,"i"),X=e=>typeof e=="string"&&/\.svg(?:\?.*)?(?:#.*)?$/i.test(e),l=window.mgaDebug||{enabled:!1,init:k,log:k,updateInfo:k,updateVisibleSlides:k,onForceOpen:k,stopTimer:k,restartTimer:k,table:k,shareAction:k},Ce=x(g.show_zoom,!0),Et=x(g.show_download,!0),he=x(g.show_share,!0),St=x(g.show_fullscreen,!0),yn=x(g.show_thumbs_mobile,!0),ye=x(g.show_cta,!0),bn=x(g.close_on_backdrop,!0),ze=x(g.loop,!0),wn=Object.prototype.hasOwnProperty.call(g,"start_on_clicked_image")?g.start_on_clicked_image:g.startOnClickedImage,At=x(wn,!1),je=x(g.share_copy,!0),Le=x(g.share_download,!0),De=ae(g.share_channels),Je={copy:a("Copier le lien","lightbox-jlg"),download:a("T\xE9l\xE9chargement rapide","lightbox-jlg"),native:a("Partager via l'appareil","lightbox-jlg")},Ct=()=>{let e=[];return De.forEach(t=>{if(!t||typeof t!="object")return;let{enabled:n,template:o}=t,s=typeof o=="string"&&o.trim()!=="";!n||!s||e.push({type:"social",key:t.key,label:t.label||Z(t.key)||t.key,template:o.trim(),icon:t.icon||t.key})}),je&&e.push({type:"copy",key:"copy",label:Je.copy,icon:"copy"}),Le&&e.push({type:"download",key:"download",label:Je.download,icon:"download"}),Mt()&&e.push({type:"native",key:"native",label:Je.native,icon:"native"}),e},jt=()=>Ct().length>0,Pe=()=>he&&jt(),$=[],et="mga-scroll-locked",c=null,F=null,re=null,ke=!1,tt=new Set,Re=new WeakMap,Lt,nt=!1,ot=null,rt=null,Oe=!1,Ne=!1,Be=!1,G=null,se=null,oe=[],Ue=null,j=null,be=!1,_e=null,Ie=null,le=null,ce=null,we={lastBaseAnnouncement:"",isTemporaryMessageActive:!1};l.init();let it={selector:"#mga-share",handler:e=>{e.preventDefault();let t=at();return!t||!t.image?(l.log(a("Impossible de partager l\u2019image active.","lightbox-jlg"),!0),!0):(Dt(t.image)||l.log(a("Aucune option de partage disponible pour l\u2019image active.","lightbox-jlg"),!0),!0)}},kt=()=>{$.includes(it)||($.push(it),Ve())},vn=()=>{let e=$.indexOf(it);e!==-1&&($.splice(e,1),Ve())};Ce&&$.push({selector:"#mga-zoom",handler:()=>c&&c.zoom?(c.zoom.toggle(),!0):!1}),Et&&$.push({selector:"#mga-download",handler:e=>{e.preventDefault();let t=It();return t?st(t)||l.log(a("Impossible de lancer le t\xE9l\xE9chargement de l\u2019image active.","lightbox-jlg"),!0):l.log(a("URL haute r\xE9solution introuvable pour l\u2019image active.","lightbox-jlg"),!0),!0}}),Pe()&&kt(),St&&$.push({selector:"#mga-fullscreen",handler:(e,t)=>{if(!t)return!1;let{request:n,exit:o,element:s}=Ot(t);if(s)if(o)try{let r=o();r&&typeof r.catch=="function"&&r.catch(i=>l.log(w(a("Erreur de sortie du plein \xE9cran\xA0: %s","lightbox-jlg"),i.message),!0))}catch(r){l.log(w(a("Erreur de sortie du plein \xE9cran\xA0: %s","lightbox-jlg"),r.message),!0)}else l.log(a("API de fermeture du plein \xE9cran indisponible sur ce navigateur.","lightbox-jlg"),!0);else if(n)try{let r=n();r&&typeof r.catch=="function"&&r.catch(i=>l.log(w(a("Erreur plein \xE9cran\xA0: %s","lightbox-jlg"),i.message),!0))}catch(r){l.log(w(a("Erreur plein \xE9cran\xA0: %s","lightbox-jlg"),r.message),!0)}else l.log(a("API plein \xE9cran indisponible sur ce navigateur.","lightbox-jlg"),!0);return!0}});function _t(e){if(!e||!e.target)return null;let t=e.target;if(t instanceof Element)return t;if(t&&typeof t=="object"){if(t.parentElement instanceof Element)return t.parentElement;if(t.parentNode instanceof Element)return t.parentNode}return null}function at(){if(!Array.isArray(oe)||!oe.length)return null;let e=c&&typeof c.activeIndex=="number"?c.activeIndex:0,t=c&&typeof c.realIndex=="number"?c.realIndex:e,n=oe[t];return n?{image:n,index:t}:null}function It(){let e=at();if(!e)return null;let{image:t}=e;return t&&typeof t.highResUrl=="string"&&t.highResUrl?t.highResUrl:null}function st(e){if(typeof e!="string"||!e)return!1;if(!document.body||typeof document.body.appendChild!="function")return l.log(a("T\xE9l\xE9chargement impossible\xA0: document.body indisponible.","lightbox-jlg"),!0),!1;let t=null;try{t=document.createElement("a"),t.href=e,t.rel="noopener noreferrer";let n="image";try{let o=new URL(e,window.location.href),s=o&&typeof o.pathname=="string"?o.pathname:"";if(s){let i=s.split("/").filter(Boolean).pop();i&&(n=i)}}catch(o){}return t.download=n,document.body.appendChild(t),t.click(),!0}catch(n){return l.log(w(a("\xC9chec du t\xE9l\xE9chargement\xA0: %s","lightbox-jlg"),n.message),!0),!1}finally{t&&t.parentNode===document.body&&document.body.removeChild(t)}}function Ve(e){let n=e||null;if(!n){let o=document.getElementById("mga-viewer");o&&(n=o.querySelector(".mga-toolbar"))}n&&n.setAttribute("data-mga-optional-buttons",String($.length))}function Ft(){let e=document.createElement("button");e.type="button",e.id="mga-share",e.className="mga-toolbar-button",e.setAttribute("aria-label",a("Partager l\u2019image","lightbox-jlg")),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls","mga-share-modal");let t=createSvgElement("svg",{class:"mga-icon mga-share-icon",viewBox:"0 0 24 24",fill:"currentColor"}),n=createSvgElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.03.47.09.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.03-.82l7.05 4.12c-.06.23-.08.46-.08.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"});return t.appendChild(n),e.appendChild(t),e}function Mt(){return typeof navigator!="undefined"&&navigator&&typeof navigator.share=="function"}function lt(e){if(!he||!jt())return null;if(j&&j.container&&j.container.parentElement===e)return j;let t=document.createElement("div");t.id="mga-share-modal",t.className="mga-share-modal",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-hidden","true"),t.setAttribute("hidden","hidden");let n=document.createElement("div");n.className="mga-share-modal__overlay",n.setAttribute("aria-hidden","true"),t.appendChild(n);let o=document.createElement("div");o.className="mga-share-modal__dialog",o.setAttribute("role","document"),o.setAttribute("tabindex","-1"),t.appendChild(o);let s=document.createElement("div");s.className="mga-share-modal__header",o.appendChild(s);let r=document.createElement("h2");r.id="mga-share-title",r.className="mga-share-modal__title",r.textContent=a("Partager cette image","lightbox-jlg"),s.appendChild(r);let i=document.createElement("button");i.type="button",i.className="mga-share-modal__close",i.setAttribute("aria-label",a("Fermer la fen\xEAtre de partage","lightbox-jlg")),i.innerHTML="&times;",s.appendChild(i);let d=document.createElement("div");d.className="mga-share-modal__body",o.appendChild(d);let f=document.createElement("p");f.id="mga-share-description",f.className="mga-share-modal__description",f.textContent=a("Choisissez une option de partage\xA0:","lightbox-jlg"),d.appendChild(f),t.setAttribute("aria-labelledby",r.id),t.setAttribute("aria-describedby",f.id);let u=document.createElement("ul");u.className="mga-share-modal__list",u.setAttribute("data-mga-share-list","true"),d.appendChild(u);let p=document.createElement("p");p.className="mga-share-modal__feedback",p.setAttribute("role","status"),p.setAttribute("aria-live","polite"),p.setAttribute("aria-atomic","true"),p.setAttribute("hidden","hidden"),d.appendChild(p),e.appendChild(t);let h=E=>{E&&typeof E.stopPropagation=="function"&&E.stopPropagation(),ve({reason:"overlay"})},C=()=>ve({reason:"close-button"});return n.addEventListener("click",h),i.addEventListener("click",C),u.addEventListener("click",Ln),j={container:t,dialog:o,list:u,closeButton:i,overlay:n,feedback:p,description:f,payload:null,options:[]},j}function Tt(){!j||!j.feedback||(j.feedback.textContent="",j.feedback.removeAttribute("data-mga-state"),j.feedback.setAttribute("hidden","hidden"))}function Q(e,t=!1,n){if(!j||!j.feedback)return;j.feedback.textContent=e||"";let o=n||(t?"error":e?"info":"");e?j.feedback.removeAttribute("hidden"):j.feedback.setAttribute("hidden","hidden"),o?j.feedback.setAttribute("data-mga-state",o):j.feedback.removeAttribute("data-mga-state"),e&&Jn(e,{tone:o||(t?"error":"info")})}function xn(e,t,n){if(!(!e||!e.list)){for(Tt();e.list.firstChild;)e.list.removeChild(e.list.firstChild);e.options=Array.isArray(t)?t:[],e.payload=n||{},e.list.setAttribute("data-mga-share-count",String(e.options.length)),e.options.forEach(o=>{let s=document.createElement("li");s.className="mga-share-modal__item";let r=document.createElement("button");r.type="button",r.className="mga-share-option",r.setAttribute("data-share-type",o.type),r.setAttribute("data-share-key",o.key),r.setAttribute("data-share-label",o.label),o.template&&r.setAttribute("data-share-template",o.template),o.icon&&r.setAttribute("data-share-icon",o.icon);let i=document.createElement("span");i.className="mga-share-option__content";let d=Ye(o.icon);d&&i.appendChild(d);let f=document.createElement("span");f.className="mga-share-option__label",f.textContent=o.label,i.appendChild(f),r.appendChild(i);let u=document.createElement("span");u.className="mga-share-option__chevron",u.setAttribute("aria-hidden","true"),u.textContent="\u203A",r.appendChild(u),s.appendChild(r),e.list.appendChild(s)})}}function En(e){return Ct().map(t=>({...t}))}function zt(e){if(!e||!e.dialog)return[];let t=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'];return Array.from(e.dialog.querySelectorAll(t.join(","))).filter(n=>!n.hasAttribute("disabled"))}function Sn(e){if(!be||!j)return;if(e.key==="Escape"){e.preventDefault(),ve({reason:"escape"});return}if(e.key!=="Tab")return;let t=zt(j);if(!t.length)return;let n=t[0],o=t[t.length-1],s=document.activeElement;e.shiftKey?(s===n||!j.dialog.contains(s))&&(e.preventDefault(),o.focus()):s===o&&(e.preventDefault(),n.focus())}function An(e,t){if(!e||!e.container)return!1;e.container.removeAttribute("hidden"),e.container.setAttribute("aria-hidden","false"),e.container.classList.add("is-visible"),be=!0,_e=t||(document.activeElement instanceof HTMLElement?document.activeElement:null),Ie=Sn,document.addEventListener("keydown",Ie,!0),t&&t.setAttribute("aria-expanded","true");let n=zt(e);return n.length?n[0].focus():e.closeButton&&e.closeButton.focus(),l.shareAction("open",{options:e.options.map(o=>o.key)}),!0}function ve({restoreFocus:e=!0,reason:t="manual"}={}){if(!j||!j.container||!be)return;j.container.classList.remove("is-visible"),j.container.setAttribute("aria-hidden","true"),j.container.setAttribute("hidden","hidden"),Ie&&(document.removeEventListener("keydown",Ie,!0),Ie=null);let n=document.getElementById("mga-share");n&&n.setAttribute("aria-expanded","false"),be=!1,e&&_e&&typeof _e.focus=="function"&&_e.focus(),_e=null,l.shareAction("close",{reason:t})}function Cn(e,t){if(typeof e!="string"||!e)return"";let n=t||{},o={url:n.url||"",text:n.text||n.title||"",title:n.title||n.text||""};return e.replace(/%([a-z]+)%/gi,(s,r)=>{let i=r.toLowerCase();return Object.prototype.hasOwnProperty.call(o,i)?encodeURIComponent(o[i]):""})}function jn(e){return typeof e!="string"?Promise.reject(new Error("invalid-text")):navigator.clipboard&&typeof navigator.clipboard.writeText=="function"?navigator.clipboard.writeText(e):new Promise((t,n)=>{try{let o=document.createElement("textarea");o.value=e,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o),o.select();let s=document.execCommand("copy");document.body.removeChild(o),s?t():n(new Error("execCommand-failed"))}catch(o){n(o)}})}function Ln(e){if(!j||!j.list||!be)return;let t=e.target instanceof Element?e.target.closest("button[data-share-type]"):null;if(!t)return;e.preventDefault();let n=t.getAttribute("data-share-type"),o=t.getAttribute("data-share-key")||"",s=t.getAttribute("data-share-label")||o,r=j.payload||{};if(n==="social"){let i=t.getAttribute("data-share-template")||"",d=Cn(i,r);if(!d){Q(a("Impossible de g\xE9n\xE9rer le lien de partage.","lightbox-jlg"),!0,"error"),l.shareAction("social",{target:o,success:!1,reason:"invalid-url"});return}let f=null;if(typeof window!="undefined"&&window&&typeof window.open=="function"&&(f=window.open(d,"_blank","noopener,noreferrer"),f&&typeof f=="object"&&"opener"in f))try{f.opener=null}catch(u){}f?(Q(w(a("Ouverture de %s dans un nouvel onglet.","lightbox-jlg"),s),!1,"info"),l.shareAction("social",{target:o,success:!0,url:d})):(Q(w(a("Impossible d\u2019ouvrir %s. V\xE9rifiez votre bloqueur de fen\xEAtres.","lightbox-jlg"),s),!0,"error"),l.shareAction("social",{target:o,success:!1,url:d}));return}if(n==="copy"){if(!r.url){Q(a("Aucun lien \xE0 copier pour cette image.","lightbox-jlg"),!0,"error"),l.shareAction("copy",{success:!1,reason:"missing-url"});return}jn(r.url).then(()=>{Q(a("Lien copi\xE9 dans le presse-papiers.","lightbox-jlg"),!1,"success"),l.shareAction("copy",{success:!0})}).catch(i=>{Q(a("Impossible de copier le lien. Essayez le raccourci clavier.","lightbox-jlg"),!0,"error"),l.shareAction("copy",{success:!1,reason:i&&i.message?i.message:"copy-error"})});return}if(n==="download"){if(!r.url){Q(a("Aucun fichier \xE0 t\xE9l\xE9charger pour cette image.","lightbox-jlg"),!0,"error"),l.shareAction("download",{success:!1,reason:"missing-url"});return}st(r.url)?(Q(a("T\xE9l\xE9chargement de l\u2019image lanc\xE9.","lightbox-jlg"),!1,"success"),l.shareAction("download",{success:!0})):(Q(a("Impossible de lancer le t\xE9l\xE9chargement.","lightbox-jlg"),!0,"error"),l.shareAction("download",{success:!1}));return}if(n==="native"){if(!Mt()){Q(a("Le partage natif n\u2019est pas pris en charge sur ce navigateur.","lightbox-jlg"),!0,"error"),l.shareAction("native",{success:!1,reason:"unsupported"});return}try{let i=navigator.share(r);l.shareAction("native",{success:!0}),ve({restoreFocus:!1,reason:"native-share"}),i&&typeof i.catch=="function"&&i.catch(d=>{let f=d&&d.message?d.message:a("Partage annul\xE9.","lightbox-jlg");l.shareAction("native",{success:!1,reason:f})})}catch(i){Q(w(a("Partage natif impossible\xA0: %s","lightbox-jlg"),i&&i.message?i.message:"unknown"),!0,"error"),l.shareAction("native",{success:!1,reason:i&&i.message?i.message:"error"})}return}l.shareAction("unknown",{type:n})}function Dt(e){if(!e||typeof e.highResUrl!="string"||!e.highResUrl)return!1;let t=document.getElementById("mga-viewer");if(!t)return!1;let n=lt(t);if(!n)return!1;let o=typeof e.caption=="string"?e.caption.trim():"",s=typeof document!="undefined"&&document&&typeof document.title=="string"?document.title:"",r={url:e.highResUrl};o&&(r.text=o),(o||s)&&(r.title=o||s);let i=En(r);if(!i.length)return l.shareAction("no-options",{url:e.highResUrl}),ct(),!1;xn(n,i,r);let d=t.querySelector("#mga-share");return!!An(n,d||null)}function ct(){let e=Pe();e?kt():vn();let t=document.getElementById("mga-viewer");if(!t)return;let n=t.querySelector(".mga-toolbar"),o=t.querySelector("#mga-share");if(!e){be&&ve({restoreFocus:!1,reason:"share-options-removed"}),o&&o.remove(),Ve(n);return}if(!o&&n){let r=Ft(),i=n.querySelector("#mga-fullscreen"),d=n.querySelector("#mga-close");i&&i.parentElement===n?n.insertBefore(r,i):d&&d.parentElement===n?n.insertBefore(r,d):n.appendChild(r)}if(lt(t)){let r=t.querySelector("#mga-share");r&&(r.setAttribute("aria-controls","mga-share-modal"),r.setAttribute("aria-expanded","false"))}Ve(n)}function Pt(e,t){if(hn(),typeof Swiper!="function"){let D=a("ERREUR\xA0: La d\xE9pendance Swiper est introuvable. Initialisation annul\xE9e.","lightbox-jlg");return l&&typeof l.log=="function"?l.log(D,!0):typeof console!="undefined"&&typeof console.error=="function"&&console.error(D),null}if(!t||!t.loop)return new Swiper(e,t);let n=e?e.querySelectorAll(".swiper-slide").length:0,s=(D=>{let z=[],U=_=>{typeof _=="number"&&!Number.isNaN(_)&&z.push(Math.ceil(_))};return U(D.slidesPerView),D.breakpoints&&typeof D.breakpoints=="object"&&Object.values(D.breakpoints).forEach(_=>{_&&typeof _=="object"&&U(_.slidesPerView)}),z.length?Math.max(...z):1})(t),r=typeof t.loopedSlides=="number"?Math.max(0,Math.floor(t.loopedSlides)):s,i=typeof t.loopAdditionalSlides=="number"?Math.max(0,Math.floor(t.loopAdditionalSlides)):0,d=typeof t.slidesPerGroup=="number"?Math.max(1,Math.floor(t.slidesPerGroup)):1,f=t.centeredSlides?1:0,u=r+i,p=Math.max(u+1,d+f+1,2);if(n>=p)return new Swiper(e,t);let h=Object.assign({},t),C=r,E=i;if(n>1){C=Math.min(r,Math.max(n-1,1));let D=Math.max(n-1-C,0);E=Math.min(i,D)}else h.loop=!1;h.loopedSlides=C,h.loopAdditionalSlides=E;let R=h.loop?`Loop ajust\xE9e (instance locale) : ${n} slide(s), boucle recalibr\xE9e \xE0 ${C} + ${E} slide(s) additionnelles.`:`Loop d\xE9sactiv\xE9e (instance locale) : ${n} slide disponible, boucle inutilisable.`;return l&&typeof l.log=="function"?l.log(R):typeof console!="undefined"&&typeof console.info=="function"&&console.info(R),new Swiper(e,h)}let kn=[{key:"ultrawide",label:a("\xC9cran ultralarge","lightbox-jlg"),minWidth:1600},{key:"desktop",label:a("Bureau","lightbox-jlg"),minWidth:1200},{key:"tablet",label:a("Tablette","lightbox-jlg"),minWidth:768},{key:"portrait",label:a("Portrait","lightbox-jlg"),minWidth:0}],Rt=e=>typeof e=="number"&&Number.isFinite(e)&&!Number.isNaN(e),_n=(e,t)=>{if(!e||typeof e!="object")return 1;let n=e.slidesPerView,{breakpoints:o}=e;return o&&typeof o=="object"&&Object.entries(o).map(([r,i])=>({width:parseFloat(r),config:i})).filter(({width:r,config:i})=>!Number.isNaN(r)&&t>=r&&i&&typeof i=="object").sort((r,i)=>r.width-i.width).forEach(({config:r})=>{Object.prototype.hasOwnProperty.call(r,"slidesPerView")&&(n=r.slidesPerView)}),Rt(n)?Math.max(1,Math.ceil(n)):n==="auto"?"auto":1},In=e=>kn.map(t=>({key:t.key,label:t.label,value:_n(e,t.minWidth)})),Fn=(e,t)=>{if(!l||typeof l.updateVisibleSlides!="function")return;let n=In(t),o=e&&typeof e.slidesPerViewDynamic=="function"?e.slidesPerViewDynamic():null,s=n.map(({label:r,value:i})=>i==="auto"?Rt(o)?w(a("%1$s\xA0: auto (~%2$s)","lightbox-jlg"),r,Math.max(1,Math.round(o))):w(a("%s\xA0: auto","lightbox-jlg"),r):w(a("%1$s\xA0: %2$s","lightbox-jlg"),r,i)).join(" | ");l.updateVisibleSlides(s)};function ut(e,t,n){if(!e||e.destroyed)return;let o=[t];if(typeof n!="undefined"&&o.push(n),e.params&&e.params.loop&&typeof e.slideToLoop=="function"){e.slideToLoop.apply(e,o);return}typeof e.slideTo=="function"&&e.slideTo.apply(e,o)}let ue=null;function Mn(){if(ue!==null||(ue=!1,typeof window=="undefined"||typeof document=="undefined"||typeof document.createElement!="function"||typeof HTMLElement=="undefined"||!HTMLElement.prototype||typeof HTMLElement.prototype.focus!="function"))return ue;let e=document.createElement("button"),t=document.body||document.documentElement;try{e.type="button",t&&typeof t.appendChild=="function"&&t.appendChild(e),HTMLElement.prototype.focus.call(e,{get preventScroll(){return ue=!0,!0}})}catch(n){ue=!1}finally{e.parentNode&&typeof e.parentNode.removeChild=="function"&&e.parentNode.removeChild(e)}return ue}function He(e,t={preventScroll:!0}){if(!e||typeof e.focus!="function")return;if(t&&Mn())try{e.focus(t);return}catch(o){}e.focus()}function Ot(e){let t=document,n=[{request:"requestFullscreen",exit:"exitFullscreen",element:"fullscreenElement"},{request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",element:"webkitFullscreenElement"},{request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",element:"webkitCurrentFullScreenElement"},{request:"mozRequestFullScreen",exit:"mozCancelFullScreen",element:"mozFullScreenElement"},{request:"msRequestFullscreen",exit:"msExitFullscreen",element:"msFullscreenElement"}],o={request:null,exit:null,element:null},s=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"];for(let r of s)if(typeof t[r]!="undefined"&&t[r]){o.element=t[r];break}for(let r of n)if(!o.request&&e&&typeof e[r.request]=="function"&&(o.request=e[r.request].bind(e)),!o.exit&&typeof t[r.exit]=="function"&&(o.exit=t[r.exit].bind(t)),o.request&&o.exit&&o.element)break;return o}function Nt(e){if(!e)return!1;if(e.hasAttribute("data-mga-allow-fallback"))return!0;if(e.dataset){let s=e.dataset.mgaAllowFallback;if(typeof s!="undefined"&&s!=="0"&&s!=="false"||e.dataset.mgaHighres)return!0;let r=e.dataset.type||e.dataset.wpType;if(typeof r=="string"&&r.toLowerCase()==="attachment")return!0}let t=e.getAttribute("rel");if(t&&t.split(/\s+/).includes("mga-allow-fallback"))return!0;let n=e.getAttribute("data-type");if(typeof n=="string"&&n.toLowerCase()==="attachment")return!0;let o=e.getAttribute("href");if(typeof o=="string"){if(/[?&]attachment_id=\d+/i.test(o)||/\/attachment\//i.test(o))return!0;try{let s=typeof window!="undefined"&&window.location?window.location.href:void 0,r=new URL(o,s);if(r.searchParams&&r.searchParams.has("attachment_id"))return!0}catch(s){}}return!1}function dt(e,t={}){if(!e)return null;let{excludeLarge:n=!1}=t,o=["data-mga-highres","data-full-url","data-large-file","data-orig-file","data-src","data-lazy-src"],s={mgaHighres:"data-mga-highres",fullUrl:"data-full-url",largeFile:"data-large-file",origFile:"data-orig-file",src:"data-src",lazySrc:"data-lazy-src"},r=[];for(let d of o){let f=e.getAttribute(d);f&&r.push({key:d,value:f.trim()})}if(e.dataset)for(let[d,f]of Object.entries(s)){let u=e.dataset[d];u&&!r.some(p=>p.key===f)&&r.push({key:f,value:u.trim()})}if(!r.length)return null;if(n){let d=new Set(["data-full-url","data-large-file","data-orig-file"]),f=["data-src","data-lazy-src","data-mga-highres"];if(r.some(p=>!d.has(p.key))){for(let h of f){let C=r.find(E=>E.key===h&&E.value);if(C)return C.value}let p=r.find(h=>!d.has(h.key)&&h.value);if(p)return p.value}}let i=r.find(d=>d.value);return i?i.value:null}function qe(e){if(typeof e!="string")return"";let t=e.trim();return!t||/^(?:about:|javascript:)/i.test(t)||/^(?:data:|blob:)/i.test(t)?"":t}function de(e){if(typeof e!="string")return"";let t=e.trim();if(!t)return"";if(/^\/\//.test(t)){let n=typeof window!="undefined"?window.location:null,o=n&&typeof n.protocol=="string"?n.protocol.toLowerCase():"";return o==="http:"||o==="https:"?`${o}${t}`:`https:${t}`}return/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(t)?/^https?:/i.test(t)?t:"":t}function Bt(e){if(!e)return"";let t=[typeof e.currentSrc=="string"?e.currentSrc:"",typeof e.src=="string"?e.src:""];for(let o of t){let s=qe(o);if(s)return s}let n=dt(e,{excludeLarge:!0});return qe(n)}function Tn(e){if(!e||!e.srcset)return null;let t=e.srcset.split(",").map(n=>n.trim()).filter(n=>n.length>0).map(n=>{let o=n.split(/\s+/),s=o[0],r=0;if(o[1]){let i=o[1].trim();/^[0-9]+w$/i.test(i)?r=parseInt(i,10):/^[0-9]*\.?[0-9]+x$/i.test(i)&&(r=parseFloat(i)*1e3)}return{url:s,score:r}}).filter(n=>n.url);return t.length?(t.sort((n,o)=>o.score-n.score),t[0].url):null}function Ut(e){if(!e)return null;let t=e.getAttribute("href")||"";if(!b&&X(t))return null;let n=O.test(t),o=n||Nt(e),s=n?de(t):null;if(o&&e.dataset&&e.dataset.mgaHighres){let u=de(e.dataset.mgaHighres);if(u&&(b||!X(u)))return u}let r=e.querySelector("img");if(!r)return null;if(o){let u=dt(r),p=de(u);if(p&&(b||!X(p)))return p}if(!o)return null;let i=de(Tn(r));if(i&&(b||!X(i)))return i;if(s&&(b||!X(s)))return s;let d=de(r.currentSrc);if(d&&(b||!X(d)))return d;let f=de(r.src);return f&&(b||!X(f))?f:null}let zn=new Set(["primary","secondary","outline"]),Dn=e=>{if(typeof e!="string")return"primary";let t=e.trim().toLowerCase();return zn.has(t)?t:"primary"},Pn=e=>{if(typeof e!="string")return"_self";let t=e.trim().toLowerCase();switch(t){case"_blank":case"_self":case"_parent":case"_top":return t;default:return"_self"}},Rn=(e,t)=>typeof e=="string"&&e.trim()?e.trim():t==="_blank"?"noopener noreferrer":"",ft=e=>{if(!e||typeof e!="object")return null;let t=typeof e.label=="string"?e.label.trim():"",n=typeof e.url=="string"?e.url.trim():"";if(!t||!n)return null;let o=Pn(e.target),s=Rn(e.rel,o),r=Dn(e.variant);return{label:t,url:n,target:o,rel:s,variant:r}},On=e=>{if(typeof e!="string"||!e.trim())return[];try{let t=JSON.parse(e);if(Array.isArray(t))return t.map(ft).filter(Boolean);let n=ft(t);return n?[n]:[]}catch(t){l&&typeof l.log=="function"&&l.log(w(a("Impossible de parser les CTA personnalis\xE9s\xA0: %s","lightbox-jlg"),t.message),!0)}return[]},xe=(e,t)=>{if(!e)return"";let n=e.getAttribute(t);return typeof n=="string"?n.trim():""},Vt=(e,t,n)=>{if(!e)return null;let o=xe(e,`${t}-label`),s=xe(e,`${t}-url`);if(!o||!s)return null;let r=xe(e,`${t}-target`)||void 0,i=xe(e,`${t}-rel`)||void 0,d=xe(e,`${t}-variant`)||n;return ft({label:o,url:s,target:r,rel:i,variant:d||n})},Nn=(e,t)=>{let n=[];e instanceof Element&&n.push(e),t instanceof Element&&n.push(t);let o=[],s=new Set,r=i=>{if(!i)return;let d=`${i.label}::${i.url}`;s.has(d)||(s.add(d),o.push(i))};return n.forEach(i=>{if(!i)return;On(xe(i,"data-mga-cta")).forEach(r),r(Vt(i,"data-mga-cta","primary")),r(Vt(i,"data-mga-cta-secondary","secondary"))}),o},pt=e=>!Array.isArray(e)||!e.length?[]:e.reduce((t,n,o)=>{let s=n.querySelector("img");if(!s)return t;let r=Ut(n);if(!r||!b&&X(r))return t;let i=Bt(s);if(!i){let p=qe(r);p&&(i=p)}if(!i)return t;let d="",f=n.closest("figure");if(f){let p=f.querySelector("figcaption");p&&(d=p.textContent.trim())}d||(d=s.alt||"");let u=Nn(n,s);return t.push({highResUrl:r,thumbUrl:i,caption:d,triggerIndex:o,ctas:u}),t},[]),Fe=(e,t,n,o={})=>{if(!Array.isArray(t)||!t.length)return!1;let s=Math.max(0,Math.min(parseInt(n,10)||0,t.length-1)),r=o.focusOrigin instanceof Element?o.focusOrigin:o.focusOrigin===null?null:void 0,i=null;if(r)i=r,G=r;else if(!o.skipFocusCapture){let u=document&&document.activeElement instanceof Element?document.activeElement:null;u&&(i=u,G=u)}let d=o.history||{},f=$t(t,s,{galleryId:e,history:d});return!f&&i&&i===G&&(G=null),f},ie=(()=>{if(typeof window=="undefined"||typeof window.location=="undefined")return null;try{let e=new URL(window.location.href),t=e.searchParams.get("mga");if(!t)return null;let n=t.lastIndexOf(":");if(n===-1)return null;let o=t.slice(0,n),s=t.slice(n+1);if(!o)return null;let r=decodeURIComponent(o);if(!r)return null;let i=parseInt(s,10),d=Number.isNaN(i)?0:Math.max(i-1,0),f=new URL(e.toString());return f.searchParams.delete("mga"),{galleryId:r,index:d,originalUrl:f.toString(),originalState:window.history.state}}catch(e){return l&&typeof l.log=="function"&&l.log(w(a("Lien profond invalide d\xE9tect\xE9\xA0: %s","lightbox-jlg"),e.message),!0),null}})();function $e(){let e=document.getElementById("mga-viewer");if(!e){l.log(a("Viewer non trouv\xE9. Cr\xE9ation \xE0 la vol\xE9e...","lightbox-jlg")),e=document.createElement("div"),e.id="mga-viewer",e.className="mga-viewer mga-viewer--compact",e.classList.toggle("mga-has-caption",!1),e.style.display="none",e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-labelledby","mga-viewer-title"),e.setAttribute("tabindex","-1");let t=document.createElement("span");t.id="mga-viewer-title",t.className="mga-screen-reader-text",t.textContent=a("Visionneuse d\u2019images","lightbox-jlg"),e.appendChild(t);let n=document.createElement("div");n.className="mga-echo-bg",e.appendChild(n);let o=document.createElement("div");o.className="mga-header",e.appendChild(o);let s=document.createElement("div");s.id="mga-counter",s.className="mga-counter",o.appendChild(s);let r=document.createElement("div");r.className="mga-caption-container",r.setAttribute("role","status"),r.setAttribute("aria-live","polite"),o.appendChild(r);let i=document.createElement("p");i.id="mga-caption",i.className="mga-caption",r.appendChild(i);let d=document.createElement("span");d.className="mga-screen-reader-text mga-caption-live",r.appendChild(d);let f=document.createElement("p");f.className="mga-caption-feedback",f.setAttribute("hidden","hidden"),r.appendChild(f);let u=document.createElement("div");u.className="mga-cta-container",u.setAttribute("data-mga-cta-container","true"),u.setAttribute("hidden","hidden"),o.appendChild(u);let p=document.createElement("div");p.className="mga-toolbar",o.appendChild(p);let h=document.createElement("button");h.type="button",h.id="mga-play-pause",h.className="mga-toolbar-button",h.setAttribute("aria-pressed","false"),h.setAttribute("aria-label",a("Lancer le diaporama","lightbox-jlg")),p.appendChild(h);let C=createSvgElement("svg",{class:"mga-timer-svg",viewBox:"0 0 36 36"}),E=createSvgElement("path",{class:"mga-timer-bg",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),R=createSvgElement("path",{class:"mga-timer-progress",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"});C.appendChild(E),C.appendChild(R),h.appendChild(C);let D=createSvgElement("svg",{class:"mga-icon mga-play-icon",viewBox:"0 0 24 24",fill:"currentColor"}),z=createSvgElement("path",{d:"M8 5v14l11-7z"});D.appendChild(z),h.appendChild(D);let U=createSvgElement("svg",{class:"mga-icon mga-pause-icon",viewBox:"0 0 24 24",fill:"currentColor"});U.style.display="none";let _=createSvgElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"});if(U.appendChild(_),h.appendChild(U),Ae(e,!1),Ce){let y=document.createElement("button");y.type="button",y.id="mga-zoom",y.className="mga-toolbar-button",y.setAttribute("aria-label",a("Zoom","lightbox-jlg")),p.appendChild(y);let A=createSvgElement("svg",{class:"mga-icon",viewBox:"0 0 24 24",fill:"currentColor"}),P=createSvgElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),H=createSvgElement("path",{d:"M10 9h-1v-1H8v1H7v1h1v1h1v-1h1V9z"});A.appendChild(P),A.appendChild(H),y.appendChild(A)}if(Et){let y=document.createElement("button");y.type="button",y.id="mga-download",y.className="mga-toolbar-button",y.setAttribute("aria-label",a("T\xE9l\xE9charger l\u2019image","lightbox-jlg")),p.appendChild(y);let A=createSvgElement("svg",{class:"mga-icon mga-download-icon",viewBox:"0 0 24 24",fill:"currentColor"}),P=createSvgElement("path",{d:"M5 20h14v-2H5v2zm7-16l-5 5h3v4h4v-4h3l-5-5z"});A.appendChild(P),y.appendChild(A)}if(Pe()){let y=Ft();p.appendChild(y)}if(St){let y=document.createElement("button");y.type="button",y.id="mga-fullscreen",y.className="mga-toolbar-button",y.setAttribute("aria-label",a("Plein \xE9cran","lightbox-jlg")),p.appendChild(y);let A=createSvgElement("svg",{class:"mga-icon",viewBox:"0 0 24 24",fill:"currentColor"}),P=createSvgElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5V14h-2v3zM14 5v2h3v3h2V5h-5z"});A.appendChild(P),y.appendChild(A)}p.setAttribute("data-mga-optional-buttons",String($.length));let V=document.createElement("button");V.type="button",V.id="mga-close",V.className="mga-toolbar-button",V.setAttribute("aria-label",a("Fermer","lightbox-jlg")),p.appendChild(V);let K=createSvgElement("svg",{class:"mga-icon",viewBox:"0 0 24 24",fill:"currentColor"}),J=createSvgElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"});K.appendChild(J),V.appendChild(K);let N=document.createElement("div");N.className="swiper mga-main-swiper",e.appendChild(N);let L=document.createElement("div");L.className="swiper-wrapper",L.id="mga-main-wrapper",N.appendChild(L);let M=document.createElement("button");M.type="button",M.className="swiper-button-next mga-nav-button",M.id="mga-next",M.setAttribute("aria-label",a("Image suivante","lightbox-jlg")),M.setAttribute("title",a("Image suivante","lightbox-jlg")),N.appendChild(M);let m=document.createElement("button");if(m.type="button",m.className="swiper-button-prev mga-nav-button",m.id="mga-prev",m.setAttribute("aria-label",a("Image pr\xE9c\xE9dente","lightbox-jlg")),m.setAttribute("title",a("Image pr\xE9c\xE9dente","lightbox-jlg")),N.appendChild(m),v!=="hidden"){let y=document.createElement("div");y.className="swiper mga-thumbs-swiper",e.appendChild(y);let A=document.createElement("div");A.className="swiper-wrapper",A.id="mga-thumbs-wrapper",y.appendChild(A)}if(Pe()&&lt(e)){let A=e.querySelector("#mga-share");A&&A.setAttribute("aria-controls","mga-share-modal")}document.body&&typeof document.body.appendChild=="function"&&document.body.appendChild(e),e&&e.parentNode?l.log(a("Viewer cr\xE9\xE9 et ajout\xE9 au body avec succ\xE8s.","lightbox-jlg")):l.log(a("ERREUR CRITIQUE\xA0: \xC9chec de la cr\xE9ation du viewer\xA0!","lightbox-jlg"),!0)}return e}l.log(a("Script initialis\xE9 et pr\xEAt.","lightbox-jlg")),l.updateInfo("mga-debug-status",a("Pr\xEAt","lightbox-jlg"),"#4CAF50");let Bn=[".wp-block-post-content",".entry-content",".post-content",".site-main",".content-area","main",".hentry","#primary","#main"],Un=Array.isArray(g.contentSelectors)?g.contentSelectors:[],Vn=Array.from(new Set(Un.concat(Bn).filter(Boolean))),fe=null,Ge=a("Aucune zone d\xE9tect\xE9e","lightbox-jlg");for(let e of Vn){let t=null;try{t=document.querySelector(e)}catch(n){let o=w(a("S\xE9lecteur CSS invalide ignor\xE9\xA0: %s","lightbox-jlg"),e),s=n&&n.message?` (${n.message})`:"",r=`${o}${s}`;l&&typeof l.log=="function"?l.log(r,!0):typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(r);continue}if(t){fe=t,Ge=e;break}}if(!fe&&g.allowBodyFallback===!0&&document.body&&(fe=document.body,Ge=a("<body> (opt-in fallback)","lightbox-jlg")),!fe){l.updateInfo("mga-debug-content-area",Ge,"#F44336"),l.log(a("Aucune zone de contenu valide d\xE9tect\xE9e. Initialisation du diaporama interrompue.","lightbox-jlg"),!0);return}l.updateInfo("mga-debug-content-area",Ge,"#4CAF50");let Ht="__mga-default-group__",Ke=typeof g.groupAttribute=="string"?g.groupAttribute.trim():"",qt="mga-group:",Hn=new Set(["nofollow","noreferrer","noopener","opener","external"]),qn=e=>{if(typeof e!="string")return null;let t=e.split(/\s+/).map(n=>n.trim()).filter(Boolean);for(let n of t)if(n.toLowerCase().startsWith(qt)){let o=n.slice(qt.length).trim();if(o)return o}for(let n of t){let o=n.toLowerCase();if(!(!o||Hn.has(o))&&!o.includes(":"))return n}return null},gt=e=>{if(!(e instanceof Element))return Ht;let t=qn(e.getAttribute("rel"));if(t)return`rel:${t}`;let n=[];Ke&&n.push(Ke),n.push("data-mga-gallery");let o=Ke?Ke.toLowerCase():"";for(let s of n){if(!s||s.toLowerCase()==="rel")continue;let r=e.getAttribute(s);if(typeof r!="string")continue;let i=r.trim();if(i)return`${s}:${i}`}if(o==="href"){let s=e.getAttribute("href");if(typeof s=="string"){let r=s.trim();if(r)return`href:${r}`}}return Ht},Me=(e=!0)=>{let t=Array.from(fe.querySelectorAll("a")).filter(o=>o.querySelector("img")),n=t.reduce((o,s)=>{let r=gt(s);return o[r]||(o[r]=[]),o[r].push(s),o},{});if(e){let o=Object.keys(n).length,s=`${t.length} (${o} groupe${o>1?"s":""} apr\xE8s filtrage)`;l.updateInfo("mga-debug-trigger-img",s)}return n},$n={resolveLinkGroupId:gt,isExplicitFallbackAllowed:Nt,sanitizeHighResUrl:de,sanitizeThumbnailUrl:qe,resolveThumbnailUrl:Bt,getImageDataAttributes:dt};typeof T!="undefined"&&T.exports&&(T.exports.helpers=$n);let I=(()=>{if(!(typeof window!="undefined"&&window.history&&typeof window.history.pushState=="function"&&typeof window.history.replaceState=="function"))return{isSupported:!1,isActive:()=>!1,getGalleryId:()=>null,getLastIndex:()=>0,push:()=>!1,update:()=>{},beginClose:()=>!1,finalizeClose:()=>{},adoptExistingState:()=>{}};let t=!1,n=null,o=0,s=!1,r=null,i=null,d=(u,p)=>{try{let h=new URL(window.location.href),C=encodeURIComponent(u||""),E=Math.max(1,(parseInt(p,10)||0)+1);return h.searchParams.set("mga",`${C}:${E}`),h.toString()}catch(h){return null}},f=(u,p)=>({mgaViewer:{galleryId:u,index:p,returnUrl:r||window.location.href}});return{isSupported:!0,isActive:()=>t,getGalleryId:()=>n,getLastIndex:()=>o,push:(u,p,h={})=>{let C=typeof h.originalUrl=="string"?h.originalUrl:window.location.href,E=Object.prototype.hasOwnProperty.call(h,"originalState")?h.originalState:window.history.state;if(h.replaceOriginal&&C)try{window.history.replaceState(E,"",C)}catch(D){}let R=d(u,p);if(!R)return!1;try{return r=C,i=E,window.history.pushState(f(u,p),"",R),t=!0,s=!1,n=u,o=p,!0}catch(D){return!1}},update:u=>{if(!t)return;let p=d(n,u);if(p){o=u;try{window.history.replaceState(f(n,u),"",p)}catch(h){}}},beginClose:()=>{if(!t)return!1;s=!0;try{return window.history.back(),!0}catch(u){return s=!1,!1}},finalizeClose:()=>{t=!1,n=null,o=0,s=!1,r=null,i=null},adoptExistingState:(u,p,h={})=>{t=!0,n=u,o=p,s=!1,typeof h.originalUrl=="string"?r=h.originalUrl:r||(r=window.location.href),Object.prototype.hasOwnProperty.call(h,"originalState")&&(i=h.originalState)}}})(),{cleanup:Gn,active:Kn}=(()=>{if(typeof MutationObserver!="function")return{cleanup:k,active:!1};if(!l.enabled)return{cleanup:k,active:!1};let e=new MutationObserver(()=>{Me()});return e.observe(fe,{childList:!0,subtree:!0}),{cleanup:()=>e.disconnect(),active:!0}})();Me(),ie&&ie.galleryId&&setTimeout(()=>{let t=Me(!1)[ie.galleryId]||[],n=pt(t);n.length&&Fe(ie.galleryId,n,ie.index,{skipFocusCapture:!0,history:{action:"push",replaceOriginal:!0,originalUrl:ie.originalUrl,originalState:ie.originalState}}),ie=null},0),Kn&&window.addEventListener("beforeunload",Gn),l.onForceOpen(()=>{l.log(a("Clic sur 'Forcer l'ouverture'.","lightbox-jlg"));let e=[{highResUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20600%22%3E%3Crect%20width%3D%22800%22%20height%3D%22600%22%20fill%3D%22%230073aa%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20font-size%3D%2248%22%20fill%3D%22%23ffffff%22%3EImage%20Test%201%3C%2Ftext%3E%3C%2Fsvg%3E",thumbUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20150%20150%22%3E%3Crect%20width%3D%22150%22%20height%3D%22150%22%20fill%3D%22%230073aa%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20font-size%3D%2218%22%20fill%3D%22%23ffffff%22%3EThumb%201%3C%2Ftext%3E%3C%2Fsvg%3E",caption:a("Ceci est la premi\xE8re image de test.","lightbox-jlg")},{highResUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20600%22%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22grad%22%20x1%3D%220%25%22%20y1%3D%220%25%22%20x2%3D%22100%25%22%20y2%3D%22100%25%22%3E%3Cstop%20offset%3D%220%25%22%20stop-color%3D%22%23f44336%22%2F%3E%3Cstop%20offset%3D%22100%25%22%20stop-color%3D%22%23ff9800%22%2F%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Crect%20width%3D%22800%22%20height%3D%22600%22%20fill%3D%22url(%23grad)%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20font-size%3D%2248%22%20fill%3D%22%23ffffff%22%3EImage%20Test%202%3C%2Ftext%3E%3C%2Fsvg%3E",thumbUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20150%20150%22%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22gradThumb%22%20x1%3D%220%25%22%20y1%3D%220%25%22%20x2%3D%22100%25%22%20y2%3D%22100%25%22%3E%3Cstop%20offset%3D%220%25%22%20stop-color%3D%22%23f44336%22%2F%3E%3Cstop%20offset%3D%22100%25%22%20stop-color%3D%22%23ff9800%22%2F%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Crect%20width%3D%22150%22%20height%3D%22150%22%20fill%3D%22url(%23gradThumb)%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20font-size%3D%2218%22%20fill%3D%22%23ffffff%22%3EThumb%202%3C%2Ftext%3E%3C%2Fsvg%3E",caption:a("Ceci est la seconde image de test.","lightbox-jlg")}],t=document.activeElement instanceof Element?document.activeElement:null;Fe("__debug__",e,0,{focusOrigin:t||null,history:{action:"push"}})||(G=null)}),fe.addEventListener("click",function(e){if(e.defaultPrevented||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;let t=_t(e);if(!t)return;let n=t.closest("a");if(n&&!n.hasAttribute("download")&&n.querySelector("img")){l.log(a("Clic sur un lien contenant une image.","lightbox-jlg"));let o=Ut(n);if(!o){l.log(a("URL haute r\xE9solution introuvable pour le lien cliqu\xE9.","lightbox-jlg"));return}let s=Me(),r=gt(n),i=s[r]||[];l.log(w(a("Pr\xE9paration de la galerie pour le groupe %s.","lightbox-jlg"),r));let d=i.indexOf(n);if(d===-1){l.log(a("ERREUR\xA0: Lien d\xE9clencheur introuvable dans la collection actuelle.","lightbox-jlg"),!0);return}let f=pt(i);if(l.log(w(a("%d images valides pr\xE9par\xE9es pour la galerie.","lightbox-jlg"),f.length)),l.table(f),!f.length){l.log(a("ERREUR\xA0: Aucune image valide d\xE9tect\xE9e pour cette galerie.","lightbox-jlg"),!0);return}let u=f.findIndex(E=>E.triggerIndex===d);u===-1&&(l.log(a("ERREUR : L'image cliqu\xE9e n'a pas \xE9t\xE9 trouv\xE9e dans la galerie construite.","lightbox-jlg"),!0),l.log(w(a("URL cliqu\xE9e recherch\xE9e\xA0: %s","lightbox-jlg"),o),!0));let p=At&&u!==-1?u:0;l&&typeof l.log=="function"&&l.log(w(a("Index initial demand\xE9 via clic\xA0: %1$d (option active\xA0: %2$s, trouv\xE9\xA0: %3$d).","lightbox-jlg"),p,a(At?"oui":"non","lightbox-jlg"),u));let h=document.activeElement instanceof Element?document.activeElement:null;Fe(r,f,p,{focusOrigin:h||null,history:{action:"push"}})?e.preventDefault():G=null}});let Wn=e=>{if(!I.isSupported)return;let t=e&&typeof e.state=="object"&&e.state!==null?e.state:null,n=t&&typeof t.mgaViewer=="object"?t.mgaViewer:null,o=$e();if(n&&n.galleryId){let s=n.galleryId,r=Number.isFinite(n.index)?n.index:0,i=typeof n.returnUrl=="string"?n.returnUrl:void 0,f=Me(!1)[s]||[],u=pt(f);if(!u.length){o&&o.style.display!=="none"&&Ee(o,{skipHistory:!0});return}let p={originalUrl:i,originalState:t};if(o&&o.style.display!=="none")if(Ue!==s)Ee(o,{skipHistory:!0}),Fe(s,u,r,{skipFocusCapture:!0,history:Object.assign({action:"sync"},p)});else{I.adoptExistingState(s,r,p);let h=Math.max(0,Math.min(r,u.length-1));oe=u,Ue=s,c&&!c.destroyed&&ut(c,h,0),We(o,u,h)}else Fe(s,u,r,{skipFocusCapture:!0,history:Object.assign({action:"sync"},p)});return}if(I.isActive&&I.isActive()){let s=$e();s&&s.style.display!=="none"&&Ee(s,{skipHistory:!0})}};function $t(e,t,n={}){l.log(w(a("openViewer appel\xE9 avec %1$d images, index %2$d.","lightbox-jlg"),e.length,t)),l&&typeof l.restartTimer=="function"&&l.restartTimer();let o=$e();if(!o)return!1;let s=parseInt(t,10),r=Number.isFinite(s)?s:0,i=Math.min(Math.max(r,0),Math.max(e.length-1,0)),d=typeof n.galleryId=="string"?n.galleryId:null,f=n&&typeof n.history=="object"&&n.history!==null?n.history:{},u=typeof f.action=="string"?f.action:"push",p={originalUrl:f.originalUrl,originalState:f.originalState,replaceOriginal:f.replaceOriginal};o.className="mga-viewer mga-viewer--compact",o.classList.toggle("mga-has-caption",!1),v==="left"?o.classList.add("mga-thumbs-left"):v==="hidden"&&o.classList.add("mga-thumbs-hidden"),g.background_style==="blur"&&o.classList.add("mga-has-blur"),g.background_style==="texture"&&o.classList.add("mga-has-texture"),yn||o.classList.add("mga-hide-thumbs-mobile");try{let z=function(L){c&&!c.destroyed&&ut(c,L),F&&!F.destroyed&&typeof F.slideTo=="function"&&F.slideTo(L),R(L)};c&&c.destroy(!0,!0),F&&F.destroy(!0,!0),c=null,F=null,tt.clear();let h=o.querySelector("#mga-main-wrapper"),C=o.querySelector("#mga-thumbs-wrapper");h.textContent="",C&&(C.textContent="");let E=[],R=L=>{if(!E.length)return;let M=!1;if(E.forEach(m=>{let y=parseInt(m.getAttribute("data-slide-index"),10);Number.isFinite(y)&&y===L?(m.setAttribute("aria-current","true"),m.setAttribute("tabindex","0"),M=!0):(m.removeAttribute("aria-current"),m.setAttribute("tabindex","-1"))}),!M){let m=E[0];m&&m.setAttribute("tabindex","0")}},D=(L,M)=>L&&L.caption?w(a("Afficher la diapositive %s\xA0: %s","lightbox-jlg"),String(M),L.caption):w(a("Afficher la diapositive %s","lightbox-jlg"),String(M));if(e.forEach((L,M)=>{let m=document.createElement("div");m.className="swiper-slide",m.setAttribute("data-slide-index",M);let y=document.createElement("div");y.className="mga-spinner",y.style.display="none",m.appendChild(y);let A=document.createElement("div");A.className="swiper-zoom-container";let P=document.createElement("img");if(P.setAttribute("loading","lazy"),P.setAttribute("src",L.highResUrl),P.setAttribute("alt",L.caption),A.appendChild(P),m.appendChild(A),h.appendChild(m),C){let H=document.createElement("div");H.className="swiper-slide";let q=document.createElement("button");q.type="button",q.className="mga-thumb-button",q.setAttribute("data-slide-index",String(M)),q.setAttribute("aria-label",D(L,M+1)),q.setAttribute("tabindex",M===i?"0":"-1");let pe=document.createElement("img");pe.setAttribute("loading","lazy"),pe.setAttribute("src",L.thumbUrl),pe.setAttribute("alt",L.caption),q.appendChild(pe);let ht=Te=>{Te&&Te.preventDefault(),z(M)};q.addEventListener("click",ht),q.addEventListener("keydown",Te=>{let{key:ge}=Te;if(!["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Home","End"].includes(ge)||(Te.preventDefault(),!E.length))return;let ee=M;ge==="Home"?ee=0:ge==="End"?ee=E.length-1:ge==="ArrowLeft"||ge==="ArrowUp"?ee=M-1:(ge==="ArrowRight"||ge==="ArrowDown")&&(ee=M+1),ee<0?ee=E.length-1:ee>=E.length&&(ee=0);let Qt=E[ee];Qt&&(Qt.focus(),z(ee))}),E.push(q),H.appendChild(q),C.appendChild(H)}}),l.log(a("Wrappers HTML remplis avec URLs optimis\xE9es.","lightbox-jlg")),E.length?(le=R,R(i)):le=null,Qn(o,e,i),!c){let L=a("Visionneuse annul\xE9e\xA0: Swiper n\u2019a pas pu \xEAtre initialis\xE9.","lightbox-jlg");return l&&typeof l.log=="function"?l.log(L,!0):typeof console!="undefined"&&typeof console.error=="function"&&console.error(L),o.style.display="none",!1}oe=Array.isArray(e)?e:[],Ue=d;let U=()=>{!c||c.destroyed||(ut(c,i,0),F&&typeof F.slideTo=="function"&&F.slideTo(i),g.background_style==="echo"&&e[i]&&e[i].highResUrl&&Qe(o,e[i].highResUrl),We(o,e,i))};!!(c&&c.params&&c.params.cssMode)?(o.style.display="flex",(typeof window!="undefined"&&typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame.bind(window):M=>setTimeout(M,0))(()=>{U()})):(U(),o.style.display="flex"),I.isSupported&&(u==="sync"?(I.adoptExistingState(d,i,p),I.isActive&&I.isActive()&&I.update(i)):u==="none"?I.adoptExistingState(d,i,p):(!I.push(d,i,p)&&typeof I.adoptExistingState=="function"&&I.adoptExistingState(d,i,p),I.isActive&&I.isActive()&&I.update(i))),G||(G=document.activeElement),Yn(o);let V=document.body.style.overflow,K=document.body.style.paddingRight;ot=V,rt=K;let J=0;if(typeof window!="undefined"&&typeof window.getComputedStyle=="function"){let L=window.getComputedStyle(document.body);J=parseFloat(L.paddingRight)||0}else if(K){let L=parseFloat(K);J=Number.isNaN(L)?0:L}let N=typeof window!="undefined"&&typeof window.innerWidth=="number"&&typeof document!="undefined"&&document.documentElement?Math.max(window.innerWidth-document.documentElement.clientWidth,0):0;return N>0?(document.body.style.paddingRight=`${J+N}px`,Ne=!0):Ne=!1,document.body.classList.contains(et)?Be=!1:(document.body.classList.add(et),Be=!0),V!=="hidden"?(document.body.style.overflow="hidden",Oe=!0):Oe=!1,l.log(a("Galerie affich\xE9e avec succ\xE8s.","lightbox-jlg")),nt||(window.addEventListener("resize",Yt),nt=!0),!0}catch(h){return l.log(w(a("ERREUR dans openViewer\xA0: %s","lightbox-jlg"),h.message),!0),console.error(h),o.style.display="none",!1}}function Zn(e){return Array.from(e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(n=>{if(n.disabled||n.getAttribute("aria-hidden")==="true")return!1;let o=n.getBoundingClientRect();return!!(o.width||o.height||n.getClientRects().length)})}function Yn(e){e.hasAttribute("tabindex")||e.setAttribute("tabindex","-1"),se&&e.removeEventListener("keydown",se,!0),se=function(o){if(o.key!=="Tab")return;let s=Zn(e);if(!s.length){o.preventDefault(),He(e);return}let r=s.indexOf(document.activeElement),i=r;o.shiftKey?r<=0?i=s.length-1:i=r-1:r===-1||r===s.length-1?i=0:i=r+1,o.preventDefault(),He(s[i])},e.addEventListener("keydown",se,!0);let t=e.querySelector("#mga-close"),n=t&&t.offsetParent!==null?t:e;n&&typeof n.focus=="function"&&He(n)}function Qn(e,t,n=0){typeof re=="function"&&(re(),re=null),ke=!1;let o=fn(g.effect),s=pn(g.speed),r=gn(g.easing),i=e.querySelector(".mga-main-swiper"),d=v==="hidden"?null:e.querySelector(".mga-thumbs-swiper");if(d){let m={spaceBetween:10,slidesPerView:"auto",freeMode:!0,watchSlidesProgress:!0,passiveListeners:!0};v==="left"&&(m.direction="vertical",m.breakpoints={0:{direction:"horizontal"},769:{direction:"vertical"}}),F=Pt(d,m),F&&me(F,r)}else F=null;if(!F&&v!=="hidden"){let m=a("Initialisation des miniatures Swiper impossible. La visionneuse fonctionnera sans elles.","lightbox-jlg");l&&typeof l.log=="function"?l.log(m,!0):typeof console!="undefined"&&typeof console.error=="function"&&console.error(m)}let f={delay:parseInt(g.delay,10)*1e3||4e3,disableOnInteraction:!1,pauseOnMouseEnter:!1},u=typeof window!="undefined"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)"):null,p=!!(u&&u.matches);l&&typeof l.log=="function"&&(u?l.log(w(a("Pr\xE9f\xE9rence de r\xE9duction des animations d\xE9tect\xE9e\xA0: %s.","lightbox-jlg"),a(p?"oui":"non","lightbox-jlg"))):l.log(a("Impossible de d\xE9terminer la pr\xE9f\xE9rence de r\xE9duction des animations (matchMedia indisponible).","lightbox-jlg")));let h=o,C=s,E=!1;p&&(E=!0,wt.has(h)&&(l&&typeof l.log=="function"&&l.log(a("Effet 3D d\xE9sactiv\xE9 pour respecter la pr\xE9f\xE9rence de r\xE9duction des animations.","lightbox-jlg")),h=Y),C=Math.min(C,300));let R=E&&h==="slide"&&!ze;l&&typeof l.log=="function"&&(l.log(w(a("Effet retenu\xA0: %1$s (vitesse\xA0: %2$ims).","lightbox-jlg"),h,C)),R?l.log(a("Mode CSS activ\xE9 pour limiter les animations.","lightbox-jlg")):E&&h==="slide"&&ze&&l.log(a("Mode CSS non activ\xE9 car incompatible avec le mode boucle.","lightbox-jlg")));let D=Math.min(Math.max(parseInt(n,10)||0,0),Math.max(t.length-1,0));l&&typeof l.log=="function"&&l.log(w(a("Index initial normalis\xE9\xA0: %1$d (boucle\xA0: %2$s, CSS mode\xA0: %3$s).","lightbox-jlg"),D,a(ze?"oui":"non","lightbox-jlg"),a(R?"oui":"non","lightbox-jlg")));let z=()=>{l.log(a("Autoplay D\xC9MARR\xC9.","lightbox-jlg")),e.querySelector(".mga-play-icon").style.display="none",e.querySelector(".mga-pause-icon").style.display="inline-block",Ae(e,!0)},U=()=>{l.log(a("Autoplay ARR\xCAT\xC9.","lightbox-jlg")),e.querySelector(".mga-play-icon").style.display="inline-block",e.querySelector(".mga-pause-icon").style.display="none";let m=e.querySelector(".mga-timer-progress");m&&(m.style.strokeDashoffset=100),l.updateInfo("mga-debug-autoplay-time",a("Stopp\xE9","lightbox-jlg")),Ae(e,!1)},_={zoom:Ce,spaceBetween:10,loop:ze,effect:h,speed:C,cssMode:R,initialSlide:D,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(m){Gt(t,m.realIndex),typeof le=="function"&&le(m.realIndex)},slideChange:function(m){We(e,t,m.realIndex),g.background_style==="echo"&&Qe(e,t[m.realIndex].highResUrl),typeof le=="function"&&le(m.realIndex)},slideChangeTransitionEnd:function(){F&&!F.destroyed&&F.update(),Gt(t,this.realIndex)},autoplayTimeLeft(m,y,A){let P=e.querySelector(".mga-timer-progress");P&&(P.style.strokeDashoffset=100-A*100),l.updateInfo("mga-debug-autoplay-time",w(a("%ss","lightbox-jlg"),(y/1e3).toFixed(2)))},slideChangeTransitionStart:function(m){let y=m.slides[m.activeIndex],A=y.querySelector("img");A&&!A.complete&&(l.log(w(a("Chargement de l'image %s...","lightbox-jlg"),y.dataset.slideIndex)),y.querySelector(".mga-spinner").style.display="block",A.onload=()=>{l.log(w(a("Image %s charg\xE9e.","lightbox-jlg"),y.dataset.slideIndex)),y.querySelector(".mga-spinner").style.display="none"})},autoplayStart:z,autoplayStop:U,touchStart:()=>{l.log(a("Interaction manuelle D\xC9TECT\xC9E (touch).","lightbox-jlg"))},sliderMove:()=>{l.log(a("Interaction manuelle D\xC9TECT\xC9E (drag).","lightbox-jlg"))}}};h==="fade"&&(_.fadeEffect={crossFade:!0}),p||(_.autoplay=Object.assign({},f)),F&&(_.thumbs={swiper:F});let V=_.on.init;_.on.init=function(m){typeof V=="function"&&V.call(this,m),me(m,r)};let K=_.on.setTransition;if(_.on.setTransition=function(m){typeof K=="function"&&K.apply(this,arguments);let y=m&&m.wrapperEl?m:this;me(y,r)},typeof T!="undefined"&&T.exports&&(T.exports.__testExports=T.exports.__testExports||{},T.exports.__testExports.getAutoplayHandlers=()=>({autoplayStart:z,autoplayStop:U})),c=Pt(i,_),!c){let m=a("Initialisation du Swiper principal impossible. Visionneuse indisponible.","lightbox-jlg");l&&typeof l.log=="function"?l.log(m,!0):typeof console!="undefined"&&typeof console.error=="function"&&console.error(m);return}me(c,r);let J=()=>{let m=c&&c.params&&typeof c.params=="object"?c.params:_;Fn(c,m)};J(),c&&typeof c.on=="function"&&(c.on("resize",J),c.on("breakpoint",J),c.on("slidesLengthChange",J));let N=c.autoplay,L=!!(N&&typeof N.start=="function"&&typeof N.stop=="function"),M=()=>{if(!(!c||c.destroyed)){if(c.params&&typeof c.params=="object"){let m=c.params.autoplay&&typeof c.params.autoplay=="object"?c.params.autoplay:c.params.autoplay={};Object.assign(m,f)}if(c.originalParams&&typeof c.originalParams=="object"){let m=c.originalParams.autoplay&&typeof c.originalParams.autoplay=="object"?c.originalParams.autoplay:c.originalParams.autoplay={};Object.assign(m,f)}}};if(!L)p||l.log(a("L\u2019extension autoplay de Swiper est indisponible.","lightbox-jlg"),!0);else if(p?N.stop():(M(),g.autoplay_start?N.start():N.stop()),u){let m=y=>{if(!c||c.destroyed)return;let A=c.autoplay;if(!A||typeof A.start!="function"||typeof A.stop!="function")return;let P=!!y.matches,H=P&&wt.has(o)?Y:o,q=P?Math.min(s,300):s,pe=P&&H==="slide";if(P)ke=!!A.running,A.stop(),H!==o&&l&&typeof l.log=="function"&&l.log(a("Effet de transition r\xE9duit suite au changement de pr\xE9f\xE9rence syst\xE8me.","lightbox-jlg"));else{let ht=ke||!!g.autoplay_start;ke=!1,M(),H!==o&&l&&typeof l.log=="function"&&l.log(a("Effet de transition restaur\xE9 apr\xE8s d\xE9sactivation de la r\xE9duction des animations.","lightbox-jlg")),ht?A.start():A.running&&A.stop()}h=H,C=q,c.params&&typeof c.params=="object"&&(c.params.effect=H,c.params.speed=q,c.params.cssMode=pe,H==="fade"?c.params.fadeEffect=Object.assign({},c.params.fadeEffect||{},{crossFade:!0}):c.params.fadeEffect&&delete c.params.fadeEffect),c.originalParams&&typeof c.originalParams=="object"&&(c.originalParams.effect=H,c.originalParams.speed=q,c.originalParams.cssMode=pe,H==="fade"?c.originalParams.fadeEffect=Object.assign({},c.originalParams.fadeEffect||{},{crossFade:!0}):c.originalParams.fadeEffect&&delete c.originalParams.fadeEffect),me(c,r),F&&!F.destroyed&&me(F,r),typeof c.update=="function"&&c.update()};typeof u.addEventListener=="function"?(u.addEventListener("change",m),re=()=>{u.removeEventListener("change",m)}):typeof u.addListener=="function"&&(u.addListener(m),re=()=>{u.removeListener(m)})}}function Gt(e,t){let n=(t+1)%e.length,o=(t-1+e.length)%e.length;[n,o].forEach(s=>{var i;let r=(i=e[s])==null?void 0:i.highResUrl;if(r&&!tt.has(r)){l.log(w(a("Pr\xE9chargement de l'image %s","lightbox-jlg"),s));let d=new Image;d.src=r,tt.add(r)}})}function Xn(e){if(!e||typeof Re=="undefined")return;let t=Re.get(e);typeof t!="undefined"&&te(t);let n=W(()=>{Re.delete(e);let o=e.querySelector(".mga-header");if(!o)return;let s=o.offsetHeight;s>0&&e.style.setProperty("--mga-header-offset",`${Math.ceil(s)}px`)});Re.set(e,n)}function We(e,t,n){if(!e||!t[n])return;let o=e.querySelector(".mga-caption-container"),s=e.querySelector("#mga-caption"),r=e.querySelector("#mga-counter"),i=o?o.querySelector(".mga-caption-live"):null,d=o?o.querySelector(".mga-caption-feedback"):null,f=e.querySelector("[data-mga-cta-container]"),u=t[n],p=u.caption||"";e.classList.toggle("mga-has-caption",!!p);let h=w(a("%1$s / %2$s","lightbox-jlg"),n+1,t.length),C=w(a("Image %1$s sur %2$s","lightbox-jlg"),n+1,t.length),E=p?`${C}. ${p}`:C;we.lastBaseAnnouncement=E,s&&(s.textContent=p,s.style.display=p?"":"none"),r&&(r.textContent=h),!we.isTemporaryMessageActive&&i&&i.textContent!==E&&(i.textContent=E),!we.isTemporaryMessageActive&&d&&!d.hasAttribute("hidden")&&(d.textContent="",d.setAttribute("hidden","hidden"),d.removeAttribute("data-mga-state"));let R=Array.isArray(u.ctas)?u.ctas:Array.isArray(u.ctaButtons)?u.ctaButtons:[],D=ye?R:[];if(f){for(;f.firstChild;)f.removeChild(f.firstChild);D.length?(f.removeAttribute("hidden"),f.setAttribute("role","group"),f.setAttribute("aria-label",a("Actions personnalis\xE9es","lightbox-jlg")),D.forEach((z,U)=>{if(!z||typeof z!="object")return;let _=document.createElement("a");_.className="mga-cta-button";let V=typeof z.variant=="string"&&z.variant.trim()?` mga-cta-button--${z.variant.trim().toLowerCase()}`:" mga-cta-button--primary";_.className+=V,_.textContent=z.label||"",z.url?_.href=z.url:_.href="#",z.target&&z.target!=="_self"&&(_.target=z.target);let K=z.rel||(z.target==="_blank"?"noopener noreferrer":"");K&&(_.rel=K),_.setAttribute("data-mga-cta-index",String(U)),f.appendChild(_)})):(f.setAttribute("hidden","hidden"),f.removeAttribute("role"),f.removeAttribute("aria-label"))}e.classList.toggle("mga-has-cta",ye&&D.length>0),Xn(e),I.isSupported&&I.isActive&&I.isActive()&&I.update(n)}function Kt(e){let t=e||null;if(!t&&typeof document!="undefined"&&(t=document.getElementById("mga-viewer")),!t)return{captionContainer:null,liveRegion:null,feedbackElement:null};let n=t.querySelector(".mga-caption-container");return n?{captionContainer:n,liveRegion:n.querySelector(".mga-caption-live"),feedbackElement:n.querySelector(".mga-caption-feedback")}:{captionContainer:null,liveRegion:null,feedbackElement:null}}function mt({restoreBaseAnnouncement:e=!0}={}){ce&&(clearTimeout(ce),ce=null);let{feedbackElement:t,liveRegion:n}=Kt();t&&(t.textContent="",t.setAttribute("hidden","hidden"),t.removeAttribute("data-mga-state")),e&&n&&(n.textContent=we.lastBaseAnnouncement||""),we.isTemporaryMessageActive=!1}function Jn(e,{tone:t="info",duration:n=6e3}={}){if(!e){mt();return}let{feedbackElement:o,liveRegion:s}=Kt();!o&&!s||(ce&&(clearTimeout(ce),ce=null),o&&(o.textContent=e,o.removeAttribute("hidden"),t?o.setAttribute("data-mga-state",t):o.removeAttribute("data-mga-state")),s&&(s.textContent=e),we.isTemporaryMessageActive=!0,n>0&&typeof window!="undefined"&&typeof window.setTimeout=="function"&&(ce=window.setTimeout(()=>{mt()},n)))}document.body.addEventListener("click",function(e){let t=document.getElementById("mga-viewer");if(!t||t.style.display==="none")return;let n=_t(e);if(!n)return;let o=t.contains(n),s=!!n.closest(".mga-share-modal"),r=!!n.closest(".mga-main-swiper"),i=!!n.closest(".mga-header"),d=!!n.closest(".mga-thumbs-swiper");if(s)return;if(n===t||o&&!r&&!i&&!d){bn&&Ee(t);return}if(n.closest("#mga-close")){Ee(t);return}if(n.closest("#mga-play-pause")&&c&&c.autoplay){let u=c.autoplay,p=!u.running;p?u.start():u.stop(),Ae(t,p)}if($.length)for(let u=0;u<$.length;u+=1){let p=$[u];if(n.closest(p.selector)){p.handler(e,t);return}}}),document.addEventListener("keydown",e=>{let t=document.getElementById("mga-viewer");if(!(!t||t.style.display==="none"))switch(e.key){case"Escape":Ee(t);break;case"ArrowLeft":c&&c.slidePrev();break;case"ArrowRight":c&&c.slideNext();break}}),I.isSupported&&typeof window!="undefined"&&typeof window.addEventListener=="function"&&window.addEventListener("popstate",Wn);let Wt=e=>{let t=e&&typeof e.detail=="object"&&e.detail!==null?e.detail:{};Object.prototype.hasOwnProperty.call(t,"show_share")?he=x(t.show_share,he):Object.prototype.hasOwnProperty.call(t,"showShare")&&(he=x(t.showShare,he)),Object.prototype.hasOwnProperty.call(t,"show_cta")?ye=x(t.show_cta,ye):Object.prototype.hasOwnProperty.call(t,"showCta")&&(ye=x(t.showCta,ye)),Object.prototype.hasOwnProperty.call(t,"share_copy")?je=x(t.share_copy,je):Object.prototype.hasOwnProperty.call(t,"shareCopy")&&(je=x(t.shareCopy,je)),Object.prototype.hasOwnProperty.call(t,"share_download")?Le=x(t.share_download,Le):Object.prototype.hasOwnProperty.call(t,"shareDownload")&&(Le=x(t.shareDownload,Le)),Object.prototype.hasOwnProperty.call(t,"share_channels")?De=ae(t.share_channels):Object.prototype.hasOwnProperty.call(t,"shareChannels")&&(De=ae(t.shareChannels)),ct();let n=document.getElementById("mga-viewer");if(n&&oe&&oe.length){let o=c&&!c.destroyed?c.realIndex:0;We(n,oe,o)}},Zt="mga:share-preferences-change";if(typeof window!="undefined"){let e=window.__mgaSharePreferencesHandler__;e&&typeof window.removeEventListener=="function"&&window.removeEventListener(Zt,e),typeof window.addEventListener=="function"&&(window.addEventListener(Zt,Wt),window.__mgaSharePreferencesHandler__=Wt)}typeof T!="undefined"&&T.exports&&(T.exports.__testExports=T.exports.__testExports||{},T.exports.__testExports.openViewer=$t,T.exports.__testExports.getViewer=$e,T.exports.__testExports.getActiveHighResUrl=It,T.exports.__testExports.triggerImageDownload=st,T.exports.__testExports.openSharePanel=Dt,T.exports.__testExports.getActiveImageData=at,T.exports.__testExports.getShareChannels=()=>De,T.exports.__testExports.getShareOptions=()=>j&&Array.isArray(j.options)?j.options:[],T.exports.__testExports.syncShareControl=ct);function Ee(e,t={}){if(!e||!!!(t&&t.skipHistory)&&I.isSupported&&I.isActive&&I.isActive()&&I.beginClose())return;let{exit:o,element:s}=Ot(e);if(s)if(o)try{let r=o();r&&typeof r.catch=="function"&&r.catch(i=>l.log(w(a("Erreur de sortie du plein \xE9cran\xA0: %s","lightbox-jlg"),i.message),!0))}catch(r){l.log(w(a("Erreur de sortie du plein \xE9cran\xA0: %s","lightbox-jlg"),r.message),!0)}else l.log(a("API de fermeture du plein \xE9cran indisponible sur ce navigateur.","lightbox-jlg"),!0);c&&c.autoplay&&c.autoplay.stop(),ve({restoreFocus:!1,reason:"viewer-close"}),Tt(),mt({restoreBaseAnnouncement:!1}),typeof re=="function"&&(re(),re=null),le=null,ke=!1,window.removeEventListener("resize",Yt),nt=!1,se&&(e.removeEventListener("keydown",se,!0),se=null),e.style.display="none",Ne&&(document.body.style.paddingRight=rt),Oe&&(document.body.style.overflow=ot),Be&&document.body.classList.remove(et),ot=null,rt=null,Oe=!1,Ne=!1,Be=!1,l.log(a("Galerie ferm\xE9e.","lightbox-jlg")),l.stopTimer(),oe=[],Ue=null,I.isSupported&&I.finalizeClose(),G&&typeof G.focus=="function"&&He(G),G=null}function Yt(){clearTimeout(Lt),Lt=setTimeout(()=>{if(c&&c.el&&!c.destroyed){let e=c.autoplay,t=!!(e&&e.running);l.log(a("Redimensionnement d\xE9tect\xE9. Mise \xE0 jour de Swiper.","lightbox-jlg")),c.update(),F&&!F.destroyed&&F.update(),t&&c.autoplay&&typeof c.autoplay.start=="function"&&(c.autoplay.start(),l.log(a("Autoplay relanc\xE9 apr\xE8s redimensionnement.","lightbox-jlg")))}},250)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",xt):xt(),typeof T!="undefined"&&T.exports&&(T.exports.updateEchoBackground=Qe,T.exports.updateAutoplayButtonState=Ae)})()});io();})();
//# sourceMappingURL=gallery-slideshow.js.map
