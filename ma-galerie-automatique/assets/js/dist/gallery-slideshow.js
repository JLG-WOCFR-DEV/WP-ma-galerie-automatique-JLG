(()=>{var ze=(c,o)=>()=>(c&&(o=c(c=0)),o);var ir=(c,o)=>()=>(o||c((o={exports:{}}).exports,o),o.exports);var sr,ar,en,tn,lr,nn,rn=ze(()=>{sr=/%(\d+\$)?[sd]/g,ar=()=>(c,...o)=>{let d=0;return String(c).replace(sr,(E,v)=>{let w,G=E.charAt(E.length-1);if(v){let q=parseInt(v.slice(0,-1),10);if(Number.isNaN(q)||q<=0)return"";w=q-1}else w=d,d+=1;let L=w>=0&&w<o.length?o[w]:void 0;if(G==="d"){let q=parseInt(L,10);return Number.isNaN(q)?"":String(q)}return typeof L=="undefined"?"":String(L)})},en=c=>c&&typeof c.sprintf=="function"?c.sprintf:ar(),tn=c=>c&&typeof c.__=="function"?c.__:o=>o,lr=c=>!c||typeof c!="object"?null:c.wp&&c.wp.i18n?c.wp.i18n:null,nn=()=>lr(typeof window!="undefined"?window:globalThis)});var wt,Ce,cr,on,sn,an=ze(()=>{wt={facebook:{viewBox:"0 0 24 24",paths:[{d:"M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.99 3.66 9.12 8.44 9.88v-6.99H8.08V12h2.36V9.88c0-2.33 1.38-3.62 3.5-3.62 0.72 0 1.48 0.13 1.48 0.13v1.63h-0.83c-0.82 0-1.08 0.51-1.08 1.04V12h1.84l-0.29 1.89h-1.55v6.99C18.34 21.12 22 16.99 22 12z"}]},twitter:{viewBox:"0 0 24 24",paths:[{d:"M22.46 6c-0.77 0.35-1.6 0.59-2.46 0.69a4.29 4.29 0 0 0 1.88-2.37 8.59 8.59 0 0 1-2.72 1.04 4.28 4.28 0 0 0-7.3 3.9 12.13 12.13 0 0 1-8.82-4.47 4.28 4.28 0 0 0 1.33 5.72 4.25 4.25 0 0 1-1.94-0.54v0.05a4.28 4.28 0 0 0 3.43 4.2 4.3 4.3 0 0 1-1.93 0.07 4.28 4.28 0 0 0 4 2.97 8.58 8.58 0 0 1-5.3 1.83 12.1 12.1 0 0 0 6.56 1.92c7.88 0 12.2-6.53 12.2-12.2 0-0.19-0.01-0.39-0.01-0.58A8.7 8.7 0 0 0 22.46 6z"}]},linkedin:{viewBox:"0 0 24 24",paths:[{d:"M20.45 3H3.55A1.55 1.55 0 0 0 2 4.55v14.9C2 20.3 2.7 21 3.55 21h16.9c0.85 0 1.55-0.7 1.55-1.55V4.55C22 3.7 21.3 3 20.45 3zM8.34 18H5.67V9.67h2.67V18zM7 8.5a1.55 1.55 0 1 1 0-3.1 1.55 1.55 0 0 1 0 3.1zM18.33 18h-2.67v-4.1c0-0.98-0.02-2.24-1.36-2.24-1.36 0-1.56 1.06-1.56 2.16V18h-2.67V9.67h2.56v1.14h0.04c0.36-0.68 1.24-1.4 2.56-1.4 2.74 0 3.25 1.8 3.25 4.13V18z"}]},pinterest:{viewBox:"0 0 24 24",paths:[{d:"M12 2C6.48 2 2 6.31 2 11.42c0 3.89 2.68 7.23 6.44 8.41-0.09-0.71-0.17-1.8 0.03-2.58 0.18-0.77 1.15-4.9 1.15-4.9s-0.29-0.58-0.29-1.45c0-1.36 0.79-2.37 1.78-2.37 0.84 0 1.24 0.63 1.24 1.38 0 0.84-0.53 2.09-0.8 3.25-0.23 1 0.5 1.81 1.48 1.81 1.78 0 3.14-1.87 3.14-4.57 0-2.39-1.72-4.07-4.18-4.07-2.85 0-4.52 2.14-4.52 4.35 0 0.86 0.33 1.79 0.74 2.29 0.08 0.1 0.09 0.19 0.07 0.29-0.07 0.31-0.23 1-0.26 1.13-0.04 0.18-0.14 0.22-0.32 0.13-1.2-0.56-1.95-2.29-1.95-3.68 0-3 2.18-5.76 6.29-5.76 3.3 0 5.87 2.35 5.87 5.5 0 3.28-2.06 5.93-4.92 5.93-0.96 0-1.86-0.5-2.17-1.08l-0.59 2.24c-0.21 0.83-0.78 1.87-1.16 2.5 0.87 0.27 1.78 0.42 2.72 0.42 5.52 0 10-4.31 10-9.42C22 6.31 17.52 2 12 2z"}]},whatsapp:{viewBox:"0 0 24 24",paths:[{d:"M20.52 3.48A10.5 10.5 0 0 0 2.47 13.3l-1.45 5.28 5.4-1.41A10.5 10.5 0 1 0 20.52 3.48zm-8.5 17.54a8.75 8.75 0 0 1-4.46-1.22l-0.32-0.19-3.21 0.84 0.86-3.13-0.2-0.32a8.75 8.75 0 1 1 7.33 3.99zm4.78-6.53c-0.26-0.13-1.53-0.76-1.77-0.84-0.24-0.09-0.41-0.13-0.58 0.13-0.17 0.26-0.66 0.84-0.8 1.02-0.15 0.17-0.29 0.2-0.55 0.07-0.26-0.13-1.09-0.4-2.07-1.3-0.76-0.68-1.27-1.52-1.42-1.78-0.15-0.26-0.02-0.4 0.11-0.53 0.11-0.11 0.26-0.29 0.39-0.43 0.13-0.15 0.17-0.26 0.26-0.43 0.09-0.17 0.04-0.32-0.02-0.45-0.07-0.13-0.58-1.39-0.8-1.91-0.21-0.5-0.43-0.43-0.58-0.43-0.15 0-0.32-0.02-0.49-0.02-0.17 0-0.43 0.06-0.66 0.32-0.24 0.26-0.89 0.87-0.89 2.13s0.91 2.47 1.03 2.64c0.13 0.17 1.79 2.73 4.34 3.83 0.61 0.26 1.08 0.41 1.45 0.53 0.61 0.19 1.16 0.16 1.6 0.1 0.49-0.07 1.53-0.62 1.75-1.22 0.21-0.6 0.21-1.11 0.15-1.22-0.06-0.1-0.24-0.16-0.5-0.29z"}]},telegram:{viewBox:"0 0 24 24",paths:[{d:"M21.5 2.5l-19 7.5c-1.3 0.52-1.29 2.35 0.02 2.85l4.8 1.9 1.9 4.8c0.5 1.31 2.34 1.32 2.85 0.02l7.5-19c0.42-1.06-0.64-2.12-1.67-1.67zM10 14l-1 4-1.5-3.8 8.3-6.2-5.8 6z"}]},email:{viewBox:"0 0 24 24",paths:[{d:"M20 4H4a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zm0 2-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"}]},link:{viewBox:"0 0 24 24",paths:[{d:"M10.59 13.41a1 1 0 0 1 0-1.41l2-2a1 1 0 1 1 1.41 1.41l-2 2a1 1 0 0 1-1.41 0zm-2.83 2.83a3 3 0 0 1 0-4.24l2-2a3 3 0 0 1 4.24 0 1 1 0 0 1-1.41 1.41 1 1 0 0 0-1.41 0l-2 2a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l1-1a1 1 0 1 1 1.41 1.41l-1 1a3 3 0 0 1-4.24 0zm8.48-8.48a3 3 0 0 0-4.24 0l-1 1a1 1 0 0 1-1.41-1.41l1-1a5 5 0 1 1 7.07 7.07l-2 2a5 5 0 0 1-7.07 0 1 1 0 0 1 1.41-1.41 3 3 0 0 0 4.24 0l2-2a3 3 0 0 0 0-4.24z"}]},generic:{viewBox:"0 0 24 24",paths:[{d:"M12 2a10 10 0 1 0 10 10A10 10 0 0 0 12 2z"},{d:"M13 17h-2v-2h2zm0-4h-2V7h2z"}]},copy:{viewBox:"0 0 24 24",paths:[{d:"M16 1H4a2 2 0 0 0-2 2v12h2V3h12V1zm3 4H8a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2zm0 16H8V7h11v14z"}]},download:{viewBox:"0 0 24 24",paths:[{d:"M5 20h14v-2H5v2zm7-16v9l3.5-3.5 1.42 1.42L12 17l-4.92-4.92L8.5 10.66 12 14.17V4z"}]},native:{viewBox:"0 0 24 24",paths:[{d:"M18 16.08c-0.76 0-1.44 0.3-1.96 0.77L8.91 12.7c0.05-0.23 0.09-0.46 0.09-0.7s-0.04-0.47-0.09-0.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 0.24 0.03 0.47 0.09 0.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c0.79 0 1.5-0.31 2.03-0.82l7.05 4.12c-0.06 0.23-0.08 0.46-0.08 0.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"}]}},Ce=c=>typeof c!="string"?"":c.trim().toLowerCase().replace(/[^a-z0-9_-]/g,""),cr=c=>{let o=Ce(c);return o&&wt[o]?wt[o]:wt.generic},on=(c,o,d={})=>{if(!c||typeof c.createElementNS!="function")return null;let E=c.createElementNS("http://www.w3.org/2000/svg",o);return Object.keys(d).forEach(v=>{E.setAttribute(v,d[v])}),E},sn=(c,o)=>{let d=cr(o),E=on(c,"svg",{viewBox:d.viewBox,fill:"currentColor","aria-hidden":"true",focusable:"false"});return E?(Array.isArray(d.paths)&&d.paths.forEach(v=>{let w=on(c,"path",v);w&&E.appendChild(w)}),E):null}});var ln=ze(()=>{});var ur,cn,dr,N,fr,pr,gr,mr,hr,yr,br,un,dn=ze(()=>{ur=c=>c&&c.performance&&typeof c.performance.now=="function"?c.performance.now():Date.now(),cn=c=>c&&c.document||null,dr=c=>c?((!c.mgaSwiperMetrics||typeof c.mgaSwiperMetrics!="object")&&(c.mgaSwiperMetrics={events:[]}),Array.isArray(c.mgaSwiperMetrics.events)||(c.mgaSwiperMetrics.events=[]),c.mgaSwiperMetrics):null,N=(c,o,d,E)=>{let v=dr(c);if(v&&(v.events.push({namespace:o||"default",event:d,detail:E||{},timestamp:ur(c)}),typeof c.dispatchEvent=="function"))try{let w=new c.CustomEvent("mga:swiper-metric",{detail:{namespace:o||"default",event:d,payload:E||{}}});c.dispatchEvent(w)}catch(w){}},fr=c=>!c||typeof c!="object"?[]:(Array.isArray(c.attempts)?c.attempts:[]).map(d=>{if(!d||typeof d!="object"||d.enabled===!1)return null;let E=typeof d.key=="string"&&d.key?d.key:"fallback",v=d.js&&typeof d.js=="object"?d.js:{},w=d.css&&typeof d.css=="object"?d.css:null,G=d.inject!==!1,L=typeof v.src=="string"&&v.src?v.src:"";return L?{key:E,label:typeof d.label=="string"&&d.label?d.label:E,js:{src:L,integrity:typeof v.integrity=="string"&&v.integrity?v.integrity:null,crossOrigin:typeof v.crossOrigin=="string"&&v.crossOrigin?v.crossOrigin:null,referrerPolicy:typeof v.referrerPolicy=="string"&&v.referrerPolicy?v.referrerPolicy:null},css:w&&typeof w.href=="string"&&w.href?{href:w.href,integrity:typeof w.integrity=="string"&&w.integrity?w.integrity:null,crossOrigin:typeof w.crossOrigin=="string"&&w.crossOrigin?w.crossOrigin:null,referrerPolicy:typeof w.referrerPolicy=="string"&&w.referrerPolicy?w.referrerPolicy:null}:null,timeout:typeof d.timeout=="number"&&d.timeout>0?d.timeout:12e3,inject:G}:null}).filter(Boolean),pr=(c,o,d)=>{if(!o||!o.css)return Promise.resolve();let E=cn(c);if(!E)return Promise.resolve();let v=Array.from(E.querySelectorAll('link[rel="stylesheet"]')).find(w=>w.href===o.css.href);return v?Promise.resolve(v):new Promise((w,G)=>{let L=E.createElement("link");L.rel="stylesheet",L.href=o.css.href,L.dataset.mgaSwiperSource=o.key,o.css.integrity&&(L.integrity=o.css.integrity),o.css.crossOrigin?L.crossOrigin=o.css.crossOrigin:o.css.integrity&&(L.crossOrigin="anonymous"),o.css.referrerPolicy&&(L.referrerPolicy=o.css.referrerPolicy),L.onload=()=>{N(c,d,"css_load_success",{source:o.key}),w(L)},L.onerror=()=>{N(c,d,"css_load_error",{source:o.key}),G(new Error("Stylesheet load error"))},E.head.appendChild(L),N(c,d,"css_load_start",{source:o.key,href:o.css.href})})},gr=(c,o,d)=>{if(!o||!o.js||!o.js.src)return Promise.reject(new Error("Invalid attempt configuration"));let E=cn(c);if(!E)return Promise.reject(new Error("Document unavailable"));let v=Array.from(E.querySelectorAll("script")).find(w=>w.src===o.js.src&&!w.hasAttribute("data-mga-swiper-failed"));return v?new Promise((w,G)=>{if(typeof c.Swiper=="function"){v.setAttribute("data-mga-swiper-loaded","true"),N(c,d,"js_already_available",{source:o.key}),w(v);return}if(typeof v.hasAttribute=="function"&&v.hasAttribute("data-mga-swiper-loaded")){w(v);return}v.addEventListener("load",()=>{v.setAttribute("data-mga-swiper-loaded","true"),w(v)}),v.addEventListener("error",()=>{v.setAttribute("data-mga-swiper-failed","true"),G(new Error("Existing script failed"))}),N(c,d,"js_existing_observed",{source:o.key})}):new Promise((w,G)=>{let L=E.createElement("script");L.src=o.js.src,L.async=!1,L.dataset.mgaSwiperSource=o.key,o.js.integrity&&(L.integrity=o.js.integrity),o.js.crossOrigin?L.crossOrigin=o.js.crossOrigin:o.js.integrity&&(L.crossOrigin="anonymous"),o.js.referrerPolicy&&(L.referrerPolicy=o.js.referrerPolicy);let q=null,je=()=>{q&&(c.clearTimeout(q),q=null)};L.onload=()=>{je(),L.setAttribute("data-mga-swiper-loaded","true"),N(c,d,"js_load_success",{source:o.key}),w(L)},L.onerror=()=>{je(),L.setAttribute("data-mga-swiper-failed","true"),N(c,d,"js_load_error",{source:o.key}),G(new Error("Script load error"))},q=c.setTimeout(()=>{je(),L.setAttribute("data-mga-swiper-failed","true"),N(c,d,"js_load_timeout",{source:o.key,timeout:o.timeout}),G(new Error("Script load timeout"))},o.timeout||12e3),E.head.appendChild(L),N(c,d,"js_load_start",{source:o.key,src:o.js.src})})},mr=c=>c?((!c.mgaSwiperLoaderState||typeof c.mgaSwiperLoaderState!="object")&&(c.mgaSwiperLoaderState={promise:null}),c.mgaSwiperLoaderState):{promise:null},hr=(c,o,d)=>!o||!o.inject?Promise.resolve():typeof c.Swiper=="function"?Promise.resolve(c.Swiper):(N(c,d,"attempt_start",{source:o.key}),pr(c,o,d).catch(()=>null).then(()=>gr(c,o,d)).then(()=>{if(typeof c.Swiper=="function")return N(c,d,"attempt_success",{source:o.key}),c.Swiper;throw N(c,d,"attempt_no_global",{source:o.key}),new Error("Swiper global missing after load")}).catch(E=>{throw N(c,d,"attempt_error",{source:o.key,message:E&&E.message?E.message:String(E)}),E})),yr=(c,o,d)=>o.reduce((E,v)=>E.catch(()=>hr(c,v,d)),Promise.reject(new Error("initial"))),br=(c,o)=>o&&typeof o=="object"?o:c&&c.mgaSwiperLoaderConfig&&typeof c.mgaSwiperLoaderConfig=="object"?c.mgaSwiperLoaderConfig:c&&c.mgaAdminConfig&&typeof c.mgaAdminConfig=="object"&&c.mgaAdminConfig.swiper?c.mgaAdminConfig.swiper:null,un=(c=window,o={})=>{let d=typeof o.namespace=="string"&&o.namespace?o.namespace:"default";if(!c)return Promise.reject(new Error("Global scope unavailable"));if(typeof c.Swiper=="function")return N(c,d,"already_available",{}),Promise.resolve(c.Swiper);let E=br(c,o.config),v=fr(E);if(!v.length)return N(c,d,"no_attempts_configured",{}),Promise.reject(new Error("No Swiper attempts configured"));let w=mr(c);return w.promise||(N(c,d,"bootstrap",{version:E&&E.version?E.version:null,attempts:v.map(G=>G.key)}),w.promise=yr(c,v,d).catch(()=>{if(typeof c.Swiper=="function")return c.Swiper;throw N(c,d,"fatal",{}),new Error("Swiper could not be loaded")}).then(()=>{if(typeof c.Swiper=="function")return N(c,d,"ready",{}),c.Swiper;throw N(c,d,"fatal",{}),new Error("Swiper global unavailable")}).finally(()=>{w.promise=null})),w.promise}});var fn=ze(()=>{rn();an();ln();dn()});var wr=ir((Tr,z)=>{fn();(function(){"use strict";let c=nn(),o=tn(c),d=en(c),E=typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame.bind(window):h=>window.setTimeout(h,0),v=typeof window.cancelAnimationFrame=="function"?window.cancelAnimationFrame.bind(window):h=>{typeof window.clearTimeout=="function"&&window.clearTimeout(h)},w=h=>typeof h!="string"||h.trim()===""?"":h.trim().split(/[-_\s]+/).filter(Boolean).map(A=>A.charAt(0).toUpperCase()+A.slice(1)).join(" "),G=h=>{let A=document.createElement("span");A.className="mga-share-option__icon";let F=sn(document,Ce(h));return F&&A.appendChild(F),A};function L(h){let A=[];Array.isArray(h)?h.forEach(C=>{A.push(C)}):h&&typeof h=="object"&&Object.keys(h).forEach(C=>{let S=h[C];S&&typeof S=="object"&&A.push(Object.assign({key:C},S))});let F=new Set;return A.reduce((C,S)=>{if(!S||typeof S!="object")return C;let ie="";typeof S.key=="string"?ie=S.key:typeof S.slug=="string"&&(ie=S.slug);let K=Ce(ie);if(!K&&typeof S.label=="string"&&(K=Ce(S.label.replace(/\s+/g,"-"))),!K||F.has(K))return C;F.add(K);let H=typeof S.label=="string"&&S.label.trim()?S.label.trim():w(K),ne=typeof S.template=="string"?S.template.trim():"",l=Ce(S.icon||K)||K,_e=S.enabled===!0||S.enabled==="1"||S.enabled===1||S.enabled==="true"||S.enabled==="on";return C.push({key:K,label:H,template:ne,icon:l,enabled:_e}),C},[])}let q="slide",je=600,vt="ease-out",pn=["slide","fade","cube","coverflow","flip"],xt=new Set(["cube","coverflow","flip"]),gn=["ease","ease-in","ease-out","ease-in-out","linear"],St="bottom",mn=["bottom","left","hidden"],hn=h=>{if(typeof h!="string")return q;let A=h.trim().toLowerCase();return pn.includes(A)?A:q},yn=h=>{let A=parseInt(h,10);return Number.isNaN(A)?je:Math.min(Math.max(A,100),5e3)},bn=h=>{if(typeof h!="string")return vt;let A=h.trim().toLowerCase();return gn.includes(A)?A:vt},wn=h=>{if(typeof h!="string")return St;let A=h.trim().toLowerCase();return mn.includes(A)?A:St},ye=(h,A)=>{!h||!h.wrapperEl||(h.wrapperEl.style.transitionTimingFunction=A)};function Je(h,A){if(!h)return;let F=h.querySelector(".mga-echo-bg");if(!F)return;let C=typeof A=="string"?A.trim():"";if(!C){let H=F.querySelector(".mga-visible");H&&(H.classList.remove("mga-visible"),setTimeout(()=>{H.parentElement&&H.parentElement.removeChild(H)},400)),h.classList.remove("mga-has-texture");return}let S=document.createElement("img");S.className="mga-echo-bg__image",S.alt="",S.setAttribute("aria-hidden","true"),S.setAttribute("role","presentation"),S.decoding="async";let ie=!1,K=()=>{if(ie)return;ie=!0;let H=F.querySelector(".mga-visible");H&&(H.classList.remove("mga-visible"),setTimeout(()=>{H.parentElement&&H.parentElement.removeChild(H)},400)),F.appendChild(S),setTimeout(()=>S.classList.add("mga-visible"),10),h.classList.remove("mga-has-texture")};S.onload=K,S.onerror=()=>{h.classList.remove("mga-has-texture")},S.src=C,S.complete&&setTimeout(()=>K())}let et=!1,vn=()=>{if(et||typeof Swiper!="function")return;if(typeof Swiper.use!="function"){et=!0;return}let A=["Navigation","Autoplay","Thumbs","Zoom","Keyboard","A11y","EffectFade","EffectCube","EffectCoverflow","EffectFlip"].reduce((F,C)=>(Swiper[C]&&F.push(Swiper[C]),F),[]);A.length&&Swiper.use(A),et=!0};function Le(h,A){if(!h)return;let F=h.querySelector("#mga-play-pause");if(!F)return;F.setAttribute("aria-pressed",A?"true":"false");let C=o(A?"Mettre le diaporama en pause":"Lancer le diaporama","lightbox-jlg");F.setAttribute("aria-label",C),F.setAttribute("title",C)}function xn(){let h=window.mga_settings||{},A=wn(h.thumbs_layout),F=()=>{},C=(e,t=!0)=>{if(typeof e=="undefined")return t;if(typeof e=="string"){let n=e.trim().toLowerCase();if(["false","0","no","off"].includes(n))return!1;if(["true","1","yes","on"].includes(n))return!0}return typeof e=="number"?e!==0:!!e},S=C(h.include_svg,!0),ie="jpe?g|png|gif|bmp|webp|avif",K=S?`${ie}|svg`:ie,H=new RegExp(`.(${K})(?:\\?.*)?(?:#.*)?$`,"i"),ne=e=>typeof e=="string"&&/\.svg(?:\?.*)?(?:#.*)?$/i.test(e),l=window.mgaDebug||{enabled:!1,init:F,log:F,updateInfo:F,updateVisibleSlides:F,onForceOpen:F,stopTimer:F,restartTimer:F,table:F,shareAction:F},_e=C(h.show_zoom,!0),At=C(h.show_download,!0),be=C(h.show_share,!0),Ct=C(h.show_fullscreen,!0),Sn=C(h.show_thumbs_mobile,!0),we=C(h.show_cta,!0),En=C(h.close_on_backdrop,!0),Re=C(h.loop,!0),An=Object.prototype.hasOwnProperty.call(h,"start_on_clicked_image")?h.start_on_clicked_image:h.startOnClickedImage,jt=C(An,!1),ke=C(h.share_copy,!0),Ie=C(h.share_download,!0),Ue=L(h.share_channels),tt={copy:o("Copier le lien","lightbox-jlg"),download:o("T\xE9l\xE9chargement rapide","lightbox-jlg"),native:o("Partager via l'appareil","lightbox-jlg")},Lt=()=>{let e=[];return Ue.forEach(t=>{if(!t||typeof t!="object")return;let{enabled:n,template:r}=t,a=typeof r=="string"&&r.trim()!=="";!n||!a||e.push({type:"social",key:t.key,label:t.label||w(t.key)||t.key,template:r.trim(),icon:t.icon||t.key})}),ke&&e.push({type:"copy",key:"copy",label:tt.copy,icon:"copy"}),Ie&&e.push({type:"download",key:"download",label:tt.download,icon:"download"}),Pt()&&e.push({type:"native",key:"native",label:tt.native,icon:"native"}),e},_t=()=>Lt().length>0,Ne=()=>be&&_t(),X=[],nt="mga-scroll-locked",u=null,O=null,ae=null,Me=!1,rt=new Set,Be=new WeakMap,kt,ot=!1,it=null,st=null,Ve=!1,qe=!1,He=!1,J=null,ce=null,se=[],$e=null,I=null,ve=!1,Fe=null,Te=null,ue=null,de=null,xe={lastBaseAnnouncement:"",isTemporaryMessageActive:!1};l.init();let at={selector:"#mga-share",handler:e=>{e.preventDefault();let t=lt();return!t||!t.image?(l.log(o("Impossible de partager l\u2019image active.","lightbox-jlg"),!0),!0):(zt(t.image)||l.log(o("Aucune option de partage disponible pour l\u2019image active.","lightbox-jlg"),!0),!0)}},It=()=>{X.includes(at)||(X.push(at),Ge())},Cn=()=>{let e=X.indexOf(at);e!==-1&&(X.splice(e,1),Ge())};_e&&X.push({selector:"#mga-zoom",handler:()=>u&&u.zoom?(u.zoom.toggle(),!0):!1}),At&&X.push({selector:"#mga-download",handler:e=>{e.preventDefault();let t=Ft();return t?ct(t)||l.log(o("Impossible de lancer le t\xE9l\xE9chargement de l\u2019image active.","lightbox-jlg"),!0):l.log(o("URL haute r\xE9solution introuvable pour l\u2019image active.","lightbox-jlg"),!0),!0}}),Ne()&&It(),Ct&&X.push({selector:"#mga-fullscreen",handler:(e,t)=>{if(!t)return!1;let{request:n,exit:r,element:a}=Nt(t);if(a)if(r)try{let i=r();i&&typeof i.catch=="function"&&i.catch(s=>l.log(d(o("Erreur de sortie du plein \xE9cran\xA0: %s","lightbox-jlg"),s.message),!0))}catch(i){l.log(d(o("Erreur de sortie du plein \xE9cran\xA0: %s","lightbox-jlg"),i.message),!0)}else l.log(o("API de fermeture du plein \xE9cran indisponible sur ce navigateur.","lightbox-jlg"),!0);else if(n)try{let i=n();i&&typeof i.catch=="function"&&i.catch(s=>l.log(d(o("Erreur plein \xE9cran\xA0: %s","lightbox-jlg"),s.message),!0))}catch(i){l.log(d(o("Erreur plein \xE9cran\xA0: %s","lightbox-jlg"),i.message),!0)}else l.log(o("API plein \xE9cran indisponible sur ce navigateur.","lightbox-jlg"),!0);return!0}});function Mt(e){if(!e||!e.target)return null;let t=e.target;if(t instanceof Element)return t;if(t&&typeof t=="object"){if(t.parentElement instanceof Element)return t.parentElement;if(t.parentNode instanceof Element)return t.parentNode}return null}function lt(){if(!Array.isArray(se)||!se.length)return null;let e=u&&typeof u.activeIndex=="number"?u.activeIndex:0,t=u&&typeof u.realIndex=="number"?u.realIndex:e,n=se[t];return n?{image:n,index:t}:null}function Ft(){let e=lt();if(!e)return null;let{image:t}=e;return t&&typeof t.highResUrl=="string"&&t.highResUrl?t.highResUrl:null}function ct(e){if(typeof e!="string"||!e)return!1;if(!document.body||typeof document.body.appendChild!="function")return l.log(o("T\xE9l\xE9chargement impossible\xA0: document.body indisponible.","lightbox-jlg"),!0),!1;let t=null;try{t=document.createElement("a"),t.href=e,t.rel="noopener noreferrer";let n="image";try{let r=new URL(e,window.location.href),a=r&&typeof r.pathname=="string"?r.pathname:"";if(a){let s=a.split("/").filter(Boolean).pop();s&&(n=s)}}catch(r){}return t.download=n,document.body.appendChild(t),t.click(),!0}catch(n){return l.log(d(o("\xC9chec du t\xE9l\xE9chargement\xA0: %s","lightbox-jlg"),n.message),!0),!1}finally{t&&t.parentNode===document.body&&document.body.removeChild(t)}}function Ge(e){let n=e||null;if(!n){let r=document.getElementById("mga-viewer");r&&(n=r.querySelector(".mga-toolbar"))}n&&n.setAttribute("data-mga-optional-buttons",String(X.length))}function Tt(){let e=document.createElement("button");e.type="button",e.id="mga-share",e.className="mga-toolbar-button",e.setAttribute("aria-label",o("Partager l\u2019image","lightbox-jlg")),e.setAttribute("aria-haspopup","dialog"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-controls","mga-share-modal");let t=createSvgElement("svg",{class:"mga-icon mga-share-icon",viewBox:"0 0 24 24",fill:"currentColor"}),n=createSvgElement("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.02-4.11A2.99 2.99 0 0 0 18 7.91c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.03.47.09.7L8.07 9.7A2.99 2.99 0 0 0 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.03-.82l7.05 4.12c-.06.23-.08.46-.08.7 0 1.65 1.34 2.99 3 2.99s3-1.34 3-2.99-1.34-3-3-3z"});return t.appendChild(n),e.appendChild(t),e}function Pt(){return typeof navigator!="undefined"&&navigator&&typeof navigator.share=="function"}function ut(e){if(!be||!_t())return null;if(I&&I.container&&I.container.parentElement===e)return I;let t=document.createElement("div");t.id="mga-share-modal",t.className="mga-share-modal",t.setAttribute("role","dialog"),t.setAttribute("aria-modal","true"),t.setAttribute("aria-hidden","true"),t.setAttribute("hidden","hidden");let n=document.createElement("div");n.className="mga-share-modal__overlay",n.setAttribute("aria-hidden","true"),t.appendChild(n);let r=document.createElement("div");r.className="mga-share-modal__dialog",r.setAttribute("role","document"),r.setAttribute("tabindex","-1"),t.appendChild(r);let a=document.createElement("div");a.className="mga-share-modal__header",r.appendChild(a);let i=document.createElement("h2");i.id="mga-share-title",i.className="mga-share-modal__title",i.textContent=o("Partager cette image","lightbox-jlg"),a.appendChild(i);let s=document.createElement("button");s.type="button",s.className="mga-share-modal__close",s.setAttribute("aria-label",o("Fermer la fen\xEAtre de partage","lightbox-jlg")),s.innerHTML="&times;",a.appendChild(s);let p=document.createElement("div");p.className="mga-share-modal__body",r.appendChild(p);let g=document.createElement("p");g.id="mga-share-description",g.className="mga-share-modal__description",g.textContent=o("Choisissez une option de partage\xA0:","lightbox-jlg"),p.appendChild(g),t.setAttribute("aria-labelledby",i.id),t.setAttribute("aria-describedby",g.id);let f=document.createElement("ul");f.className="mga-share-modal__list",f.setAttribute("data-mga-share-list","true"),p.appendChild(f);let m=document.createElement("p");m.className="mga-share-modal__feedback",m.setAttribute("role","status"),m.setAttribute("aria-live","polite"),m.setAttribute("aria-atomic","true"),m.setAttribute("hidden","hidden"),p.appendChild(m),e.appendChild(t);let b=j=>{j&&typeof j.stopPropagation=="function"&&j.stopPropagation(),Se({reason:"overlay"})},k=()=>Se({reason:"close-button"});return n.addEventListener("click",b),s.addEventListener("click",k),f.addEventListener("click",Fn),I={container:t,dialog:r,list:f,closeButton:s,overlay:n,feedback:m,description:g,payload:null,options:[]},I}function Ot(){!I||!I.feedback||(I.feedback.textContent="",I.feedback.removeAttribute("data-mga-state"),I.feedback.setAttribute("hidden","hidden"))}function te(e,t=!1,n){if(!I||!I.feedback)return;I.feedback.textContent=e||"";let r=n||(t?"error":e?"info":"");e?I.feedback.removeAttribute("hidden"):I.feedback.setAttribute("hidden","hidden"),r?I.feedback.setAttribute("data-mga-state",r):I.feedback.removeAttribute("data-mga-state"),e&&or(e,{tone:r||(t?"error":"info")})}function jn(e,t,n){if(!(!e||!e.list)){for(Ot();e.list.firstChild;)e.list.removeChild(e.list.firstChild);e.options=Array.isArray(t)?t:[],e.payload=n||{},e.list.setAttribute("data-mga-share-count",String(e.options.length)),e.options.forEach(r=>{let a=document.createElement("li");a.className="mga-share-modal__item";let i=document.createElement("button");i.type="button",i.className="mga-share-option",i.setAttribute("data-share-type",r.type),i.setAttribute("data-share-key",r.key),i.setAttribute("data-share-label",r.label),r.template&&i.setAttribute("data-share-template",r.template),r.icon&&i.setAttribute("data-share-icon",r.icon);let s=document.createElement("span");s.className="mga-share-option__content";let p=G(r.icon);p&&s.appendChild(p);let g=document.createElement("span");g.className="mga-share-option__label",g.textContent=r.label,s.appendChild(g),i.appendChild(s);let f=document.createElement("span");f.className="mga-share-option__chevron",f.setAttribute("aria-hidden","true"),f.textContent="\u203A",i.appendChild(f),a.appendChild(i),e.list.appendChild(a)})}}function Ln(e){return Lt().map(t=>({...t}))}function Dt(e){if(!e||!e.dialog)return[];let t=["a[href]","button:not([disabled])","textarea:not([disabled])","input:not([disabled])","select:not([disabled])",'[tabindex]:not([tabindex="-1"])'];return Array.from(e.dialog.querySelectorAll(t.join(","))).filter(n=>!n.hasAttribute("disabled"))}function _n(e){if(!ve||!I)return;if(e.key==="Escape"){e.preventDefault(),Se({reason:"escape"});return}if(e.key!=="Tab")return;let t=Dt(I);if(!t.length)return;let n=t[0],r=t[t.length-1],a=document.activeElement;e.shiftKey?(a===n||!I.dialog.contains(a))&&(e.preventDefault(),r.focus()):a===r&&(e.preventDefault(),n.focus())}function kn(e,t){if(!e||!e.container)return!1;e.container.removeAttribute("hidden"),e.container.setAttribute("aria-hidden","false"),e.container.classList.add("is-visible"),ve=!0,Fe=t||(document.activeElement instanceof HTMLElement?document.activeElement:null),Te=_n,document.addEventListener("keydown",Te,!0),t&&t.setAttribute("aria-expanded","true");let n=Dt(e);return n.length?n[0].focus():e.closeButton&&e.closeButton.focus(),l.shareAction("open",{options:e.options.map(r=>r.key)}),!0}function Se({restoreFocus:e=!0,reason:t="manual"}={}){if(!I||!I.container||!ve)return;I.container.classList.remove("is-visible"),I.container.setAttribute("aria-hidden","true"),I.container.setAttribute("hidden","hidden"),Te&&(document.removeEventListener("keydown",Te,!0),Te=null);let n=document.getElementById("mga-share");n&&n.setAttribute("aria-expanded","false"),ve=!1,e&&Fe&&typeof Fe.focus=="function"&&Fe.focus(),Fe=null,l.shareAction("close",{reason:t})}function In(e,t){if(typeof e!="string"||!e)return"";let n=t||{},r={url:n.url||"",text:n.text||n.title||"",title:n.title||n.text||""};return e.replace(/%([a-z]+)%/gi,(a,i)=>{let s=i.toLowerCase();return Object.prototype.hasOwnProperty.call(r,s)?encodeURIComponent(r[s]):""})}function Mn(e){return typeof e!="string"?Promise.reject(new Error("invalid-text")):navigator.clipboard&&typeof navigator.clipboard.writeText=="function"?navigator.clipboard.writeText(e):new Promise((t,n)=>{try{let r=document.createElement("textarea");r.value=e,r.setAttribute("readonly",""),r.style.position="absolute",r.style.left="-9999px",document.body.appendChild(r),r.select();let a=document.execCommand("copy");document.body.removeChild(r),a?t():n(new Error("execCommand-failed"))}catch(r){n(r)}})}function Fn(e){if(!I||!I.list||!ve)return;let t=e.target instanceof Element?e.target.closest("button[data-share-type]"):null;if(!t)return;e.preventDefault();let n=t.getAttribute("data-share-type"),r=t.getAttribute("data-share-key")||"",a=t.getAttribute("data-share-label")||r,i=I.payload||{};if(n==="social"){let s=t.getAttribute("data-share-template")||"",p=In(s,i);if(!p){te(o("Impossible de g\xE9n\xE9rer le lien de partage.","lightbox-jlg"),!0,"error"),l.shareAction("social",{target:r,success:!1,reason:"invalid-url"});return}let g=null;if(typeof window!="undefined"&&window&&typeof window.open=="function"&&(g=window.open(p,"_blank","noopener,noreferrer"),g&&typeof g=="object"&&"opener"in g))try{g.opener=null}catch(f){}g?(te(d(o("Ouverture de %s dans un nouvel onglet.","lightbox-jlg"),a),!1,"info"),l.shareAction("social",{target:r,success:!0,url:p})):(te(d(o("Impossible d\u2019ouvrir %s. V\xE9rifiez votre bloqueur de fen\xEAtres.","lightbox-jlg"),a),!0,"error"),l.shareAction("social",{target:r,success:!1,url:p}));return}if(n==="copy"){if(!i.url){te(o("Aucun lien \xE0 copier pour cette image.","lightbox-jlg"),!0,"error"),l.shareAction("copy",{success:!1,reason:"missing-url"});return}Mn(i.url).then(()=>{te(o("Lien copi\xE9 dans le presse-papiers.","lightbox-jlg"),!1,"success"),l.shareAction("copy",{success:!0})}).catch(s=>{te(o("Impossible de copier le lien. Essayez le raccourci clavier.","lightbox-jlg"),!0,"error"),l.shareAction("copy",{success:!1,reason:s&&s.message?s.message:"copy-error"})});return}if(n==="download"){if(!i.url){te(o("Aucun fichier \xE0 t\xE9l\xE9charger pour cette image.","lightbox-jlg"),!0,"error"),l.shareAction("download",{success:!1,reason:"missing-url"});return}ct(i.url)?(te(o("T\xE9l\xE9chargement de l\u2019image lanc\xE9.","lightbox-jlg"),!1,"success"),l.shareAction("download",{success:!0})):(te(o("Impossible de lancer le t\xE9l\xE9chargement.","lightbox-jlg"),!0,"error"),l.shareAction("download",{success:!1}));return}if(n==="native"){if(!Pt()){te(o("Le partage natif n\u2019est pas pris en charge sur ce navigateur.","lightbox-jlg"),!0,"error"),l.shareAction("native",{success:!1,reason:"unsupported"});return}try{let s=navigator.share(i);l.shareAction("native",{success:!0}),Se({restoreFocus:!1,reason:"native-share"}),s&&typeof s.catch=="function"&&s.catch(p=>{let g=p&&p.message?p.message:o("Partage annul\xE9.","lightbox-jlg");l.shareAction("native",{success:!1,reason:g})})}catch(s){te(d(o("Partage natif impossible\xA0: %s","lightbox-jlg"),s&&s.message?s.message:"unknown"),!0,"error"),l.shareAction("native",{success:!1,reason:s&&s.message?s.message:"error"})}return}l.shareAction("unknown",{type:n})}function zt(e){if(!e||typeof e.highResUrl!="string"||!e.highResUrl)return!1;let t=document.getElementById("mga-viewer");if(!t)return!1;let n=ut(t);if(!n)return!1;let r=typeof e.caption=="string"?e.caption.trim():"",a=typeof document!="undefined"&&document&&typeof document.title=="string"?document.title:"",i={url:e.highResUrl};r&&(i.text=r),(r||a)&&(i.title=r||a);let s=Ln(i);if(!s.length)return l.shareAction("no-options",{url:e.highResUrl}),dt(),!1;jn(n,s,i);let p=t.querySelector("#mga-share");return!!kn(n,p||null)}function dt(){let e=Ne();e?It():Cn();let t=document.getElementById("mga-viewer");if(!t)return;let n=t.querySelector(".mga-toolbar"),r=t.querySelector("#mga-share");if(!e){ve&&Se({restoreFocus:!1,reason:"share-options-removed"}),r&&r.remove(),Ge(n);return}if(!r&&n){let i=Tt(),s=n.querySelector("#mga-fullscreen"),p=n.querySelector("#mga-close");s&&s.parentElement===n?n.insertBefore(i,s):p&&p.parentElement===n?n.insertBefore(i,p):n.appendChild(i)}if(ut(t)){let i=t.querySelector("#mga-share");i&&(i.setAttribute("aria-controls","mga-share-modal"),i.setAttribute("aria-expanded","false"))}Ge(n)}function Rt(e,t){if(vn(),typeof Swiper!="function"){let U=o("ERREUR\xA0: La d\xE9pendance Swiper est introuvable. Initialisation annul\xE9e.","lightbox-jlg");return l&&typeof l.log=="function"?l.log(U,!0):typeof console!="undefined"&&typeof console.error=="function"&&console.error(U),null}if(!t||!t.loop)return new Swiper(e,t);let n=e?e.querySelectorAll(".swiper-slide").length:0,a=(U=>{let R=[],W=T=>{typeof T=="number"&&!Number.isNaN(T)&&R.push(Math.ceil(T))};return W(U.slidesPerView),U.breakpoints&&typeof U.breakpoints=="object"&&Object.values(U.breakpoints).forEach(T=>{T&&typeof T=="object"&&W(T.slidesPerView)}),R.length?Math.max(...R):1})(t),i=typeof t.loopedSlides=="number"?Math.max(0,Math.floor(t.loopedSlides)):a,s=typeof t.loopAdditionalSlides=="number"?Math.max(0,Math.floor(t.loopAdditionalSlides)):0,p=typeof t.slidesPerGroup=="number"?Math.max(1,Math.floor(t.slidesPerGroup)):1,g=t.centeredSlides?1:0,f=i+s,m=Math.max(f+1,p+g+1,2);if(n>=m)return new Swiper(e,t);let b=Object.assign({},t),k=i,j=s;if(n>1){k=Math.min(i,Math.max(n-1,1));let U=Math.max(n-1-k,0);j=Math.min(s,U)}else b.loop=!1;b.loopedSlides=k,b.loopAdditionalSlides=j;let V=b.loop?`Loop ajust\xE9e (instance locale) : ${n} slide(s), boucle recalibr\xE9e \xE0 ${k} + ${j} slide(s) additionnelles.`:`Loop d\xE9sactiv\xE9e (instance locale) : ${n} slide disponible, boucle inutilisable.`;return l&&typeof l.log=="function"?l.log(V):typeof console!="undefined"&&typeof console.info=="function"&&console.info(V),new Swiper(e,b)}let Tn=[{key:"ultrawide",label:o("\xC9cran ultralarge","lightbox-jlg"),minWidth:1600},{key:"desktop",label:o("Bureau","lightbox-jlg"),minWidth:1200},{key:"tablet",label:o("Tablette","lightbox-jlg"),minWidth:768},{key:"portrait",label:o("Portrait","lightbox-jlg"),minWidth:0}],Ut=e=>typeof e=="number"&&Number.isFinite(e)&&!Number.isNaN(e),Pn=(e,t)=>{if(!e||typeof e!="object")return 1;let n=e.slidesPerView,{breakpoints:r}=e;return r&&typeof r=="object"&&Object.entries(r).map(([i,s])=>({width:parseFloat(i),config:s})).filter(({width:i,config:s})=>!Number.isNaN(i)&&t>=i&&s&&typeof s=="object").sort((i,s)=>i.width-s.width).forEach(({config:i})=>{Object.prototype.hasOwnProperty.call(i,"slidesPerView")&&(n=i.slidesPerView)}),Ut(n)?Math.max(1,Math.ceil(n)):n==="auto"?"auto":1},On=e=>Tn.map(t=>({key:t.key,label:t.label,value:Pn(e,t.minWidth)})),Dn=(e,t)=>{if(!l||typeof l.updateVisibleSlides!="function")return;let n=On(t),r=e&&typeof e.slidesPerViewDynamic=="function"?e.slidesPerViewDynamic():null,a=n.map(({label:i,value:s})=>s==="auto"?Ut(r)?d(o("%1$s\xA0: auto (~%2$s)","lightbox-jlg"),i,Math.max(1,Math.round(r))):d(o("%s\xA0: auto","lightbox-jlg"),i):d(o("%1$s\xA0: %2$s","lightbox-jlg"),i,s)).join(" | ");l.updateVisibleSlides(a)};function ft(e,t,n){if(!e||e.destroyed)return;let r=[t];if(typeof n!="undefined"&&r.push(n),e.params&&e.params.loop&&typeof e.slideToLoop=="function"){e.slideToLoop.apply(e,r);return}typeof e.slideTo=="function"&&e.slideTo.apply(e,r)}let fe=null;function zn(){if(fe!==null||(fe=!1,typeof window=="undefined"||typeof document=="undefined"||typeof document.createElement!="function"||typeof HTMLElement=="undefined"||!HTMLElement.prototype||typeof HTMLElement.prototype.focus!="function"))return fe;let e=document.createElement("button"),t=document.body||document.documentElement;try{e.type="button",t&&typeof t.appendChild=="function"&&t.appendChild(e),HTMLElement.prototype.focus.call(e,{get preventScroll(){return fe=!0,!0}})}catch(n){fe=!1}finally{e.parentNode&&typeof e.parentNode.removeChild=="function"&&e.parentNode.removeChild(e)}return fe}function Ke(e,t={preventScroll:!0}){if(!e||typeof e.focus!="function")return;if(t&&zn())try{e.focus(t);return}catch(r){}e.focus()}function Nt(e){let t=document,n=[{request:"requestFullscreen",exit:"exitFullscreen",element:"fullscreenElement"},{request:"webkitRequestFullscreen",exit:"webkitExitFullscreen",element:"webkitFullscreenElement"},{request:"webkitRequestFullScreen",exit:"webkitCancelFullScreen",element:"webkitCurrentFullScreenElement"},{request:"mozRequestFullScreen",exit:"mozCancelFullScreen",element:"mozFullScreenElement"},{request:"msRequestFullscreen",exit:"msExitFullscreen",element:"msFullscreenElement"}],r={request:null,exit:null,element:null},a=["fullscreenElement","webkitFullscreenElement","webkitCurrentFullScreenElement","mozFullScreenElement","msFullscreenElement"];for(let i of a)if(typeof t[i]!="undefined"&&t[i]){r.element=t[i];break}for(let i of n)if(!r.request&&e&&typeof e[i.request]=="function"&&(r.request=e[i.request].bind(e)),!r.exit&&typeof t[i.exit]=="function"&&(r.exit=t[i.exit].bind(t)),r.request&&r.exit&&r.element)break;return r}function Bt(e){if(!e)return!1;if(e.hasAttribute("data-mga-allow-fallback"))return!0;if(e.dataset){let a=e.dataset.mgaAllowFallback;if(typeof a!="undefined"&&a!=="0"&&a!=="false"||e.dataset.mgaHighres)return!0;let i=e.dataset.type||e.dataset.wpType;if(typeof i=="string"&&i.toLowerCase()==="attachment")return!0}let t=e.getAttribute("rel");if(t&&t.split(/\s+/).includes("mga-allow-fallback"))return!0;let n=e.getAttribute("data-type");if(typeof n=="string"&&n.toLowerCase()==="attachment")return!0;let r=e.getAttribute("href");if(typeof r=="string"){if(/[?&]attachment_id=\d+/i.test(r)||/\/attachment\//i.test(r))return!0;try{let a=typeof window!="undefined"&&window.location?window.location.href:void 0,i=new URL(r,a);if(i.searchParams&&i.searchParams.has("attachment_id"))return!0}catch(a){}}return!1}function pt(e,t={}){if(!e)return null;let{excludeLarge:n=!1}=t,r=["data-mga-highres","data-full-url","data-large-file","data-orig-file","data-src","data-lazy-src"],a={mgaHighres:"data-mga-highres",fullUrl:"data-full-url",largeFile:"data-large-file",origFile:"data-orig-file",src:"data-src",lazySrc:"data-lazy-src"},i=[];for(let p of r){let g=e.getAttribute(p);g&&i.push({key:p,value:g.trim()})}if(e.dataset)for(let[p,g]of Object.entries(a)){let f=e.dataset[p];f&&!i.some(m=>m.key===g)&&i.push({key:g,value:f.trim()})}if(!i.length)return null;if(n){let p=new Set(["data-full-url","data-large-file","data-orig-file"]),g=["data-src","data-lazy-src","data-mga-highres"];if(i.some(m=>!p.has(m.key))){for(let b of g){let k=i.find(j=>j.key===b&&j.value);if(k)return k.value}let m=i.find(b=>!p.has(b.key)&&b.value);if(m)return m.value}}let s=i.find(p=>p.value);return s?s.value:null}function We(e){if(typeof e!="string")return"";let t=e.trim();return!t||/^(?:about:|javascript:)/i.test(t)||/^(?:data:|blob:)/i.test(t)?"":t}function pe(e){if(typeof e!="string")return"";let t=e.trim();if(!t)return"";if(/^\/\//.test(t)){let n=typeof window!="undefined"?window.location:null,r=n&&typeof n.protocol=="string"?n.protocol.toLowerCase():"";return r==="http:"||r==="https:"?`${r}${t}`:`https:${t}`}return/^[a-zA-Z][a-zA-Z0-9+.-]*:/.test(t)?/^https?:/i.test(t)?t:"":t}function Vt(e){if(!e)return"";let t=[typeof e.currentSrc=="string"?e.currentSrc:"",typeof e.src=="string"?e.src:""];for(let r of t){let a=We(r);if(a)return a}let n=pt(e,{excludeLarge:!0});return We(n)}function Rn(e){if(!e||!e.srcset)return null;let t=e.srcset.split(",").map(n=>n.trim()).filter(n=>n.length>0).map(n=>{let r=n.split(/\s+/),a=r[0],i=0;if(r[1]){let s=r[1].trim();/^[0-9]+w$/i.test(s)?i=parseInt(s,10):/^[0-9]*\.?[0-9]+x$/i.test(s)&&(i=parseFloat(s)*1e3)}return{url:a,score:i}}).filter(n=>n.url);return t.length?(t.sort((n,r)=>r.score-n.score),t[0].url):null}function qt(e){if(!e)return null;let t=e.getAttribute("href")||"";if(!S&&ne(t))return null;let n=H.test(t),r=n||Bt(e),a=n?pe(t):null;if(r&&e.dataset&&e.dataset.mgaHighres){let f=pe(e.dataset.mgaHighres);if(f&&(S||!ne(f)))return f}let i=e.querySelector("img");if(!i)return null;if(r){let f=pt(i),m=pe(f);if(m&&(S||!ne(m)))return m}if(!r)return null;let s=pe(Rn(i));if(s&&(S||!ne(s)))return s;if(a&&(S||!ne(a)))return a;let p=pe(i.currentSrc);if(p&&(S||!ne(p)))return p;let g=pe(i.src);return g&&(S||!ne(g))?g:null}let Un=new Set(["primary","secondary","outline"]),Nn=e=>{if(typeof e!="string")return"primary";let t=e.trim().toLowerCase();return Un.has(t)?t:"primary"},Bn=e=>{if(typeof e!="string")return"_self";let t=e.trim().toLowerCase();switch(t){case"_blank":case"_self":case"_parent":case"_top":return t;default:return"_self"}},Vn=(e,t)=>typeof e=="string"&&e.trim()?e.trim():t==="_blank"?"noopener noreferrer":"",gt=e=>{if(!e||typeof e!="object")return null;let t=typeof e.label=="string"?e.label.trim():"",n=typeof e.url=="string"?e.url.trim():"";if(!t||!n)return null;let r=Bn(e.target),a=Vn(e.rel,r),i=Nn(e.variant);return{label:t,url:n,target:r,rel:a,variant:i}},qn=e=>{if(typeof e!="string"||!e.trim())return[];try{let t=JSON.parse(e);if(Array.isArray(t))return t.map(gt).filter(Boolean);let n=gt(t);return n?[n]:[]}catch(t){l&&typeof l.log=="function"&&l.log(d(o("Impossible de parser les CTA personnalis\xE9s\xA0: %s","lightbox-jlg"),t.message),!0)}return[]},Ee=(e,t)=>{if(!e)return"";let n=e.getAttribute(t);return typeof n=="string"?n.trim():""},Ht=(e,t,n)=>{if(!e)return null;let r=Ee(e,`${t}-label`),a=Ee(e,`${t}-url`);if(!r||!a)return null;let i=Ee(e,`${t}-target`)||void 0,s=Ee(e,`${t}-rel`)||void 0,p=Ee(e,`${t}-variant`)||n;return gt({label:r,url:a,target:i,rel:s,variant:p||n})},Hn=(e,t)=>{let n=[];e instanceof Element&&n.push(e),t instanceof Element&&n.push(t);let r=[],a=new Set,i=s=>{if(!s)return;let p=`${s.label}::${s.url}`;a.has(p)||(a.add(p),r.push(s))};return n.forEach(s=>{if(!s)return;qn(Ee(s,"data-mga-cta")).forEach(i),i(Ht(s,"data-mga-cta","primary")),i(Ht(s,"data-mga-cta-secondary","secondary"))}),r},mt=e=>!Array.isArray(e)||!e.length?[]:e.reduce((t,n,r)=>{let a=n.querySelector("img");if(!a)return t;let i=qt(n);if(!i||!S&&ne(i))return t;let s=Vt(a);if(!s){let m=We(i);m&&(s=m)}if(!s)return t;let p="",g=n.closest("figure");if(g){let m=g.querySelector("figcaption");m&&(p=m.textContent.trim())}p||(p=a.alt||"");let f=Hn(n,a);return t.push({highResUrl:i,thumbUrl:s,caption:p,triggerIndex:r,ctas:f}),t},[]),Pe=(e,t,n,r={})=>{if(!Array.isArray(t)||!t.length)return!1;let a=Math.max(0,Math.min(parseInt(n,10)||0,t.length-1)),i=r.focusOrigin instanceof Element?r.focusOrigin:r.focusOrigin===null?null:void 0,s=null;if(i)s=i,J=i;else if(!r.skipFocusCapture){let f=document&&document.activeElement instanceof Element?document.activeElement:null;f&&(s=f,J=f)}let p=r.history||{},g=Kt(t,a,{galleryId:e,history:p});return!g&&s&&s===J&&(J=null),g},le=(()=>{if(typeof window=="undefined"||typeof window.location=="undefined")return null;try{let e=new URL(window.location.href),t=e.searchParams.get("mga");if(!t)return null;let n=t.lastIndexOf(":");if(n===-1)return null;let r=t.slice(0,n),a=t.slice(n+1);if(!r)return null;let i=decodeURIComponent(r);if(!i)return null;let s=parseInt(a,10),p=Number.isNaN(s)?0:Math.max(s-1,0),g=new URL(e.toString());return g.searchParams.delete("mga"),{galleryId:i,index:p,originalUrl:g.toString(),originalState:window.history.state}}catch(e){return l&&typeof l.log=="function"&&l.log(d(o("Lien profond invalide d\xE9tect\xE9\xA0: %s","lightbox-jlg"),e.message),!0),null}})();function Ze(){let e=document.getElementById("mga-viewer");if(!e){l.log(o("Viewer non trouv\xE9. Cr\xE9ation \xE0 la vol\xE9e...","lightbox-jlg")),e=document.createElement("div"),e.id="mga-viewer",e.className="mga-viewer mga-viewer--compact",e.classList.toggle("mga-has-caption",!1),e.style.display="none",e.setAttribute("role","dialog"),e.setAttribute("aria-modal","true"),e.setAttribute("aria-labelledby","mga-viewer-title"),e.setAttribute("tabindex","-1");let t=document.createElement("span");t.id="mga-viewer-title",t.className="mga-screen-reader-text",t.textContent=o("Visionneuse d\u2019images","lightbox-jlg"),e.appendChild(t);let n=document.createElement("div");n.className="mga-echo-bg",e.appendChild(n);let r=document.createElement("div");r.className="mga-header",e.appendChild(r);let a=document.createElement("div");a.id="mga-counter",a.className="mga-counter",r.appendChild(a);let i=document.createElement("div");i.className="mga-caption-container",i.setAttribute("role","status"),i.setAttribute("aria-live","polite"),r.appendChild(i);let s=document.createElement("p");s.id="mga-caption",s.className="mga-caption",i.appendChild(s);let p=document.createElement("span");p.className="mga-screen-reader-text mga-caption-live",i.appendChild(p);let g=document.createElement("p");g.className="mga-caption-feedback",g.setAttribute("hidden","hidden"),i.appendChild(g);let f=document.createElement("div");f.className="mga-cta-container",f.setAttribute("data-mga-cta-container","true"),f.setAttribute("hidden","hidden"),r.appendChild(f);let m=document.createElement("div");m.className="mga-toolbar",r.appendChild(m);let b=document.createElement("button");b.type="button",b.id="mga-play-pause",b.className="mga-toolbar-button",b.setAttribute("aria-pressed","false"),b.setAttribute("aria-label",o("Lancer le diaporama","lightbox-jlg")),m.appendChild(b);let k=createSvgElement("svg",{class:"mga-timer-svg",viewBox:"0 0 36 36"}),j=createSvgElement("path",{class:"mga-timer-bg",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),V=createSvgElement("path",{class:"mga-timer-progress",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"});k.appendChild(j),k.appendChild(V),b.appendChild(k);let U=createSvgElement("svg",{class:"mga-icon mga-play-icon",viewBox:"0 0 24 24",fill:"currentColor"}),R=createSvgElement("path",{d:"M8 5v14l11-7z"});U.appendChild(R),b.appendChild(U);let W=createSvgElement("svg",{class:"mga-icon mga-pause-icon",viewBox:"0 0 24 24",fill:"currentColor"});W.style.display="none";let T=createSvgElement("path",{d:"M6 19h4V5H6v14zm8-14v14h4V5h-4z"});if(W.appendChild(T),b.appendChild(W),Le(e,!1),_e){let x=document.createElement("button");x.type="button",x.id="mga-zoom",x.className="mga-toolbar-button",x.setAttribute("aria-label",o("Zoom","lightbox-jlg")),m.appendChild(x);let _=createSvgElement("svg",{class:"mga-icon",viewBox:"0 0 24 24",fill:"currentColor"}),B=createSvgElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),Y=createSvgElement("path",{d:"M10 9h-1v-1H8v1H7v1h1v1h1v-1h1V9z"});_.appendChild(B),_.appendChild(Y),x.appendChild(_)}if(At){let x=document.createElement("button");x.type="button",x.id="mga-download",x.className="mga-toolbar-button",x.setAttribute("aria-label",o("T\xE9l\xE9charger l\u2019image","lightbox-jlg")),m.appendChild(x);let _=createSvgElement("svg",{class:"mga-icon mga-download-icon",viewBox:"0 0 24 24",fill:"currentColor"}),B=createSvgElement("path",{d:"M5 20h14v-2H5v2zm7-16l-5 5h3v4h4v-4h3l-5-5z"});_.appendChild(B),x.appendChild(_)}if(Ne()){let x=Tt();m.appendChild(x)}if(Ct){let x=document.createElement("button");x.type="button",x.id="mga-fullscreen",x.className="mga-toolbar-button",x.setAttribute("aria-label",o("Plein \xE9cran","lightbox-jlg")),m.appendChild(x);let _=createSvgElement("svg",{class:"mga-icon",viewBox:"0 0 24 24",fill:"currentColor"}),B=createSvgElement("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5V14h-2v3zM14 5v2h3v3h2V5h-5z"});_.appendChild(B),x.appendChild(_)}m.setAttribute("data-mga-optional-buttons",String(X.length));let Z=document.createElement("button");Z.type="button",Z.id="mga-close",Z.className="mga-toolbar-button",Z.setAttribute("aria-label",o("Fermer","lightbox-jlg")),m.appendChild(Z);let ee=createSvgElement("svg",{class:"mga-icon",viewBox:"0 0 24 24",fill:"currentColor"}),re=createSvgElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"});ee.appendChild(re),Z.appendChild(ee);let $=document.createElement("div");$.className="swiper mga-main-swiper",e.appendChild($);let M=document.createElement("div");M.className="swiper-wrapper",M.id="mga-main-wrapper",$.appendChild(M);let D=document.createElement("button");D.type="button",D.className="swiper-button-next mga-nav-button",D.id="mga-next",D.setAttribute("aria-label",o("Image suivante","lightbox-jlg")),D.setAttribute("title",o("Image suivante","lightbox-jlg")),$.appendChild(D);let y=document.createElement("button");if(y.type="button",y.className="swiper-button-prev mga-nav-button",y.id="mga-prev",y.setAttribute("aria-label",o("Image pr\xE9c\xE9dente","lightbox-jlg")),y.setAttribute("title",o("Image pr\xE9c\xE9dente","lightbox-jlg")),$.appendChild(y),A!=="hidden"){let x=document.createElement("div");x.className="swiper mga-thumbs-swiper",e.appendChild(x);let _=document.createElement("div");_.className="swiper-wrapper",_.id="mga-thumbs-wrapper",x.appendChild(_)}if(Ne()&&ut(e)){let _=e.querySelector("#mga-share");_&&_.setAttribute("aria-controls","mga-share-modal")}document.body&&typeof document.body.appendChild=="function"&&document.body.appendChild(e),e&&e.parentNode?l.log(o("Viewer cr\xE9\xE9 et ajout\xE9 au body avec succ\xE8s.","lightbox-jlg")):l.log(o("ERREUR CRITIQUE\xA0: \xC9chec de la cr\xE9ation du viewer\xA0!","lightbox-jlg"),!0)}return e}l.log(o("Script initialis\xE9 et pr\xEAt.","lightbox-jlg")),l.updateInfo("mga-debug-status",o("Pr\xEAt","lightbox-jlg"),"#4CAF50");let $n=[".wp-block-post-content",".entry-content",".post-content",".site-main",".content-area","main",".hentry","#primary","#main"],Gn=Array.isArray(h.contentSelectors)?h.contentSelectors:[],Kn=Array.from(new Set(Gn.concat($n).filter(Boolean))),ge=null,Ye=o("Aucune zone d\xE9tect\xE9e","lightbox-jlg");for(let e of Kn){let t=null;try{t=document.querySelector(e)}catch(n){let r=d(o("S\xE9lecteur CSS invalide ignor\xE9\xA0: %s","lightbox-jlg"),e),a=n&&n.message?` (${n.message})`:"",i=`${r}${a}`;l&&typeof l.log=="function"?l.log(i,!0):typeof console!="undefined"&&typeof console.warn=="function"&&console.warn(i);continue}if(t){ge=t,Ye=e;break}}if(!ge&&h.allowBodyFallback===!0&&document.body&&(ge=document.body,Ye=o("<body> (opt-in fallback)","lightbox-jlg")),!ge){l.updateInfo("mga-debug-content-area",Ye,"#F44336"),l.log(o("Aucune zone de contenu valide d\xE9tect\xE9e. Initialisation du diaporama interrompue.","lightbox-jlg"),!0);return}l.updateInfo("mga-debug-content-area",Ye,"#4CAF50");let $t="__mga-default-group__",Qe=typeof h.groupAttribute=="string"?h.groupAttribute.trim():"",Gt="mga-group:",Wn=new Set(["nofollow","noreferrer","noopener","opener","external"]),Zn=e=>{if(typeof e!="string")return null;let t=e.split(/\s+/).map(n=>n.trim()).filter(Boolean);for(let n of t)if(n.toLowerCase().startsWith(Gt)){let r=n.slice(Gt.length).trim();if(r)return r}for(let n of t){let r=n.toLowerCase();if(!(!r||Wn.has(r))&&!r.includes(":"))return n}return null},ht=e=>{if(!(e instanceof Element))return $t;let t=Zn(e.getAttribute("rel"));if(t)return`rel:${t}`;let n=[];Qe&&n.push(Qe),n.push("data-mga-gallery");let r=Qe?Qe.toLowerCase():"";for(let a of n){if(!a||a.toLowerCase()==="rel")continue;let i=e.getAttribute(a);if(typeof i!="string")continue;let s=i.trim();if(s)return`${a}:${s}`}if(r==="href"){let a=e.getAttribute("href");if(typeof a=="string"){let i=a.trim();if(i)return`href:${i}`}}return $t},Oe=(e=!0)=>{let t=Array.from(ge.querySelectorAll("a")).filter(r=>r.querySelector("img")),n=t.reduce((r,a)=>{let i=ht(a);return r[i]||(r[i]=[]),r[i].push(a),r},{});if(e){let r=Object.keys(n).length,a=`${t.length} (${r} groupe${r>1?"s":""} apr\xE8s filtrage)`;l.updateInfo("mga-debug-trigger-img",a)}return n},Yn={resolveLinkGroupId:ht,isExplicitFallbackAllowed:Bt,sanitizeHighResUrl:pe,sanitizeThumbnailUrl:We,resolveThumbnailUrl:Vt,getImageDataAttributes:pt};typeof z!="undefined"&&z.exports&&(z.exports.helpers=Yn);let P=(()=>{if(!(typeof window!="undefined"&&window.history&&typeof window.history.pushState=="function"&&typeof window.history.replaceState=="function"))return{isSupported:!1,isActive:()=>!1,getGalleryId:()=>null,getLastIndex:()=>0,push:()=>!1,update:()=>{},beginClose:()=>!1,finalizeClose:()=>{},adoptExistingState:()=>{}};let t=!1,n=null,r=0,a=!1,i=null,s=null,p=(f,m)=>{try{let b=new URL(window.location.href),k=encodeURIComponent(f||""),j=Math.max(1,(parseInt(m,10)||0)+1);return b.searchParams.set("mga",`${k}:${j}`),b.toString()}catch(b){return null}},g=(f,m)=>({mgaViewer:{galleryId:f,index:m,returnUrl:i||window.location.href}});return{isSupported:!0,isActive:()=>t,getGalleryId:()=>n,getLastIndex:()=>r,push:(f,m,b={})=>{let k=typeof b.originalUrl=="string"?b.originalUrl:window.location.href,j=Object.prototype.hasOwnProperty.call(b,"originalState")?b.originalState:window.history.state;if(b.replaceOriginal&&k)try{window.history.replaceState(j,"",k)}catch(U){}let V=p(f,m);if(!V)return!1;try{return i=k,s=j,window.history.pushState(g(f,m),"",V),t=!0,a=!1,n=f,r=m,!0}catch(U){return!1}},update:f=>{if(!t)return;let m=p(n,f);if(m){r=f;try{window.history.replaceState(g(n,f),"",m)}catch(b){}}},beginClose:()=>{if(!t)return!1;a=!0;try{return window.history.back(),!0}catch(f){return a=!1,!1}},finalizeClose:()=>{t=!1,n=null,r=0,a=!1,i=null,s=null},adoptExistingState:(f,m,b={})=>{t=!0,n=f,r=m,a=!1,typeof b.originalUrl=="string"?i=b.originalUrl:i||(i=window.location.href),Object.prototype.hasOwnProperty.call(b,"originalState")&&(s=b.originalState)}}})(),{cleanup:Qn,active:Xn}=(()=>{if(typeof MutationObserver!="function")return{cleanup:F,active:!1};if(!l.enabled)return{cleanup:F,active:!1};let e=new MutationObserver(()=>{Oe()});return e.observe(ge,{childList:!0,subtree:!0}),{cleanup:()=>e.disconnect(),active:!0}})();Oe(),le&&le.galleryId&&setTimeout(()=>{let t=Oe(!1)[le.galleryId]||[],n=mt(t);n.length&&Pe(le.galleryId,n,le.index,{skipFocusCapture:!0,history:{action:"push",replaceOriginal:!0,originalUrl:le.originalUrl,originalState:le.originalState}}),le=null},0),Xn&&window.addEventListener("beforeunload",Qn),l.onForceOpen(()=>{l.log(o("Clic sur 'Forcer l'ouverture'.","lightbox-jlg"));let e=[{highResUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20600%22%3E%3Crect%20width%3D%22800%22%20height%3D%22600%22%20fill%3D%22%230073aa%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20font-size%3D%2248%22%20fill%3D%22%23ffffff%22%3EImage%20Test%201%3C%2Ftext%3E%3C%2Fsvg%3E",thumbUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20150%20150%22%3E%3Crect%20width%3D%22150%22%20height%3D%22150%22%20fill%3D%22%230073aa%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20font-size%3D%2218%22%20fill%3D%22%23ffffff%22%3EThumb%201%3C%2Ftext%3E%3C%2Fsvg%3E",caption:o("Ceci est la premi\xE8re image de test.","lightbox-jlg")},{highResUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20800%20600%22%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22grad%22%20x1%3D%220%25%22%20y1%3D%220%25%22%20x2%3D%22100%25%22%20y2%3D%22100%25%22%3E%3Cstop%20offset%3D%220%25%22%20stop-color%3D%22%23f44336%22%2F%3E%3Cstop%20offset%3D%22100%25%22%20stop-color%3D%22%23ff9800%22%2F%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Crect%20width%3D%22800%22%20height%3D%22600%22%20fill%3D%22url(%23grad)%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20font-size%3D%2248%22%20fill%3D%22%23ffffff%22%3EImage%20Test%202%3C%2Ftext%3E%3C%2Fsvg%3E",thumbUrl:"data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20150%20150%22%3E%3Cdefs%3E%3ClinearGradient%20id%3D%22gradThumb%22%20x1%3D%220%25%22%20y1%3D%220%25%22%20x2%3D%22100%25%22%20y2%3D%22100%25%22%3E%3Cstop%20offset%3D%220%25%22%20stop-color%3D%22%23f44336%22%2F%3E%3Cstop%20offset%3D%22100%25%22%20stop-color%3D%22%23ff9800%22%2F%3E%3C%2FlinearGradient%3E%3C%2Fdefs%3E%3Crect%20width%3D%22150%22%20height%3D%22150%22%20fill%3D%22url(%23gradThumb)%22%2F%3E%3Ctext%20x%3D%2250%25%22%20y%3D%2250%25%22%20dominant-baseline%3D%22middle%22%20text-anchor%3D%22middle%22%20font-size%3D%2218%22%20fill%3D%22%23ffffff%22%3EThumb%202%3C%2Ftext%3E%3C%2Fsvg%3E",caption:o("Ceci est la seconde image de test.","lightbox-jlg")}],t=document.activeElement instanceof Element?document.activeElement:null;Pe("__debug__",e,0,{focusOrigin:t||null,history:{action:"push"}})||(J=null)}),ge.addEventListener("click",function(e){if(e.defaultPrevented||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;let t=Mt(e);if(!t)return;let n=t.closest("a");if(n&&!n.hasAttribute("download")&&n.querySelector("img")){l.log(o("Clic sur un lien contenant une image.","lightbox-jlg"));let r=qt(n);if(!r){l.log(o("URL haute r\xE9solution introuvable pour le lien cliqu\xE9.","lightbox-jlg"));return}let a=Oe(),i=ht(n),s=a[i]||[];l.log(d(o("Pr\xE9paration de la galerie pour le groupe %s.","lightbox-jlg"),i));let p=s.indexOf(n);if(p===-1){l.log(o("ERREUR\xA0: Lien d\xE9clencheur introuvable dans la collection actuelle.","lightbox-jlg"),!0);return}let g=mt(s);if(l.log(d(o("%d images valides pr\xE9par\xE9es pour la galerie.","lightbox-jlg"),g.length)),l.table(g),!g.length){l.log(o("ERREUR\xA0: Aucune image valide d\xE9tect\xE9e pour cette galerie.","lightbox-jlg"),!0);return}let f=g.findIndex(j=>j.triggerIndex===p);f===-1&&(l.log(o("ERREUR : L'image cliqu\xE9e n'a pas \xE9t\xE9 trouv\xE9e dans la galerie construite.","lightbox-jlg"),!0),l.log(d(o("URL cliqu\xE9e recherch\xE9e\xA0: %s","lightbox-jlg"),r),!0));let m=jt&&f!==-1?f:0;l&&typeof l.log=="function"&&l.log(d(o("Index initial demand\xE9 via clic\xA0: %1$d (option active\xA0: %2$s, trouv\xE9\xA0: %3$d).","lightbox-jlg"),m,o(jt?"oui":"non","lightbox-jlg"),f));let b=document.activeElement instanceof Element?document.activeElement:null;Pe(i,g,m,{focusOrigin:b||null,history:{action:"push"}})?e.preventDefault():J=null}});let Jn=e=>{if(!P.isSupported)return;let t=e&&typeof e.state=="object"&&e.state!==null?e.state:null,n=t&&typeof t.mgaViewer=="object"?t.mgaViewer:null,r=Ze();if(n&&n.galleryId){let a=n.galleryId,i=Number.isFinite(n.index)?n.index:0,s=typeof n.returnUrl=="string"?n.returnUrl:void 0,g=Oe(!1)[a]||[],f=mt(g);if(!f.length){r&&r.style.display!=="none"&&Ae(r,{skipHistory:!0});return}let m={originalUrl:s,originalState:t};if(r&&r.style.display!=="none")if($e!==a)Ae(r,{skipHistory:!0}),Pe(a,f,i,{skipFocusCapture:!0,history:Object.assign({action:"sync"},m)});else{P.adoptExistingState(a,i,m);let b=Math.max(0,Math.min(i,f.length-1));se=f,$e=a,u&&!u.destroyed&&ft(u,b,0),Xe(r,f,b)}else Pe(a,f,i,{skipFocusCapture:!0,history:Object.assign({action:"sync"},m)});return}if(P.isActive&&P.isActive()){let a=Ze();a&&a.style.display!=="none"&&Ae(a,{skipHistory:!0})}};function Kt(e,t,n={}){l.log(d(o("openViewer appel\xE9 avec %1$d images, index %2$d.","lightbox-jlg"),e.length,t)),l&&typeof l.restartTimer=="function"&&l.restartTimer();let r=Ze();if(!r)return!1;let a=parseInt(t,10),i=Number.isFinite(a)?a:0,s=Math.min(Math.max(i,0),Math.max(e.length-1,0)),p=typeof n.galleryId=="string"?n.galleryId:null,g=n&&typeof n.history=="object"&&n.history!==null?n.history:{},f=typeof g.action=="string"?g.action:"push",m={originalUrl:g.originalUrl,originalState:g.originalState,replaceOriginal:g.replaceOriginal};r.className="mga-viewer mga-viewer--compact",r.classList.toggle("mga-has-caption",!1),A==="left"?r.classList.add("mga-thumbs-left"):A==="hidden"&&r.classList.add("mga-thumbs-hidden"),h.background_style==="blur"&&r.classList.add("mga-has-blur"),h.background_style==="texture"&&r.classList.add("mga-has-texture"),Sn||r.classList.add("mga-hide-thumbs-mobile");try{let R=function(M){u&&!u.destroyed&&ft(u,M),O&&!O.destroyed&&typeof O.slideTo=="function"&&O.slideTo(M),V(M)};u&&u.destroy(!0,!0),O&&O.destroy(!0,!0),u=null,O=null,rt.clear();let b=r.querySelector("#mga-main-wrapper"),k=r.querySelector("#mga-thumbs-wrapper");b.textContent="",k&&(k.textContent="");let j=[],V=M=>{if(!j.length)return;let D=!1;if(j.forEach(y=>{let x=parseInt(y.getAttribute("data-slide-index"),10);Number.isFinite(x)&&x===M?(y.setAttribute("aria-current","true"),y.setAttribute("tabindex","0"),D=!0):(y.removeAttribute("aria-current"),y.setAttribute("tabindex","-1"))}),!D){let y=j[0];y&&y.setAttribute("tabindex","0")}},U=(M,D)=>M&&M.caption?d(o("Afficher la diapositive %s\xA0: %s","lightbox-jlg"),String(D),M.caption):d(o("Afficher la diapositive %s","lightbox-jlg"),String(D));if(e.forEach((M,D)=>{let y=document.createElement("div");y.className="swiper-slide",y.setAttribute("data-slide-index",D);let x=document.createElement("div");x.className="mga-spinner",x.style.display="none",y.appendChild(x);let _=document.createElement("div");_.className="swiper-zoom-container";let B=document.createElement("img");if(B.setAttribute("loading","lazy"),B.setAttribute("src",M.highResUrl),B.setAttribute("alt",M.caption),_.appendChild(B),y.appendChild(_),b.appendChild(y),k){let Y=document.createElement("div");Y.className="swiper-slide";let Q=document.createElement("button");Q.type="button",Q.className="mga-thumb-button",Q.setAttribute("data-slide-index",String(D)),Q.setAttribute("aria-label",U(M,D+1)),Q.setAttribute("tabindex",D===s?"0":"-1");let me=document.createElement("img");me.setAttribute("loading","lazy"),me.setAttribute("src",M.thumbUrl),me.setAttribute("alt",M.caption),Q.appendChild(me);let bt=De=>{De&&De.preventDefault(),R(D)};Q.addEventListener("click",bt),Q.addEventListener("keydown",De=>{let{key:he}=De;if(!["ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Home","End"].includes(he)||(De.preventDefault(),!j.length))return;let oe=D;he==="Home"?oe=0:he==="End"?oe=j.length-1:he==="ArrowLeft"||he==="ArrowUp"?oe=D-1:(he==="ArrowRight"||he==="ArrowDown")&&(oe=D+1),oe<0?oe=j.length-1:oe>=j.length&&(oe=0);let Jt=j[oe];Jt&&(Jt.focus(),R(oe))}),j.push(Q),Y.appendChild(Q),k.appendChild(Y)}}),l.log(o("Wrappers HTML remplis avec URLs optimis\xE9es.","lightbox-jlg")),j.length?(ue=V,V(s)):ue=null,nr(r,e,s),!u){let M=o("Visionneuse annul\xE9e\xA0: Swiper n\u2019a pas pu \xEAtre initialis\xE9.","lightbox-jlg");return l&&typeof l.log=="function"?l.log(M,!0):typeof console!="undefined"&&typeof console.error=="function"&&console.error(M),r.style.display="none",!1}se=Array.isArray(e)?e:[],$e=p;let W=()=>{!u||u.destroyed||(ft(u,s,0),O&&typeof O.slideTo=="function"&&O.slideTo(s),h.background_style==="echo"&&e[s]&&e[s].highResUrl&&Je(r,e[s].highResUrl),Xe(r,e,s))};!!(u&&u.params&&u.params.cssMode)?(r.style.display="flex",(typeof window!="undefined"&&typeof window.requestAnimationFrame=="function"?window.requestAnimationFrame.bind(window):D=>setTimeout(D,0))(()=>{W()})):(W(),r.style.display="flex"),P.isSupported&&(f==="sync"?(P.adoptExistingState(p,s,m),P.isActive&&P.isActive()&&P.update(s)):f==="none"?P.adoptExistingState(p,s,m):(!P.push(p,s,m)&&typeof P.adoptExistingState=="function"&&P.adoptExistingState(p,s,m),P.isActive&&P.isActive()&&P.update(s))),J||(J=document.activeElement),tr(r);let Z=document.body.style.overflow,ee=document.body.style.paddingRight;it=Z,st=ee;let re=0;if(typeof window!="undefined"&&typeof window.getComputedStyle=="function"){let M=window.getComputedStyle(document.body);re=parseFloat(M.paddingRight)||0}else if(ee){let M=parseFloat(ee);re=Number.isNaN(M)?0:M}let $=typeof window!="undefined"&&typeof window.innerWidth=="number"&&typeof document!="undefined"&&document.documentElement?Math.max(window.innerWidth-document.documentElement.clientWidth,0):0;return $>0?(document.body.style.paddingRight=`${re+$}px`,qe=!0):qe=!1,document.body.classList.contains(nt)?He=!1:(document.body.classList.add(nt),He=!0),Z!=="hidden"?(document.body.style.overflow="hidden",Ve=!0):Ve=!1,l.log(o("Galerie affich\xE9e avec succ\xE8s.","lightbox-jlg")),ot||(window.addEventListener("resize",Xt),ot=!0),!0}catch(b){return l.log(d(o("ERREUR dans openViewer\xA0: %s","lightbox-jlg"),b.message),!0),console.error(b),r.style.display="none",!1}}function er(e){return Array.from(e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')).filter(n=>{if(n.disabled||n.getAttribute("aria-hidden")==="true")return!1;let r=n.getBoundingClientRect();return!!(r.width||r.height||n.getClientRects().length)})}function tr(e){e.hasAttribute("tabindex")||e.setAttribute("tabindex","-1"),ce&&e.removeEventListener("keydown",ce,!0),ce=function(r){if(r.key!=="Tab")return;let a=er(e);if(!a.length){r.preventDefault(),Ke(e);return}let i=a.indexOf(document.activeElement),s=i;r.shiftKey?i<=0?s=a.length-1:s=i-1:i===-1||i===a.length-1?s=0:s=i+1,r.preventDefault(),Ke(a[s])},e.addEventListener("keydown",ce,!0);let t=e.querySelector("#mga-close"),n=t&&t.offsetParent!==null?t:e;n&&typeof n.focus=="function"&&Ke(n)}function nr(e,t,n=0){typeof ae=="function"&&(ae(),ae=null),Me=!1;let r=hn(h.effect),a=yn(h.speed),i=bn(h.easing),s=e.querySelector(".mga-main-swiper"),p=A==="hidden"?null:e.querySelector(".mga-thumbs-swiper");if(p){let y={spaceBetween:10,slidesPerView:"auto",freeMode:!0,watchSlidesProgress:!0,passiveListeners:!0};A==="left"&&(y.direction="vertical",y.breakpoints={0:{direction:"horizontal"},769:{direction:"vertical"}}),O=Rt(p,y),O&&ye(O,i)}else O=null;if(!O&&A!=="hidden"){let y=o("Initialisation des miniatures Swiper impossible. La visionneuse fonctionnera sans elles.","lightbox-jlg");l&&typeof l.log=="function"?l.log(y,!0):typeof console!="undefined"&&typeof console.error=="function"&&console.error(y)}let g={delay:parseInt(h.delay,10)*1e3||4e3,disableOnInteraction:!1,pauseOnMouseEnter:!1},f=typeof window!="undefined"&&typeof window.matchMedia=="function"?window.matchMedia("(prefers-reduced-motion: reduce)"):null,m=!!(f&&f.matches);l&&typeof l.log=="function"&&(f?l.log(d(o("Pr\xE9f\xE9rence de r\xE9duction des animations d\xE9tect\xE9e\xA0: %s.","lightbox-jlg"),o(m?"oui":"non","lightbox-jlg"))):l.log(o("Impossible de d\xE9terminer la pr\xE9f\xE9rence de r\xE9duction des animations (matchMedia indisponible).","lightbox-jlg")));let b=r,k=a,j=!1;m&&(j=!0,xt.has(b)&&(l&&typeof l.log=="function"&&l.log(o("Effet 3D d\xE9sactiv\xE9 pour respecter la pr\xE9f\xE9rence de r\xE9duction des animations.","lightbox-jlg")),b=q),k=Math.min(k,300));let V=j&&b==="slide"&&!Re;l&&typeof l.log=="function"&&(l.log(d(o("Effet retenu\xA0: %1$s (vitesse\xA0: %2$ims).","lightbox-jlg"),b,k)),V?l.log(o("Mode CSS activ\xE9 pour limiter les animations.","lightbox-jlg")):j&&b==="slide"&&Re&&l.log(o("Mode CSS non activ\xE9 car incompatible avec le mode boucle.","lightbox-jlg")));let U=Math.min(Math.max(parseInt(n,10)||0,0),Math.max(t.length-1,0));l&&typeof l.log=="function"&&l.log(d(o("Index initial normalis\xE9\xA0: %1$d (boucle\xA0: %2$s, CSS mode\xA0: %3$s).","lightbox-jlg"),U,o(Re?"oui":"non","lightbox-jlg"),o(V?"oui":"non","lightbox-jlg")));let R=()=>{l.log(o("Autoplay D\xC9MARR\xC9.","lightbox-jlg")),e.querySelector(".mga-play-icon").style.display="none",e.querySelector(".mga-pause-icon").style.display="inline-block",Le(e,!0)},W=()=>{l.log(o("Autoplay ARR\xCAT\xC9.","lightbox-jlg")),e.querySelector(".mga-play-icon").style.display="inline-block",e.querySelector(".mga-pause-icon").style.display="none";let y=e.querySelector(".mga-timer-progress");y&&(y.style.strokeDashoffset=100),l.updateInfo("mga-debug-autoplay-time",o("Stopp\xE9","lightbox-jlg")),Le(e,!1)},T={zoom:_e,spaceBetween:10,loop:Re,effect:b,speed:k,cssMode:V,initialSlide:U,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"},on:{init:function(y){Wt(t,y.realIndex),typeof ue=="function"&&ue(y.realIndex)},slideChange:function(y){Xe(e,t,y.realIndex),h.background_style==="echo"&&Je(e,t[y.realIndex].highResUrl),typeof ue=="function"&&ue(y.realIndex)},slideChangeTransitionEnd:function(){O&&!O.destroyed&&O.update(),Wt(t,this.realIndex)},autoplayTimeLeft(y,x,_){let B=e.querySelector(".mga-timer-progress");B&&(B.style.strokeDashoffset=100-_*100),l.updateInfo("mga-debug-autoplay-time",d(o("%ss","lightbox-jlg"),(x/1e3).toFixed(2)))},slideChangeTransitionStart:function(y){let x=y.slides[y.activeIndex],_=x.querySelector("img");_&&!_.complete&&(l.log(d(o("Chargement de l'image %s...","lightbox-jlg"),x.dataset.slideIndex)),x.querySelector(".mga-spinner").style.display="block",_.onload=()=>{l.log(d(o("Image %s charg\xE9e.","lightbox-jlg"),x.dataset.slideIndex)),x.querySelector(".mga-spinner").style.display="none"})},autoplayStart:R,autoplayStop:W,touchStart:()=>{l.log(o("Interaction manuelle D\xC9TECT\xC9E (touch).","lightbox-jlg"))},sliderMove:()=>{l.log(o("Interaction manuelle D\xC9TECT\xC9E (drag).","lightbox-jlg"))}}};b==="fade"&&(T.fadeEffect={crossFade:!0}),m||(T.autoplay=Object.assign({},g)),O&&(T.thumbs={swiper:O});let Z=T.on.init;T.on.init=function(y){typeof Z=="function"&&Z.call(this,y),ye(y,i)};let ee=T.on.setTransition;if(T.on.setTransition=function(y){typeof ee=="function"&&ee.apply(this,arguments);let x=y&&y.wrapperEl?y:this;ye(x,i)},typeof z!="undefined"&&z.exports&&(z.exports.__testExports=z.exports.__testExports||{},z.exports.__testExports.getAutoplayHandlers=()=>({autoplayStart:R,autoplayStop:W})),u=Rt(s,T),!u){let y=o("Initialisation du Swiper principal impossible. Visionneuse indisponible.","lightbox-jlg");l&&typeof l.log=="function"?l.log(y,!0):typeof console!="undefined"&&typeof console.error=="function"&&console.error(y);return}ye(u,i);let re=()=>{let y=u&&u.params&&typeof u.params=="object"?u.params:T;Dn(u,y)};re(),u&&typeof u.on=="function"&&(u.on("resize",re),u.on("breakpoint",re),u.on("slidesLengthChange",re));let $=u.autoplay,M=!!($&&typeof $.start=="function"&&typeof $.stop=="function"),D=()=>{if(!(!u||u.destroyed)){if(u.params&&typeof u.params=="object"){let y=u.params.autoplay&&typeof u.params.autoplay=="object"?u.params.autoplay:u.params.autoplay={};Object.assign(y,g)}if(u.originalParams&&typeof u.originalParams=="object"){let y=u.originalParams.autoplay&&typeof u.originalParams.autoplay=="object"?u.originalParams.autoplay:u.originalParams.autoplay={};Object.assign(y,g)}}};if(!M)m||l.log(o("L\u2019extension autoplay de Swiper est indisponible.","lightbox-jlg"),!0);else if(m?$.stop():(D(),h.autoplay_start?$.start():$.stop()),f){let y=x=>{if(!u||u.destroyed)return;let _=u.autoplay;if(!_||typeof _.start!="function"||typeof _.stop!="function")return;let B=!!x.matches,Y=B&&xt.has(r)?q:r,Q=B?Math.min(a,300):a,me=B&&Y==="slide";if(B)Me=!!_.running,_.stop(),Y!==r&&l&&typeof l.log=="function"&&l.log(o("Effet de transition r\xE9duit suite au changement de pr\xE9f\xE9rence syst\xE8me.","lightbox-jlg"));else{let bt=Me||!!h.autoplay_start;Me=!1,D(),Y!==r&&l&&typeof l.log=="function"&&l.log(o("Effet de transition restaur\xE9 apr\xE8s d\xE9sactivation de la r\xE9duction des animations.","lightbox-jlg")),bt?_.start():_.running&&_.stop()}b=Y,k=Q,u.params&&typeof u.params=="object"&&(u.params.effect=Y,u.params.speed=Q,u.params.cssMode=me,Y==="fade"?u.params.fadeEffect=Object.assign({},u.params.fadeEffect||{},{crossFade:!0}):u.params.fadeEffect&&delete u.params.fadeEffect),u.originalParams&&typeof u.originalParams=="object"&&(u.originalParams.effect=Y,u.originalParams.speed=Q,u.originalParams.cssMode=me,Y==="fade"?u.originalParams.fadeEffect=Object.assign({},u.originalParams.fadeEffect||{},{crossFade:!0}):u.originalParams.fadeEffect&&delete u.originalParams.fadeEffect),ye(u,i),O&&!O.destroyed&&ye(O,i),typeof u.update=="function"&&u.update()};typeof f.addEventListener=="function"?(f.addEventListener("change",y),ae=()=>{f.removeEventListener("change",y)}):typeof f.addListener=="function"&&(f.addListener(y),ae=()=>{f.removeListener(y)})}}function Wt(e,t){let n=(t+1)%e.length,r=(t-1+e.length)%e.length;[n,r].forEach(a=>{var s;let i=(s=e[a])==null?void 0:s.highResUrl;if(i&&!rt.has(i)){l.log(d(o("Pr\xE9chargement de l'image %s","lightbox-jlg"),a));let p=new Image;p.src=i,rt.add(i)}})}function rr(e){if(!e||typeof Be=="undefined")return;let t=Be.get(e);typeof t!="undefined"&&v(t);let n=E(()=>{Be.delete(e);let r=e.querySelector(".mga-header");if(!r)return;let a=r.offsetHeight;a>0&&e.style.setProperty("--mga-header-offset",`${Math.ceil(a)}px`)});Be.set(e,n)}function Xe(e,t,n){if(!e||!t[n])return;let r=e.querySelector(".mga-caption-container"),a=e.querySelector("#mga-caption"),i=e.querySelector("#mga-counter"),s=r?r.querySelector(".mga-caption-live"):null,p=r?r.querySelector(".mga-caption-feedback"):null,g=e.querySelector("[data-mga-cta-container]"),f=t[n],m=f.caption||"";e.classList.toggle("mga-has-caption",!!m);let b=d(o("%1$s / %2$s","lightbox-jlg"),n+1,t.length),k=d(o("Image %1$s sur %2$s","lightbox-jlg"),n+1,t.length),j=m?`${k}. ${m}`:k;xe.lastBaseAnnouncement=j,a&&(a.textContent=m,a.style.display=m?"":"none"),i&&(i.textContent=b),!xe.isTemporaryMessageActive&&s&&s.textContent!==j&&(s.textContent=j),!xe.isTemporaryMessageActive&&p&&!p.hasAttribute("hidden")&&(p.textContent="",p.setAttribute("hidden","hidden"),p.removeAttribute("data-mga-state"));let V=Array.isArray(f.ctas)?f.ctas:Array.isArray(f.ctaButtons)?f.ctaButtons:[],U=we?V:[];if(g){for(;g.firstChild;)g.removeChild(g.firstChild);U.length?(g.removeAttribute("hidden"),g.setAttribute("role","group"),g.setAttribute("aria-label",o("Actions personnalis\xE9es","lightbox-jlg")),U.forEach((R,W)=>{if(!R||typeof R!="object")return;let T=document.createElement("a");T.className="mga-cta-button";let Z=typeof R.variant=="string"&&R.variant.trim()?` mga-cta-button--${R.variant.trim().toLowerCase()}`:" mga-cta-button--primary";T.className+=Z,T.textContent=R.label||"",R.url?T.href=R.url:T.href="#",R.target&&R.target!=="_self"&&(T.target=R.target);let ee=R.rel||(R.target==="_blank"?"noopener noreferrer":"");ee&&(T.rel=ee),T.setAttribute("data-mga-cta-index",String(W)),g.appendChild(T)})):(g.setAttribute("hidden","hidden"),g.removeAttribute("role"),g.removeAttribute("aria-label"))}e.classList.toggle("mga-has-cta",we&&U.length>0),rr(e),P.isSupported&&P.isActive&&P.isActive()&&P.update(n)}function Zt(e){let t=e||null;if(!t&&typeof document!="undefined"&&(t=document.getElementById("mga-viewer")),!t)return{captionContainer:null,liveRegion:null,feedbackElement:null};let n=t.querySelector(".mga-caption-container");return n?{captionContainer:n,liveRegion:n.querySelector(".mga-caption-live"),feedbackElement:n.querySelector(".mga-caption-feedback")}:{captionContainer:null,liveRegion:null,feedbackElement:null}}function yt({restoreBaseAnnouncement:e=!0}={}){de&&(clearTimeout(de),de=null);let{feedbackElement:t,liveRegion:n}=Zt();t&&(t.textContent="",t.setAttribute("hidden","hidden"),t.removeAttribute("data-mga-state")),e&&n&&(n.textContent=xe.lastBaseAnnouncement||""),xe.isTemporaryMessageActive=!1}function or(e,{tone:t="info",duration:n=6e3}={}){if(!e){yt();return}let{feedbackElement:r,liveRegion:a}=Zt();!r&&!a||(de&&(clearTimeout(de),de=null),r&&(r.textContent=e,r.removeAttribute("hidden"),t?r.setAttribute("data-mga-state",t):r.removeAttribute("data-mga-state")),a&&(a.textContent=e),xe.isTemporaryMessageActive=!0,n>0&&typeof window!="undefined"&&typeof window.setTimeout=="function"&&(de=window.setTimeout(()=>{yt()},n)))}document.body.addEventListener("click",function(e){let t=document.getElementById("mga-viewer");if(!t||t.style.display==="none")return;let n=Mt(e);if(!n)return;let r=t.contains(n),a=!!n.closest(".mga-share-modal"),i=!!n.closest(".mga-main-swiper"),s=!!n.closest(".mga-header"),p=!!n.closest(".mga-thumbs-swiper");if(a)return;if(n===t||r&&!i&&!s&&!p){En&&Ae(t);return}if(n.closest("#mga-close")){Ae(t);return}if(n.closest("#mga-play-pause")&&u&&u.autoplay){let f=u.autoplay,m=!f.running;m?f.start():f.stop(),Le(t,m)}if(X.length)for(let f=0;f<X.length;f+=1){let m=X[f];if(n.closest(m.selector)){m.handler(e,t);return}}}),document.addEventListener("keydown",e=>{let t=document.getElementById("mga-viewer");if(!(!t||t.style.display==="none"))switch(e.key){case"Escape":Ae(t);break;case"ArrowLeft":u&&u.slidePrev();break;case"ArrowRight":u&&u.slideNext();break}}),P.isSupported&&typeof window!="undefined"&&typeof window.addEventListener=="function"&&window.addEventListener("popstate",Jn);let Yt=e=>{let t=e&&typeof e.detail=="object"&&e.detail!==null?e.detail:{};Object.prototype.hasOwnProperty.call(t,"show_share")?be=C(t.show_share,be):Object.prototype.hasOwnProperty.call(t,"showShare")&&(be=C(t.showShare,be)),Object.prototype.hasOwnProperty.call(t,"show_cta")?we=C(t.show_cta,we):Object.prototype.hasOwnProperty.call(t,"showCta")&&(we=C(t.showCta,we)),Object.prototype.hasOwnProperty.call(t,"share_copy")?ke=C(t.share_copy,ke):Object.prototype.hasOwnProperty.call(t,"shareCopy")&&(ke=C(t.shareCopy,ke)),Object.prototype.hasOwnProperty.call(t,"share_download")?Ie=C(t.share_download,Ie):Object.prototype.hasOwnProperty.call(t,"shareDownload")&&(Ie=C(t.shareDownload,Ie)),Object.prototype.hasOwnProperty.call(t,"share_channels")?Ue=L(t.share_channels):Object.prototype.hasOwnProperty.call(t,"shareChannels")&&(Ue=L(t.shareChannels)),dt();let n=document.getElementById("mga-viewer");if(n&&se&&se.length){let r=u&&!u.destroyed?u.realIndex:0;Xe(n,se,r)}},Qt="mga:share-preferences-change";if(typeof window!="undefined"){let e=window.__mgaSharePreferencesHandler__;e&&typeof window.removeEventListener=="function"&&window.removeEventListener(Qt,e),typeof window.addEventListener=="function"&&(window.addEventListener(Qt,Yt),window.__mgaSharePreferencesHandler__=Yt)}typeof z!="undefined"&&z.exports&&(z.exports.__testExports=z.exports.__testExports||{},z.exports.__testExports.openViewer=Kt,z.exports.__testExports.getViewer=Ze,z.exports.__testExports.getActiveHighResUrl=Ft,z.exports.__testExports.triggerImageDownload=ct,z.exports.__testExports.openSharePanel=zt,z.exports.__testExports.getActiveImageData=lt,z.exports.__testExports.getShareChannels=()=>Ue,z.exports.__testExports.getShareOptions=()=>I&&Array.isArray(I.options)?I.options:[],z.exports.__testExports.syncShareControl=dt);function Ae(e,t={}){if(!e||!!!(t&&t.skipHistory)&&P.isSupported&&P.isActive&&P.isActive()&&P.beginClose())return;let{exit:r,element:a}=Nt(e);if(a)if(r)try{let i=r();i&&typeof i.catch=="function"&&i.catch(s=>l.log(d(o("Erreur de sortie du plein \xE9cran\xA0: %s","lightbox-jlg"),s.message),!0))}catch(i){l.log(d(o("Erreur de sortie du plein \xE9cran\xA0: %s","lightbox-jlg"),i.message),!0)}else l.log(o("API de fermeture du plein \xE9cran indisponible sur ce navigateur.","lightbox-jlg"),!0);u&&u.autoplay&&u.autoplay.stop(),Se({restoreFocus:!1,reason:"viewer-close"}),Ot(),yt({restoreBaseAnnouncement:!1}),typeof ae=="function"&&(ae(),ae=null),ue=null,Me=!1,window.removeEventListener("resize",Xt),ot=!1,ce&&(e.removeEventListener("keydown",ce,!0),ce=null),e.style.display="none",qe&&(document.body.style.paddingRight=st),Ve&&(document.body.style.overflow=it),He&&document.body.classList.remove(nt),it=null,st=null,Ve=!1,qe=!1,He=!1,l.log(o("Galerie ferm\xE9e.","lightbox-jlg")),l.stopTimer(),se=[],$e=null,P.isSupported&&P.finalizeClose(),J&&typeof J.focus=="function"&&Ke(J),J=null}function Xt(){clearTimeout(kt),kt=setTimeout(()=>{if(u&&u.el&&!u.destroyed){let e=u.autoplay,t=!!(e&&e.running);l.log(o("Redimensionnement d\xE9tect\xE9. Mise \xE0 jour de Swiper.","lightbox-jlg")),u.update(),O&&!O.destroyed&&O.update(),t&&u.autoplay&&typeof u.autoplay.start=="function"&&(u.autoplay.start(),l.log(o("Autoplay relanc\xE9 apr\xE8s redimensionnement.","lightbox-jlg")))}},250)}}let Et=()=>{un(window,{namespace:"frontend"}).catch(h=>{window.console&&typeof window.console.error=="function"&&window.console.error("[MGA] Swiper indisponible, utilisation du mode d\xE9grad\xE9.",h)}).finally(()=>{xn()})};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Et):Et(),typeof z!="undefined"&&z.exports&&(z.exports.updateEchoBackground=Je,z.exports.updateAutoplayButtonState=Le)})()});wr();})();
//# sourceMappingURL=gallery-slideshow.js.map
